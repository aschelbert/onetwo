(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const x of d.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&o(x)}).observe(document,{childList:!0,subtree:!0});function i(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=i(u);fetch(u.href,d)}})();function Cf(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Gc={exports:{}},Gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0;function Sf(){if(m0)return Gl;m0=1;var l=Symbol.for("react.transitional.element"),m=Symbol.for("react.fragment");function i(o,u,d){var x=null;if(d!==void 0&&(x=""+d),u.key!==void 0&&(x=""+u.key),"key"in u){d={};for(var p in u)p!=="key"&&(d[p]=u[p])}else d=u;return u=d.ref,{$$typeof:l,type:o,key:x,ref:u!==void 0?u:null,props:d}}return Gl.Fragment=m,Gl.jsx=i,Gl.jsxs=i,Gl}var x0;function Af(){return x0||(x0=1,Gc.exports=Sf()),Gc.exports}var e=Af(),Yc={exports:{}},$e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0;function Df(){if(p0)return $e;p0=1;var l=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),x=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.iterator;function N(E){return E===null||typeof E!="object"?null:(E=O&&E[O]||E["@@iterator"],typeof E=="function"?E:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,T={};function y(E,J,Q){this.props=E,this.context=J,this.refs=T,this.updater=Q||P}y.prototype.isReactComponent={},y.prototype.setState=function(E,J){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,J,"setState")},y.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function j(){}j.prototype=y.prototype;function q(E,J,Q){this.props=E,this.context=J,this.refs=T,this.updater=Q||P}var A=q.prototype=new j;A.constructor=q,_(A,y.prototype),A.isPureReactComponent=!0;var H=Array.isArray;function U(){}var L={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function z(E,J,Q){var xe=Q.ref;return{$$typeof:l,type:E,key:J,ref:xe!==void 0?xe:null,props:Q}}function ne(E,J){return z(E.type,J,E.props)}function K(E){return typeof E=="object"&&E!==null&&E.$$typeof===l}function ie(E){var J={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(Q){return J[Q]})}var he=/\/+/g;function pe(E,J){return typeof E=="object"&&E!==null&&E.key!=null?ie(""+E.key):J.toString(36)}function Ne(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(U,U):(E.status="pending",E.then(function(J){E.status==="pending"&&(E.status="fulfilled",E.value=J)},function(J){E.status==="pending"&&(E.status="rejected",E.reason=J)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function B(E,J,Q,xe,Se){var b=typeof E;(b==="undefined"||b==="boolean")&&(E=null);var ae=!1;if(E===null)ae=!0;else switch(b){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(E.$$typeof){case l:case m:ae=!0;break;case v:return ae=E._init,B(ae(E._payload),J,Q,xe,Se)}}if(ae)return Se=Se(E),ae=xe===""?"."+pe(E,0):xe,H(Se)?(Q="",ae!=null&&(Q=ae.replace(he,"$&/")+"/"),B(Se,J,Q,"",function(ot){return ot})):Se!=null&&(K(Se)&&(Se=ne(Se,Q+(Se.key==null||E&&E.key===Se.key?"":(""+Se.key).replace(he,"$&/")+"/")+ae)),J.push(Se)),1;ae=0;var Me=xe===""?".":xe+":";if(H(E))for(var Ae=0;Ae<E.length;Ae++)xe=E[Ae],b=Me+pe(xe,Ae),ae+=B(xe,J,Q,b,Se);else if(Ae=N(E),typeof Ae=="function")for(E=Ae.call(E),Ae=0;!(xe=E.next()).done;)xe=xe.value,b=Me+pe(xe,Ae++),ae+=B(xe,J,Q,b,Se);else if(b==="object"){if(typeof E.then=="function")return B(Ne(E),J,Q,xe,Se);throw J=String(E),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return ae}function I(E,J,Q){if(E==null)return E;var xe=[],Se=0;return B(E,xe,"","",function(b){return J.call(Q,b,Se++)}),xe}function w(E){if(E._status===-1){var J=E._result;J=J(),J.then(function(Q){(E._status===0||E._status===-1)&&(E._status=1,E._result=Q)},function(Q){(E._status===0||E._status===-1)&&(E._status=2,E._result=Q)}),E._status===-1&&(E._status=0,E._result=J)}if(E._status===1)return E._result.default;throw E._result}var M=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},ce={map:I,forEach:function(E,J,Q){I(E,function(){J.apply(this,arguments)},Q)},count:function(E){var J=0;return I(E,function(){J++}),J},toArray:function(E){return I(E,function(J){return J})||[]},only:function(E){if(!K(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return $e.Activity=R,$e.Children=ce,$e.Component=y,$e.Fragment=i,$e.Profiler=u,$e.PureComponent=q,$e.StrictMode=o,$e.Suspense=f,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,$e.__COMPILER_RUNTIME={__proto__:null,c:function(E){return L.H.useMemoCache(E)}},$e.cache=function(E){return function(){return E.apply(null,arguments)}},$e.cacheSignal=function(){return null},$e.cloneElement=function(E,J,Q){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var xe=_({},E.props),Se=E.key;if(J!=null)for(b in J.key!==void 0&&(Se=""+J.key),J)!F.call(J,b)||b==="key"||b==="__self"||b==="__source"||b==="ref"&&J.ref===void 0||(xe[b]=J[b]);var b=arguments.length-2;if(b===1)xe.children=Q;else if(1<b){for(var ae=Array(b),Me=0;Me<b;Me++)ae[Me]=arguments[Me+2];xe.children=ae}return z(E.type,Se,xe)},$e.createContext=function(E){return E={$$typeof:x,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:d,_context:E},E},$e.createElement=function(E,J,Q){var xe,Se={},b=null;if(J!=null)for(xe in J.key!==void 0&&(b=""+J.key),J)F.call(J,xe)&&xe!=="key"&&xe!=="__self"&&xe!=="__source"&&(Se[xe]=J[xe]);var ae=arguments.length-2;if(ae===1)Se.children=Q;else if(1<ae){for(var Me=Array(ae),Ae=0;Ae<ae;Ae++)Me[Ae]=arguments[Ae+2];Se.children=Me}if(E&&E.defaultProps)for(xe in ae=E.defaultProps,ae)Se[xe]===void 0&&(Se[xe]=ae[xe]);return z(E,b,Se)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(E){return{$$typeof:p,render:E}},$e.isValidElement=K,$e.lazy=function(E){return{$$typeof:v,_payload:{_status:-1,_result:E},_init:w}},$e.memo=function(E,J){return{$$typeof:g,type:E,compare:J===void 0?null:J}},$e.startTransition=function(E){var J=L.T,Q={};L.T=Q;try{var xe=E(),Se=L.S;Se!==null&&Se(Q,xe),typeof xe=="object"&&xe!==null&&typeof xe.then=="function"&&xe.then(U,M)}catch(b){M(b)}finally{J!==null&&Q.types!==null&&(J.types=Q.types),L.T=J}},$e.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},$e.use=function(E){return L.H.use(E)},$e.useActionState=function(E,J,Q){return L.H.useActionState(E,J,Q)},$e.useCallback=function(E,J){return L.H.useCallback(E,J)},$e.useContext=function(E){return L.H.useContext(E)},$e.useDebugValue=function(){},$e.useDeferredValue=function(E,J){return L.H.useDeferredValue(E,J)},$e.useEffect=function(E,J){return L.H.useEffect(E,J)},$e.useEffectEvent=function(E){return L.H.useEffectEvent(E)},$e.useId=function(){return L.H.useId()},$e.useImperativeHandle=function(E,J,Q){return L.H.useImperativeHandle(E,J,Q)},$e.useInsertionEffect=function(E,J){return L.H.useInsertionEffect(E,J)},$e.useLayoutEffect=function(E,J){return L.H.useLayoutEffect(E,J)},$e.useMemo=function(E,J){return L.H.useMemo(E,J)},$e.useOptimistic=function(E,J){return L.H.useOptimistic(E,J)},$e.useReducer=function(E,J,Q){return L.H.useReducer(E,J,Q)},$e.useRef=function(E){return L.H.useRef(E)},$e.useState=function(E){return L.H.useState(E)},$e.useSyncExternalStore=function(E,J,Q){return L.H.useSyncExternalStore(E,J,Q)},$e.useTransition=function(){return L.H.useTransition()},$e.version="19.2.4",$e}var h0;function pd(){return h0||(h0=1,Yc.exports=Df()),Yc.exports}var C=pd();const gr=Cf(C);var Qc={exports:{}},Yl={},Xc={exports:{}},Zc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function Rf(){return f0||(f0=1,(function(l){function m(B,I){var w=B.length;B.push(I);e:for(;0<w;){var M=w-1>>>1,ce=B[M];if(0<u(ce,I))B[M]=I,B[w]=ce,w=M;else break e}}function i(B){return B.length===0?null:B[0]}function o(B){if(B.length===0)return null;var I=B[0],w=B.pop();if(w!==I){B[0]=w;e:for(var M=0,ce=B.length,E=ce>>>1;M<E;){var J=2*(M+1)-1,Q=B[J],xe=J+1,Se=B[xe];if(0>u(Q,w))xe<ce&&0>u(Se,Q)?(B[M]=Se,B[xe]=w,M=xe):(B[M]=Q,B[J]=w,M=J);else if(xe<ce&&0>u(Se,w))B[M]=Se,B[xe]=w,M=xe;else break e}}return I}function u(B,I){var w=B.sortIndex-I.sortIndex;return w!==0?w:B.id-I.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;l.unstable_now=function(){return d.now()}}else{var x=Date,p=x.now();l.unstable_now=function(){return x.now()-p}}var f=[],g=[],v=1,R=null,O=3,N=!1,P=!1,_=!1,T=!1,y=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function A(B){for(var I=i(g);I!==null;){if(I.callback===null)o(g);else if(I.startTime<=B)o(g),I.sortIndex=I.expirationTime,m(f,I);else break;I=i(g)}}function H(B){if(_=!1,A(B),!P)if(i(f)!==null)P=!0,U||(U=!0,ie());else{var I=i(g);I!==null&&Ne(H,I.startTime-B)}}var U=!1,L=-1,F=5,z=-1;function ne(){return T?!0:!(l.unstable_now()-z<F)}function K(){if(T=!1,U){var B=l.unstable_now();z=B;var I=!0;try{e:{P=!1,_&&(_=!1,j(L),L=-1),N=!0;var w=O;try{t:{for(A(B),R=i(f);R!==null&&!(R.expirationTime>B&&ne());){var M=R.callback;if(typeof M=="function"){R.callback=null,O=R.priorityLevel;var ce=M(R.expirationTime<=B);if(B=l.unstable_now(),typeof ce=="function"){R.callback=ce,A(B),I=!0;break t}R===i(f)&&o(f),A(B)}else o(f);R=i(f)}if(R!==null)I=!0;else{var E=i(g);E!==null&&Ne(H,E.startTime-B),I=!1}}break e}finally{R=null,O=w,N=!1}I=void 0}}finally{I?ie():U=!1}}}var ie;if(typeof q=="function")ie=function(){q(K)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,pe=he.port2;he.port1.onmessage=K,ie=function(){pe.postMessage(null)}}else ie=function(){y(K,0)};function Ne(B,I){L=y(function(){B(l.unstable_now())},I)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(B){B.callback=null},l.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<B?Math.floor(1e3/B):5},l.unstable_getCurrentPriorityLevel=function(){return O},l.unstable_next=function(B){switch(O){case 1:case 2:case 3:var I=3;break;default:I=O}var w=O;O=I;try{return B()}finally{O=w}},l.unstable_requestPaint=function(){T=!0},l.unstable_runWithPriority=function(B,I){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var w=O;O=B;try{return I()}finally{O=w}},l.unstable_scheduleCallback=function(B,I,w){var M=l.unstable_now();switch(typeof w=="object"&&w!==null?(w=w.delay,w=typeof w=="number"&&0<w?M+w:M):w=M,B){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=w+ce,B={id:v++,callback:I,priorityLevel:B,startTime:w,expirationTime:ce,sortIndex:-1},w>M?(B.sortIndex=w,m(g,B),i(f)===null&&B===i(g)&&(_?(j(L),L=-1):_=!0,Ne(H,w-M))):(B.sortIndex=ce,m(f,B),P||N||(P=!0,U||(U=!0,ie()))),B},l.unstable_shouldYield=ne,l.unstable_wrapCallback=function(B){var I=O;return function(){var w=O;O=I;try{return B.apply(this,arguments)}finally{O=w}}}})(Zc)),Zc}var g0;function Ef(){return g0||(g0=1,Xc.exports=Rf()),Xc.exports}var Jc={exports:{}},Qt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b0;function Tf(){if(b0)return Qt;b0=1;var l=pd();function m(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(m(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(f,g,v){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:R==null?null:""+R,children:f,containerInfo:g,implementation:v}}var x=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Qt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Qt.createPortal=function(f,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(m(299));return d(f,g,null,v)},Qt.flushSync=function(f){var g=x.T,v=o.p;try{if(x.T=null,o.p=2,f)return f()}finally{x.T=g,o.p=v,o.d.f()}},Qt.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,o.d.C(f,g))},Qt.prefetchDNS=function(f){typeof f=="string"&&o.d.D(f)},Qt.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var v=g.as,R=p(v,g.crossOrigin),O=typeof g.integrity=="string"?g.integrity:void 0,N=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?o.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:R,integrity:O,fetchPriority:N}):v==="script"&&o.d.X(f,{crossOrigin:R,integrity:O,fetchPriority:N,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Qt.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=p(g.as,g.crossOrigin);o.d.M(f,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&o.d.M(f)},Qt.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,R=p(v,g.crossOrigin);o.d.L(f,v,{crossOrigin:R,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Qt.preloadModule=function(f,g){if(typeof f=="string")if(g){var v=p(g.as,g.crossOrigin);o.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else o.d.m(f)},Qt.requestFormReset=function(f){o.d.r(f)},Qt.unstable_batchedUpdates=function(f,g){return f(g)},Qt.useFormState=function(f,g,v){return x.H.useFormState(f,g,v)},Qt.useFormStatus=function(){return x.H.useHostTransitionStatus()},Qt.version="19.2.4",Qt}var v0;function Mf(){if(v0)return Jc.exports;v0=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(m){console.error(m)}}return l(),Jc.exports=Tf(),Jc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0;function Of(){if(y0)return Yl;y0=1;var l=Ef(),m=pd(),i=Mf();function o(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)s+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var s=t,n=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(n=s.return),t=s.return;while(t)}return s.tag===3?n:null}function x(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function f(t){if(d(t)!==t)throw Error(o(188))}function g(t){var s=t.alternate;if(!s){if(s=d(t),s===null)throw Error(o(188));return s!==t?null:t}for(var n=t,a=s;;){var r=n.return;if(r===null)break;var c=r.alternate;if(c===null){if(a=r.return,a!==null){n=a;continue}break}if(r.child===c.child){for(c=r.child;c;){if(c===n)return f(r),t;if(c===a)return f(r),s;c=c.sibling}throw Error(o(188))}if(n.return!==a.return)n=r,a=c;else{for(var h=!1,S=r.child;S;){if(S===n){h=!0,n=r,a=c;break}if(S===a){h=!0,a=r,n=c;break}S=S.sibling}if(!h){for(S=c.child;S;){if(S===n){h=!0,n=c,a=r;break}if(S===a){h=!0,a=c,n=r;break}S=S.sibling}if(!h)throw Error(o(189))}}if(n.alternate!==a)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?t:s}function v(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=v(t),s!==null)return s;t=t.sibling}return null}var R=Object.assign,O=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),q=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function ie(t){return t===null||typeof t!="object"?null:(t=K&&t[K]||t["@@iterator"],typeof t=="function"?t:null)}var he=Symbol.for("react.client.reference");function pe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===he?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _:return"Fragment";case y:return"Profiler";case T:return"StrictMode";case H:return"Suspense";case U:return"SuspenseList";case z:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case P:return"Portal";case q:return t.displayName||"Context";case j:return(t._context.displayName||"Context")+".Consumer";case A:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case L:return s=t.displayName||null,s!==null?s:pe(t.type)||"Memo";case F:s=t._payload,t=t._init;try{return pe(t(s))}catch{}}return null}var Ne=Array.isArray,B=m.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,w={pending:!1,data:null,method:null,action:null},M=[],ce=-1;function E(t){return{current:t}}function J(t){0>ce||(t.current=M[ce],M[ce]=null,ce--)}function Q(t,s){ce++,M[ce]=t.current,t.current=s}var xe=E(null),Se=E(null),b=E(null),ae=E(null);function Me(t,s){switch(Q(b,s),Q(Se,t),Q(xe,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Ux(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Ux(s),t=Lx(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}J(xe),Q(xe,t)}function Ae(){J(xe),J(Se),J(b)}function ot(t){t.memoizedState!==null&&Q(ae,t);var s=xe.current,n=Lx(s,t.type);s!==n&&(Q(Se,t),Q(xe,n))}function St(t){Se.current===t&&(J(xe),J(Se)),ae.current===t&&(J(ae),Pl._currentValue=w)}var ve,Ye;function De(t){if(ve===void 0)try{throw Error()}catch(n){var s=n.stack.trim().match(/\n( *(at )?)/);ve=s&&s[1]||"",Ye=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+t+Ye}var et=!1;function qe(t,s){if(!t||et)return"";et=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(s){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(le){var se=le}Reflect.construct(t,[],me)}else{try{me.call()}catch(le){se=le}t.call(me.prototype)}}else{try{throw Error()}catch(le){se=le}(me=t())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(le){if(le&&se&&typeof le.stack=="string")return[le.stack,se.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=a.DetermineComponentFrameRoot(),h=c[0],S=c[1];if(h&&S){var $=h.split(`
`),ee=S.split(`
`);for(r=a=0;a<$.length&&!$[a].includes("DetermineComponentFrameRoot");)a++;for(;r<ee.length&&!ee[r].includes("DetermineComponentFrameRoot");)r++;if(a===$.length||r===ee.length)for(a=$.length-1,r=ee.length-1;1<=a&&0<=r&&$[a]!==ee[r];)r--;for(;1<=a&&0<=r;a--,r--)if($[a]!==ee[r]){if(a!==1||r!==1)do if(a--,r--,0>r||$[a]!==ee[r]){var re=`
`+$[a].replace(" at new "," at ");return t.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",t.displayName)),re}while(1<=a&&0<=r);break}}}finally{et=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?De(n):""}function Zt(t,s){switch(t.tag){case 26:case 27:case 5:return De(t.type);case 16:return De("Lazy");case 13:return t.child!==s&&s!==null?De("Suspense Fallback"):De("Suspense");case 19:return De("SuspenseList");case 0:case 15:return qe(t.type,!1);case 11:return qe(t.type.render,!1);case 1:return qe(t.type,!0);case 31:return De("Activity");default:return""}}function G(t){try{var s="",n=null;do s+=Zt(t,n),n=t,t=t.return;while(t);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var ye=Object.prototype.hasOwnProperty,V=l.unstable_scheduleCallback,ke=l.unstable_cancelCallback,_e=l.unstable_shouldYield,we=l.unstable_requestPaint,tt=l.unstable_now,ws=l.unstable_getCurrentPriorityLevel,qs=l.unstable_ImmediatePriority,Zs=l.unstable_UserBlockingPriority,Cs=l.unstable_NormalPriority,us=l.unstable_LowPriority,ge=l.unstable_IdlePriority,ct=l.log,Jt=l.unstable_setDisableYieldValue,Kt=null,ft=null;function _t(t){if(typeof ct=="function"&&Jt(t),ft&&typeof ft.setStrictMode=="function")try{ft.setStrictMode(Kt,t)}catch{}}var At=Math.clz32?Math.clz32:Qn,ma=Math.log,Nn=Math.LN2;function Qn(t){return t>>>=0,t===0?32:31-(ma(t)/Nn|0)|0}var D=256,k=262144,X=4194304;function oe(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function fe(t,s,n){var a=t.pendingLanes;if(a===0)return 0;var r=0,c=t.suspendedLanes,h=t.pingedLanes;t=t.warmLanes;var S=a&134217727;return S!==0?(a=S&~c,a!==0?r=oe(a):(h&=S,h!==0?r=oe(h):n||(n=S&~t,n!==0&&(r=oe(n))))):(S=a&~c,S!==0?r=oe(S):h!==0?r=oe(h):n||(n=a&~t,n!==0&&(r=oe(n)))),r===0?0:s!==0&&s!==r&&(s&c)===0&&(c=r&-r,n=s&-s,c>=n||c===32&&(n&4194048)!==0)?s:r}function Ce(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Ke(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function de(){var t=X;return X<<=1,(X&62914560)===0&&(X=4194304),t}function Ue(t){for(var s=[],n=0;31>n;n++)s.push(t);return s}function be(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Xe(t,s,n,a,r,c){var h=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var S=t.entanglements,$=t.expirationTimes,ee=t.hiddenUpdates;for(n=h&~n;0<n;){var re=31-At(n),me=1<<re;S[re]=0,$[re]=-1;var se=ee[re];if(se!==null)for(ee[re]=null,re=0;re<se.length;re++){var le=se[re];le!==null&&(le.lane&=-536870913)}n&=~me}a!==0&&qt(t,a,0),c!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=c&~(h&~s))}function qt(t,s,n){t.pendingLanes|=s,t.suspendedLanes&=~s;var a=31-At(s);t.entangledLanes|=s,t.entanglements[a]=t.entanglements[a]|1073741824|n&261930}function ms(t,s){var n=t.entangledLanes|=s;for(t=t.entanglements;n;){var a=31-At(n),r=1<<a;r&s|t[a]&s&&(t[a]|=s),n&=~r}}function Be(t,s){var n=s&-s;return n=(n&42)!==0?1:je(n),(n&(t.suspendedLanes|s))!==0?0:n}function je(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Gt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Wt(){var t=I.p;return t!==0?t:(t=window.event,t===void 0?32:l0(t.type))}function at(t,s){var n=I.p;try{return I.p=t,s()}finally{I.p=n}}var vt=Math.random().toString(36).slice(2),mt="__reactFiber$"+vt,xt="__reactProps$"+vt,dt="__reactContainer$"+vt,Ss="__reactEvents$"+vt,es="__reactListeners$"+vt,xs="__reactHandles$"+vt,$t="__reactResources$"+vt,Dt="__reactMarker$"+vt;function xa(t){delete t[mt],delete t[xt],delete t[Ss],delete t[es],delete t[xs]}function Ie(t){var s=t[mt];if(s)return s;for(var n=t.parentNode;n;){if(s=n[dt]||n[mt]){if(n=s.alternate,s.child!==null||n!==null&&n.child!==null)for(t=Vx(t);t!==null;){if(n=t[mt])return n;t=Vx(t)}return s}t=n,n=t.parentNode}return null}function Ut(t){if(t=t[mt]||t[dt]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Yt(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(o(33))}function ps(t){var s=t[$t];return s||(s=t[$t]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function yt(t){t[Dt]=!0}var ss=new Set,wd={};function Xn(t,s){pa(t,s),pa(t+"Capture",s)}function pa(t,s){for(wd[t]=s,t=0;t<s.length;t++)ss.add(s[t])}var hp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cd={},Sd={};function fp(t){return ye.call(Sd,t)?!0:ye.call(Cd,t)?!1:hp.test(t)?Sd[t]=!0:(Cd[t]=!0,!1)}function li(t,s,n){if(fp(s))if(n===null)t.removeAttribute(s);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var a=s.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+n)}}function ii(t,s,n){if(n===null)t.removeAttribute(s);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+n)}}function Js(t,s,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(s,n,""+a)}}function As(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ad(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function gp(t,s,n){var a=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var r=a.get,c=a.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return r.call(this)},set:function(h){n=""+h,c.call(this,h)}}),Object.defineProperty(t,s,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(h){n=""+h},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function _r(t){if(!t._valueTracker){var s=Ad(t)?"checked":"value";t._valueTracker=gp(t,s,""+t[s])}}function Dd(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var n=s.getValue(),a="";return t&&(a=Ad(t)?t.checked?"true":"false":t.value),t=a,t!==n?(s.setValue(t),!0):!1}function ri(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var bp=/[\n"\\]/g;function Ds(t){return t.replace(bp,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function qr(t,s,n,a,r,c,h,S){t.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?t.type=h:t.removeAttribute("type"),s!=null?h==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+As(s)):t.value!==""+As(s)&&(t.value=""+As(s)):h!=="submit"&&h!=="reset"||t.removeAttribute("value"),s!=null?$r(t,h,As(s)):n!=null?$r(t,h,As(n)):a!=null&&t.removeAttribute("value"),r==null&&c!=null&&(t.defaultChecked=!!c),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+As(S):t.removeAttribute("name")}function Rd(t,s,n,a,r,c,h,S){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(t.type=c),s!=null||n!=null){if(!(c!=="submit"&&c!=="reset"||s!=null)){_r(t);return}n=n!=null?""+As(n):"",s=s!=null?""+As(s):n,S||s===t.value||(t.value=s),t.defaultValue=s}a=a??r,a=typeof a!="function"&&typeof a!="symbol"&&!!a,t.checked=S?t.checked:!!a,t.defaultChecked=!!a,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.name=h),_r(t)}function $r(t,s,n){s==="number"&&ri(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function ha(t,s,n,a){if(t=t.options,s){s={};for(var r=0;r<n.length;r++)s["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=s.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&a&&(t[n].defaultSelected=!0)}else{for(n=""+As(n),s=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,a&&(t[r].defaultSelected=!0);return}s!==null||t[r].disabled||(s=t[r])}s!==null&&(s.selected=!0)}}function Ed(t,s,n){if(s!=null&&(s=""+As(s),s!==t.value&&(t.value=s),n==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=n!=null?""+As(n):""}function Td(t,s,n,a){if(s==null){if(a!=null){if(n!=null)throw Error(o(92));if(Ne(a)){if(1<a.length)throw Error(o(93));a=a[0]}n=a}n==null&&(n=""),s=n}n=As(s),t.defaultValue=n,a=t.textContent,a===n&&a!==""&&a!==null&&(t.value=a),_r(t)}function fa(t,s){if(s){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=s;return}}t.textContent=s}var vp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Md(t,s,n){var a=s.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":a?t.setProperty(s,n):typeof n!="number"||n===0||vp.has(s)?s==="float"?t.cssFloat=n:t[s]=(""+n).trim():t[s]=n+"px"}function Od(t,s,n){if(s!=null&&typeof s!="object")throw Error(o(62));if(t=t.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||s!=null&&s.hasOwnProperty(a)||(a.indexOf("--")===0?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="");for(var r in s)a=s[r],s.hasOwnProperty(r)&&n[r]!==a&&Md(t,r,a)}else for(var c in s)s.hasOwnProperty(c)&&Md(t,c,s[c])}function zr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oi(t){return jp.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ks(){}var Pr=null;function Vr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ga=null,ba=null;function Bd(t){var s=Ut(t);if(s&&(t=s.stateNode)){var n=t[xt]||null;e:switch(t=s.stateNode,s.type){case"input":if(qr(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),s=n.name,n.type==="radio"&&s!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Ds(""+s)+'"][type="radio"]'),s=0;s<n.length;s++){var a=n[s];if(a!==t&&a.form===t.form){var r=a[xt]||null;if(!r)throw Error(o(90));qr(a,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(s=0;s<n.length;s++)a=n[s],a.form===t.form&&Dd(a)}break e;case"textarea":Ed(t,n.value,n.defaultValue);break e;case"select":s=n.value,s!=null&&ha(t,!!n.multiple,s,!1)}}}var Fr=!1;function Ud(t,s,n){if(Fr)return t(s,n);Fr=!0;try{var a=t(s);return a}finally{if(Fr=!1,(ga!==null||ba!==null)&&(Xi(),ga&&(s=ga,t=ba,ba=ga=null,Bd(s),t)))for(s=0;s<t.length;s++)Bd(t[s])}}function ll(t,s){var n=t.stateNode;if(n===null)return null;var a=n[xt]||null;if(a===null)return null;n=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(o(231,s,typeof n));return n}var Ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hr=!1;if(Ws)try{var il={};Object.defineProperty(il,"passive",{get:function(){Hr=!0}}),window.addEventListener("test",il,il),window.removeEventListener("test",il,il)}catch{Hr=!1}var kn=null,Gr=null,ci=null;function Ld(){if(ci)return ci;var t,s=Gr,n=s.length,a,r="value"in kn?kn.value:kn.textContent,c=r.length;for(t=0;t<n&&s[t]===r[t];t++);var h=n-t;for(a=1;a<=h&&s[n-a]===r[c-a];a++);return ci=r.slice(t,1<a?1-a:void 0)}function di(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ui(){return!0}function Id(){return!1}function ns(t){function s(n,a,r,c,h){this._reactName=n,this._targetInst=r,this.type=a,this.nativeEvent=c,this.target=h,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(n=t[S],this[S]=n?n(c):c[S]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?ui:Id,this.isPropagationStopped=Id,this}return R(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ui)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ui)},persist:function(){},isPersistent:ui}),s}var Zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mi=ns(Zn),rl=R({},Zn,{view:0,detail:0}),Np=ns(rl),Yr,Qr,ol,xi=R({},rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ol&&(ol&&t.type==="mousemove"?(Yr=t.screenX-ol.screenX,Qr=t.screenY-ol.screenY):Qr=Yr=0,ol=t),Yr)},movementY:function(t){return"movementY"in t?t.movementY:Qr}}),_d=ns(xi),kp=R({},xi,{dataTransfer:0}),wp=ns(kp),Cp=R({},rl,{relatedTarget:0}),Xr=ns(Cp),Sp=R({},Zn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ap=ns(Sp),Dp=R({},Zn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Rp=ns(Dp),Ep=R({},Zn,{data:0}),qd=ns(Ep),Tp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Op={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bp(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Op[t])?!!s[t]:!1}function Zr(){return Bp}var Up=R({},rl,{key:function(t){if(t.key){var s=Tp[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=di(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Mp[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zr,charCode:function(t){return t.type==="keypress"?di(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?di(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Lp=ns(Up),Ip=R({},xi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$d=ns(Ip),_p=R({},rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zr}),qp=ns(_p),$p=R({},Zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),zp=ns($p),Pp=R({},xi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vp=ns(Pp),Fp=R({},Zn,{newState:0,oldState:0}),Hp=ns(Fp),Gp=[9,13,27,32],Jr=Ws&&"CompositionEvent"in window,cl=null;Ws&&"documentMode"in document&&(cl=document.documentMode);var Yp=Ws&&"TextEvent"in window&&!cl,zd=Ws&&(!Jr||cl&&8<cl&&11>=cl),Pd=" ",Vd=!1;function Fd(t,s){switch(t){case"keyup":return Gp.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var va=!1;function Qp(t,s){switch(t){case"compositionend":return Hd(s);case"keypress":return s.which!==32?null:(Vd=!0,Pd);case"textInput":return t=s.data,t===Pd&&Vd?null:t;default:return null}}function Xp(t,s){if(va)return t==="compositionend"||!Jr&&Fd(t,s)?(t=Ld(),ci=Gr=kn=null,va=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return zd&&s.locale!=="ko"?null:s.data;default:return null}}var Zp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Zp[t.type]:s==="textarea"}function Yd(t,s,n,a){ga?ba?ba.push(a):ba=[a]:ga=a,s=sr(s,"onChange"),0<s.length&&(n=new mi("onChange","change",null,n,a),t.push({event:n,listeners:s}))}var dl=null,ul=null;function Jp(t){Rx(t,0)}function pi(t){var s=Yt(t);if(Dd(s))return t}function Qd(t,s){if(t==="change")return s}var Xd=!1;if(Ws){var Kr;if(Ws){var Wr="oninput"in document;if(!Wr){var Zd=document.createElement("div");Zd.setAttribute("oninput","return;"),Wr=typeof Zd.oninput=="function"}Kr=Wr}else Kr=!1;Xd=Kr&&(!document.documentMode||9<document.documentMode)}function Jd(){dl&&(dl.detachEvent("onpropertychange",Kd),ul=dl=null)}function Kd(t){if(t.propertyName==="value"&&pi(ul)){var s=[];Yd(s,ul,t,Vr(t)),Ud(Jp,s)}}function Kp(t,s,n){t==="focusin"?(Jd(),dl=s,ul=n,dl.attachEvent("onpropertychange",Kd)):t==="focusout"&&Jd()}function Wp(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pi(ul)}function eh(t,s){if(t==="click")return pi(s)}function th(t,s){if(t==="input"||t==="change")return pi(s)}function sh(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var hs=typeof Object.is=="function"?Object.is:sh;function ml(t,s){if(hs(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var n=Object.keys(t),a=Object.keys(s);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var r=n[a];if(!ye.call(s,r)||!hs(t[r],s[r]))return!1}return!0}function Wd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function eu(t,s){var n=Wd(t);t=0;for(var a;n;){if(n.nodeType===3){if(a=t+n.textContent.length,t<=s&&a>=s)return{node:n,offset:s-t};t=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wd(n)}}function tu(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?tu(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function su(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=ri(t.document);s instanceof t.HTMLIFrameElement;){try{var n=typeof s.contentWindow.location.href=="string"}catch{n=!1}if(n)t=s.contentWindow;else break;s=ri(t.document)}return s}function eo(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var nh=Ws&&"documentMode"in document&&11>=document.documentMode,ya=null,to=null,xl=null,so=!1;function nu(t,s,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;so||ya==null||ya!==ri(a)||(a=ya,"selectionStart"in a&&eo(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),xl&&ml(xl,a)||(xl=a,a=sr(to,"onSelect"),0<a.length&&(s=new mi("onSelect","select",null,s,n),t.push({event:s,listeners:a}),s.target=ya)))}function Jn(t,s){var n={};return n[t.toLowerCase()]=s.toLowerCase(),n["Webkit"+t]="webkit"+s,n["Moz"+t]="moz"+s,n}var ja={animationend:Jn("Animation","AnimationEnd"),animationiteration:Jn("Animation","AnimationIteration"),animationstart:Jn("Animation","AnimationStart"),transitionrun:Jn("Transition","TransitionRun"),transitionstart:Jn("Transition","TransitionStart"),transitioncancel:Jn("Transition","TransitionCancel"),transitionend:Jn("Transition","TransitionEnd")},no={},au={};Ws&&(au=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);function Kn(t){if(no[t])return no[t];if(!ja[t])return t;var s=ja[t],n;for(n in s)if(s.hasOwnProperty(n)&&n in au)return no[t]=s[n];return t}var lu=Kn("animationend"),iu=Kn("animationiteration"),ru=Kn("animationstart"),ah=Kn("transitionrun"),lh=Kn("transitionstart"),ih=Kn("transitioncancel"),ou=Kn("transitionend"),cu=new Map,ao="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ao.push("scrollEnd");function $s(t,s){cu.set(t,s),Xn(s,[t])}var hi=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Rs=[],Na=0,lo=0;function fi(){for(var t=Na,s=lo=Na=0;s<t;){var n=Rs[s];Rs[s++]=null;var a=Rs[s];Rs[s++]=null;var r=Rs[s];Rs[s++]=null;var c=Rs[s];if(Rs[s++]=null,a!==null&&r!==null){var h=a.pending;h===null?r.next=r:(r.next=h.next,h.next=r),a.pending=r}c!==0&&du(n,r,c)}}function gi(t,s,n,a){Rs[Na++]=t,Rs[Na++]=s,Rs[Na++]=n,Rs[Na++]=a,lo|=a,t.lanes|=a,t=t.alternate,t!==null&&(t.lanes|=a)}function io(t,s,n,a){return gi(t,s,n,a),bi(t)}function Wn(t,s){return gi(t,null,null,s),bi(t)}function du(t,s,n){t.lanes|=n;var a=t.alternate;a!==null&&(a.lanes|=n);for(var r=!1,c=t.return;c!==null;)c.childLanes|=n,a=c.alternate,a!==null&&(a.childLanes|=n),c.tag===22&&(t=c.stateNode,t===null||t._visibility&1||(r=!0)),t=c,c=c.return;return t.tag===3?(c=t.stateNode,r&&s!==null&&(r=31-At(n),t=c.hiddenUpdates,a=t[r],a===null?t[r]=[s]:a.push(s),s.lane=n|536870912),c):null}function bi(t){if(50<Ul)throw Ul=0,fc=null,Error(o(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var ka={};function rh(t,s,n,a){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(t,s,n,a){return new rh(t,s,n,a)}function ro(t){return t=t.prototype,!(!t||!t.isReactComponent)}function en(t,s){var n=t.alternate;return n===null?(n=fs(t.tag,s,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=s,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,s=t.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function uu(t,s){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,s=n.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function vi(t,s,n,a,r,c){var h=0;if(a=t,typeof t=="function")ro(t)&&(h=1);else if(typeof t=="string")h=xf(t,n,xe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case z:return t=fs(31,n,s,r),t.elementType=z,t.lanes=c,t;case _:return ea(n.children,r,c,s);case T:h=8,r|=24;break;case y:return t=fs(12,n,s,r|2),t.elementType=y,t.lanes=c,t;case H:return t=fs(13,n,s,r),t.elementType=H,t.lanes=c,t;case U:return t=fs(19,n,s,r),t.elementType=U,t.lanes=c,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case q:h=10;break e;case j:h=9;break e;case A:h=11;break e;case L:h=14;break e;case F:h=16,a=null;break e}h=29,n=Error(o(130,t===null?"null":typeof t,"")),a=null}return s=fs(h,n,s,r),s.elementType=t,s.type=a,s.lanes=c,s}function ea(t,s,n,a){return t=fs(7,t,a,s),t.lanes=n,t}function oo(t,s,n){return t=fs(6,t,null,s),t.lanes=n,t}function mu(t){var s=fs(18,null,null,0);return s.stateNode=t,s}function co(t,s,n){return s=fs(4,t.children!==null?t.children:[],t.key,s),s.lanes=n,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var xu=new WeakMap;function Es(t,s){if(typeof t=="object"&&t!==null){var n=xu.get(t);return n!==void 0?n:(s={value:t,source:s,stack:G(s)},xu.set(t,s),s)}return{value:t,source:s,stack:G(s)}}var wa=[],Ca=0,yi=null,pl=0,Ts=[],Ms=0,wn=null,Hs=1,Gs="";function tn(t,s){wa[Ca++]=pl,wa[Ca++]=yi,yi=t,pl=s}function pu(t,s,n){Ts[Ms++]=Hs,Ts[Ms++]=Gs,Ts[Ms++]=wn,wn=t;var a=Hs;t=Gs;var r=32-At(a)-1;a&=~(1<<r),n+=1;var c=32-At(s)+r;if(30<c){var h=r-r%5;c=(a&(1<<h)-1).toString(32),a>>=h,r-=h,Hs=1<<32-At(s)+r|n<<r|a,Gs=c+t}else Hs=1<<c|n<<r|a,Gs=t}function uo(t){t.return!==null&&(tn(t,1),pu(t,1,0))}function mo(t){for(;t===yi;)yi=wa[--Ca],wa[Ca]=null,pl=wa[--Ca],wa[Ca]=null;for(;t===wn;)wn=Ts[--Ms],Ts[Ms]=null,Gs=Ts[--Ms],Ts[Ms]=null,Hs=Ts[--Ms],Ts[Ms]=null}function hu(t,s){Ts[Ms++]=Hs,Ts[Ms++]=Gs,Ts[Ms++]=wn,Hs=s.id,Gs=s.overflow,wn=t}var zt=null,pt=null,Qe=!1,Cn=null,Os=!1,xo=Error(o(519));function Sn(t){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hl(Es(s,t)),xo}function fu(t){var s=t.stateNode,n=t.type,a=t.memoizedProps;switch(s[mt]=t,s[xt]=a,n){case"dialog":Fe("cancel",s),Fe("close",s);break;case"iframe":case"object":case"embed":Fe("load",s);break;case"video":case"audio":for(n=0;n<Il.length;n++)Fe(Il[n],s);break;case"source":Fe("error",s);break;case"img":case"image":case"link":Fe("error",s),Fe("load",s);break;case"details":Fe("toggle",s);break;case"input":Fe("invalid",s),Rd(s,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Fe("invalid",s);break;case"textarea":Fe("invalid",s),Td(s,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||s.textContent===""+n||a.suppressHydrationWarning===!0||Ox(s.textContent,n)?(a.popover!=null&&(Fe("beforetoggle",s),Fe("toggle",s)),a.onScroll!=null&&Fe("scroll",s),a.onScrollEnd!=null&&Fe("scrollend",s),a.onClick!=null&&(s.onclick=Ks),s=!0):s=!1,s||Sn(t,!0)}function gu(t){for(zt=t.return;zt;)switch(zt.tag){case 5:case 31:case 13:Os=!1;return;case 27:case 3:Os=!0;return;default:zt=zt.return}}function Sa(t){if(t!==zt)return!1;if(!Qe)return gu(t),Qe=!0,!1;var s=t.tag,n;if((n=s!==3&&s!==27)&&((n=s===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Tc(t.type,t.memoizedProps)),n=!n),n&&pt&&Sn(t),gu(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));pt=Px(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));pt=Px(t)}else s===27?(s=pt,$n(t.type)?(t=Lc,Lc=null,pt=t):pt=s):pt=zt?Us(t.stateNode.nextSibling):null;return!0}function ta(){pt=zt=null,Qe=!1}function po(){var t=Cn;return t!==null&&(rs===null?rs=t:rs.push.apply(rs,t),Cn=null),t}function hl(t){Cn===null?Cn=[t]:Cn.push(t)}var ho=E(null),sa=null,sn=null;function An(t,s,n){Q(ho,s._currentValue),s._currentValue=n}function nn(t){t._currentValue=ho.current,J(ho)}function fo(t,s,n){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===n)break;t=t.return}}function go(t,s,n,a){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var c=r.dependencies;if(c!==null){var h=r.child;c=c.firstContext;e:for(;c!==null;){var S=c;c=r;for(var $=0;$<s.length;$++)if(S.context===s[$]){c.lanes|=n,S=c.alternate,S!==null&&(S.lanes|=n),fo(c.return,n,t),a||(h=null);break e}c=S.next}}else if(r.tag===18){if(h=r.return,h===null)throw Error(o(341));h.lanes|=n,c=h.alternate,c!==null&&(c.lanes|=n),fo(h,n,t),h=null}else h=r.child;if(h!==null)h.return=r;else for(h=r;h!==null;){if(h===t){h=null;break}if(r=h.sibling,r!==null){r.return=h.return,h=r;break}h=h.return}r=h}}function Aa(t,s,n,a){t=null;for(var r=s,c=!1;r!==null;){if(!c){if((r.flags&524288)!==0)c=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var h=r.alternate;if(h===null)throw Error(o(387));if(h=h.memoizedProps,h!==null){var S=r.type;hs(r.pendingProps.value,h.value)||(t!==null?t.push(S):t=[S])}}else if(r===ae.current){if(h=r.alternate,h===null)throw Error(o(387));h.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(Pl):t=[Pl])}r=r.return}t!==null&&go(s,t,n,a),s.flags|=262144}function ji(t){for(t=t.firstContext;t!==null;){if(!hs(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function na(t){sa=t,sn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Pt(t){return bu(sa,t)}function Ni(t,s){return sa===null&&na(t),bu(t,s)}function bu(t,s){var n=s._currentValue;if(s={context:s,memoizedValue:n,next:null},sn===null){if(t===null)throw Error(o(308));sn=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else sn=sn.next=s;return n}var oh=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(n,a){t.push(a)}};this.abort=function(){s.aborted=!0,t.forEach(function(n){return n()})}},ch=l.unstable_scheduleCallback,dh=l.unstable_NormalPriority,Rt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bo(){return{controller:new oh,data:new Map,refCount:0}}function fl(t){t.refCount--,t.refCount===0&&ch(dh,function(){t.controller.abort()})}var gl=null,vo=0,Da=0,Ra=null;function uh(t,s){if(gl===null){var n=gl=[];vo=0,Da=Nc(),Ra={status:"pending",value:void 0,then:function(a){n.push(a)}}}return vo++,s.then(vu,vu),s}function vu(){if(--vo===0&&gl!==null){Ra!==null&&(Ra.status="fulfilled");var t=gl;gl=null,Da=0,Ra=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function mh(t,s){var n=[],a={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){a.status="fulfilled",a.value=s;for(var r=0;r<n.length;r++)(0,n[r])(s)},function(r){for(a.status="rejected",a.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),a}var yu=B.S;B.S=function(t,s){nx=tt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&uh(t,s),yu!==null&&yu(t,s)};var aa=E(null);function yo(){var t=aa.current;return t!==null?t:ut.pooledCache}function ki(t,s){s===null?Q(aa,aa.current):Q(aa,s.pool)}function ju(){var t=yo();return t===null?null:{parent:Rt._currentValue,pool:t}}var Ea=Error(o(460)),jo=Error(o(474)),wi=Error(o(542)),Ci={then:function(){}};function Nu(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ku(t,s,n){switch(n=t[n],n===void 0?t.push(s):n!==s&&(s.then(Ks,Ks),s=n),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Cu(t),t;default:if(typeof s.status=="string")s.then(Ks,Ks);else{if(t=ut,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=s,t.status="pending",t.then(function(a){if(s.status==="pending"){var r=s;r.status="fulfilled",r.value=a}},function(a){if(s.status==="pending"){var r=s;r.status="rejected",r.reason=a}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Cu(t),t}throw ia=s,Ea}}function la(t){try{var s=t._init;return s(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(ia=n,Ea):n}}var ia=null;function wu(){if(ia===null)throw Error(o(459));var t=ia;return ia=null,t}function Cu(t){if(t===Ea||t===wi)throw Error(o(483))}var Ta=null,bl=0;function Si(t){var s=bl;return bl+=1,Ta===null&&(Ta=[]),ku(Ta,t,s)}function vl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Ai(t,s){throw s.$$typeof===O?Error(o(525)):(t=Object.prototype.toString.call(s),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Su(t){function s(Z,Y){if(t){var W=Z.deletions;W===null?(Z.deletions=[Y],Z.flags|=16):W.push(Y)}}function n(Z,Y){if(!t)return null;for(;Y!==null;)s(Z,Y),Y=Y.sibling;return null}function a(Z){for(var Y=new Map;Z!==null;)Z.key!==null?Y.set(Z.key,Z):Y.set(Z.index,Z),Z=Z.sibling;return Y}function r(Z,Y){return Z=en(Z,Y),Z.index=0,Z.sibling=null,Z}function c(Z,Y,W){return Z.index=W,t?(W=Z.alternate,W!==null?(W=W.index,W<Y?(Z.flags|=67108866,Y):W):(Z.flags|=67108866,Y)):(Z.flags|=1048576,Y)}function h(Z){return t&&Z.alternate===null&&(Z.flags|=67108866),Z}function S(Z,Y,W,ue){return Y===null||Y.tag!==6?(Y=oo(W,Z.mode,ue),Y.return=Z,Y):(Y=r(Y,W),Y.return=Z,Y)}function $(Z,Y,W,ue){var Oe=W.type;return Oe===_?re(Z,Y,W.props.children,ue,W.key):Y!==null&&(Y.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===F&&la(Oe)===Y.type)?(Y=r(Y,W.props),vl(Y,W),Y.return=Z,Y):(Y=vi(W.type,W.key,W.props,null,Z.mode,ue),vl(Y,W),Y.return=Z,Y)}function ee(Z,Y,W,ue){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==W.containerInfo||Y.stateNode.implementation!==W.implementation?(Y=co(W,Z.mode,ue),Y.return=Z,Y):(Y=r(Y,W.children||[]),Y.return=Z,Y)}function re(Z,Y,W,ue,Oe){return Y===null||Y.tag!==7?(Y=ea(W,Z.mode,ue,Oe),Y.return=Z,Y):(Y=r(Y,W),Y.return=Z,Y)}function me(Z,Y,W){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=oo(""+Y,Z.mode,W),Y.return=Z,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case N:return W=vi(Y.type,Y.key,Y.props,null,Z.mode,W),vl(W,Y),W.return=Z,W;case P:return Y=co(Y,Z.mode,W),Y.return=Z,Y;case F:return Y=la(Y),me(Z,Y,W)}if(Ne(Y)||ie(Y))return Y=ea(Y,Z.mode,W,null),Y.return=Z,Y;if(typeof Y.then=="function")return me(Z,Si(Y),W);if(Y.$$typeof===q)return me(Z,Ni(Z,Y),W);Ai(Z,Y)}return null}function se(Z,Y,W,ue){var Oe=Y!==null?Y.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Oe!==null?null:S(Z,Y,""+W,ue);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case N:return W.key===Oe?$(Z,Y,W,ue):null;case P:return W.key===Oe?ee(Z,Y,W,ue):null;case F:return W=la(W),se(Z,Y,W,ue)}if(Ne(W)||ie(W))return Oe!==null?null:re(Z,Y,W,ue,null);if(typeof W.then=="function")return se(Z,Y,Si(W),ue);if(W.$$typeof===q)return se(Z,Y,Ni(Z,W),ue);Ai(Z,W)}return null}function le(Z,Y,W,ue,Oe){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Z=Z.get(W)||null,S(Y,Z,""+ue,Oe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case N:return Z=Z.get(ue.key===null?W:ue.key)||null,$(Y,Z,ue,Oe);case P:return Z=Z.get(ue.key===null?W:ue.key)||null,ee(Y,Z,ue,Oe);case F:return ue=la(ue),le(Z,Y,W,ue,Oe)}if(Ne(ue)||ie(ue))return Z=Z.get(W)||null,re(Y,Z,ue,Oe,null);if(typeof ue.then=="function")return le(Z,Y,W,Si(ue),Oe);if(ue.$$typeof===q)return le(Z,Y,W,Ni(Y,ue),Oe);Ai(Y,ue)}return null}function Re(Z,Y,W,ue){for(var Oe=null,Ze=null,Ee=Y,Pe=Y=0,Ge=null;Ee!==null&&Pe<W.length;Pe++){Ee.index>Pe?(Ge=Ee,Ee=null):Ge=Ee.sibling;var Je=se(Z,Ee,W[Pe],ue);if(Je===null){Ee===null&&(Ee=Ge);break}t&&Ee&&Je.alternate===null&&s(Z,Ee),Y=c(Je,Y,Pe),Ze===null?Oe=Je:Ze.sibling=Je,Ze=Je,Ee=Ge}if(Pe===W.length)return n(Z,Ee),Qe&&tn(Z,Pe),Oe;if(Ee===null){for(;Pe<W.length;Pe++)Ee=me(Z,W[Pe],ue),Ee!==null&&(Y=c(Ee,Y,Pe),Ze===null?Oe=Ee:Ze.sibling=Ee,Ze=Ee);return Qe&&tn(Z,Pe),Oe}for(Ee=a(Ee);Pe<W.length;Pe++)Ge=le(Ee,Z,Pe,W[Pe],ue),Ge!==null&&(t&&Ge.alternate!==null&&Ee.delete(Ge.key===null?Pe:Ge.key),Y=c(Ge,Y,Pe),Ze===null?Oe=Ge:Ze.sibling=Ge,Ze=Ge);return t&&Ee.forEach(function(Hn){return s(Z,Hn)}),Qe&&tn(Z,Pe),Oe}function Le(Z,Y,W,ue){if(W==null)throw Error(o(151));for(var Oe=null,Ze=null,Ee=Y,Pe=Y=0,Ge=null,Je=W.next();Ee!==null&&!Je.done;Pe++,Je=W.next()){Ee.index>Pe?(Ge=Ee,Ee=null):Ge=Ee.sibling;var Hn=se(Z,Ee,Je.value,ue);if(Hn===null){Ee===null&&(Ee=Ge);break}t&&Ee&&Hn.alternate===null&&s(Z,Ee),Y=c(Hn,Y,Pe),Ze===null?Oe=Hn:Ze.sibling=Hn,Ze=Hn,Ee=Ge}if(Je.done)return n(Z,Ee),Qe&&tn(Z,Pe),Oe;if(Ee===null){for(;!Je.done;Pe++,Je=W.next())Je=me(Z,Je.value,ue),Je!==null&&(Y=c(Je,Y,Pe),Ze===null?Oe=Je:Ze.sibling=Je,Ze=Je);return Qe&&tn(Z,Pe),Oe}for(Ee=a(Ee);!Je.done;Pe++,Je=W.next())Je=le(Ee,Z,Pe,Je.value,ue),Je!==null&&(t&&Je.alternate!==null&&Ee.delete(Je.key===null?Pe:Je.key),Y=c(Je,Y,Pe),Ze===null?Oe=Je:Ze.sibling=Je,Ze=Je);return t&&Ee.forEach(function(wf){return s(Z,wf)}),Qe&&tn(Z,Pe),Oe}function rt(Z,Y,W,ue){if(typeof W=="object"&&W!==null&&W.type===_&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case N:e:{for(var Oe=W.key;Y!==null;){if(Y.key===Oe){if(Oe=W.type,Oe===_){if(Y.tag===7){n(Z,Y.sibling),ue=r(Y,W.props.children),ue.return=Z,Z=ue;break e}}else if(Y.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===F&&la(Oe)===Y.type){n(Z,Y.sibling),ue=r(Y,W.props),vl(ue,W),ue.return=Z,Z=ue;break e}n(Z,Y);break}else s(Z,Y);Y=Y.sibling}W.type===_?(ue=ea(W.props.children,Z.mode,ue,W.key),ue.return=Z,Z=ue):(ue=vi(W.type,W.key,W.props,null,Z.mode,ue),vl(ue,W),ue.return=Z,Z=ue)}return h(Z);case P:e:{for(Oe=W.key;Y!==null;){if(Y.key===Oe)if(Y.tag===4&&Y.stateNode.containerInfo===W.containerInfo&&Y.stateNode.implementation===W.implementation){n(Z,Y.sibling),ue=r(Y,W.children||[]),ue.return=Z,Z=ue;break e}else{n(Z,Y);break}else s(Z,Y);Y=Y.sibling}ue=co(W,Z.mode,ue),ue.return=Z,Z=ue}return h(Z);case F:return W=la(W),rt(Z,Y,W,ue)}if(Ne(W))return Re(Z,Y,W,ue);if(ie(W)){if(Oe=ie(W),typeof Oe!="function")throw Error(o(150));return W=Oe.call(W),Le(Z,Y,W,ue)}if(typeof W.then=="function")return rt(Z,Y,Si(W),ue);if(W.$$typeof===q)return rt(Z,Y,Ni(Z,W),ue);Ai(Z,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,Y!==null&&Y.tag===6?(n(Z,Y.sibling),ue=r(Y,W),ue.return=Z,Z=ue):(n(Z,Y),ue=oo(W,Z.mode,ue),ue.return=Z,Z=ue),h(Z)):n(Z,Y)}return function(Z,Y,W,ue){try{bl=0;var Oe=rt(Z,Y,W,ue);return Ta=null,Oe}catch(Ee){if(Ee===Ea||Ee===wi)throw Ee;var Ze=fs(29,Ee,null,Z.mode);return Ze.lanes=ue,Ze.return=Z,Ze}finally{}}}var ra=Su(!0),Au=Su(!1),Dn=!1;function No(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ko(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Rn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function En(t,s,n){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(We&2)!==0){var r=a.pending;return r===null?s.next=s:(s.next=r.next,r.next=s),a.pending=s,s=bi(t),du(t,null,n),s}return gi(t,a,s,n),bi(t)}function yl(t,s,n){if(s=s.updateQueue,s!==null&&(s=s.shared,(n&4194048)!==0)){var a=s.lanes;a&=t.pendingLanes,n|=a,s.lanes=n,ms(t,n)}}function wo(t,s){var n=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var r=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var h={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};c===null?r=c=h:c=c.next=h,n=n.next}while(n!==null);c===null?r=c=s:c=c.next=s}else r=c=s;n={baseState:a.baseState,firstBaseUpdate:r,lastBaseUpdate:c,shared:a.shared,callbacks:a.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=s:t.next=s,n.lastBaseUpdate=s}var Co=!1;function jl(){if(Co){var t=Ra;if(t!==null)throw t}}function Nl(t,s,n,a){Co=!1;var r=t.updateQueue;Dn=!1;var c=r.firstBaseUpdate,h=r.lastBaseUpdate,S=r.shared.pending;if(S!==null){r.shared.pending=null;var $=S,ee=$.next;$.next=null,h===null?c=ee:h.next=ee,h=$;var re=t.alternate;re!==null&&(re=re.updateQueue,S=re.lastBaseUpdate,S!==h&&(S===null?re.firstBaseUpdate=ee:S.next=ee,re.lastBaseUpdate=$))}if(c!==null){var me=r.baseState;h=0,re=ee=$=null,S=c;do{var se=S.lane&-536870913,le=se!==S.lane;if(le?(He&se)===se:(a&se)===se){se!==0&&se===Da&&(Co=!0),re!==null&&(re=re.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Re=t,Le=S;se=s;var rt=n;switch(Le.tag){case 1:if(Re=Le.payload,typeof Re=="function"){me=Re.call(rt,me,se);break e}me=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Le.payload,se=typeof Re=="function"?Re.call(rt,me,se):Re,se==null)break e;me=R({},me,se);break e;case 2:Dn=!0}}se=S.callback,se!==null&&(t.flags|=64,le&&(t.flags|=8192),le=r.callbacks,le===null?r.callbacks=[se]:le.push(se))}else le={lane:se,tag:S.tag,payload:S.payload,callback:S.callback,next:null},re===null?(ee=re=le,$=me):re=re.next=le,h|=se;if(S=S.next,S===null){if(S=r.shared.pending,S===null)break;le=S,S=le.next,le.next=null,r.lastBaseUpdate=le,r.shared.pending=null}}while(!0);re===null&&($=me),r.baseState=$,r.firstBaseUpdate=ee,r.lastBaseUpdate=re,c===null&&(r.shared.lanes=0),Un|=h,t.lanes=h,t.memoizedState=me}}function Du(t,s){if(typeof t!="function")throw Error(o(191,t));t.call(s)}function Ru(t,s){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Du(n[t],s)}var Ma=E(null),Di=E(0);function Eu(t,s){t=xn,Q(Di,t),Q(Ma,s),xn=t|s.baseLanes}function So(){Q(Di,xn),Q(Ma,Ma.current)}function Ao(){xn=Di.current,J(Ma),J(Di)}var gs=E(null),Bs=null;function Tn(t){var s=t.alternate;Q(wt,wt.current&1),Q(gs,t),Bs===null&&(s===null||Ma.current!==null||s.memoizedState!==null)&&(Bs=t)}function Do(t){Q(wt,wt.current),Q(gs,t),Bs===null&&(Bs=t)}function Tu(t){t.tag===22?(Q(wt,wt.current),Q(gs,t),Bs===null&&(Bs=t)):Mn()}function Mn(){Q(wt,wt.current),Q(gs,gs.current)}function bs(t){J(gs),Bs===t&&(Bs=null),J(wt)}var wt=E(0);function Ri(t){for(var s=t;s!==null;){if(s.tag===13){var n=s.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Bc(n)||Uc(n)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var an=0,ze=null,lt=null,Et=null,Ei=!1,Oa=!1,oa=!1,Ti=0,kl=0,Ba=null,xh=0;function Nt(){throw Error(o(321))}function Ro(t,s){if(s===null)return!1;for(var n=0;n<s.length&&n<t.length;n++)if(!hs(t[n],s[n]))return!1;return!0}function Eo(t,s,n,a,r,c){return an=c,ze=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,B.H=t===null||t.memoizedState===null?pm:Ho,oa=!1,c=n(a,r),oa=!1,Oa&&(c=Ou(s,n,a,r)),Mu(t),c}function Mu(t){B.H=Sl;var s=lt!==null&&lt.next!==null;if(an=0,Et=lt=ze=null,Ei=!1,kl=0,Ba=null,s)throw Error(o(300));t===null||Tt||(t=t.dependencies,t!==null&&ji(t)&&(Tt=!0))}function Ou(t,s,n,a){ze=t;var r=0;do{if(Oa&&(Ba=null),kl=0,Oa=!1,25<=r)throw Error(o(301));if(r+=1,Et=lt=null,t.updateQueue!=null){var c=t.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}B.H=hm,c=s(n,a)}while(Oa);return c}function ph(){var t=B.H,s=t.useState()[0];return s=typeof s.then=="function"?wl(s):s,t=t.useState()[0],(lt!==null?lt.memoizedState:null)!==t&&(ze.flags|=1024),s}function To(){var t=Ti!==0;return Ti=0,t}function Mo(t,s,n){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n}function Oo(t){if(Ei){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Ei=!1}an=0,Et=lt=ze=null,Oa=!1,kl=Ti=0,Ba=null}function ts(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?ze.memoizedState=Et=t:Et=Et.next=t,Et}function Ct(){if(lt===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var s=Et===null?ze.memoizedState:Et.next;if(s!==null)Et=s,lt=t;else{if(t===null)throw ze.alternate===null?Error(o(467)):Error(o(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Et===null?ze.memoizedState=Et=t:Et=Et.next=t}return Et}function Mi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wl(t){var s=kl;return kl+=1,Ba===null&&(Ba=[]),t=ku(Ba,t,s),s=ze,(Et===null?s.memoizedState:Et.next)===null&&(s=s.alternate,B.H=s===null||s.memoizedState===null?pm:Ho),t}function Oi(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wl(t);if(t.$$typeof===q)return Pt(t)}throw Error(o(438,String(t)))}function Bo(t){var s=null,n=ze.updateQueue;if(n!==null&&(s=n.memoCache),s==null){var a=ze.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(s={data:a.data.map(function(r){return r.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),n===null&&(n=Mi(),ze.updateQueue=n),n.memoCache=s,n=s.data[s.index],n===void 0)for(n=s.data[s.index]=Array(t),a=0;a<t;a++)n[a]=ne;return s.index++,n}function ln(t,s){return typeof s=="function"?s(t):s}function Bi(t){var s=Ct();return Uo(s,lt,t)}function Uo(t,s,n){var a=t.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=n;var r=t.baseQueue,c=a.pending;if(c!==null){if(r!==null){var h=r.next;r.next=c.next,c.next=h}s.baseQueue=r=c,a.pending=null}if(c=t.baseState,r===null)t.memoizedState=c;else{s=r.next;var S=h=null,$=null,ee=s,re=!1;do{var me=ee.lane&-536870913;if(me!==ee.lane?(He&me)===me:(an&me)===me){var se=ee.revertLane;if(se===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),me===Da&&(re=!0);else if((an&se)===se){ee=ee.next,se===Da&&(re=!0);continue}else me={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},$===null?(S=$=me,h=c):$=$.next=me,ze.lanes|=se,Un|=se;me=ee.action,oa&&n(c,me),c=ee.hasEagerState?ee.eagerState:n(c,me)}else se={lane:me,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},$===null?(S=$=se,h=c):$=$.next=se,ze.lanes|=me,Un|=me;ee=ee.next}while(ee!==null&&ee!==s);if($===null?h=c:$.next=S,!hs(c,t.memoizedState)&&(Tt=!0,re&&(n=Ra,n!==null)))throw n;t.memoizedState=c,t.baseState=h,t.baseQueue=$,a.lastRenderedState=c}return r===null&&(a.lanes=0),[t.memoizedState,a.dispatch]}function Lo(t){var s=Ct(),n=s.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=t;var a=n.dispatch,r=n.pending,c=s.memoizedState;if(r!==null){n.pending=null;var h=r=r.next;do c=t(c,h.action),h=h.next;while(h!==r);hs(c,s.memoizedState)||(Tt=!0),s.memoizedState=c,s.baseQueue===null&&(s.baseState=c),n.lastRenderedState=c}return[c,a]}function Bu(t,s,n){var a=ze,r=Ct(),c=Qe;if(c){if(n===void 0)throw Error(o(407));n=n()}else n=s();var h=!hs((lt||r).memoizedState,n);if(h&&(r.memoizedState=n,Tt=!0),r=r.queue,qo(Iu.bind(null,a,r,t),[t]),r.getSnapshot!==s||h||Et!==null&&Et.memoizedState.tag&1){if(a.flags|=2048,Ua(9,{destroy:void 0},Lu.bind(null,a,r,n,s),null),ut===null)throw Error(o(349));c||(an&127)!==0||Uu(a,s,n)}return n}function Uu(t,s,n){t.flags|=16384,t={getSnapshot:s,value:n},s=ze.updateQueue,s===null?(s=Mi(),ze.updateQueue=s,s.stores=[t]):(n=s.stores,n===null?s.stores=[t]:n.push(t))}function Lu(t,s,n,a){s.value=n,s.getSnapshot=a,_u(s)&&qu(t)}function Iu(t,s,n){return n(function(){_u(s)&&qu(t)})}function _u(t){var s=t.getSnapshot;t=t.value;try{var n=s();return!hs(t,n)}catch{return!0}}function qu(t){var s=Wn(t,2);s!==null&&os(s,t,2)}function Io(t){var s=ts();if(typeof t=="function"){var n=t;if(t=n(),oa){_t(!0);try{n()}finally{_t(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:t},s}function $u(t,s,n,a){return t.baseState=n,Uo(t,lt,typeof a=="function"?a:ln)}function hh(t,s,n,a,r){if(Ii(t))throw Error(o(485));if(t=s.action,t!==null){var c={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){c.listeners.push(h)}};B.T!==null?n(!0):c.isTransition=!1,a(c),n=s.pending,n===null?(c.next=s.pending=c,zu(s,c)):(c.next=n.next,s.pending=n.next=c)}}function zu(t,s){var n=s.action,a=s.payload,r=t.state;if(s.isTransition){var c=B.T,h={};B.T=h;try{var S=n(r,a),$=B.S;$!==null&&$(h,S),Pu(t,s,S)}catch(ee){_o(t,s,ee)}finally{c!==null&&h.types!==null&&(c.types=h.types),B.T=c}}else try{c=n(r,a),Pu(t,s,c)}catch(ee){_o(t,s,ee)}}function Pu(t,s,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){Vu(t,s,a)},function(a){return _o(t,s,a)}):Vu(t,s,n)}function Vu(t,s,n){s.status="fulfilled",s.value=n,Fu(s),t.state=n,s=t.pending,s!==null&&(n=s.next,n===s?t.pending=null:(n=n.next,s.next=n,zu(t,n)))}function _o(t,s,n){var a=t.pending;if(t.pending=null,a!==null){a=a.next;do s.status="rejected",s.reason=n,Fu(s),s=s.next;while(s!==a)}t.action=null}function Fu(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Hu(t,s){return s}function Gu(t,s){if(Qe){var n=ut.formState;if(n!==null){e:{var a=ze;if(Qe){if(pt){t:{for(var r=pt,c=Os;r.nodeType!==8;){if(!c){r=null;break t}if(r=Us(r.nextSibling),r===null){r=null;break t}}c=r.data,r=c==="F!"||c==="F"?r:null}if(r){pt=Us(r.nextSibling),a=r.data==="F!";break e}}Sn(a)}a=!1}a&&(s=n[0])}}return n=ts(),n.memoizedState=n.baseState=s,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hu,lastRenderedState:s},n.queue=a,n=um.bind(null,ze,a),a.dispatch=n,a=Io(!1),c=Fo.bind(null,ze,!1,a.queue),a=ts(),r={state:s,dispatch:null,action:t,pending:null},a.queue=r,n=hh.bind(null,ze,r,c,n),r.dispatch=n,a.memoizedState=t,[s,n,!1]}function Yu(t){var s=Ct();return Qu(s,lt,t)}function Qu(t,s,n){if(s=Uo(t,s,Hu)[0],t=Bi(ln)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var a=wl(s)}catch(h){throw h===Ea?wi:h}else a=s;s=Ct();var r=s.queue,c=r.dispatch;return n!==s.memoizedState&&(ze.flags|=2048,Ua(9,{destroy:void 0},fh.bind(null,r,n),null)),[a,c,t]}function fh(t,s){t.action=s}function Xu(t){var s=Ct(),n=lt;if(n!==null)return Qu(s,n,t);Ct(),s=s.memoizedState,n=Ct();var a=n.queue.dispatch;return n.memoizedState=t,[s,a,!1]}function Ua(t,s,n,a){return t={tag:t,create:n,deps:a,inst:s,next:null},s=ze.updateQueue,s===null&&(s=Mi(),ze.updateQueue=s),n=s.lastEffect,n===null?s.lastEffect=t.next=t:(a=n.next,n.next=t,t.next=a,s.lastEffect=t),t}function Zu(){return Ct().memoizedState}function Ui(t,s,n,a){var r=ts();ze.flags|=t,r.memoizedState=Ua(1|s,{destroy:void 0},n,a===void 0?null:a)}function Li(t,s,n,a){var r=Ct();a=a===void 0?null:a;var c=r.memoizedState.inst;lt!==null&&a!==null&&Ro(a,lt.memoizedState.deps)?r.memoizedState=Ua(s,c,n,a):(ze.flags|=t,r.memoizedState=Ua(1|s,c,n,a))}function Ju(t,s){Ui(8390656,8,t,s)}function qo(t,s){Li(2048,8,t,s)}function gh(t){ze.flags|=4;var s=ze.updateQueue;if(s===null)s=Mi(),ze.updateQueue=s,s.events=[t];else{var n=s.events;n===null?s.events=[t]:n.push(t)}}function Ku(t){var s=Ct().memoizedState;return gh({ref:s,nextImpl:t}),function(){if((We&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Wu(t,s){return Li(4,2,t,s)}function em(t,s){return Li(4,4,t,s)}function tm(t,s){if(typeof s=="function"){t=t();var n=s(t);return function(){typeof n=="function"?n():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function sm(t,s,n){n=n!=null?n.concat([t]):null,Li(4,4,tm.bind(null,s,t),n)}function $o(){}function nm(t,s){var n=Ct();s=s===void 0?null:s;var a=n.memoizedState;return s!==null&&Ro(s,a[1])?a[0]:(n.memoizedState=[t,s],t)}function am(t,s){var n=Ct();s=s===void 0?null:s;var a=n.memoizedState;if(s!==null&&Ro(s,a[1]))return a[0];if(a=t(),oa){_t(!0);try{t()}finally{_t(!1)}}return n.memoizedState=[a,s],a}function zo(t,s,n){return n===void 0||(an&1073741824)!==0&&(He&261930)===0?t.memoizedState=s:(t.memoizedState=n,t=lx(),ze.lanes|=t,Un|=t,n)}function lm(t,s,n,a){return hs(n,s)?n:Ma.current!==null?(t=zo(t,n,a),hs(t,s)||(Tt=!0),t):(an&42)===0||(an&1073741824)!==0&&(He&261930)===0?(Tt=!0,t.memoizedState=n):(t=lx(),ze.lanes|=t,Un|=t,s)}function im(t,s,n,a,r){var c=I.p;I.p=c!==0&&8>c?c:8;var h=B.T,S={};B.T=S,Fo(t,!1,s,n);try{var $=r(),ee=B.S;if(ee!==null&&ee(S,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var re=mh($,a);Cl(t,s,re,js(t))}else Cl(t,s,a,js(t))}catch(me){Cl(t,s,{then:function(){},status:"rejected",reason:me},js())}finally{I.p=c,h!==null&&S.types!==null&&(h.types=S.types),B.T=h}}function bh(){}function Po(t,s,n,a){if(t.tag!==5)throw Error(o(476));var r=rm(t).queue;im(t,r,s,w,n===null?bh:function(){return om(t),n(a)})}function rm(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:w,baseState:w,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:w},next:null};var n={};return s.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:n},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function om(t){var s=rm(t);s.next===null&&(s=t.alternate.memoizedState),Cl(t,s.next.queue,{},js())}function Vo(){return Pt(Pl)}function cm(){return Ct().memoizedState}function dm(){return Ct().memoizedState}function vh(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var n=js();t=Rn(n);var a=En(s,t,n);a!==null&&(os(a,s,n),yl(a,s,n)),s={cache:bo()},t.payload=s;return}s=s.return}}function yh(t,s,n){var a=js();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ii(t)?mm(s,n):(n=io(t,s,n,a),n!==null&&(os(n,t,a),xm(n,s,a)))}function um(t,s,n){var a=js();Cl(t,s,n,a)}function Cl(t,s,n,a){var r={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ii(t))mm(s,r);else{var c=t.alternate;if(t.lanes===0&&(c===null||c.lanes===0)&&(c=s.lastRenderedReducer,c!==null))try{var h=s.lastRenderedState,S=c(h,n);if(r.hasEagerState=!0,r.eagerState=S,hs(S,h))return gi(t,s,r,0),ut===null&&fi(),!1}catch{}finally{}if(n=io(t,s,r,a),n!==null)return os(n,t,a),xm(n,s,a),!0}return!1}function Fo(t,s,n,a){if(a={lane:2,revertLane:Nc(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ii(t)){if(s)throw Error(o(479))}else s=io(t,n,a,2),s!==null&&os(s,t,2)}function Ii(t){var s=t.alternate;return t===ze||s!==null&&s===ze}function mm(t,s){Oa=Ei=!0;var n=t.pending;n===null?s.next=s:(s.next=n.next,n.next=s),t.pending=s}function xm(t,s,n){if((n&4194048)!==0){var a=s.lanes;a&=t.pendingLanes,n|=a,s.lanes=n,ms(t,n)}}var Sl={readContext:Pt,use:Oi,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt};Sl.useEffectEvent=Nt;var pm={readContext:Pt,use:Oi,useCallback:function(t,s){return ts().memoizedState=[t,s===void 0?null:s],t},useContext:Pt,useEffect:Ju,useImperativeHandle:function(t,s,n){n=n!=null?n.concat([t]):null,Ui(4194308,4,tm.bind(null,s,t),n)},useLayoutEffect:function(t,s){return Ui(4194308,4,t,s)},useInsertionEffect:function(t,s){Ui(4,2,t,s)},useMemo:function(t,s){var n=ts();s=s===void 0?null:s;var a=t();if(oa){_t(!0);try{t()}finally{_t(!1)}}return n.memoizedState=[a,s],a},useReducer:function(t,s,n){var a=ts();if(n!==void 0){var r=n(s);if(oa){_t(!0);try{n(s)}finally{_t(!1)}}}else r=s;return a.memoizedState=a.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},a.queue=t,t=t.dispatch=yh.bind(null,ze,t),[a.memoizedState,t]},useRef:function(t){var s=ts();return t={current:t},s.memoizedState=t},useState:function(t){t=Io(t);var s=t.queue,n=um.bind(null,ze,s);return s.dispatch=n,[t.memoizedState,n]},useDebugValue:$o,useDeferredValue:function(t,s){var n=ts();return zo(n,t,s)},useTransition:function(){var t=Io(!1);return t=im.bind(null,ze,t.queue,!0,!1),ts().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,n){var a=ze,r=ts();if(Qe){if(n===void 0)throw Error(o(407));n=n()}else{if(n=s(),ut===null)throw Error(o(349));(He&127)!==0||Uu(a,s,n)}r.memoizedState=n;var c={value:n,getSnapshot:s};return r.queue=c,Ju(Iu.bind(null,a,c,t),[t]),a.flags|=2048,Ua(9,{destroy:void 0},Lu.bind(null,a,c,n,s),null),n},useId:function(){var t=ts(),s=ut.identifierPrefix;if(Qe){var n=Gs,a=Hs;n=(a&~(1<<32-At(a)-1)).toString(32)+n,s="_"+s+"R_"+n,n=Ti++,0<n&&(s+="H"+n.toString(32)),s+="_"}else n=xh++,s="_"+s+"r_"+n.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Vo,useFormState:Gu,useActionState:Gu,useOptimistic:function(t){var s=ts();s.memoizedState=s.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=n,s=Fo.bind(null,ze,!0,n),n.dispatch=s,[t,s]},useMemoCache:Bo,useCacheRefresh:function(){return ts().memoizedState=vh.bind(null,ze)},useEffectEvent:function(t){var s=ts(),n={impl:t};return s.memoizedState=n,function(){if((We&2)!==0)throw Error(o(440));return n.impl.apply(void 0,arguments)}}},Ho={readContext:Pt,use:Oi,useCallback:nm,useContext:Pt,useEffect:qo,useImperativeHandle:sm,useInsertionEffect:Wu,useLayoutEffect:em,useMemo:am,useReducer:Bi,useRef:Zu,useState:function(){return Bi(ln)},useDebugValue:$o,useDeferredValue:function(t,s){var n=Ct();return lm(n,lt.memoizedState,t,s)},useTransition:function(){var t=Bi(ln)[0],s=Ct().memoizedState;return[typeof t=="boolean"?t:wl(t),s]},useSyncExternalStore:Bu,useId:cm,useHostTransitionStatus:Vo,useFormState:Yu,useActionState:Yu,useOptimistic:function(t,s){var n=Ct();return $u(n,lt,t,s)},useMemoCache:Bo,useCacheRefresh:dm};Ho.useEffectEvent=Ku;var hm={readContext:Pt,use:Oi,useCallback:nm,useContext:Pt,useEffect:qo,useImperativeHandle:sm,useInsertionEffect:Wu,useLayoutEffect:em,useMemo:am,useReducer:Lo,useRef:Zu,useState:function(){return Lo(ln)},useDebugValue:$o,useDeferredValue:function(t,s){var n=Ct();return lt===null?zo(n,t,s):lm(n,lt.memoizedState,t,s)},useTransition:function(){var t=Lo(ln)[0],s=Ct().memoizedState;return[typeof t=="boolean"?t:wl(t),s]},useSyncExternalStore:Bu,useId:cm,useHostTransitionStatus:Vo,useFormState:Xu,useActionState:Xu,useOptimistic:function(t,s){var n=Ct();return lt!==null?$u(n,lt,t,s):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Bo,useCacheRefresh:dm};hm.useEffectEvent=Ku;function Go(t,s,n,a){s=t.memoizedState,n=n(a,s),n=n==null?s:R({},s,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Yo={enqueueSetState:function(t,s,n){t=t._reactInternals;var a=js(),r=Rn(a);r.payload=s,n!=null&&(r.callback=n),s=En(t,r,a),s!==null&&(os(s,t,a),yl(s,t,a))},enqueueReplaceState:function(t,s,n){t=t._reactInternals;var a=js(),r=Rn(a);r.tag=1,r.payload=s,n!=null&&(r.callback=n),s=En(t,r,a),s!==null&&(os(s,t,a),yl(s,t,a))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var n=js(),a=Rn(n);a.tag=2,s!=null&&(a.callback=s),s=En(t,a,n),s!==null&&(os(s,t,n),yl(s,t,n))}};function fm(t,s,n,a,r,c,h){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,c,h):s.prototype&&s.prototype.isPureReactComponent?!ml(n,a)||!ml(r,c):!0}function gm(t,s,n,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(n,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(n,a),s.state!==t&&Yo.enqueueReplaceState(s,s.state,null)}function ca(t,s){var n=s;if("ref"in s){n={};for(var a in s)a!=="ref"&&(n[a]=s[a])}if(t=t.defaultProps){n===s&&(n=R({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function bm(t){hi(t)}function vm(t){console.error(t)}function ym(t){hi(t)}function _i(t,s){try{var n=t.onUncaughtError;n(s.value,{componentStack:s.stack})}catch(a){setTimeout(function(){throw a})}}function jm(t,s,n){try{var a=t.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Qo(t,s,n){return n=Rn(n),n.tag=3,n.payload={element:null},n.callback=function(){_i(t,s)},n}function Nm(t){return t=Rn(t),t.tag=3,t}function km(t,s,n,a){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var c=a.value;t.payload=function(){return r(c)},t.callback=function(){jm(s,n,a)}}var h=n.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(t.callback=function(){jm(s,n,a),typeof r!="function"&&(Ln===null?Ln=new Set([this]):Ln.add(this));var S=a.stack;this.componentDidCatch(a.value,{componentStack:S!==null?S:""})})}function jh(t,s,n,a,r){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(s=n.alternate,s!==null&&Aa(s,n,r,!0),n=gs.current,n!==null){switch(n.tag){case 31:case 13:return Bs===null?Zi():n.alternate===null&&kt===0&&(kt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,a===Ci?n.flags|=16384:(s=n.updateQueue,s===null?n.updateQueue=new Set([a]):s.add(a),vc(t,a,r)),!1;case 22:return n.flags|=65536,a===Ci?n.flags|=16384:(s=n.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=s):(n=s.retryQueue,n===null?s.retryQueue=new Set([a]):n.add(a)),vc(t,a,r)),!1}throw Error(o(435,n.tag))}return vc(t,a,r),Zi(),!1}if(Qe)return s=gs.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=r,a!==xo&&(t=Error(o(422),{cause:a}),hl(Es(t,n)))):(a!==xo&&(s=Error(o(423),{cause:a}),hl(Es(s,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,a=Es(a,n),r=Qo(t.stateNode,a,r),wo(t,r),kt!==4&&(kt=2)),!1;var c=Error(o(520),{cause:a});if(c=Es(c,n),Bl===null?Bl=[c]:Bl.push(c),kt!==4&&(kt=2),s===null)return!0;a=Es(a,n),n=s;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=Qo(n.stateNode,a,t),wo(n,t),!1;case 1:if(s=n.type,c=n.stateNode,(n.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Ln===null||!Ln.has(c))))return n.flags|=65536,r&=-r,n.lanes|=r,r=Nm(r),km(r,t,n,a),wo(n,r),!1}n=n.return}while(n!==null);return!1}var Xo=Error(o(461)),Tt=!1;function Vt(t,s,n,a){s.child=t===null?Au(s,null,n,a):ra(s,t.child,n,a)}function wm(t,s,n,a,r){n=n.render;var c=s.ref;if("ref"in a){var h={};for(var S in a)S!=="ref"&&(h[S]=a[S])}else h=a;return na(s),a=Eo(t,s,n,h,c,r),S=To(),t!==null&&!Tt?(Mo(t,s,r),rn(t,s,r)):(Qe&&S&&uo(s),s.flags|=1,Vt(t,s,a,r),s.child)}function Cm(t,s,n,a,r){if(t===null){var c=n.type;return typeof c=="function"&&!ro(c)&&c.defaultProps===void 0&&n.compare===null?(s.tag=15,s.type=c,Sm(t,s,c,a,r)):(t=vi(n.type,null,a,s,s.mode,r),t.ref=s.ref,t.return=s,s.child=t)}if(c=t.child,!nc(t,r)){var h=c.memoizedProps;if(n=n.compare,n=n!==null?n:ml,n(h,a)&&t.ref===s.ref)return rn(t,s,r)}return s.flags|=1,t=en(c,a),t.ref=s.ref,t.return=s,s.child=t}function Sm(t,s,n,a,r){if(t!==null){var c=t.memoizedProps;if(ml(c,a)&&t.ref===s.ref)if(Tt=!1,s.pendingProps=a=c,nc(t,r))(t.flags&131072)!==0&&(Tt=!0);else return s.lanes=t.lanes,rn(t,s,r)}return Zo(t,s,n,a,r)}function Am(t,s,n,a){var r=a.children,c=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((s.flags&128)!==0){if(c=c!==null?c.baseLanes|n:n,t!==null){for(a=s.child=t.child,r=0;a!==null;)r=r|a.lanes|a.childLanes,a=a.sibling;a=r&~c}else a=0,s.child=null;return Dm(t,s,c,n,a)}if((n&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&ki(s,c!==null?c.cachePool:null),c!==null?Eu(s,c):So(),Tu(s);else return a=s.lanes=536870912,Dm(t,s,c!==null?c.baseLanes|n:n,n,a)}else c!==null?(ki(s,c.cachePool),Eu(s,c),Mn(),s.memoizedState=null):(t!==null&&ki(s,null),So(),Mn());return Vt(t,s,r,n),s.child}function Al(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Dm(t,s,n,a,r){var c=yo();return c=c===null?null:{parent:Rt._currentValue,pool:c},s.memoizedState={baseLanes:n,cachePool:c},t!==null&&ki(s,null),So(),Tu(s),t!==null&&Aa(t,s,a,!0),s.childLanes=r,null}function qi(t,s){return s=zi({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Rm(t,s,n){return ra(s,t.child,null,n),t=qi(s,s.pendingProps),t.flags|=2,bs(s),s.memoizedState=null,t}function Nh(t,s,n){var a=s.pendingProps,r=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Qe){if(a.mode==="hidden")return t=qi(s,a),s.lanes=536870912,Al(null,t);if(Do(s),(t=pt)?(t=zx(t,Os),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:wn!==null?{id:Hs,overflow:Gs}:null,retryLane:536870912,hydrationErrors:null},n=mu(t),n.return=s,s.child=n,zt=s,pt=null)):t=null,t===null)throw Sn(s);return s.lanes=536870912,null}return qi(s,a)}var c=t.memoizedState;if(c!==null){var h=c.dehydrated;if(Do(s),r)if(s.flags&256)s.flags&=-257,s=Rm(t,s,n);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(o(558));else if(Tt||Aa(t,s,n,!1),r=(n&t.childLanes)!==0,Tt||r){if(a=ut,a!==null&&(h=Be(a,n),h!==0&&h!==c.retryLane))throw c.retryLane=h,Wn(t,h),os(a,t,h),Xo;Zi(),s=Rm(t,s,n)}else t=c.treeContext,pt=Us(h.nextSibling),zt=s,Qe=!0,Cn=null,Os=!1,t!==null&&hu(s,t),s=qi(s,a),s.flags|=4096;return s}return t=en(t.child,{mode:a.mode,children:a.children}),t.ref=s.ref,s.child=t,t.return=s,t}function $i(t,s){var n=s.ref;if(n===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(o(284));(t===null||t.ref!==n)&&(s.flags|=4194816)}}function Zo(t,s,n,a,r){return na(s),n=Eo(t,s,n,a,void 0,r),a=To(),t!==null&&!Tt?(Mo(t,s,r),rn(t,s,r)):(Qe&&a&&uo(s),s.flags|=1,Vt(t,s,n,r),s.child)}function Em(t,s,n,a,r,c){return na(s),s.updateQueue=null,n=Ou(s,a,n,r),Mu(t),a=To(),t!==null&&!Tt?(Mo(t,s,c),rn(t,s,c)):(Qe&&a&&uo(s),s.flags|=1,Vt(t,s,n,c),s.child)}function Tm(t,s,n,a,r){if(na(s),s.stateNode===null){var c=ka,h=n.contextType;typeof h=="object"&&h!==null&&(c=Pt(h)),c=new n(a,c),s.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Yo,s.stateNode=c,c._reactInternals=s,c=s.stateNode,c.props=a,c.state=s.memoizedState,c.refs={},No(s),h=n.contextType,c.context=typeof h=="object"&&h!==null?Pt(h):ka,c.state=s.memoizedState,h=n.getDerivedStateFromProps,typeof h=="function"&&(Go(s,n,h,a),c.state=s.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(h=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),h!==c.state&&Yo.enqueueReplaceState(c,c.state,null),Nl(s,a,c,r),jl(),c.state=s.memoizedState),typeof c.componentDidMount=="function"&&(s.flags|=4194308),a=!0}else if(t===null){c=s.stateNode;var S=s.memoizedProps,$=ca(n,S);c.props=$;var ee=c.context,re=n.contextType;h=ka,typeof re=="object"&&re!==null&&(h=Pt(re));var me=n.getDerivedStateFromProps;re=typeof me=="function"||typeof c.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,re||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(S||ee!==h)&&gm(s,c,a,h),Dn=!1;var se=s.memoizedState;c.state=se,Nl(s,a,c,r),jl(),ee=s.memoizedState,S||se!==ee||Dn?(typeof me=="function"&&(Go(s,n,me,a),ee=s.memoizedState),($=Dn||fm(s,n,$,a,se,ee,h))?(re||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(s.flags|=4194308)):(typeof c.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=ee),c.props=a,c.state=ee,c.context=h,a=$):(typeof c.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{c=s.stateNode,ko(t,s),h=s.memoizedProps,re=ca(n,h),c.props=re,me=s.pendingProps,se=c.context,ee=n.contextType,$=ka,typeof ee=="object"&&ee!==null&&($=Pt(ee)),S=n.getDerivedStateFromProps,(ee=typeof S=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(h!==me||se!==$)&&gm(s,c,a,$),Dn=!1,se=s.memoizedState,c.state=se,Nl(s,a,c,r),jl();var le=s.memoizedState;h!==me||se!==le||Dn||t!==null&&t.dependencies!==null&&ji(t.dependencies)?(typeof S=="function"&&(Go(s,n,S,a),le=s.memoizedState),(re=Dn||fm(s,n,re,a,se,le,$)||t!==null&&t.dependencies!==null&&ji(t.dependencies))?(ee||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(a,le,$),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(a,le,$)),typeof c.componentDidUpdate=="function"&&(s.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof c.componentDidUpdate!="function"||h===t.memoizedProps&&se===t.memoizedState||(s.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&se===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=le),c.props=a,c.state=le,c.context=$,a=re):(typeof c.componentDidUpdate!="function"||h===t.memoizedProps&&se===t.memoizedState||(s.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&se===t.memoizedState||(s.flags|=1024),a=!1)}return c=a,$i(t,s),a=(s.flags&128)!==0,c||a?(c=s.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:c.render(),s.flags|=1,t!==null&&a?(s.child=ra(s,t.child,null,r),s.child=ra(s,null,n,r)):Vt(t,s,n,r),s.memoizedState=c.state,t=s.child):t=rn(t,s,r),t}function Mm(t,s,n,a){return ta(),s.flags|=256,Vt(t,s,n,a),s.child}var Jo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ko(t){return{baseLanes:t,cachePool:ju()}}function Wo(t,s,n){return t=t!==null?t.childLanes&~n:0,s&&(t|=ys),t}function Om(t,s,n){var a=s.pendingProps,r=!1,c=(s.flags&128)!==0,h;if((h=c)||(h=t!==null&&t.memoizedState===null?!1:(wt.current&2)!==0),h&&(r=!0,s.flags&=-129),h=(s.flags&32)!==0,s.flags&=-33,t===null){if(Qe){if(r?Tn(s):Mn(),(t=pt)?(t=zx(t,Os),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:wn!==null?{id:Hs,overflow:Gs}:null,retryLane:536870912,hydrationErrors:null},n=mu(t),n.return=s,s.child=n,zt=s,pt=null)):t=null,t===null)throw Sn(s);return Uc(t)?s.lanes=32:s.lanes=536870912,null}var S=a.children;return a=a.fallback,r?(Mn(),r=s.mode,S=zi({mode:"hidden",children:S},r),a=ea(a,r,n,null),S.return=s,a.return=s,S.sibling=a,s.child=S,a=s.child,a.memoizedState=Ko(n),a.childLanes=Wo(t,h,n),s.memoizedState=Jo,Al(null,a)):(Tn(s),ec(s,S))}var $=t.memoizedState;if($!==null&&(S=$.dehydrated,S!==null)){if(c)s.flags&256?(Tn(s),s.flags&=-257,s=tc(t,s,n)):s.memoizedState!==null?(Mn(),s.child=t.child,s.flags|=128,s=null):(Mn(),S=a.fallback,r=s.mode,a=zi({mode:"visible",children:a.children},r),S=ea(S,r,n,null),S.flags|=2,a.return=s,S.return=s,a.sibling=S,s.child=a,ra(s,t.child,null,n),a=s.child,a.memoizedState=Ko(n),a.childLanes=Wo(t,h,n),s.memoizedState=Jo,s=Al(null,a));else if(Tn(s),Uc(S)){if(h=S.nextSibling&&S.nextSibling.dataset,h)var ee=h.dgst;h=ee,a=Error(o(419)),a.stack="",a.digest=h,hl({value:a,source:null,stack:null}),s=tc(t,s,n)}else if(Tt||Aa(t,s,n,!1),h=(n&t.childLanes)!==0,Tt||h){if(h=ut,h!==null&&(a=Be(h,n),a!==0&&a!==$.retryLane))throw $.retryLane=a,Wn(t,a),os(h,t,a),Xo;Bc(S)||Zi(),s=tc(t,s,n)}else Bc(S)?(s.flags|=192,s.child=t.child,s=null):(t=$.treeContext,pt=Us(S.nextSibling),zt=s,Qe=!0,Cn=null,Os=!1,t!==null&&hu(s,t),s=ec(s,a.children),s.flags|=4096);return s}return r?(Mn(),S=a.fallback,r=s.mode,$=t.child,ee=$.sibling,a=en($,{mode:"hidden",children:a.children}),a.subtreeFlags=$.subtreeFlags&65011712,ee!==null?S=en(ee,S):(S=ea(S,r,n,null),S.flags|=2),S.return=s,a.return=s,a.sibling=S,s.child=a,Al(null,a),a=s.child,S=t.child.memoizedState,S===null?S=Ko(n):(r=S.cachePool,r!==null?($=Rt._currentValue,r=r.parent!==$?{parent:$,pool:$}:r):r=ju(),S={baseLanes:S.baseLanes|n,cachePool:r}),a.memoizedState=S,a.childLanes=Wo(t,h,n),s.memoizedState=Jo,Al(t.child,a)):(Tn(s),n=t.child,t=n.sibling,n=en(n,{mode:"visible",children:a.children}),n.return=s,n.sibling=null,t!==null&&(h=s.deletions,h===null?(s.deletions=[t],s.flags|=16):h.push(t)),s.child=n,s.memoizedState=null,n)}function ec(t,s){return s=zi({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function zi(t,s){return t=fs(22,t,null,s),t.lanes=0,t}function tc(t,s,n){return ra(s,t.child,null,n),t=ec(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Bm(t,s,n){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),fo(t.return,s,n)}function sc(t,s,n,a,r,c){var h=t.memoizedState;h===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:r,treeForkCount:c}:(h.isBackwards=s,h.rendering=null,h.renderingStartTime=0,h.last=a,h.tail=n,h.tailMode=r,h.treeForkCount=c)}function Um(t,s,n){var a=s.pendingProps,r=a.revealOrder,c=a.tail;a=a.children;var h=wt.current,S=(h&2)!==0;if(S?(h=h&1|2,s.flags|=128):h&=1,Q(wt,h),Vt(t,s,a,n),a=Qe?pl:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bm(t,n,s);else if(t.tag===19)Bm(t,n,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=s.child,r=null;n!==null;)t=n.alternate,t!==null&&Ri(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=s.child,s.child=null):(r=n.sibling,n.sibling=null),sc(s,!1,r,n,c,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=s.child,s.child=null;r!==null;){if(t=r.alternate,t!==null&&Ri(t)===null){s.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}sc(s,!0,n,null,c,a);break;case"together":sc(s,!1,null,null,void 0,a);break;default:s.memoizedState=null}return s.child}function rn(t,s,n){if(t!==null&&(s.dependencies=t.dependencies),Un|=s.lanes,(n&s.childLanes)===0)if(t!==null){if(Aa(t,s,n,!1),(n&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(o(153));if(s.child!==null){for(t=s.child,n=en(t,t.pendingProps),s.child=n,n.return=s;t.sibling!==null;)t=t.sibling,n=n.sibling=en(t,t.pendingProps),n.return=s;n.sibling=null}return s.child}function nc(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&ji(t)))}function kh(t,s,n){switch(s.tag){case 3:Me(s,s.stateNode.containerInfo),An(s,Rt,t.memoizedState.cache),ta();break;case 27:case 5:ot(s);break;case 4:Me(s,s.stateNode.containerInfo);break;case 10:An(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Do(s),null;break;case 13:var a=s.memoizedState;if(a!==null)return a.dehydrated!==null?(Tn(s),s.flags|=128,null):(n&s.child.childLanes)!==0?Om(t,s,n):(Tn(s),t=rn(t,s,n),t!==null?t.sibling:null);Tn(s);break;case 19:var r=(t.flags&128)!==0;if(a=(n&s.childLanes)!==0,a||(Aa(t,s,n,!1),a=(n&s.childLanes)!==0),r){if(a)return Um(t,s,n);s.flags|=128}if(r=s.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Q(wt,wt.current),a)break;return null;case 22:return s.lanes=0,Am(t,s,n,s.pendingProps);case 24:An(s,Rt,t.memoizedState.cache)}return rn(t,s,n)}function Lm(t,s,n){if(t!==null)if(t.memoizedProps!==s.pendingProps)Tt=!0;else{if(!nc(t,n)&&(s.flags&128)===0)return Tt=!1,kh(t,s,n);Tt=(t.flags&131072)!==0}else Tt=!1,Qe&&(s.flags&1048576)!==0&&pu(s,pl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var a=s.pendingProps;if(t=la(s.elementType),s.type=t,typeof t=="function")ro(t)?(a=ca(t,a),s.tag=1,s=Tm(null,s,t,a,n)):(s.tag=0,s=Zo(null,s,t,a,n));else{if(t!=null){var r=t.$$typeof;if(r===A){s.tag=11,s=wm(null,s,t,a,n);break e}else if(r===L){s.tag=14,s=Cm(null,s,t,a,n);break e}}throw s=pe(t)||t,Error(o(306,s,""))}}return s;case 0:return Zo(t,s,s.type,s.pendingProps,n);case 1:return a=s.type,r=ca(a,s.pendingProps),Tm(t,s,a,r,n);case 3:e:{if(Me(s,s.stateNode.containerInfo),t===null)throw Error(o(387));a=s.pendingProps;var c=s.memoizedState;r=c.element,ko(t,s),Nl(s,a,null,n);var h=s.memoizedState;if(a=h.cache,An(s,Rt,a),a!==c.cache&&go(s,[Rt],n,!0),jl(),a=h.element,c.isDehydrated)if(c={element:a,isDehydrated:!1,cache:h.cache},s.updateQueue.baseState=c,s.memoizedState=c,s.flags&256){s=Mm(t,s,a,n);break e}else if(a!==r){r=Es(Error(o(424)),s),hl(r),s=Mm(t,s,a,n);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(pt=Us(t.firstChild),zt=s,Qe=!0,Cn=null,Os=!0,n=Au(s,null,a,n),s.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ta(),a===r){s=rn(t,s,n);break e}Vt(t,s,a,n)}s=s.child}return s;case 26:return $i(t,s),t===null?(n=Yx(s.type,null,s.pendingProps,null))?s.memoizedState=n:Qe||(n=s.type,t=s.pendingProps,a=nr(b.current).createElement(n),a[mt]=s,a[xt]=t,Ft(a,n,t),yt(a),s.stateNode=a):s.memoizedState=Yx(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return ot(s),t===null&&Qe&&(a=s.stateNode=Fx(s.type,s.pendingProps,b.current),zt=s,Os=!0,r=pt,$n(s.type)?(Lc=r,pt=Us(a.firstChild)):pt=r),Vt(t,s,s.pendingProps.children,n),$i(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Qe&&((r=a=pt)&&(a=Wh(a,s.type,s.pendingProps,Os),a!==null?(s.stateNode=a,zt=s,pt=Us(a.firstChild),Os=!1,r=!0):r=!1),r||Sn(s)),ot(s),r=s.type,c=s.pendingProps,h=t!==null?t.memoizedProps:null,a=c.children,Tc(r,c)?a=null:h!==null&&Tc(r,h)&&(s.flags|=32),s.memoizedState!==null&&(r=Eo(t,s,ph,null,null,n),Pl._currentValue=r),$i(t,s),Vt(t,s,a,n),s.child;case 6:return t===null&&Qe&&((t=n=pt)&&(n=ef(n,s.pendingProps,Os),n!==null?(s.stateNode=n,zt=s,pt=null,t=!0):t=!1),t||Sn(s)),null;case 13:return Om(t,s,n);case 4:return Me(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=ra(s,null,a,n):Vt(t,s,a,n),s.child;case 11:return wm(t,s,s.type,s.pendingProps,n);case 7:return Vt(t,s,s.pendingProps,n),s.child;case 8:return Vt(t,s,s.pendingProps.children,n),s.child;case 12:return Vt(t,s,s.pendingProps.children,n),s.child;case 10:return a=s.pendingProps,An(s,s.type,a.value),Vt(t,s,a.children,n),s.child;case 9:return r=s.type._context,a=s.pendingProps.children,na(s),r=Pt(r),a=a(r),s.flags|=1,Vt(t,s,a,n),s.child;case 14:return Cm(t,s,s.type,s.pendingProps,n);case 15:return Sm(t,s,s.type,s.pendingProps,n);case 19:return Um(t,s,n);case 31:return Nh(t,s,n);case 22:return Am(t,s,n,s.pendingProps);case 24:return na(s),a=Pt(Rt),t===null?(r=yo(),r===null&&(r=ut,c=bo(),r.pooledCache=c,c.refCount++,c!==null&&(r.pooledCacheLanes|=n),r=c),s.memoizedState={parent:a,cache:r},No(s),An(s,Rt,r)):((t.lanes&n)!==0&&(ko(t,s),Nl(s,null,null,n),jl()),r=t.memoizedState,c=s.memoizedState,r.parent!==a?(r={parent:a,cache:a},s.memoizedState=r,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=r),An(s,Rt,a)):(a=c.cache,An(s,Rt,a),a!==r.cache&&go(s,[Rt],n,!0))),Vt(t,s,s.pendingProps.children,n),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function on(t){t.flags|=4}function ac(t,s,n,a,r){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(cx())t.flags|=8192;else throw ia=Ci,jo}else t.flags&=-16777217}function Im(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Kx(s))if(cx())t.flags|=8192;else throw ia=Ci,jo}function Pi(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?de():536870912,t.lanes|=s,qa|=s)}function Dl(t,s){if(!Qe)switch(t.tailMode){case"hidden":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function ht(t){var s=t.alternate!==null&&t.alternate.child===t.child,n=0,a=0;if(s)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags&65011712,a|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags,a|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=a,t.childLanes=n,s}function wh(t,s,n){var a=s.pendingProps;switch(mo(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(s),null;case 1:return ht(s),null;case 3:return n=s.stateNode,a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),nn(Rt),Ae(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Sa(s)?on(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,po())),ht(s),null;case 26:var r=s.type,c=s.memoizedState;return t===null?(on(s),c!==null?(ht(s),Im(s,c)):(ht(s),ac(s,r,null,a,n))):c?c!==t.memoizedState?(on(s),ht(s),Im(s,c)):(ht(s),s.flags&=-16777217):(t=t.memoizedProps,t!==a&&on(s),ht(s),ac(s,r,t,a,n)),null;case 27:if(St(s),n=b.current,r=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==a&&on(s);else{if(!a){if(s.stateNode===null)throw Error(o(166));return ht(s),null}t=xe.current,Sa(s)?fu(s):(t=Fx(r,a,n),s.stateNode=t,on(s))}return ht(s),null;case 5:if(St(s),r=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==a&&on(s);else{if(!a){if(s.stateNode===null)throw Error(o(166));return ht(s),null}if(c=xe.current,Sa(s))fu(s);else{var h=nr(b.current);switch(c){case 1:c=h.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:c=h.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":c=h.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":c=h.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":c=h.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof a.is=="string"?h.createElement("select",{is:a.is}):h.createElement("select"),a.multiple?c.multiple=!0:a.size&&(c.size=a.size);break;default:c=typeof a.is=="string"?h.createElement(r,{is:a.is}):h.createElement(r)}}c[mt]=s,c[xt]=a;e:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)c.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=c;e:switch(Ft(c,r,a),r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&on(s)}}return ht(s),ac(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,n),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==a&&on(s);else{if(typeof a!="string"&&s.stateNode===null)throw Error(o(166));if(t=b.current,Sa(s)){if(t=s.stateNode,n=s.memoizedProps,a=null,r=zt,r!==null)switch(r.tag){case 27:case 5:a=r.memoizedProps}t[mt]=s,t=!!(t.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||Ox(t.nodeValue,n)),t||Sn(s,!0)}else t=nr(t).createTextNode(a),t[mt]=s,s.stateNode=t}return ht(s),null;case 31:if(n=s.memoizedState,t===null||t.memoizedState!==null){if(a=Sa(s),n!==null){if(t===null){if(!a)throw Error(o(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[mt]=s}else ta(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ht(s),t=!1}else n=po(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return s.flags&256?(bs(s),s):(bs(s),null);if((s.flags&128)!==0)throw Error(o(558))}return ht(s),null;case 13:if(a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=Sa(s),a!==null&&a.dehydrated!==null){if(t===null){if(!r)throw Error(o(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(o(317));r[mt]=s}else ta(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ht(s),r=!1}else r=po(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return s.flags&256?(bs(s),s):(bs(s),null)}return bs(s),(s.flags&128)!==0?(s.lanes=n,s):(n=a!==null,t=t!==null&&t.memoizedState!==null,n&&(a=s.child,r=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(r=a.alternate.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==r&&(a.flags|=2048)),n!==t&&n&&(s.child.flags|=8192),Pi(s,s.updateQueue),ht(s),null);case 4:return Ae(),t===null&&Sc(s.stateNode.containerInfo),ht(s),null;case 10:return nn(s.type),ht(s),null;case 19:if(J(wt),a=s.memoizedState,a===null)return ht(s),null;if(r=(s.flags&128)!==0,c=a.rendering,c===null)if(r)Dl(a,!1);else{if(kt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(c=Ri(t),c!==null){for(s.flags|=128,Dl(a,!1),t=c.updateQueue,s.updateQueue=t,Pi(s,t),s.subtreeFlags=0,t=n,n=s.child;n!==null;)uu(n,t),n=n.sibling;return Q(wt,wt.current&1|2),Qe&&tn(s,a.treeForkCount),s.child}t=t.sibling}a.tail!==null&&tt()>Yi&&(s.flags|=128,r=!0,Dl(a,!1),s.lanes=4194304)}else{if(!r)if(t=Ri(c),t!==null){if(s.flags|=128,r=!0,t=t.updateQueue,s.updateQueue=t,Pi(s,t),Dl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!c.alternate&&!Qe)return ht(s),null}else 2*tt()-a.renderingStartTime>Yi&&n!==536870912&&(s.flags|=128,r=!0,Dl(a,!1),s.lanes=4194304);a.isBackwards?(c.sibling=s.child,s.child=c):(t=a.last,t!==null?t.sibling=c:s.child=c,a.last=c)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=tt(),t.sibling=null,n=wt.current,Q(wt,r?n&1|2:n&1),Qe&&tn(s,a.treeForkCount),t):(ht(s),null);case 22:case 23:return bs(s),Ao(),a=s.memoizedState!==null,t!==null?t.memoizedState!==null!==a&&(s.flags|=8192):a&&(s.flags|=8192),a?(n&536870912)!==0&&(s.flags&128)===0&&(ht(s),s.subtreeFlags&6&&(s.flags|=8192)):ht(s),n=s.updateQueue,n!==null&&Pi(s,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),a=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==n&&(s.flags|=2048),t!==null&&J(aa),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),s.memoizedState.cache!==n&&(s.flags|=2048),nn(Rt),ht(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function Ch(t,s){switch(mo(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return nn(Rt),Ae(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return St(s),null;case 31:if(s.memoizedState!==null){if(bs(s),s.alternate===null)throw Error(o(340));ta()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(bs(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(o(340));ta()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return J(wt),null;case 4:return Ae(),null;case 10:return nn(s.type),null;case 22:case 23:return bs(s),Ao(),t!==null&&J(aa),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return nn(Rt),null;case 25:return null;default:return null}}function _m(t,s){switch(mo(s),s.tag){case 3:nn(Rt),Ae();break;case 26:case 27:case 5:St(s);break;case 4:Ae();break;case 31:s.memoizedState!==null&&bs(s);break;case 13:bs(s);break;case 19:J(wt);break;case 10:nn(s.type);break;case 22:case 23:bs(s),Ao(),t!==null&&J(aa);break;case 24:nn(Rt)}}function Rl(t,s){try{var n=s.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var r=a.next;n=r;do{if((n.tag&t)===t){a=void 0;var c=n.create,h=n.inst;a=c(),h.destroy=a}n=n.next}while(n!==r)}}catch(S){nt(s,s.return,S)}}function On(t,s,n){try{var a=s.updateQueue,r=a!==null?a.lastEffect:null;if(r!==null){var c=r.next;a=c;do{if((a.tag&t)===t){var h=a.inst,S=h.destroy;if(S!==void 0){h.destroy=void 0,r=s;var $=n,ee=S;try{ee()}catch(re){nt(r,$,re)}}}a=a.next}while(a!==c)}}catch(re){nt(s,s.return,re)}}function qm(t){var s=t.updateQueue;if(s!==null){var n=t.stateNode;try{Ru(s,n)}catch(a){nt(t,t.return,a)}}}function $m(t,s,n){n.props=ca(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(a){nt(t,s,a)}}function El(t,s){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var a=t.stateNode;break;case 30:a=t.stateNode;break;default:a=t.stateNode}typeof n=="function"?t.refCleanup=n(a):n.current=a}}catch(r){nt(t,s,r)}}function Ys(t,s){var n=t.ref,a=t.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(r){nt(t,s,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){nt(t,s,r)}else n.current=null}function zm(t){var s=t.type,n=t.memoizedProps,a=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(r){nt(t,t.return,r)}}function lc(t,s,n){try{var a=t.stateNode;Yh(a,t.type,n,s),a[xt]=s}catch(r){nt(t,t.return,r)}}function Pm(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&$n(t.type)||t.tag===4}function ic(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Pm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&$n(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rc(t,s,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,s):(s=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,s.appendChild(t),n=n._reactRootContainer,n!=null||s.onclick!==null||(s.onclick=Ks));else if(a!==4&&(a===27&&$n(t.type)&&(n=t.stateNode,s=null),t=t.child,t!==null))for(rc(t,s,n),t=t.sibling;t!==null;)rc(t,s,n),t=t.sibling}function Vi(t,s,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?n.insertBefore(t,s):n.appendChild(t);else if(a!==4&&(a===27&&$n(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Vi(t,s,n),t=t.sibling;t!==null;)Vi(t,s,n),t=t.sibling}function Vm(t){var s=t.stateNode,n=t.memoizedProps;try{for(var a=t.type,r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Ft(s,a,n),s[mt]=t,s[xt]=n}catch(c){nt(t,t.return,c)}}var cn=!1,Mt=!1,oc=!1,Fm=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function Sh(t,s){if(t=t.containerInfo,Rc=dr,t=su(t),eo(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var r=a.anchorOffset,c=a.focusNode;a=a.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var h=0,S=-1,$=-1,ee=0,re=0,me=t,se=null;t:for(;;){for(var le;me!==n||r!==0&&me.nodeType!==3||(S=h+r),me!==c||a!==0&&me.nodeType!==3||($=h+a),me.nodeType===3&&(h+=me.nodeValue.length),(le=me.firstChild)!==null;)se=me,me=le;for(;;){if(me===t)break t;if(se===n&&++ee===r&&(S=h),se===c&&++re===a&&($=h),(le=me.nextSibling)!==null)break;me=se,se=me.parentNode}me=le}n=S===-1||$===-1?null:{start:S,end:$}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ec={focusedElem:t,selectionRange:n},dr=!1,Lt=s;Lt!==null;)if(s=Lt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Lt=t;else for(;Lt!==null;){switch(s=Lt,c=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&c!==null){t=void 0,n=s,r=c.memoizedProps,c=c.memoizedState,a=n.stateNode;try{var Re=ca(n.type,r);t=a.getSnapshotBeforeUpdate(Re,c),a.__reactInternalSnapshotBeforeUpdate=t}catch(Le){nt(n,n.return,Le)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,n=t.nodeType,n===9)Oc(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Oc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=s.sibling,t!==null){t.return=s.return,Lt=t;break}Lt=s.return}}function Hm(t,s,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:un(t,n),a&4&&Rl(5,n);break;case 1:if(un(t,n),a&4)if(t=n.stateNode,s===null)try{t.componentDidMount()}catch(h){nt(n,n.return,h)}else{var r=ca(n.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(r,s,t.__reactInternalSnapshotBeforeUpdate)}catch(h){nt(n,n.return,h)}}a&64&&qm(n),a&512&&El(n,n.return);break;case 3:if(un(t,n),a&64&&(t=n.updateQueue,t!==null)){if(s=null,n.child!==null)switch(n.child.tag){case 27:case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}try{Ru(t,s)}catch(h){nt(n,n.return,h)}}break;case 27:s===null&&a&4&&Vm(n);case 26:case 5:un(t,n),s===null&&a&4&&zm(n),a&512&&El(n,n.return);break;case 12:un(t,n);break;case 31:un(t,n),a&4&&Qm(t,n);break;case 13:un(t,n),a&4&&Xm(t,n),a&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=Uh.bind(null,n),tf(t,n))));break;case 22:if(a=n.memoizedState!==null||cn,!a){s=s!==null&&s.memoizedState!==null||Mt,r=cn;var c=Mt;cn=a,(Mt=s)&&!c?mn(t,n,(n.subtreeFlags&8772)!==0):un(t,n),cn=r,Mt=c}break;case 30:break;default:un(t,n)}}function Gm(t){var s=t.alternate;s!==null&&(t.alternate=null,Gm(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&xa(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var gt=null,as=!1;function dn(t,s,n){for(n=n.child;n!==null;)Ym(t,s,n),n=n.sibling}function Ym(t,s,n){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(Kt,n)}catch{}switch(n.tag){case 26:Mt||Ys(n,s),dn(t,s,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Mt||Ys(n,s);var a=gt,r=as;$n(n.type)&&(gt=n.stateNode,as=!1),dn(t,s,n),ql(n.stateNode),gt=a,as=r;break;case 5:Mt||Ys(n,s);case 6:if(a=gt,r=as,gt=null,dn(t,s,n),gt=a,as=r,gt!==null)if(as)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(n.stateNode)}catch(c){nt(n,s,c)}else try{gt.removeChild(n.stateNode)}catch(c){nt(n,s,c)}break;case 18:gt!==null&&(as?(t=gt,qx(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Ya(t)):qx(gt,n.stateNode));break;case 4:a=gt,r=as,gt=n.stateNode.containerInfo,as=!0,dn(t,s,n),gt=a,as=r;break;case 0:case 11:case 14:case 15:On(2,n,s),Mt||On(4,n,s),dn(t,s,n);break;case 1:Mt||(Ys(n,s),a=n.stateNode,typeof a.componentWillUnmount=="function"&&$m(n,s,a)),dn(t,s,n);break;case 21:dn(t,s,n);break;case 22:Mt=(a=Mt)||n.memoizedState!==null,dn(t,s,n),Mt=a;break;default:dn(t,s,n)}}function Qm(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ya(t)}catch(n){nt(s,s.return,n)}}}function Xm(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ya(t)}catch(n){nt(s,s.return,n)}}function Ah(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Fm),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Fm),s;default:throw Error(o(435,t.tag))}}function Fi(t,s){var n=Ah(t);s.forEach(function(a){if(!n.has(a)){n.add(a);var r=Lh.bind(null,t,a);a.then(r,r)}})}function ls(t,s){var n=s.deletions;if(n!==null)for(var a=0;a<n.length;a++){var r=n[a],c=t,h=s,S=h;e:for(;S!==null;){switch(S.tag){case 27:if($n(S.type)){gt=S.stateNode,as=!1;break e}break;case 5:gt=S.stateNode,as=!1;break e;case 3:case 4:gt=S.stateNode.containerInfo,as=!0;break e}S=S.return}if(gt===null)throw Error(o(160));Ym(c,h,r),gt=null,as=!1,c=r.alternate,c!==null&&(c.return=null),r.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Zm(s,t),s=s.sibling}var zs=null;function Zm(t,s){var n=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ls(s,t),is(t),a&4&&(On(3,t,t.return),Rl(3,t),On(5,t,t.return));break;case 1:ls(s,t),is(t),a&512&&(Mt||n===null||Ys(n,n.return)),a&64&&cn&&(t=t.updateQueue,t!==null&&(a=t.callbacks,a!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var r=zs;if(ls(s,t),is(t),a&512&&(Mt||n===null||Ys(n,n.return)),a&4){var c=n!==null?n.memoizedState:null;if(a=t.memoizedState,n===null)if(a===null)if(t.stateNode===null){e:{a=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(a){case"title":c=r.getElementsByTagName("title")[0],(!c||c[Dt]||c[mt]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=r.createElement(a),r.head.insertBefore(c,r.querySelector("head > title"))),Ft(c,a,n),c[mt]=t,yt(c),a=c;break e;case"link":var h=Zx("link","href",r).get(a+(n.href||""));if(h){for(var S=0;S<h.length;S++)if(c=h[S],c.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&c.getAttribute("rel")===(n.rel==null?null:n.rel)&&c.getAttribute("title")===(n.title==null?null:n.title)&&c.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){h.splice(S,1);break t}}c=r.createElement(a),Ft(c,a,n),r.head.appendChild(c);break;case"meta":if(h=Zx("meta","content",r).get(a+(n.content||""))){for(S=0;S<h.length;S++)if(c=h[S],c.getAttribute("content")===(n.content==null?null:""+n.content)&&c.getAttribute("name")===(n.name==null?null:n.name)&&c.getAttribute("property")===(n.property==null?null:n.property)&&c.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&c.getAttribute("charset")===(n.charSet==null?null:n.charSet)){h.splice(S,1);break t}}c=r.createElement(a),Ft(c,a,n),r.head.appendChild(c);break;default:throw Error(o(468,a))}c[mt]=t,yt(c),a=c}t.stateNode=a}else Jx(r,t.type,t.stateNode);else t.stateNode=Xx(r,a,t.memoizedProps);else c!==a?(c===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):c.count--,a===null?Jx(r,t.type,t.stateNode):Xx(r,a,t.memoizedProps)):a===null&&t.stateNode!==null&&lc(t,t.memoizedProps,n.memoizedProps)}break;case 27:ls(s,t),is(t),a&512&&(Mt||n===null||Ys(n,n.return)),n!==null&&a&4&&lc(t,t.memoizedProps,n.memoizedProps);break;case 5:if(ls(s,t),is(t),a&512&&(Mt||n===null||Ys(n,n.return)),t.flags&32){r=t.stateNode;try{fa(r,"")}catch(Re){nt(t,t.return,Re)}}a&4&&t.stateNode!=null&&(r=t.memoizedProps,lc(t,r,n!==null?n.memoizedProps:r)),a&1024&&(oc=!0);break;case 6:if(ls(s,t),is(t),a&4){if(t.stateNode===null)throw Error(o(162));a=t.memoizedProps,n=t.stateNode;try{n.nodeValue=a}catch(Re){nt(t,t.return,Re)}}break;case 3:if(ir=null,r=zs,zs=ar(s.containerInfo),ls(s,t),zs=r,is(t),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Ya(s.containerInfo)}catch(Re){nt(t,t.return,Re)}oc&&(oc=!1,Jm(t));break;case 4:a=zs,zs=ar(t.stateNode.containerInfo),ls(s,t),is(t),zs=a;break;case 12:ls(s,t),is(t);break;case 31:ls(s,t),is(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Fi(t,a)));break;case 13:ls(s,t),is(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Gi=tt()),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Fi(t,a)));break;case 22:r=t.memoizedState!==null;var $=n!==null&&n.memoizedState!==null,ee=cn,re=Mt;if(cn=ee||r,Mt=re||$,ls(s,t),Mt=re,cn=ee,is(t),a&8192)e:for(s=t.stateNode,s._visibility=r?s._visibility&-2:s._visibility|1,r&&(n===null||$||cn||Mt||da(t)),n=null,s=t;;){if(s.tag===5||s.tag===26){if(n===null){$=n=s;try{if(c=$.stateNode,r)h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{S=$.stateNode;var me=$.memoizedProps.style,se=me!=null&&me.hasOwnProperty("display")?me.display:null;S.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(Re){nt($,$.return,Re)}}}else if(s.tag===6){if(n===null){$=s;try{$.stateNode.nodeValue=r?"":$.memoizedProps}catch(Re){nt($,$.return,Re)}}}else if(s.tag===18){if(n===null){$=s;try{var le=$.stateNode;r?$x(le,!0):$x($.stateNode,!1)}catch(Re){nt($,$.return,Re)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;n===s&&(n=null),s=s.return}n===s&&(n=null),s.sibling.return=s.return,s=s.sibling}a&4&&(a=t.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,Fi(t,n))));break;case 19:ls(s,t),is(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Fi(t,a)));break;case 30:break;case 21:break;default:ls(s,t),is(t)}}function is(t){var s=t.flags;if(s&2){try{for(var n,a=t.return;a!==null;){if(Pm(a)){n=a;break}a=a.return}if(n==null)throw Error(o(160));switch(n.tag){case 27:var r=n.stateNode,c=ic(t);Vi(t,c,r);break;case 5:var h=n.stateNode;n.flags&32&&(fa(h,""),n.flags&=-33);var S=ic(t);Vi(t,S,h);break;case 3:case 4:var $=n.stateNode.containerInfo,ee=ic(t);rc(t,ee,$);break;default:throw Error(o(161))}}catch(re){nt(t,t.return,re)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Jm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Jm(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function un(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Hm(t,s.alternate,s),s=s.sibling}function da(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:On(4,s,s.return),da(s);break;case 1:Ys(s,s.return);var n=s.stateNode;typeof n.componentWillUnmount=="function"&&$m(s,s.return,n),da(s);break;case 27:ql(s.stateNode);case 26:case 5:Ys(s,s.return),da(s);break;case 22:s.memoizedState===null&&da(s);break;case 30:da(s);break;default:da(s)}t=t.sibling}}function mn(t,s,n){for(n=n&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var a=s.alternate,r=t,c=s,h=c.flags;switch(c.tag){case 0:case 11:case 15:mn(r,c,n),Rl(4,c);break;case 1:if(mn(r,c,n),a=c,r=a.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(ee){nt(a,a.return,ee)}if(a=c,r=a.updateQueue,r!==null){var S=a.stateNode;try{var $=r.shared.hiddenCallbacks;if($!==null)for(r.shared.hiddenCallbacks=null,r=0;r<$.length;r++)Du($[r],S)}catch(ee){nt(a,a.return,ee)}}n&&h&64&&qm(c),El(c,c.return);break;case 27:Vm(c);case 26:case 5:mn(r,c,n),n&&a===null&&h&4&&zm(c),El(c,c.return);break;case 12:mn(r,c,n);break;case 31:mn(r,c,n),n&&h&4&&Qm(r,c);break;case 13:mn(r,c,n),n&&h&4&&Xm(r,c);break;case 22:c.memoizedState===null&&mn(r,c,n),El(c,c.return);break;case 30:break;default:mn(r,c,n)}s=s.sibling}}function cc(t,s){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&fl(n))}function dc(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&fl(t))}function Ps(t,s,n,a){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Km(t,s,n,a),s=s.sibling}function Km(t,s,n,a){var r=s.flags;switch(s.tag){case 0:case 11:case 15:Ps(t,s,n,a),r&2048&&Rl(9,s);break;case 1:Ps(t,s,n,a);break;case 3:Ps(t,s,n,a),r&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&fl(t)));break;case 12:if(r&2048){Ps(t,s,n,a),t=s.stateNode;try{var c=s.memoizedProps,h=c.id,S=c.onPostCommit;typeof S=="function"&&S(h,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch($){nt(s,s.return,$)}}else Ps(t,s,n,a);break;case 31:Ps(t,s,n,a);break;case 13:Ps(t,s,n,a);break;case 23:break;case 22:c=s.stateNode,h=s.alternate,s.memoizedState!==null?c._visibility&2?Ps(t,s,n,a):Tl(t,s):c._visibility&2?Ps(t,s,n,a):(c._visibility|=2,La(t,s,n,a,(s.subtreeFlags&10256)!==0||!1)),r&2048&&cc(h,s);break;case 24:Ps(t,s,n,a),r&2048&&dc(s.alternate,s);break;default:Ps(t,s,n,a)}}function La(t,s,n,a,r){for(r=r&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var c=t,h=s,S=n,$=a,ee=h.flags;switch(h.tag){case 0:case 11:case 15:La(c,h,S,$,r),Rl(8,h);break;case 23:break;case 22:var re=h.stateNode;h.memoizedState!==null?re._visibility&2?La(c,h,S,$,r):Tl(c,h):(re._visibility|=2,La(c,h,S,$,r)),r&&ee&2048&&cc(h.alternate,h);break;case 24:La(c,h,S,$,r),r&&ee&2048&&dc(h.alternate,h);break;default:La(c,h,S,$,r)}s=s.sibling}}function Tl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var n=t,a=s,r=a.flags;switch(a.tag){case 22:Tl(n,a),r&2048&&cc(a.alternate,a);break;case 24:Tl(n,a),r&2048&&dc(a.alternate,a);break;default:Tl(n,a)}s=s.sibling}}var Ml=8192;function Ia(t,s,n){if(t.subtreeFlags&Ml)for(t=t.child;t!==null;)Wm(t,s,n),t=t.sibling}function Wm(t,s,n){switch(t.tag){case 26:Ia(t,s,n),t.flags&Ml&&t.memoizedState!==null&&pf(n,zs,t.memoizedState,t.memoizedProps);break;case 5:Ia(t,s,n);break;case 3:case 4:var a=zs;zs=ar(t.stateNode.containerInfo),Ia(t,s,n),zs=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=Ml,Ml=16777216,Ia(t,s,n),Ml=a):Ia(t,s,n));break;default:Ia(t,s,n)}}function ex(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Ol(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];Lt=a,sx(a,t)}ex(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)tx(t),t=t.sibling}function tx(t){switch(t.tag){case 0:case 11:case 15:Ol(t),t.flags&2048&&On(9,t,t.return);break;case 3:Ol(t);break;case 12:Ol(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Hi(t)):Ol(t);break;default:Ol(t)}}function Hi(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];Lt=a,sx(a,t)}ex(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:On(8,s,s.return),Hi(s);break;case 22:n=s.stateNode,n._visibility&2&&(n._visibility&=-3,Hi(s));break;default:Hi(s)}t=t.sibling}}function sx(t,s){for(;Lt!==null;){var n=Lt;switch(n.tag){case 0:case 11:case 15:On(8,n,s);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:fl(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,Lt=a;else e:for(n=t;Lt!==null;){a=Lt;var r=a.sibling,c=a.return;if(Gm(a),a===n){Lt=null;break e}if(r!==null){r.return=c,Lt=r;break e}Lt=c}}}var Dh={getCacheForType:function(t){var s=Pt(Rt),n=s.data.get(t);return n===void 0&&(n=t(),s.data.set(t,n)),n},cacheSignal:function(){return Pt(Rt).controller.signal}},Rh=typeof WeakMap=="function"?WeakMap:Map,We=0,ut=null,Ve=null,He=0,st=0,vs=null,Bn=!1,_a=!1,uc=!1,xn=0,kt=0,Un=0,ua=0,mc=0,ys=0,qa=0,Bl=null,rs=null,xc=!1,Gi=0,nx=0,Yi=1/0,Qi=null,Ln=null,Bt=0,In=null,$a=null,pn=0,pc=0,hc=null,ax=null,Ul=0,fc=null;function js(){return(We&2)!==0&&He!==0?He&-He:B.T!==null?Nc():Wt()}function lx(){if(ys===0)if((He&536870912)===0||Qe){var t=k;k<<=1,(k&3932160)===0&&(k=262144),ys=t}else ys=536870912;return t=gs.current,t!==null&&(t.flags|=32),ys}function os(t,s,n){(t===ut&&(st===2||st===9)||t.cancelPendingCommit!==null)&&(za(t,0),_n(t,He,ys,!1)),be(t,n),((We&2)===0||t!==ut)&&(t===ut&&((We&2)===0&&(ua|=n),kt===4&&_n(t,He,ys,!1)),Qs(t))}function ix(t,s,n){if((We&6)!==0)throw Error(o(327));var a=!n&&(s&127)===0&&(s&t.expiredLanes)===0||Ce(t,s),r=a?Mh(t,s):bc(t,s,!0),c=a;do{if(r===0){_a&&!a&&_n(t,s,0,!1);break}else{if(n=t.current.alternate,c&&!Eh(n)){r=bc(t,s,!1),c=!1;continue}if(r===2){if(c=s,t.errorRecoveryDisabledLanes&c)var h=0;else h=t.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){s=h;e:{var S=t;r=Bl;var $=S.current.memoizedState.isDehydrated;if($&&(za(S,h).flags|=256),h=bc(S,h,!1),h!==2){if(uc&&!$){S.errorRecoveryDisabledLanes|=c,ua|=c,r=4;break e}c=rs,rs=r,c!==null&&(rs===null?rs=c:rs.push.apply(rs,c))}r=h}if(c=!1,r!==2)continue}}if(r===1){za(t,0),_n(t,s,0,!0);break}e:{switch(a=t,c=r,c){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:_n(a,s,ys,!Bn);break e;case 2:rs=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(r=Gi+300-tt(),10<r)){if(_n(a,s,ys,!Bn),fe(a,0,!0)!==0)break e;pn=s,a.timeoutHandle=Ix(rx.bind(null,a,n,rs,Qi,xc,s,ys,ua,qa,Bn,c,"Throttled",-0,0),r);break e}rx(a,n,rs,Qi,xc,s,ys,ua,qa,Bn,c,null,-0,0)}}break}while(!0);Qs(t)}function rx(t,s,n,a,r,c,h,S,$,ee,re,me,se,le){if(t.timeoutHandle=-1,me=s.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ks},Wm(s,c,me);var Re=(c&62914560)===c?Gi-tt():(c&4194048)===c?nx-tt():0;if(Re=hf(me,Re),Re!==null){pn=c,t.cancelPendingCommit=Re(hx.bind(null,t,s,c,n,a,r,h,S,$,re,me,null,se,le)),_n(t,c,h,!ee);return}}hx(t,s,c,n,a,r,h,S,$)}function Eh(t){for(var s=t;;){var n=s.tag;if((n===0||n===11||n===15)&&s.flags&16384&&(n=s.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var r=n[a],c=r.getSnapshot;r=r.value;try{if(!hs(c(),r))return!1}catch{return!1}}if(n=s.child,s.subtreeFlags&16384&&n!==null)n.return=s,s=n;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function _n(t,s,n,a){s&=~mc,s&=~ua,t.suspendedLanes|=s,t.pingedLanes&=~s,a&&(t.warmLanes|=s),a=t.expirationTimes;for(var r=s;0<r;){var c=31-At(r),h=1<<c;a[c]=-1,r&=~h}n!==0&&qt(t,n,s)}function Xi(){return(We&6)===0?(Ll(0),!1):!0}function gc(){if(Ve!==null){if(st===0)var t=Ve.return;else t=Ve,sn=sa=null,Oo(t),Ta=null,bl=0,t=Ve;for(;t!==null;)_m(t.alternate,t),t=t.return;Ve=null}}function za(t,s){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,Zh(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),pn=0,gc(),ut=t,Ve=n=en(t.current,null),He=s,st=0,vs=null,Bn=!1,_a=Ce(t,s),uc=!1,qa=ys=mc=ua=Un=kt=0,rs=Bl=null,xc=!1,(s&8)!==0&&(s|=s&32);var a=t.entangledLanes;if(a!==0)for(t=t.entanglements,a&=s;0<a;){var r=31-At(a),c=1<<r;s|=t[r],a&=~c}return xn=s,fi(),n}function ox(t,s){ze=null,B.H=Sl,s===Ea||s===wi?(s=wu(),st=3):s===jo?(s=wu(),st=4):st=s===Xo?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,vs=s,Ve===null&&(kt=1,_i(t,Es(s,t.current)))}function cx(){var t=gs.current;return t===null?!0:(He&4194048)===He?Bs===null:(He&62914560)===He||(He&536870912)!==0?t===Bs:!1}function dx(){var t=B.H;return B.H=Sl,t===null?Sl:t}function ux(){var t=B.A;return B.A=Dh,t}function Zi(){kt=4,Bn||(He&4194048)!==He&&gs.current!==null||(_a=!0),(Un&134217727)===0&&(ua&134217727)===0||ut===null||_n(ut,He,ys,!1)}function bc(t,s,n){var a=We;We|=2;var r=dx(),c=ux();(ut!==t||He!==s)&&(Qi=null,za(t,s)),s=!1;var h=kt;e:do try{if(st!==0&&Ve!==null){var S=Ve,$=vs;switch(st){case 8:gc(),h=6;break e;case 3:case 2:case 9:case 6:gs.current===null&&(s=!0);var ee=st;if(st=0,vs=null,Pa(t,S,$,ee),n&&_a){h=0;break e}break;default:ee=st,st=0,vs=null,Pa(t,S,$,ee)}}Th(),h=kt;break}catch(re){ox(t,re)}while(!0);return s&&t.shellSuspendCounter++,sn=sa=null,We=a,B.H=r,B.A=c,Ve===null&&(ut=null,He=0,fi()),h}function Th(){for(;Ve!==null;)mx(Ve)}function Mh(t,s){var n=We;We|=2;var a=dx(),r=ux();ut!==t||He!==s?(Qi=null,Yi=tt()+500,za(t,s)):_a=Ce(t,s);e:do try{if(st!==0&&Ve!==null){s=Ve;var c=vs;t:switch(st){case 1:st=0,vs=null,Pa(t,s,c,1);break;case 2:case 9:if(Nu(c)){st=0,vs=null,xx(s);break}s=function(){st!==2&&st!==9||ut!==t||(st=7),Qs(t)},c.then(s,s);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:Nu(c)?(st=0,vs=null,xx(s)):(st=0,vs=null,Pa(t,s,c,7));break;case 5:var h=null;switch(Ve.tag){case 26:h=Ve.memoizedState;case 5:case 27:var S=Ve;if(h?Kx(h):S.stateNode.complete){st=0,vs=null;var $=S.sibling;if($!==null)Ve=$;else{var ee=S.return;ee!==null?(Ve=ee,Ji(ee)):Ve=null}break t}}st=0,vs=null,Pa(t,s,c,5);break;case 6:st=0,vs=null,Pa(t,s,c,6);break;case 8:gc(),kt=6;break e;default:throw Error(o(462))}}Oh();break}catch(re){ox(t,re)}while(!0);return sn=sa=null,B.H=a,B.A=r,We=n,Ve!==null?0:(ut=null,He=0,fi(),kt)}function Oh(){for(;Ve!==null&&!_e();)mx(Ve)}function mx(t){var s=Lm(t.alternate,t,xn);t.memoizedProps=t.pendingProps,s===null?Ji(t):Ve=s}function xx(t){var s=t,n=s.alternate;switch(s.tag){case 15:case 0:s=Em(n,s,s.pendingProps,s.type,void 0,He);break;case 11:s=Em(n,s,s.pendingProps,s.type.render,s.ref,He);break;case 5:Oo(s);default:_m(n,s),s=Ve=uu(s,xn),s=Lm(n,s,xn)}t.memoizedProps=t.pendingProps,s===null?Ji(t):Ve=s}function Pa(t,s,n,a){sn=sa=null,Oo(s),Ta=null,bl=0;var r=s.return;try{if(jh(t,r,s,n,He)){kt=1,_i(t,Es(n,t.current)),Ve=null;return}}catch(c){if(r!==null)throw Ve=r,c;kt=1,_i(t,Es(n,t.current)),Ve=null;return}s.flags&32768?(Qe||a===1?t=!0:_a||(He&536870912)!==0?t=!1:(Bn=t=!0,(a===2||a===9||a===3||a===6)&&(a=gs.current,a!==null&&a.tag===13&&(a.flags|=16384))),px(s,t)):Ji(s)}function Ji(t){var s=t;do{if((s.flags&32768)!==0){px(s,Bn);return}t=s.return;var n=wh(s.alternate,s,xn);if(n!==null){Ve=n;return}if(s=s.sibling,s!==null){Ve=s;return}Ve=s=t}while(s!==null);kt===0&&(kt=5)}function px(t,s){do{var n=Ch(t.alternate,t);if(n!==null){n.flags&=32767,Ve=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!s&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=n}while(t!==null);kt=6,Ve=null}function hx(t,s,n,a,r,c,h,S,$){t.cancelPendingCommit=null;do Ki();while(Bt!==0);if((We&6)!==0)throw Error(o(327));if(s!==null){if(s===t.current)throw Error(o(177));if(c=s.lanes|s.childLanes,c|=lo,Xe(t,n,c,h,S,$),t===ut&&(Ve=ut=null,He=0),$a=s,In=t,pn=n,pc=c,hc=r,ax=a,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Ih(Cs,function(){return yx(),null})):(t.callbackNode=null,t.callbackPriority=0),a=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||a){a=B.T,B.T=null,r=I.p,I.p=2,h=We,We|=4;try{Sh(t,s,n)}finally{We=h,I.p=r,B.T=a}}Bt=1,fx(),gx(),bx()}}function fx(){if(Bt===1){Bt=0;var t=In,s=$a,n=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||n){n=B.T,B.T=null;var a=I.p;I.p=2;var r=We;We|=4;try{Zm(s,t);var c=Ec,h=su(t.containerInfo),S=c.focusedElem,$=c.selectionRange;if(h!==S&&S&&S.ownerDocument&&tu(S.ownerDocument.documentElement,S)){if($!==null&&eo(S)){var ee=$.start,re=$.end;if(re===void 0&&(re=ee),"selectionStart"in S)S.selectionStart=ee,S.selectionEnd=Math.min(re,S.value.length);else{var me=S.ownerDocument||document,se=me&&me.defaultView||window;if(se.getSelection){var le=se.getSelection(),Re=S.textContent.length,Le=Math.min($.start,Re),rt=$.end===void 0?Le:Math.min($.end,Re);!le.extend&&Le>rt&&(h=rt,rt=Le,Le=h);var Z=eu(S,Le),Y=eu(S,rt);if(Z&&Y&&(le.rangeCount!==1||le.anchorNode!==Z.node||le.anchorOffset!==Z.offset||le.focusNode!==Y.node||le.focusOffset!==Y.offset)){var W=me.createRange();W.setStart(Z.node,Z.offset),le.removeAllRanges(),Le>rt?(le.addRange(W),le.extend(Y.node,Y.offset)):(W.setEnd(Y.node,Y.offset),le.addRange(W))}}}}for(me=[],le=S;le=le.parentNode;)le.nodeType===1&&me.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<me.length;S++){var ue=me[S];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}dr=!!Rc,Ec=Rc=null}finally{We=r,I.p=a,B.T=n}}t.current=s,Bt=2}}function gx(){if(Bt===2){Bt=0;var t=In,s=$a,n=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||n){n=B.T,B.T=null;var a=I.p;I.p=2;var r=We;We|=4;try{Hm(t,s.alternate,s)}finally{We=r,I.p=a,B.T=n}}Bt=3}}function bx(){if(Bt===4||Bt===3){Bt=0,we();var t=In,s=$a,n=pn,a=ax;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Bt=5:(Bt=0,$a=In=null,vx(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(Ln=null),Gt(n),s=s.stateNode,ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(Kt,s,void 0,(s.current.flags&128)===128)}catch{}if(a!==null){s=B.T,r=I.p,I.p=2,B.T=null;try{for(var c=t.onRecoverableError,h=0;h<a.length;h++){var S=a[h];c(S.value,{componentStack:S.stack})}}finally{B.T=s,I.p=r}}(pn&3)!==0&&Ki(),Qs(t),r=t.pendingLanes,(n&261930)!==0&&(r&42)!==0?t===fc?Ul++:(Ul=0,fc=t):Ul=0,Ll(0)}}function vx(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,fl(s)))}function Ki(){return fx(),gx(),bx(),yx()}function yx(){if(Bt!==5)return!1;var t=In,s=pc;pc=0;var n=Gt(pn),a=B.T,r=I.p;try{I.p=32>n?32:n,B.T=null,n=hc,hc=null;var c=In,h=pn;if(Bt=0,$a=In=null,pn=0,(We&6)!==0)throw Error(o(331));var S=We;if(We|=4,tx(c.current),Km(c,c.current,h,n),We=S,Ll(0,!1),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(Kt,c)}catch{}return!0}finally{I.p=r,B.T=a,vx(t,s)}}function jx(t,s,n){s=Es(n,s),s=Qo(t.stateNode,s,2),t=En(t,s,2),t!==null&&(be(t,2),Qs(t))}function nt(t,s,n){if(t.tag===3)jx(t,t,n);else for(;s!==null;){if(s.tag===3){jx(s,t,n);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ln===null||!Ln.has(a))){t=Es(n,t),n=Nm(2),a=En(s,n,2),a!==null&&(km(n,a,s,t),be(a,2),Qs(a));break}}s=s.return}}function vc(t,s,n){var a=t.pingCache;if(a===null){a=t.pingCache=new Rh;var r=new Set;a.set(s,r)}else r=a.get(s),r===void 0&&(r=new Set,a.set(s,r));r.has(n)||(uc=!0,r.add(n),t=Bh.bind(null,t,s,n),s.then(t,t))}function Bh(t,s,n){var a=t.pingCache;a!==null&&a.delete(s),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,ut===t&&(He&n)===n&&(kt===4||kt===3&&(He&62914560)===He&&300>tt()-Gi?(We&2)===0&&za(t,0):mc|=n,qa===He&&(qa=0)),Qs(t)}function Nx(t,s){s===0&&(s=de()),t=Wn(t,s),t!==null&&(be(t,s),Qs(t))}function Uh(t){var s=t.memoizedState,n=0;s!==null&&(n=s.retryLane),Nx(t,n)}function Lh(t,s){var n=0;switch(t.tag){case 31:case 13:var a=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:a=t.stateNode;break;case 22:a=t.stateNode._retryCache;break;default:throw Error(o(314))}a!==null&&a.delete(s),Nx(t,n)}function Ih(t,s){return V(t,s)}var Wi=null,Va=null,yc=!1,er=!1,jc=!1,qn=0;function Qs(t){t!==Va&&t.next===null&&(Va===null?Wi=Va=t:Va=Va.next=t),er=!0,yc||(yc=!0,qh())}function Ll(t,s){if(!jc&&er){jc=!0;do for(var n=!1,a=Wi;a!==null;){if(t!==0){var r=a.pendingLanes;if(r===0)var c=0;else{var h=a.suspendedLanes,S=a.pingedLanes;c=(1<<31-At(42|t)+1)-1,c&=r&~(h&~S),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(n=!0,Sx(a,c))}else c=He,c=fe(a,a===ut?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(c&3)===0||Ce(a,c)||(n=!0,Sx(a,c));a=a.next}while(n);jc=!1}}function _h(){kx()}function kx(){er=yc=!1;var t=0;qn!==0&&Xh()&&(t=qn);for(var s=tt(),n=null,a=Wi;a!==null;){var r=a.next,c=wx(a,s);c===0?(a.next=null,n===null?Wi=r:n.next=r,r===null&&(Va=n)):(n=a,(t!==0||(c&3)!==0)&&(er=!0)),a=r}Bt!==0&&Bt!==5||Ll(t),qn!==0&&(qn=0)}function wx(t,s){for(var n=t.suspendedLanes,a=t.pingedLanes,r=t.expirationTimes,c=t.pendingLanes&-62914561;0<c;){var h=31-At(c),S=1<<h,$=r[h];$===-1?((S&n)===0||(S&a)!==0)&&(r[h]=Ke(S,s)):$<=s&&(t.expiredLanes|=S),c&=~S}if(s=ut,n=He,n=fe(t,t===s?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a=t.callbackNode,n===0||t===s&&(st===2||st===9)||t.cancelPendingCommit!==null)return a!==null&&a!==null&&ke(a),t.callbackNode=null,t.callbackPriority=0;if((n&3)===0||Ce(t,n)){if(s=n&-n,s===t.callbackPriority)return s;switch(a!==null&&ke(a),Gt(n)){case 2:case 8:n=Zs;break;case 32:n=Cs;break;case 268435456:n=ge;break;default:n=Cs}return a=Cx.bind(null,t),n=V(n,a),t.callbackPriority=s,t.callbackNode=n,s}return a!==null&&a!==null&&ke(a),t.callbackPriority=2,t.callbackNode=null,2}function Cx(t,s){if(Bt!==0&&Bt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Ki()&&t.callbackNode!==n)return null;var a=He;return a=fe(t,t===ut?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a===0?null:(ix(t,a,s),wx(t,tt()),t.callbackNode!=null&&t.callbackNode===n?Cx.bind(null,t):null)}function Sx(t,s){if(Ki())return null;ix(t,s,!0)}function qh(){Jh(function(){(We&6)!==0?V(qs,_h):kx()})}function Nc(){if(qn===0){var t=Da;t===0&&(t=D,D<<=1,(D&261888)===0&&(D=256)),qn=t}return qn}function Ax(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:oi(""+t)}function Dx(t,s){var n=s.ownerDocument.createElement("input");return n.name=s.name,n.value=s.value,t.id&&n.setAttribute("form",t.id),s.parentNode.insertBefore(n,s),t=new FormData(t),n.parentNode.removeChild(n),t}function $h(t,s,n,a,r){if(s==="submit"&&n&&n.stateNode===r){var c=Ax((r[xt]||null).action),h=a.submitter;h&&(s=(s=h[xt]||null)?Ax(s.formAction):h.getAttribute("formAction"),s!==null&&(c=s,h=null));var S=new mi("action","action",null,a,r);t.push({event:S,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(qn!==0){var $=h?Dx(r,h):new FormData(r);Po(n,{pending:!0,data:$,method:r.method,action:c},null,$)}}else typeof c=="function"&&(S.preventDefault(),$=h?Dx(r,h):new FormData(r),Po(n,{pending:!0,data:$,method:r.method,action:c},c,$))},currentTarget:r}]})}}for(var kc=0;kc<ao.length;kc++){var wc=ao[kc],zh=wc.toLowerCase(),Ph=wc[0].toUpperCase()+wc.slice(1);$s(zh,"on"+Ph)}$s(lu,"onAnimationEnd"),$s(iu,"onAnimationIteration"),$s(ru,"onAnimationStart"),$s("dblclick","onDoubleClick"),$s("focusin","onFocus"),$s("focusout","onBlur"),$s(ah,"onTransitionRun"),$s(lh,"onTransitionStart"),$s(ih,"onTransitionCancel"),$s(ou,"onTransitionEnd"),pa("onMouseEnter",["mouseout","mouseover"]),pa("onMouseLeave",["mouseout","mouseover"]),pa("onPointerEnter",["pointerout","pointerover"]),pa("onPointerLeave",["pointerout","pointerover"]),Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Il));function Rx(t,s){s=(s&4)!==0;for(var n=0;n<t.length;n++){var a=t[n],r=a.event;a=a.listeners;e:{var c=void 0;if(s)for(var h=a.length-1;0<=h;h--){var S=a[h],$=S.instance,ee=S.currentTarget;if(S=S.listener,$!==c&&r.isPropagationStopped())break e;c=S,r.currentTarget=ee;try{c(r)}catch(re){hi(re)}r.currentTarget=null,c=$}else for(h=0;h<a.length;h++){if(S=a[h],$=S.instance,ee=S.currentTarget,S=S.listener,$!==c&&r.isPropagationStopped())break e;c=S,r.currentTarget=ee;try{c(r)}catch(re){hi(re)}r.currentTarget=null,c=$}}}}function Fe(t,s){var n=s[Ss];n===void 0&&(n=s[Ss]=new Set);var a=t+"__bubble";n.has(a)||(Ex(s,t,2,!1),n.add(a))}function Cc(t,s,n){var a=0;s&&(a|=4),Ex(n,t,a,s)}var tr="_reactListening"+Math.random().toString(36).slice(2);function Sc(t){if(!t[tr]){t[tr]=!0,ss.forEach(function(n){n!=="selectionchange"&&(Vh.has(n)||Cc(n,!1,t),Cc(n,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[tr]||(s[tr]=!0,Cc("selectionchange",!1,s))}}function Ex(t,s,n,a){switch(l0(s)){case 2:var r=bf;break;case 8:r=vf;break;default:r=zc}n=r.bind(null,s,n,t),r=void 0,!Hr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(r=!0),a?r!==void 0?t.addEventListener(s,n,{capture:!0,passive:r}):t.addEventListener(s,n,!0):r!==void 0?t.addEventListener(s,n,{passive:r}):t.addEventListener(s,n,!1)}function Ac(t,s,n,a,r){var c=a;if((s&1)===0&&(s&2)===0&&a!==null)e:for(;;){if(a===null)return;var h=a.tag;if(h===3||h===4){var S=a.stateNode.containerInfo;if(S===r)break;if(h===4)for(h=a.return;h!==null;){var $=h.tag;if(($===3||$===4)&&h.stateNode.containerInfo===r)return;h=h.return}for(;S!==null;){if(h=Ie(S),h===null)return;if($=h.tag,$===5||$===6||$===26||$===27){a=c=h;continue e}S=S.parentNode}}a=a.return}Ud(function(){var ee=c,re=Vr(n),me=[];e:{var se=cu.get(t);if(se!==void 0){var le=mi,Re=t;switch(t){case"keypress":if(di(n)===0)break e;case"keydown":case"keyup":le=Lp;break;case"focusin":Re="focus",le=Xr;break;case"focusout":Re="blur",le=Xr;break;case"beforeblur":case"afterblur":le=Xr;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=_d;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=wp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=qp;break;case lu:case iu:case ru:le=Ap;break;case ou:le=zp;break;case"scroll":case"scrollend":le=Np;break;case"wheel":le=Vp;break;case"copy":case"cut":case"paste":le=Rp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=$d;break;case"toggle":case"beforetoggle":le=Hp}var Le=(s&4)!==0,rt=!Le&&(t==="scroll"||t==="scrollend"),Z=Le?se!==null?se+"Capture":null:se;Le=[];for(var Y=ee,W;Y!==null;){var ue=Y;if(W=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||W===null||Z===null||(ue=ll(Y,Z),ue!=null&&Le.push(_l(Y,ue,W))),rt)break;Y=Y.return}0<Le.length&&(se=new le(se,Re,null,n,re),me.push({event:se,listeners:Le}))}}if((s&7)===0){e:{if(se=t==="mouseover"||t==="pointerover",le=t==="mouseout"||t==="pointerout",se&&n!==Pr&&(Re=n.relatedTarget||n.fromElement)&&(Ie(Re)||Re[dt]))break e;if((le||se)&&(se=re.window===re?re:(se=re.ownerDocument)?se.defaultView||se.parentWindow:window,le?(Re=n.relatedTarget||n.toElement,le=ee,Re=Re?Ie(Re):null,Re!==null&&(rt=d(Re),Le=Re.tag,Re!==rt||Le!==5&&Le!==27&&Le!==6)&&(Re=null)):(le=null,Re=ee),le!==Re)){if(Le=_d,ue="onMouseLeave",Z="onMouseEnter",Y="mouse",(t==="pointerout"||t==="pointerover")&&(Le=$d,ue="onPointerLeave",Z="onPointerEnter",Y="pointer"),rt=le==null?se:Yt(le),W=Re==null?se:Yt(Re),se=new Le(ue,Y+"leave",le,n,re),se.target=rt,se.relatedTarget=W,ue=null,Ie(re)===ee&&(Le=new Le(Z,Y+"enter",Re,n,re),Le.target=W,Le.relatedTarget=rt,ue=Le),rt=ue,le&&Re)t:{for(Le=Fh,Z=le,Y=Re,W=0,ue=Z;ue;ue=Le(ue))W++;ue=0;for(var Oe=Y;Oe;Oe=Le(Oe))ue++;for(;0<W-ue;)Z=Le(Z),W--;for(;0<ue-W;)Y=Le(Y),ue--;for(;W--;){if(Z===Y||Y!==null&&Z===Y.alternate){Le=Z;break t}Z=Le(Z),Y=Le(Y)}Le=null}else Le=null;le!==null&&Tx(me,se,le,Le,!1),Re!==null&&rt!==null&&Tx(me,rt,Re,Le,!0)}}e:{if(se=ee?Yt(ee):window,le=se.nodeName&&se.nodeName.toLowerCase(),le==="select"||le==="input"&&se.type==="file")var Ze=Qd;else if(Gd(se))if(Xd)Ze=th;else{Ze=Wp;var Ee=Kp}else le=se.nodeName,!le||le.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ee&&zr(ee.elementType)&&(Ze=Qd):Ze=eh;if(Ze&&(Ze=Ze(t,ee))){Yd(me,Ze,n,re);break e}Ee&&Ee(t,se,ee),t==="focusout"&&ee&&se.type==="number"&&ee.memoizedProps.value!=null&&$r(se,"number",se.value)}switch(Ee=ee?Yt(ee):window,t){case"focusin":(Gd(Ee)||Ee.contentEditable==="true")&&(ya=Ee,to=ee,xl=null);break;case"focusout":xl=to=ya=null;break;case"mousedown":so=!0;break;case"contextmenu":case"mouseup":case"dragend":so=!1,nu(me,n,re);break;case"selectionchange":if(nh)break;case"keydown":case"keyup":nu(me,n,re)}var Pe;if(Jr)e:{switch(t){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else va?Fd(t,n)&&(Ge="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Ge="onCompositionStart");Ge&&(zd&&n.locale!=="ko"&&(va||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&va&&(Pe=Ld()):(kn=re,Gr="value"in kn?kn.value:kn.textContent,va=!0)),Ee=sr(ee,Ge),0<Ee.length&&(Ge=new qd(Ge,t,null,n,re),me.push({event:Ge,listeners:Ee}),Pe?Ge.data=Pe:(Pe=Hd(n),Pe!==null&&(Ge.data=Pe)))),(Pe=Yp?Qp(t,n):Xp(t,n))&&(Ge=sr(ee,"onBeforeInput"),0<Ge.length&&(Ee=new qd("onBeforeInput","beforeinput",null,n,re),me.push({event:Ee,listeners:Ge}),Ee.data=Pe)),$h(me,t,ee,n,re)}Rx(me,s)})}function _l(t,s,n){return{instance:t,listener:s,currentTarget:n}}function sr(t,s){for(var n=s+"Capture",a=[];t!==null;){var r=t,c=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||c===null||(r=ll(t,n),r!=null&&a.unshift(_l(t,r,c)),r=ll(t,s),r!=null&&a.push(_l(t,r,c))),t.tag===3)return a;t=t.return}return[]}function Fh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Tx(t,s,n,a,r){for(var c=s._reactName,h=[];n!==null&&n!==a;){var S=n,$=S.alternate,ee=S.stateNode;if(S=S.tag,$!==null&&$===a)break;S!==5&&S!==26&&S!==27||ee===null||($=ee,r?(ee=ll(n,c),ee!=null&&h.unshift(_l(n,ee,$))):r||(ee=ll(n,c),ee!=null&&h.push(_l(n,ee,$)))),n=n.return}h.length!==0&&t.push({event:s,listeners:h})}var Hh=/\r\n?/g,Gh=/\u0000|\uFFFD/g;function Mx(t){return(typeof t=="string"?t:""+t).replace(Hh,`
`).replace(Gh,"")}function Ox(t,s){return s=Mx(s),Mx(t)===s}function it(t,s,n,a,r,c){switch(n){case"children":typeof a=="string"?s==="body"||s==="textarea"&&a===""||fa(t,a):(typeof a=="number"||typeof a=="bigint")&&s!=="body"&&fa(t,""+a);break;case"className":ii(t,"class",a);break;case"tabIndex":ii(t,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":ii(t,n,a);break;case"style":Od(t,a,c);break;case"data":if(s!=="object"){ii(t,"data",a);break}case"src":case"href":if(a===""&&(s!=="a"||n!=="href")){t.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(n);break}a=oi(""+a),t.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(n==="formAction"?(s!=="input"&&it(t,s,"name",r.name,r,null),it(t,s,"formEncType",r.formEncType,r,null),it(t,s,"formMethod",r.formMethod,r,null),it(t,s,"formTarget",r.formTarget,r,null)):(it(t,s,"encType",r.encType,r,null),it(t,s,"method",r.method,r,null),it(t,s,"target",r.target,r,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(n);break}a=oi(""+a),t.setAttribute(n,a);break;case"onClick":a!=null&&(t.onclick=Ks);break;case"onScroll":a!=null&&Fe("scroll",t);break;case"onScrollEnd":a!=null&&Fe("scrollend",t);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(n=a.__html,n!=null){if(r.children!=null)throw Error(o(60));t.innerHTML=n}}break;case"multiple":t.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":t.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){t.removeAttribute("xlink:href");break}n=oi(""+a),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,""+a):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":a===!0?t.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,a):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?t.setAttribute(n,a):t.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?t.removeAttribute(n):t.setAttribute(n,a);break;case"popover":Fe("beforetoggle",t),Fe("toggle",t),li(t,"popover",a);break;case"xlinkActuate":Js(t,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Js(t,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Js(t,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Js(t,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Js(t,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Js(t,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Js(t,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Js(t,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Js(t,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":li(t,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=yp.get(n)||n,li(t,n,a))}}function Dc(t,s,n,a,r,c){switch(n){case"style":Od(t,a,c);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(n=a.__html,n!=null){if(r.children!=null)throw Error(o(60));t.innerHTML=n}}break;case"children":typeof a=="string"?fa(t,a):(typeof a=="number"||typeof a=="bigint")&&fa(t,""+a);break;case"onScroll":a!=null&&Fe("scroll",t);break;case"onScrollEnd":a!=null&&Fe("scrollend",t);break;case"onClick":a!=null&&(t.onclick=Ks);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wd.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),s=n.slice(2,r?n.length-7:void 0),c=t[xt]||null,c=c!=null?c[n]:null,typeof c=="function"&&t.removeEventListener(s,c,r),typeof a=="function")){typeof c!="function"&&c!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(s,a,r);break e}n in t?t[n]=a:a===!0?t.setAttribute(n,""):li(t,n,a)}}}function Ft(t,s,n){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",t),Fe("load",t);var a=!1,r=!1,c;for(c in n)if(n.hasOwnProperty(c)){var h=n[c];if(h!=null)switch(c){case"src":a=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:it(t,s,c,h,n,null)}}r&&it(t,s,"srcSet",n.srcSet,n,null),a&&it(t,s,"src",n.src,n,null);return;case"input":Fe("invalid",t);var S=c=h=r=null,$=null,ee=null;for(a in n)if(n.hasOwnProperty(a)){var re=n[a];if(re!=null)switch(a){case"name":r=re;break;case"type":h=re;break;case"checked":$=re;break;case"defaultChecked":ee=re;break;case"value":c=re;break;case"defaultValue":S=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(o(137,s));break;default:it(t,s,a,re,n,null)}}Rd(t,c,S,$,ee,h,r,!1);return;case"select":Fe("invalid",t),a=h=c=null;for(r in n)if(n.hasOwnProperty(r)&&(S=n[r],S!=null))switch(r){case"value":c=S;break;case"defaultValue":h=S;break;case"multiple":a=S;default:it(t,s,r,S,n,null)}s=c,n=h,t.multiple=!!a,s!=null?ha(t,!!a,s,!1):n!=null&&ha(t,!!a,n,!0);return;case"textarea":Fe("invalid",t),c=r=a=null;for(h in n)if(n.hasOwnProperty(h)&&(S=n[h],S!=null))switch(h){case"value":a=S;break;case"defaultValue":r=S;break;case"children":c=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(o(91));break;default:it(t,s,h,S,n,null)}Td(t,a,r,c);return;case"option":for($ in n)if(n.hasOwnProperty($)&&(a=n[$],a!=null))switch($){case"selected":t.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:it(t,s,$,a,n,null)}return;case"dialog":Fe("beforetoggle",t),Fe("toggle",t),Fe("cancel",t),Fe("close",t);break;case"iframe":case"object":Fe("load",t);break;case"video":case"audio":for(a=0;a<Il.length;a++)Fe(Il[a],t);break;case"image":Fe("error",t),Fe("load",t);break;case"details":Fe("toggle",t);break;case"embed":case"source":case"link":Fe("error",t),Fe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in n)if(n.hasOwnProperty(ee)&&(a=n[ee],a!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:it(t,s,ee,a,n,null)}return;default:if(zr(s)){for(re in n)n.hasOwnProperty(re)&&(a=n[re],a!==void 0&&Dc(t,s,re,a,n,void 0));return}}for(S in n)n.hasOwnProperty(S)&&(a=n[S],a!=null&&it(t,s,S,a,n,null))}function Yh(t,s,n,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,c=null,h=null,S=null,$=null,ee=null,re=null;for(le in n){var me=n[le];if(n.hasOwnProperty(le)&&me!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":$=me;default:a.hasOwnProperty(le)||it(t,s,le,null,a,me)}}for(var se in a){var le=a[se];if(me=n[se],a.hasOwnProperty(se)&&(le!=null||me!=null))switch(se){case"type":c=le;break;case"name":r=le;break;case"checked":ee=le;break;case"defaultChecked":re=le;break;case"value":h=le;break;case"defaultValue":S=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(o(137,s));break;default:le!==me&&it(t,s,se,le,a,me)}}qr(t,h,S,$,ee,re,c,r);return;case"select":le=h=S=se=null;for(c in n)if($=n[c],n.hasOwnProperty(c)&&$!=null)switch(c){case"value":break;case"multiple":le=$;default:a.hasOwnProperty(c)||it(t,s,c,null,a,$)}for(r in a)if(c=a[r],$=n[r],a.hasOwnProperty(r)&&(c!=null||$!=null))switch(r){case"value":se=c;break;case"defaultValue":S=c;break;case"multiple":h=c;default:c!==$&&it(t,s,r,c,a,$)}s=S,n=h,a=le,se!=null?ha(t,!!n,se,!1):!!a!=!!n&&(s!=null?ha(t,!!n,s,!0):ha(t,!!n,n?[]:"",!1));return;case"textarea":le=se=null;for(S in n)if(r=n[S],n.hasOwnProperty(S)&&r!=null&&!a.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:it(t,s,S,null,a,r)}for(h in a)if(r=a[h],c=n[h],a.hasOwnProperty(h)&&(r!=null||c!=null))switch(h){case"value":se=r;break;case"defaultValue":le=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(o(91));break;default:r!==c&&it(t,s,h,r,a,c)}Ed(t,se,le);return;case"option":for(var Re in n)if(se=n[Re],n.hasOwnProperty(Re)&&se!=null&&!a.hasOwnProperty(Re))switch(Re){case"selected":t.selected=!1;break;default:it(t,s,Re,null,a,se)}for($ in a)if(se=a[$],le=n[$],a.hasOwnProperty($)&&se!==le&&(se!=null||le!=null))switch($){case"selected":t.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:it(t,s,$,se,a,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in n)se=n[Le],n.hasOwnProperty(Le)&&se!=null&&!a.hasOwnProperty(Le)&&it(t,s,Le,null,a,se);for(ee in a)if(se=a[ee],le=n[ee],a.hasOwnProperty(ee)&&se!==le&&(se!=null||le!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(o(137,s));break;default:it(t,s,ee,se,a,le)}return;default:if(zr(s)){for(var rt in n)se=n[rt],n.hasOwnProperty(rt)&&se!==void 0&&!a.hasOwnProperty(rt)&&Dc(t,s,rt,void 0,a,se);for(re in a)se=a[re],le=n[re],!a.hasOwnProperty(re)||se===le||se===void 0&&le===void 0||Dc(t,s,re,se,a,le);return}}for(var Z in n)se=n[Z],n.hasOwnProperty(Z)&&se!=null&&!a.hasOwnProperty(Z)&&it(t,s,Z,null,a,se);for(me in a)se=a[me],le=n[me],!a.hasOwnProperty(me)||se===le||se==null&&le==null||it(t,s,me,se,a,le)}function Bx(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Qh(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var r=n[a],c=r.transferSize,h=r.initiatorType,S=r.duration;if(c&&S&&Bx(h)){for(h=0,S=r.responseEnd,a+=1;a<n.length;a++){var $=n[a],ee=$.startTime;if(ee>S)break;var re=$.transferSize,me=$.initiatorType;re&&Bx(me)&&($=$.responseEnd,h+=re*($<S?1:(S-ee)/($-ee)))}if(--a,s+=8*(c+h)/(r.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Rc=null,Ec=null;function nr(t){return t.nodeType===9?t:t.ownerDocument}function Ux(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lx(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Tc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Mc=null;function Xh(){var t=window.event;return t&&t.type==="popstate"?t===Mc?!1:(Mc=t,!0):(Mc=null,!1)}var Ix=typeof setTimeout=="function"?setTimeout:void 0,Zh=typeof clearTimeout=="function"?clearTimeout:void 0,_x=typeof Promise=="function"?Promise:void 0,Jh=typeof queueMicrotask=="function"?queueMicrotask:typeof _x<"u"?function(t){return _x.resolve(null).then(t).catch(Kh)}:Ix;function Kh(t){setTimeout(function(){throw t})}function $n(t){return t==="head"}function qx(t,s){var n=s,a=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(a===0){t.removeChild(r),Ya(s);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")ql(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,ql(n);for(var c=n.firstChild;c;){var h=c.nextSibling,S=c.nodeName;c[Dt]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&c.rel.toLowerCase()==="stylesheet"||n.removeChild(c),c=h}}else n==="body"&&ql(t.ownerDocument.body);n=r}while(n);Ya(s)}function $x(t,s){var n=t;t=0;do{var a=n.nextSibling;if(n.nodeType===1?s?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(s?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=a}while(n)}function Oc(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var n=s;switch(s=s.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Oc(n),xa(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function Wh(t,s,n,a){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!a&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(a){if(!t[Dt])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(c=t.getAttribute("rel"),c==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(c!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(c=t.getAttribute("src"),(c!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&c&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var c=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===c)return t}else return t;if(t=Us(t.nextSibling),t===null)break}return null}function ef(t,s,n){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Us(t.nextSibling),t===null))return null;return t}function zx(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Us(t.nextSibling),t===null))return null;return t}function Bc(t){return t.data==="$?"||t.data==="$~"}function Uc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function tf(t,s){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||n.readyState!=="loading")s();else{var a=function(){s(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),t._reactRetry=a}}function Us(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Lc=null;function Px(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(s===0)return Us(t.nextSibling);s--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||s++}t=t.nextSibling}return null}function Vx(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(s===0)return t;s--}else n!=="/$"&&n!=="/&"||s++}t=t.previousSibling}return null}function Fx(t,s,n){switch(s=nr(n),t){case"html":if(t=s.documentElement,!t)throw Error(o(452));return t;case"head":if(t=s.head,!t)throw Error(o(453));return t;case"body":if(t=s.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function ql(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);xa(t)}var Ls=new Map,Hx=new Set;function ar(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var hn=I.d;I.d={f:sf,r:nf,D:af,C:lf,L:rf,m:of,X:df,S:cf,M:uf};function sf(){var t=hn.f(),s=Xi();return t||s}function nf(t){var s=Ut(t);s!==null&&s.tag===5&&s.type==="form"?om(s):hn.r(t)}var Fa=typeof document>"u"?null:document;function Gx(t,s,n){var a=Fa;if(a&&typeof s=="string"&&s){var r=Ds(s);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Hx.has(r)||(Hx.add(r),t={rel:t,crossOrigin:n,href:s},a.querySelector(r)===null&&(s=a.createElement("link"),Ft(s,"link",t),yt(s),a.head.appendChild(s)))}}function af(t){hn.D(t),Gx("dns-prefetch",t,null)}function lf(t,s){hn.C(t,s),Gx("preconnect",t,s)}function rf(t,s,n){hn.L(t,s,n);var a=Fa;if(a&&t&&s){var r='link[rel="preload"][as="'+Ds(s)+'"]';s==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Ds(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Ds(n.imageSizes)+'"]')):r+='[href="'+Ds(t)+'"]';var c=r;switch(s){case"style":c=Ha(t);break;case"script":c=Ga(t)}Ls.has(c)||(t=R({rel:"preload",href:s==="image"&&n&&n.imageSrcSet?void 0:t,as:s},n),Ls.set(c,t),a.querySelector(r)!==null||s==="style"&&a.querySelector($l(c))||s==="script"&&a.querySelector(zl(c))||(s=a.createElement("link"),Ft(s,"link",t),yt(s),a.head.appendChild(s)))}}function of(t,s){hn.m(t,s);var n=Fa;if(n&&t){var a=s&&typeof s.as=="string"?s.as:"script",r='link[rel="modulepreload"][as="'+Ds(a)+'"][href="'+Ds(t)+'"]',c=r;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=Ga(t)}if(!Ls.has(c)&&(t=R({rel:"modulepreload",href:t},s),Ls.set(c,t),n.querySelector(r)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(zl(c)))return}a=n.createElement("link"),Ft(a,"link",t),yt(a),n.head.appendChild(a)}}}function cf(t,s,n){hn.S(t,s,n);var a=Fa;if(a&&t){var r=ps(a).hoistableStyles,c=Ha(t);s=s||"default";var h=r.get(c);if(!h){var S={loading:0,preload:null};if(h=a.querySelector($l(c)))S.loading=5;else{t=R({rel:"stylesheet",href:t,"data-precedence":s},n),(n=Ls.get(c))&&Ic(t,n);var $=h=a.createElement("link");yt($),Ft($,"link",t),$._p=new Promise(function(ee,re){$.onload=ee,$.onerror=re}),$.addEventListener("load",function(){S.loading|=1}),$.addEventListener("error",function(){S.loading|=2}),S.loading|=4,lr(h,s,a)}h={type:"stylesheet",instance:h,count:1,state:S},r.set(c,h)}}}function df(t,s){hn.X(t,s);var n=Fa;if(n&&t){var a=ps(n).hoistableScripts,r=Ga(t),c=a.get(r);c||(c=n.querySelector(zl(r)),c||(t=R({src:t,async:!0},s),(s=Ls.get(r))&&_c(t,s),c=n.createElement("script"),yt(c),Ft(c,"link",t),n.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},a.set(r,c))}}function uf(t,s){hn.M(t,s);var n=Fa;if(n&&t){var a=ps(n).hoistableScripts,r=Ga(t),c=a.get(r);c||(c=n.querySelector(zl(r)),c||(t=R({src:t,async:!0,type:"module"},s),(s=Ls.get(r))&&_c(t,s),c=n.createElement("script"),yt(c),Ft(c,"link",t),n.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},a.set(r,c))}}function Yx(t,s,n,a){var r=(r=b.current)?ar(r):null;if(!r)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(s=Ha(n.href),n=ps(r).hoistableStyles,a=n.get(s),a||(a={type:"style",instance:null,count:0,state:null},n.set(s,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Ha(n.href);var c=ps(r).hoistableStyles,h=c.get(t);if(h||(r=r.ownerDocument||r,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(t,h),(c=r.querySelector($l(t)))&&!c._p&&(h.instance=c,h.state.loading=5),Ls.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ls.set(t,n),c||mf(r,t,n,h.state))),s&&a===null)throw Error(o(528,""));return h}if(s&&a!==null)throw Error(o(529,""));return null;case"script":return s=n.async,n=n.src,typeof n=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ga(n),n=ps(r).hoistableScripts,a=n.get(s),a||(a={type:"script",instance:null,count:0,state:null},n.set(s,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Ha(t){return'href="'+Ds(t)+'"'}function $l(t){return'link[rel="stylesheet"]['+t+"]"}function Qx(t){return R({},t,{"data-precedence":t.precedence,precedence:null})}function mf(t,s,n,a){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?a.loading=1:(s=t.createElement("link"),a.preload=s,s.addEventListener("load",function(){return a.loading|=1}),s.addEventListener("error",function(){return a.loading|=2}),Ft(s,"link",n),yt(s),t.head.appendChild(s))}function Ga(t){return'[src="'+Ds(t)+'"]'}function zl(t){return"script[async]"+t}function Xx(t,s,n){if(s.count++,s.instance===null)switch(s.type){case"style":var a=t.querySelector('style[data-href~="'+Ds(n.href)+'"]');if(a)return s.instance=a,yt(a),a;var r=R({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(t.ownerDocument||t).createElement("style"),yt(a),Ft(a,"style",r),lr(a,n.precedence,t),s.instance=a;case"stylesheet":r=Ha(n.href);var c=t.querySelector($l(r));if(c)return s.state.loading|=4,s.instance=c,yt(c),c;a=Qx(n),(r=Ls.get(r))&&Ic(a,r),c=(t.ownerDocument||t).createElement("link"),yt(c);var h=c;return h._p=new Promise(function(S,$){h.onload=S,h.onerror=$}),Ft(c,"link",a),s.state.loading|=4,lr(c,n.precedence,t),s.instance=c;case"script":return c=Ga(n.src),(r=t.querySelector(zl(c)))?(s.instance=r,yt(r),r):(a=n,(r=Ls.get(c))&&(a=R({},n),_c(a,r)),t=t.ownerDocument||t,r=t.createElement("script"),yt(r),Ft(r,"link",a),t.head.appendChild(r),s.instance=r);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(a=s.instance,s.state.loading|=4,lr(a,n.precedence,t));return s.instance}function lr(t,s,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=a.length?a[a.length-1]:null,c=r,h=0;h<a.length;h++){var S=a[h];if(S.dataset.precedence===s)c=S;else if(c!==r)break}c?c.parentNode.insertBefore(t,c.nextSibling):(s=n.nodeType===9?n.head:n,s.insertBefore(t,s.firstChild))}function Ic(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function _c(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var ir=null;function Zx(t,s,n){if(ir===null){var a=new Map,r=ir=new Map;r.set(n,a)}else r=ir,a=r.get(n),a||(a=new Map,r.set(n,a));if(a.has(t))return a;for(a.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var c=n[r];if(!(c[Dt]||c[mt]||t==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var h=c.getAttribute(s)||"";h=t+h;var S=a.get(h);S?S.push(c):a.set(h,[c])}}return a}function Jx(t,s,n){t=t.ownerDocument||t,t.head.insertBefore(n,s==="title"?t.querySelector("head > title"):null)}function xf(t,s,n){if(n===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Kx(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function pf(t,s,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var r=Ha(a.href),c=s.querySelector($l(r));if(c){s=c._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=rr.bind(t),s.then(t,t)),n.state.loading|=4,n.instance=c,yt(c);return}c=s.ownerDocument||s,a=Qx(a),(r=Ls.get(r))&&Ic(a,r),c=c.createElement("link"),yt(c);var h=c;h._p=new Promise(function(S,$){h.onload=S,h.onerror=$}),Ft(c,"link",a),n.instance=c}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,s),(s=n.state.preload)&&(n.state.loading&3)===0&&(t.count++,n=rr.bind(t),s.addEventListener("load",n),s.addEventListener("error",n))}}var qc=0;function hf(t,s){return t.stylesheets&&t.count===0&&cr(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var a=setTimeout(function(){if(t.stylesheets&&cr(t,t.stylesheets),t.unsuspend){var c=t.unsuspend;t.unsuspend=null,c()}},6e4+s);0<t.imgBytes&&qc===0&&(qc=62500*Qh());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&cr(t,t.stylesheets),t.unsuspend)){var c=t.unsuspend;t.unsuspend=null,c()}},(t.imgBytes>qc?50:800)+s);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(a),clearTimeout(r)}}:null}function rr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cr(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var or=null;function cr(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,or=new Map,s.forEach(ff,t),or=null,rr.call(t))}function ff(t,s){if(!(s.state.loading&4)){var n=or.get(t);if(n)var a=n.get(null);else{n=new Map,or.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<r.length;c++){var h=r[c];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(n.set(h.dataset.precedence,h),a=h)}a&&n.set(null,a)}r=s.instance,h=r.getAttribute("data-precedence"),c=n.get(h)||a,c===a&&n.set(null,r),n.set(h,r),this.count++,a=rr.bind(this),r.addEventListener("load",a),r.addEventListener("error",a),c?c.parentNode.insertBefore(r,c.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),s.state.loading|=4}}var Pl={$$typeof:q,Provider:null,Consumer:null,_currentValue:w,_currentValue2:w,_threadCount:0};function gf(t,s,n,a,r,c,h,S,$){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ue(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ue(0),this.hiddenUpdates=Ue(null),this.identifierPrefix=a,this.onUncaughtError=r,this.onCaughtError=c,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function Wx(t,s,n,a,r,c,h,S,$,ee,re,me){return t=new gf(t,s,n,h,$,ee,re,me,S),s=1,c===!0&&(s|=24),c=fs(3,null,null,s),t.current=c,c.stateNode=t,s=bo(),s.refCount++,t.pooledCache=s,s.refCount++,c.memoizedState={element:a,isDehydrated:n,cache:s},No(c),t}function e0(t){return t?(t=ka,t):ka}function t0(t,s,n,a,r,c){r=e0(r),a.context===null?a.context=r:a.pendingContext=r,a=Rn(s),a.payload={element:n},c=c===void 0?null:c,c!==null&&(a.callback=c),n=En(t,a,s),n!==null&&(os(n,t,s),yl(n,t,s))}function s0(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<s?n:s}}function $c(t,s){s0(t,s),(t=t.alternate)&&s0(t,s)}function n0(t){if(t.tag===13||t.tag===31){var s=Wn(t,67108864);s!==null&&os(s,t,67108864),$c(t,67108864)}}function a0(t){if(t.tag===13||t.tag===31){var s=js();s=je(s);var n=Wn(t,s);n!==null&&os(n,t,s),$c(t,s)}}var dr=!0;function bf(t,s,n,a){var r=B.T;B.T=null;var c=I.p;try{I.p=2,zc(t,s,n,a)}finally{I.p=c,B.T=r}}function vf(t,s,n,a){var r=B.T;B.T=null;var c=I.p;try{I.p=8,zc(t,s,n,a)}finally{I.p=c,B.T=r}}function zc(t,s,n,a){if(dr){var r=Pc(a);if(r===null)Ac(t,s,a,ur,n),i0(t,a);else if(jf(r,t,s,n,a))a.stopPropagation();else if(i0(t,a),s&4&&-1<yf.indexOf(t)){for(;r!==null;){var c=Ut(r);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var h=oe(c.pendingLanes);if(h!==0){var S=c;for(S.pendingLanes|=2,S.entangledLanes|=2;h;){var $=1<<31-At(h);S.entanglements[1]|=$,h&=~$}Qs(c),(We&6)===0&&(Yi=tt()+500,Ll(0))}}break;case 31:case 13:S=Wn(c,2),S!==null&&os(S,c,2),Xi(),$c(c,2)}if(c=Pc(a),c===null&&Ac(t,s,a,ur,n),c===r)break;r=c}r!==null&&a.stopPropagation()}else Ac(t,s,a,null,n)}}function Pc(t){return t=Vr(t),Vc(t)}var ur=null;function Vc(t){if(ur=null,t=Ie(t),t!==null){var s=d(t);if(s===null)t=null;else{var n=s.tag;if(n===13){if(t=x(s),t!==null)return t;t=null}else if(n===31){if(t=p(s),t!==null)return t;t=null}else if(n===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return ur=t,null}function l0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ws()){case qs:return 2;case Zs:return 8;case Cs:case us:return 32;case ge:return 268435456;default:return 32}default:return 32}}var Fc=!1,zn=null,Pn=null,Vn=null,Vl=new Map,Fl=new Map,Fn=[],yf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function i0(t,s){switch(t){case"focusin":case"focusout":zn=null;break;case"dragenter":case"dragleave":Pn=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":Vl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(s.pointerId)}}function Hl(t,s,n,a,r,c){return t===null||t.nativeEvent!==c?(t={blockedOn:s,domEventName:n,eventSystemFlags:a,nativeEvent:c,targetContainers:[r]},s!==null&&(s=Ut(s),s!==null&&n0(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,r!==null&&s.indexOf(r)===-1&&s.push(r),t)}function jf(t,s,n,a,r){switch(s){case"focusin":return zn=Hl(zn,t,s,n,a,r),!0;case"dragenter":return Pn=Hl(Pn,t,s,n,a,r),!0;case"mouseover":return Vn=Hl(Vn,t,s,n,a,r),!0;case"pointerover":var c=r.pointerId;return Vl.set(c,Hl(Vl.get(c)||null,t,s,n,a,r)),!0;case"gotpointercapture":return c=r.pointerId,Fl.set(c,Hl(Fl.get(c)||null,t,s,n,a,r)),!0}return!1}function r0(t){var s=Ie(t.target);if(s!==null){var n=d(s);if(n!==null){if(s=n.tag,s===13){if(s=x(n),s!==null){t.blockedOn=s,at(t.priority,function(){a0(n)});return}}else if(s===31){if(s=p(n),s!==null){t.blockedOn=s,at(t.priority,function(){a0(n)});return}}else if(s===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function mr(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var n=Pc(t.nativeEvent);if(n===null){n=t.nativeEvent;var a=new n.constructor(n.type,n);Pr=a,n.target.dispatchEvent(a),Pr=null}else return s=Ut(n),s!==null&&n0(s),t.blockedOn=n,!1;s.shift()}return!0}function o0(t,s,n){mr(t)&&n.delete(s)}function Nf(){Fc=!1,zn!==null&&mr(zn)&&(zn=null),Pn!==null&&mr(Pn)&&(Pn=null),Vn!==null&&mr(Vn)&&(Vn=null),Vl.forEach(o0),Fl.forEach(o0)}function xr(t,s){t.blockedOn===s&&(t.blockedOn=null,Fc||(Fc=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Nf)))}var pr=null;function c0(t){pr!==t&&(pr=t,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){pr===t&&(pr=null);for(var s=0;s<t.length;s+=3){var n=t[s],a=t[s+1],r=t[s+2];if(typeof a!="function"){if(Vc(a||n)===null)continue;break}var c=Ut(n);c!==null&&(t.splice(s,3),s-=3,Po(c,{pending:!0,data:r,method:n.method,action:a},a,r))}}))}function Ya(t){function s($){return xr($,t)}zn!==null&&xr(zn,t),Pn!==null&&xr(Pn,t),Vn!==null&&xr(Vn,t),Vl.forEach(s),Fl.forEach(s);for(var n=0;n<Fn.length;n++){var a=Fn[n];a.blockedOn===t&&(a.blockedOn=null)}for(;0<Fn.length&&(n=Fn[0],n.blockedOn===null);)r0(n),n.blockedOn===null&&Fn.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var r=n[a],c=n[a+1],h=r[xt]||null;if(typeof c=="function")h||c0(n);else if(h){var S=null;if(c&&c.hasAttribute("formAction")){if(r=c,h=c[xt]||null)S=h.formAction;else if(Vc(r)!==null)continue}else S=h.action;typeof S=="function"?n[a+1]=S:(n.splice(a,3),a-=3),c0(n)}}}function d0(){function t(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(h){return r=h})},focusReset:"manual",scroll:"manual"})}function s(){r!==null&&(r(),r=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),r!==null&&(r(),r=null)}}}function Hc(t){this._internalRoot=t}hr.prototype.render=Hc.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(o(409));var n=s.current,a=js();t0(n,a,t,s,null,null)},hr.prototype.unmount=Hc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;t0(t.current,2,null,t,null,null),Xi(),s[dt]=null}};function hr(t){this._internalRoot=t}hr.prototype.unstable_scheduleHydration=function(t){if(t){var s=Wt();t={blockedOn:null,target:t,priority:s};for(var n=0;n<Fn.length&&s!==0&&s<Fn[n].priority;n++);Fn.splice(n,0,t),n===0&&r0(t)}};var u0=m.version;if(u0!=="19.2.4")throw Error(o(527,u0,"19.2.4"));I.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=g(s),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var kf={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fr.isDisabled&&fr.supportsFiber)try{Kt=fr.inject(kf),ft=fr}catch{}}return Yl.createRoot=function(t,s){if(!u(t))throw Error(o(299));var n=!1,a="",r=bm,c=vm,h=ym;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onUncaughtError!==void 0&&(r=s.onUncaughtError),s.onCaughtError!==void 0&&(c=s.onCaughtError),s.onRecoverableError!==void 0&&(h=s.onRecoverableError)),s=Wx(t,1,!1,null,null,n,a,null,r,c,h,d0),t[dt]=s.current,Sc(t),new Hc(s)},Yl.hydrateRoot=function(t,s,n){if(!u(t))throw Error(o(299));var a=!1,r="",c=bm,h=vm,S=ym,$=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(S=n.onRecoverableError),n.formState!==void 0&&($=n.formState)),s=Wx(t,1,!0,s,n??null,a,r,$,c,h,S,d0),s.context=e0(null),n=s.current,a=js(),a=je(a),r=Rn(a),r.callback=null,En(n,r,a),n=a,s.current.lanes=n,be(s,n),Qs(s),t[dt]=s.current,Sc(t),new hr(s)},Yl.version="19.2.4",Yl}var j0;function Bf(){if(j0)return Qc.exports;j0=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(m){console.error(m)}}return l(),Qc.exports=Of(),Qc.exports}var Uf=Bf();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var N0="popstate";function Lf(l={}){function m(o,u){let{pathname:d,search:x,hash:p}=o.location;return cd("",{pathname:d,search:x,hash:p},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function i(o,u){return typeof u=="string"?u:ei(u)}return _f(m,i,null,l)}function bt(l,m){if(l===!1||l===null||typeof l>"u")throw new Error(m)}function _s(l,m){if(!l){typeof console<"u"&&console.warn(m);try{throw new Error(m)}catch{}}}function If(){return Math.random().toString(36).substring(2,10)}function k0(l,m){return{usr:l.state,key:l.key,idx:m}}function cd(l,m,i=null,o){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof m=="string"?tl(m):m,state:i,key:m&&m.key||o||If()}}function ei({pathname:l="/",search:m="",hash:i=""}){return m&&m!=="?"&&(l+=m.charAt(0)==="?"?m:"?"+m),i&&i!=="#"&&(l+=i.charAt(0)==="#"?i:"#"+i),l}function tl(l){let m={};if(l){let i=l.indexOf("#");i>=0&&(m.hash=l.substring(i),l=l.substring(0,i));let o=l.indexOf("?");o>=0&&(m.search=l.substring(o),l=l.substring(0,o)),l&&(m.pathname=l)}return m}function _f(l,m,i,o={}){let{window:u=document.defaultView,v5Compat:d=!1}=o,x=u.history,p="POP",f=null,g=v();g==null&&(g=0,x.replaceState({...x.state,idx:g},""));function v(){return(x.state||{idx:null}).idx}function R(){p="POP";let T=v(),y=T==null?null:T-g;g=T,f&&f({action:p,location:_.location,delta:y})}function O(T,y){p="PUSH";let j=cd(_.location,T,y);g=v()+1;let q=k0(j,g),A=_.createHref(j);try{x.pushState(q,"",A)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;u.location.assign(A)}d&&f&&f({action:p,location:_.location,delta:1})}function N(T,y){p="REPLACE";let j=cd(_.location,T,y);g=v();let q=k0(j,g),A=_.createHref(j);x.replaceState(q,"",A),d&&f&&f({action:p,location:_.location,delta:0})}function P(T){return qf(T)}let _={get action(){return p},get location(){return l(u,x)},listen(T){if(f)throw new Error("A history only accepts one active listener");return u.addEventListener(N0,R),f=T,()=>{u.removeEventListener(N0,R),f=null}},createHref(T){return m(u,T)},createURL:P,encodeLocation(T){let y=P(T);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:O,replace:N,go(T){return x.go(T)}};return _}function qf(l,m=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),bt(i,"No window.location.(origin|href) available to create URL");let o=typeof l=="string"?l:ei(l);return o=o.replace(/ $/,"%20"),!m&&o.startsWith("//")&&(o=i+o),new URL(o,i)}function P0(l,m,i="/"){return $f(l,m,i,!1)}function $f(l,m,i,o){let u=typeof m=="string"?tl(m):m,d=yn(u.pathname||"/",i);if(d==null)return null;let x=V0(l);zf(x);let p=null;for(let f=0;p==null&&f<x.length;++f){let g=Kf(d);p=Zf(x[f],g,o)}return p}function V0(l,m=[],i=[],o="",u=!1){let d=(x,p,f=u,g)=>{let v={relativePath:g===void 0?x.path||"":g,caseSensitive:x.caseSensitive===!0,childrenIndex:p,route:x};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(o)&&f)return;bt(v.relativePath.startsWith(o),`Absolute route path "${v.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(o.length)}let R=vn([o,v.relativePath]),O=i.concat(v);x.children&&x.children.length>0&&(bt(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${R}".`),V0(x.children,m,O,R,f)),!(x.path==null&&!x.index)&&m.push({path:R,score:Qf(R,x.index),routesMeta:O})};return l.forEach((x,p)=>{var f;if(x.path===""||!((f=x.path)!=null&&f.includes("?")))d(x,p);else for(let g of F0(x.path))d(x,p,!0,g)}),m}function F0(l){let m=l.split("/");if(m.length===0)return[];let[i,...o]=m,u=i.endsWith("?"),d=i.replace(/\?$/,"");if(o.length===0)return u?[d,""]:[d];let x=F0(o.join("/")),p=[];return p.push(...x.map(f=>f===""?d:[d,f].join("/"))),u&&p.push(...x),p.map(f=>l.startsWith("/")&&f===""?"/":f)}function zf(l){l.sort((m,i)=>m.score!==i.score?i.score-m.score:Xf(m.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}var Pf=/^:[\w-]+$/,Vf=3,Ff=2,Hf=1,Gf=10,Yf=-2,w0=l=>l==="*";function Qf(l,m){let i=l.split("/"),o=i.length;return i.some(w0)&&(o+=Yf),m&&(o+=Ff),i.filter(u=>!w0(u)).reduce((u,d)=>u+(Pf.test(d)?Vf:d===""?Hf:Gf),o)}function Xf(l,m){return l.length===m.length&&l.slice(0,-1).every((o,u)=>o===m[u])?l[l.length-1]-m[m.length-1]:0}function Zf(l,m,i=!1){let{routesMeta:o}=l,u={},d="/",x=[];for(let p=0;p<o.length;++p){let f=o[p],g=p===o.length-1,v=d==="/"?m:m.slice(d.length)||"/",R=Mr({path:f.relativePath,caseSensitive:f.caseSensitive,end:g},v),O=f.route;if(!R&&g&&i&&!o[o.length-1].route.index&&(R=Mr({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!R)return null;Object.assign(u,R.params),x.push({params:u,pathname:vn([d,R.pathname]),pathnameBase:sg(vn([d,R.pathnameBase])),route:O}),R.pathnameBase!=="/"&&(d=vn([d,R.pathnameBase]))}return x}function Mr(l,m){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[i,o]=Jf(l.path,l.caseSensitive,l.end),u=m.match(i);if(!u)return null;let d=u[0],x=d.replace(/(.)\/+$/,"$1"),p=u.slice(1);return{params:o.reduce((g,{paramName:v,isOptional:R},O)=>{if(v==="*"){let P=p[O]||"";x=d.slice(0,d.length-P.length).replace(/(.)\/+$/,"$1")}const N=p[O];return R&&!N?g[v]=void 0:g[v]=(N||"").replace(/%2F/g,"/"),g},{}),pathname:d,pathnameBase:x,pattern:l}}function Jf(l,m=!1,i=!0){_s(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let o=[],u="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(x,p,f)=>(o.push({paramName:p,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return l.endsWith("*")?(o.push({paramName:"*"}),u+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?u+="\\/*$":l!==""&&l!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,m?void 0:"i"),o]}function Kf(l){try{return l.split("/").map(m=>decodeURIComponent(m).replace(/\//g,"%2F")).join("/")}catch(m){return _s(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${m}).`),l}}function yn(l,m){if(m==="/")return l;if(!l.toLowerCase().startsWith(m.toLowerCase()))return null;let i=m.endsWith("/")?m.length-1:m.length,o=l.charAt(i);return o&&o!=="/"?null:l.slice(i)||"/"}var Wf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function eg(l,m="/"){let{pathname:i,search:o="",hash:u=""}=typeof l=="string"?tl(l):l,d;return i?(i=i.replace(/\/\/+/g,"/"),i.startsWith("/")?d=C0(i.substring(1),"/"):d=C0(i,m)):d=m,{pathname:d,search:ng(o),hash:ag(u)}}function C0(l,m){let i=m.replace(/\/+$/,"").split("/");return l.split("/").forEach(u=>{u===".."?i.length>1&&i.pop():u!=="."&&i.push(u)}),i.length>1?i.join("/"):"/"}function Kc(l,m,i,o){return`Cannot include a '${l}' character in a manually specified \`to.${m}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tg(l){return l.filter((m,i)=>i===0||m.route.path&&m.route.path.length>0)}function hd(l){let m=tg(l);return m.map((i,o)=>o===m.length-1?i.pathname:i.pathnameBase)}function fd(l,m,i,o=!1){let u;typeof l=="string"?u=tl(l):(u={...l},bt(!u.pathname||!u.pathname.includes("?"),Kc("?","pathname","search",u)),bt(!u.pathname||!u.pathname.includes("#"),Kc("#","pathname","hash",u)),bt(!u.search||!u.search.includes("#"),Kc("#","search","hash",u)));let d=l===""||u.pathname==="",x=d?"/":u.pathname,p;if(x==null)p=i;else{let R=m.length-1;if(!o&&x.startsWith("..")){let O=x.split("/");for(;O[0]==="..";)O.shift(),R-=1;u.pathname=O.join("/")}p=R>=0?m[R]:"/"}let f=eg(u,p),g=x&&x!=="/"&&x.endsWith("/"),v=(d||x===".")&&i.endsWith("/");return!f.pathname.endsWith("/")&&(g||v)&&(f.pathname+="/"),f}var vn=l=>l.join("/").replace(/\/\/+/g,"/"),sg=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),ng=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,ag=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l,lg=class{constructor(l,m,i,o=!1){this.status=l,this.statusText=m||"",this.internal=o,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function ig(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}function rg(l){return l.map(m=>m.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var H0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function G0(l,m){let i=l;if(typeof i!="string"||!Wf.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let o=i,u=!1;if(H0)try{let d=new URL(window.location.href),x=i.startsWith("//")?new URL(d.protocol+i):new URL(i),p=yn(x.pathname,m);x.origin===d.origin&&p!=null?i=p+x.search+x.hash:u=!0}catch{_s(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:u,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Y0=["POST","PUT","PATCH","DELETE"];new Set(Y0);var og=["GET",...Y0];new Set(og);var sl=C.createContext(null);sl.displayName="DataRouter";var Ur=C.createContext(null);Ur.displayName="DataRouterState";var cg=C.createContext(!1),Q0=C.createContext({isTransitioning:!1});Q0.displayName="ViewTransition";var dg=C.createContext(new Map);dg.displayName="Fetchers";var ug=C.createContext(null);ug.displayName="Await";var ks=C.createContext(null);ks.displayName="Navigation";var si=C.createContext(null);si.displayName="Location";var Vs=C.createContext({outlet:null,matches:[],isDataRoute:!1});Vs.displayName="Route";var gd=C.createContext(null);gd.displayName="RouteError";var X0="REACT_ROUTER_ERROR",mg="REDIRECT",xg="ROUTE_ERROR_RESPONSE";function pg(l){if(l.startsWith(`${X0}:${mg}:{`))try{let m=JSON.parse(l.slice(28));if(typeof m=="object"&&m&&typeof m.status=="number"&&typeof m.statusText=="string"&&typeof m.location=="string"&&typeof m.reloadDocument=="boolean"&&typeof m.replace=="boolean")return m}catch{}}function hg(l){if(l.startsWith(`${X0}:${xg}:{`))try{let m=JSON.parse(l.slice(40));if(typeof m=="object"&&m&&typeof m.status=="number"&&typeof m.statusText=="string")return new lg(m.status,m.statusText,m.data)}catch{}}function fg(l,{relative:m}={}){bt(nl(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:o}=C.useContext(ks),{hash:u,pathname:d,search:x}=ni(l,{relative:m}),p=d;return i!=="/"&&(p=d==="/"?i:vn([i,d])),o.createHref({pathname:p,search:x,hash:u})}function nl(){return C.useContext(si)!=null}function Fs(){return bt(nl(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(si).location}var Z0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function J0(l){C.useContext(ks).static||C.useLayoutEffect(l)}function Xs(){let{isDataRoute:l}=C.useContext(Vs);return l?Tg():gg()}function gg(){bt(nl(),"useNavigate() may be used only in the context of a <Router> component.");let l=C.useContext(sl),{basename:m,navigator:i}=C.useContext(ks),{matches:o}=C.useContext(Vs),{pathname:u}=Fs(),d=JSON.stringify(hd(o)),x=C.useRef(!1);return J0(()=>{x.current=!0}),C.useCallback((f,g={})=>{if(_s(x.current,Z0),!x.current)return;if(typeof f=="number"){i.go(f);return}let v=fd(f,JSON.parse(d),u,g.relative==="path");l==null&&m!=="/"&&(v.pathname=v.pathname==="/"?m:vn([m,v.pathname])),(g.replace?i.replace:i.push)(v,g.state,g)},[m,i,d,u,l])}var bg=C.createContext(null);function vg(l){let m=C.useContext(Vs).outlet;return C.useMemo(()=>m&&C.createElement(bg.Provider,{value:l},m),[m,l])}function ni(l,{relative:m}={}){let{matches:i}=C.useContext(Vs),{pathname:o}=Fs(),u=JSON.stringify(hd(i));return C.useMemo(()=>fd(l,JSON.parse(u),o,m==="path"),[l,u,o,m])}function yg(l,m){return K0(l,m)}function K0(l,m,i,o,u){var j;bt(nl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=C.useContext(ks),{matches:x}=C.useContext(Vs),p=x[x.length-1],f=p?p.params:{},g=p?p.pathname:"/",v=p?p.pathnameBase:"/",R=p&&p.route;{let q=R&&R.path||"";ep(g,!R||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let O=Fs(),N;if(m){let q=typeof m=="string"?tl(m):m;bt(v==="/"||((j=q.pathname)==null?void 0:j.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${q.pathname}" was given in the \`location\` prop.`),N=q}else N=O;let P=N.pathname||"/",_=P;if(v!=="/"){let q=v.replace(/^\//,"").split("/");_="/"+P.replace(/^\//,"").split("/").slice(q.length).join("/")}let T=P0(l,{pathname:_});_s(R||T!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),_s(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=Cg(T&&T.map(q=>Object.assign({},q,{params:Object.assign({},f,q.params),pathname:vn([v,d.encodeLocation?d.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?v:vn([v,d.encodeLocation?d.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),x,i,o,u);return m&&y?C.createElement(si.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},y):y}function jg(){let l=Eg(),m=ig(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),i=l instanceof Error?l.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},d={padding:"2px 4px",backgroundColor:o},x=null;return console.error("Error handled by React Router default ErrorBoundary:",l),x=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:d},"ErrorBoundary")," or"," ",C.createElement("code",{style:d},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},m),i?C.createElement("pre",{style:u},i):null,x)}var Ng=C.createElement(jg,null),W0=class extends C.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,m){return m.location!==l.location||m.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:m.error,location:m.location,revalidation:l.revalidation||m.revalidation}}componentDidCatch(l,m){this.props.onError?this.props.onError(l,m):console.error("React Router caught the following error during render",l)}render(){let l=this.state.error;if(this.context&&typeof l=="object"&&l&&"digest"in l&&typeof l.digest=="string"){const i=hg(l.digest);i&&(l=i)}let m=l!==void 0?C.createElement(Vs.Provider,{value:this.props.routeContext},C.createElement(gd.Provider,{value:l,children:this.props.component})):this.props.children;return this.context?C.createElement(kg,{error:l},m):m}};W0.contextType=cg;var Wc=new WeakMap;function kg({children:l,error:m}){let{basename:i}=C.useContext(ks);if(typeof m=="object"&&m&&"digest"in m&&typeof m.digest=="string"){let o=pg(m.digest);if(o){let u=Wc.get(m);if(u)throw u;let d=G0(o.location,i);if(H0&&!Wc.get(m))if(d.isExternal||o.reloadDocument)window.location.href=d.absoluteURL||d.to;else{const x=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(d.to,{replace:o.replace}));throw Wc.set(m,x),x}return C.createElement("meta",{httpEquiv:"refresh",content:`0;url=${d.absoluteURL||d.to}`})}}return l}function wg({routeContext:l,match:m,children:i}){let o=C.useContext(sl);return o&&o.static&&o.staticContext&&(m.route.errorElement||m.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=m.route.id),C.createElement(Vs.Provider,{value:l},i)}function Cg(l,m=[],i=null,o=null,u=null){if(l==null){if(!i)return null;if(i.errors)l=i.matches;else if(m.length===0&&!i.initialized&&i.matches.length>0)l=i.matches;else return null}let d=l,x=i==null?void 0:i.errors;if(x!=null){let v=d.findIndex(R=>R.route.id&&(x==null?void 0:x[R.route.id])!==void 0);bt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),d=d.slice(0,Math.min(d.length,v+1))}let p=!1,f=-1;if(i)for(let v=0;v<d.length;v++){let R=d[v];if((R.route.HydrateFallback||R.route.hydrateFallbackElement)&&(f=v),R.route.id){let{loaderData:O,errors:N}=i,P=R.route.loader&&!O.hasOwnProperty(R.route.id)&&(!N||N[R.route.id]===void 0);if(R.route.lazy||P){p=!0,f>=0?d=d.slice(0,f+1):d=[d[0]];break}}}let g=i&&o?(v,R)=>{var O,N;o(v,{location:i.location,params:((N=(O=i.matches)==null?void 0:O[0])==null?void 0:N.params)??{},unstable_pattern:rg(i.matches),errorInfo:R})}:void 0;return d.reduceRight((v,R,O)=>{let N,P=!1,_=null,T=null;i&&(N=x&&R.route.id?x[R.route.id]:void 0,_=R.route.errorElement||Ng,p&&(f<0&&O===0?(ep("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,T=null):f===O&&(P=!0,T=R.route.hydrateFallbackElement||null)));let y=m.concat(d.slice(0,O+1)),j=()=>{let q;return N?q=_:P?q=T:R.route.Component?q=C.createElement(R.route.Component,null):R.route.element?q=R.route.element:q=v,C.createElement(wg,{match:R,routeContext:{outlet:v,matches:y,isDataRoute:i!=null},children:q})};return i&&(R.route.ErrorBoundary||R.route.errorElement||O===0)?C.createElement(W0,{location:i.location,revalidation:i.revalidation,component:_,error:N,children:j(),routeContext:{outlet:null,matches:y,isDataRoute:!0},onError:g}):j()},null)}function bd(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sg(l){let m=C.useContext(sl);return bt(m,bd(l)),m}function Ag(l){let m=C.useContext(Ur);return bt(m,bd(l)),m}function Dg(l){let m=C.useContext(Vs);return bt(m,bd(l)),m}function vd(l){let m=Dg(l),i=m.matches[m.matches.length-1];return bt(i.route.id,`${l} can only be used on routes that contain a unique "id"`),i.route.id}function Rg(){return vd("useRouteId")}function Eg(){var o;let l=C.useContext(gd),m=Ag("useRouteError"),i=vd("useRouteError");return l!==void 0?l:(o=m.errors)==null?void 0:o[i]}function Tg(){let{router:l}=Sg("useNavigate"),m=vd("useNavigate"),i=C.useRef(!1);return J0(()=>{i.current=!0}),C.useCallback(async(u,d={})=>{_s(i.current,Z0),i.current&&(typeof u=="number"?await l.navigate(u):await l.navigate(u,{fromRouteId:m,...d}))},[l,m])}var S0={};function ep(l,m,i){!m&&!S0[l]&&(S0[l]=!0,_s(!1,i))}C.memo(Mg);function Mg({routes:l,future:m,state:i,onError:o}){return K0(l,void 0,i,o,m)}function Wa({to:l,replace:m,state:i,relative:o}){bt(nl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=C.useContext(ks);_s(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=C.useContext(Vs),{pathname:x}=Fs(),p=Xs(),f=fd(l,hd(d),x,o==="path"),g=JSON.stringify(f);return C.useEffect(()=>{p(JSON.parse(g),{replace:m,state:i,relative:o})},[p,g,o,m,i]),null}function Og(l){return vg(l.context)}function It(l){bt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Bg({basename:l="/",children:m=null,location:i,navigationType:o="POP",navigator:u,static:d=!1,unstable_useTransitions:x}){bt(!nl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=l.replace(/^\/*/,"/"),f=C.useMemo(()=>({basename:p,navigator:u,static:d,unstable_useTransitions:x,future:{}}),[p,u,d,x]);typeof i=="string"&&(i=tl(i));let{pathname:g="/",search:v="",hash:R="",state:O=null,key:N="default"}=i,P=C.useMemo(()=>{let _=yn(g,p);return _==null?null:{location:{pathname:_,search:v,hash:R,state:O,key:N},navigationType:o}},[p,g,v,R,O,N,o]);return _s(P!=null,`<Router basename="${p}"> is not able to match the URL "${g}${v}${R}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:C.createElement(ks.Provider,{value:f},C.createElement(si.Provider,{children:m,value:P}))}function Ug({children:l,location:m}){return yg(dd(l),m)}function dd(l,m=[]){let i=[];return C.Children.forEach(l,(o,u)=>{if(!C.isValidElement(o))return;let d=[...m,u];if(o.type===C.Fragment){i.push.apply(i,dd(o.props.children,d));return}bt(o.type===It,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bt(!o.props.index||!o.props.children,"An index route cannot have child routes.");let x={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(x.children=dd(o.props.children,d)),i.push(x)}),i}var Rr="get",Er="application/x-www-form-urlencoded";function Lr(l){return typeof HTMLElement<"u"&&l instanceof HTMLElement}function Lg(l){return Lr(l)&&l.tagName.toLowerCase()==="button"}function Ig(l){return Lr(l)&&l.tagName.toLowerCase()==="form"}function _g(l){return Lr(l)&&l.tagName.toLowerCase()==="input"}function qg(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function $g(l,m){return l.button===0&&(!m||m==="_self")&&!qg(l)}function ud(l=""){return new URLSearchParams(typeof l=="string"||Array.isArray(l)||l instanceof URLSearchParams?l:Object.keys(l).reduce((m,i)=>{let o=l[i];return m.concat(Array.isArray(o)?o.map(u=>[i,u]):[[i,o]])},[]))}function zg(l,m){let i=ud(l);return m&&m.forEach((o,u)=>{i.has(u)||m.getAll(u).forEach(d=>{i.append(u,d)})}),i}var br=null;function Pg(){if(br===null)try{new FormData(document.createElement("form"),0),br=!1}catch{br=!0}return br}var Vg=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ed(l){return l!=null&&!Vg.has(l)?(_s(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Er}"`),null):l}function Fg(l,m){let i,o,u,d,x;if(Ig(l)){let p=l.getAttribute("action");o=p?yn(p,m):null,i=l.getAttribute("method")||Rr,u=ed(l.getAttribute("enctype"))||Er,d=new FormData(l)}else if(Lg(l)||_g(l)&&(l.type==="submit"||l.type==="image")){let p=l.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=l.getAttribute("formaction")||p.getAttribute("action");if(o=f?yn(f,m):null,i=l.getAttribute("formmethod")||p.getAttribute("method")||Rr,u=ed(l.getAttribute("formenctype"))||ed(p.getAttribute("enctype"))||Er,d=new FormData(p,l),!Pg()){let{name:g,type:v,value:R}=l;if(v==="image"){let O=g?`${g}.`:"";d.append(`${O}x`,"0"),d.append(`${O}y`,"0")}else g&&d.append(g,R)}}else{if(Lr(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Rr,o=null,u=Er,x=l}return d&&u==="text/plain"&&(x=d,d=void 0),{action:o,method:i.toLowerCase(),encType:u,formData:d,body:x}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function yd(l,m){if(l===!1||l===null||typeof l>"u")throw new Error(m)}function Hg(l,m,i,o){let u=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return i?u.pathname.endsWith("/")?u.pathname=`${u.pathname}_.${o}`:u.pathname=`${u.pathname}.${o}`:u.pathname==="/"?u.pathname=`_root.${o}`:m&&yn(u.pathname,m)==="/"?u.pathname=`${m.replace(/\/$/,"")}/_root.${o}`:u.pathname=`${u.pathname.replace(/\/$/,"")}.${o}`,u}async function Gg(l,m){if(l.id in m)return m[l.id];try{let i=await import(l.module);return m[l.id]=i,i}catch(i){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Yg(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function Qg(l,m,i){let o=await Promise.all(l.map(async u=>{let d=m.routes[u.route.id];if(d){let x=await Gg(d,i);return x.links?x.links():[]}return[]}));return Kg(o.flat(1).filter(Yg).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function A0(l,m,i,o,u,d){let x=(f,g)=>i[g]?f.route.id!==i[g].route.id:!0,p=(f,g)=>{var v;return i[g].pathname!==f.pathname||((v=i[g].route.path)==null?void 0:v.endsWith("*"))&&i[g].params["*"]!==f.params["*"]};return d==="assets"?m.filter((f,g)=>x(f,g)||p(f,g)):d==="data"?m.filter((f,g)=>{var R;let v=o.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(x(f,g)||p(f,g))return!0;if(f.route.shouldRevalidate){let O=f.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:((R=i[0])==null?void 0:R.params)||{},nextUrl:new URL(l,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof O=="boolean")return O}return!0}):[]}function Xg(l,m,{includeHydrateFallback:i}={}){return Zg(l.map(o=>{let u=m.routes[o.route.id];if(!u)return[];let d=[u.module];return u.clientActionModule&&(d=d.concat(u.clientActionModule)),u.clientLoaderModule&&(d=d.concat(u.clientLoaderModule)),i&&u.hydrateFallbackModule&&(d=d.concat(u.hydrateFallbackModule)),u.imports&&(d=d.concat(u.imports)),d}).flat(1))}function Zg(l){return[...new Set(l)]}function Jg(l){let m={},i=Object.keys(l).sort();for(let o of i)m[o]=l[o];return m}function Kg(l,m){let i=new Set;return new Set(m),l.reduce((o,u)=>{let d=JSON.stringify(Jg(u));return i.has(d)||(i.add(d),o.push({key:d,link:u})),o},[])}function tp(){let l=C.useContext(sl);return yd(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function Wg(){let l=C.useContext(Ur);return yd(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var jd=C.createContext(void 0);jd.displayName="FrameworkContext";function sp(){let l=C.useContext(jd);return yd(l,"You must render this element inside a <HydratedRouter> element"),l}function eb(l,m){let i=C.useContext(jd),[o,u]=C.useState(!1),[d,x]=C.useState(!1),{onFocus:p,onBlur:f,onMouseEnter:g,onMouseLeave:v,onTouchStart:R}=m,O=C.useRef(null);C.useEffect(()=>{if(l==="render"&&x(!0),l==="viewport"){let _=y=>{y.forEach(j=>{x(j.isIntersecting)})},T=new IntersectionObserver(_,{threshold:.5});return O.current&&T.observe(O.current),()=>{T.disconnect()}}},[l]),C.useEffect(()=>{if(o){let _=setTimeout(()=>{x(!0)},100);return()=>{clearTimeout(_)}}},[o]);let N=()=>{u(!0)},P=()=>{u(!1),x(!1)};return i?l!=="intent"?[d,O,{}]:[d,O,{onFocus:Ql(p,N),onBlur:Ql(f,P),onMouseEnter:Ql(g,N),onMouseLeave:Ql(v,P),onTouchStart:Ql(R,N)}]:[!1,O,{}]}function Ql(l,m){return i=>{l&&l(i),i.defaultPrevented||m(i)}}function tb({page:l,...m}){let{router:i}=tp(),o=C.useMemo(()=>P0(i.routes,l,i.basename),[i.routes,l,i.basename]);return o?C.createElement(nb,{page:l,matches:o,...m}):null}function sb(l){let{manifest:m,routeModules:i}=sp(),[o,u]=C.useState([]);return C.useEffect(()=>{let d=!1;return Qg(l,m,i).then(x=>{d||u(x)}),()=>{d=!0}},[l,m,i]),o}function nb({page:l,matches:m,...i}){let o=Fs(),{future:u,manifest:d,routeModules:x}=sp(),{basename:p}=tp(),{loaderData:f,matches:g}=Wg(),v=C.useMemo(()=>A0(l,m,g,d,o,"data"),[l,m,g,d,o]),R=C.useMemo(()=>A0(l,m,g,d,o,"assets"),[l,m,g,d,o]),O=C.useMemo(()=>{if(l===o.pathname+o.search+o.hash)return[];let _=new Set,T=!1;if(m.forEach(j=>{var A;let q=d.routes[j.route.id];!q||!q.hasLoader||(!v.some(H=>H.route.id===j.route.id)&&j.route.id in f&&((A=x[j.route.id])!=null&&A.shouldRevalidate)||q.hasClientLoader?T=!0:_.add(j.route.id))}),_.size===0)return[];let y=Hg(l,p,u.unstable_trailingSlashAwareDataRequests,"data");return T&&_.size>0&&y.searchParams.set("_routes",m.filter(j=>_.has(j.route.id)).map(j=>j.route.id).join(",")),[y.pathname+y.search]},[p,u.unstable_trailingSlashAwareDataRequests,f,o,d,v,m,l,x]),N=C.useMemo(()=>Xg(R,d),[R,d]),P=sb(R);return C.createElement(C.Fragment,null,O.map(_=>C.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...i})),N.map(_=>C.createElement("link",{key:_,rel:"modulepreload",href:_,...i})),P.map(({key:_,link:T})=>C.createElement("link",{key:_,nonce:i.nonce,...T,crossOrigin:T.crossOrigin??i.crossOrigin})))}function ab(...l){return m=>{l.forEach(i=>{typeof i=="function"?i(m):i!=null&&(i.current=m)})}}var lb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lb&&(window.__reactRouterVersion="7.13.0")}catch{}function ib({basename:l,children:m,unstable_useTransitions:i,window:o}){let u=C.useRef();u.current==null&&(u.current=Lf({window:o,v5Compat:!0}));let d=u.current,[x,p]=C.useState({action:d.action,location:d.location}),f=C.useCallback(g=>{i===!1?p(g):C.startTransition(()=>p(g))},[i]);return C.useLayoutEffect(()=>d.listen(f),[d,f]),C.createElement(Bg,{basename:l,children:m,location:x.location,navigationType:x.action,navigator:d,unstable_useTransitions:i})}var np=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ap=C.forwardRef(function({onClick:m,discover:i="render",prefetch:o="none",relative:u,reloadDocument:d,replace:x,state:p,target:f,to:g,preventScrollReset:v,viewTransition:R,unstable_defaultShouldRevalidate:O,...N},P){let{basename:_,unstable_useTransitions:T}=C.useContext(ks),y=typeof g=="string"&&np.test(g),j=G0(g,_);g=j.to;let q=fg(g,{relative:u}),[A,H,U]=eb(o,N),L=db(g,{replace:x,state:p,target:f,preventScrollReset:v,relative:u,viewTransition:R,unstable_defaultShouldRevalidate:O,unstable_useTransitions:T});function F(ne){m&&m(ne),ne.defaultPrevented||L(ne)}let z=C.createElement("a",{...N,...U,href:j.absoluteURL||q,onClick:j.isExternal||d?m:F,ref:ab(P,H),target:f,"data-discover":!y&&i==="render"?"true":void 0});return A&&!y?C.createElement(C.Fragment,null,z,C.createElement(tb,{page:q})):z});ap.displayName="Link";var rb=C.forwardRef(function({"aria-current":m="page",caseSensitive:i=!1,className:o="",end:u=!1,style:d,to:x,viewTransition:p,children:f,...g},v){let R=ni(x,{relative:g.relative}),O=Fs(),N=C.useContext(Ur),{navigator:P,basename:_}=C.useContext(ks),T=N!=null&&fb(R)&&p===!0,y=P.encodeLocation?P.encodeLocation(R).pathname:R.pathname,j=O.pathname,q=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;i||(j=j.toLowerCase(),q=q?q.toLowerCase():null,y=y.toLowerCase()),q&&_&&(q=yn(q,_)||q);const A=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let H=j===y||!u&&j.startsWith(y)&&j.charAt(A)==="/",U=q!=null&&(q===y||!u&&q.startsWith(y)&&q.charAt(y.length)==="/"),L={isActive:H,isPending:U,isTransitioning:T},F=H?m:void 0,z;typeof o=="function"?z=o(L):z=[o,H?"active":null,U?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let ne=typeof d=="function"?d(L):d;return C.createElement(ap,{...g,"aria-current":F,className:z,ref:v,style:ne,to:x,viewTransition:p},typeof f=="function"?f(L):f)});rb.displayName="NavLink";var ob=C.forwardRef(({discover:l="render",fetcherKey:m,navigate:i,reloadDocument:o,replace:u,state:d,method:x=Rr,action:p,onSubmit:f,relative:g,preventScrollReset:v,viewTransition:R,unstable_defaultShouldRevalidate:O,...N},P)=>{let{unstable_useTransitions:_}=C.useContext(ks),T=pb(),y=hb(p,{relative:g}),j=x.toLowerCase()==="get"?"get":"post",q=typeof p=="string"&&np.test(p),A=H=>{if(f&&f(H),H.defaultPrevented)return;H.preventDefault();let U=H.nativeEvent.submitter,L=(U==null?void 0:U.getAttribute("formmethod"))||x,F=()=>T(U||H.currentTarget,{fetcherKey:m,method:L,navigate:i,replace:u,state:d,relative:g,preventScrollReset:v,viewTransition:R,unstable_defaultShouldRevalidate:O});_&&i!==!1?C.startTransition(()=>F()):F()};return C.createElement("form",{ref:P,method:j,action:y,onSubmit:o?f:A,...N,"data-discover":!q&&l==="render"?"true":void 0})});ob.displayName="Form";function cb(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lp(l){let m=C.useContext(sl);return bt(m,cb(l)),m}function db(l,{target:m,replace:i,state:o,preventScrollReset:u,relative:d,viewTransition:x,unstable_defaultShouldRevalidate:p,unstable_useTransitions:f}={}){let g=Xs(),v=Fs(),R=ni(l,{relative:d});return C.useCallback(O=>{if($g(O,m)){O.preventDefault();let N=i!==void 0?i:ei(v)===ei(R),P=()=>g(l,{replace:N,state:o,preventScrollReset:u,relative:d,viewTransition:x,unstable_defaultShouldRevalidate:p});f?C.startTransition(()=>P()):P()}},[v,g,R,i,o,m,l,u,d,x,p,f])}function ub(l){_s(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let m=C.useRef(ud(l)),i=C.useRef(!1),o=Fs(),u=C.useMemo(()=>zg(o.search,i.current?null:m.current),[o.search]),d=Xs(),x=C.useCallback((p,f)=>{const g=ud(typeof p=="function"?p(new URLSearchParams(u)):p);i.current=!0,d("?"+g,f)},[d,u]);return[u,x]}var mb=0,xb=()=>`__${String(++mb)}__`;function pb(){let{router:l}=lp("useSubmit"),{basename:m}=C.useContext(ks),i=Rg(),o=l.fetch,u=l.navigate;return C.useCallback(async(d,x={})=>{let{action:p,method:f,encType:g,formData:v,body:R}=Fg(d,m);if(x.navigate===!1){let O=x.fetcherKey||xb();await o(O,i,x.action||p,{unstable_defaultShouldRevalidate:x.unstable_defaultShouldRevalidate,preventScrollReset:x.preventScrollReset,formData:v,body:R,formMethod:x.method||f,formEncType:x.encType||g,flushSync:x.flushSync})}else await u(x.action||p,{unstable_defaultShouldRevalidate:x.unstable_defaultShouldRevalidate,preventScrollReset:x.preventScrollReset,formData:v,body:R,formMethod:x.method||f,formEncType:x.encType||g,replace:x.replace,state:x.state,fromRouteId:i,flushSync:x.flushSync,viewTransition:x.viewTransition})},[o,u,m,i])}function hb(l,{relative:m}={}){let{basename:i}=C.useContext(ks),o=C.useContext(Vs);bt(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),d={...ni(l||".",{relative:m})},x=Fs();if(l==null){d.search=x.search;let p=new URLSearchParams(d.search),f=p.getAll("index");if(f.some(v=>v==="")){p.delete("index"),f.filter(R=>R).forEach(R=>p.append("index",R));let v=p.toString();d.search=v?`?${v}`:""}}return(!l||l===".")&&u.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(d.pathname=d.pathname==="/"?i:vn([i,d.pathname])),ei(d)}function fb(l,{relative:m}={}){let i=C.useContext(Q0);bt(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=lp("useViewTransitionState"),u=ni(l,{relative:m});if(!i.isTransitioning)return!1;let d=yn(i.currentLocation.pathname,o)||i.currentLocation.pathname,x=yn(i.nextLocation.pathname,o)||i.nextLocation.pathname;return Mr(u.pathname,x)!=null||Mr(u.pathname,d)!=null}const gb="modulepreload",bb=function(l){return"/"+l},D0={},vb=function(m,i,o){let u=Promise.resolve();if(i&&i.length>0){let x=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(R=>({status:"fulfilled",value:R}),R=>({status:"rejected",reason:R}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),f=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));u=x(i.map(g=>{if(g=bb(g),g in D0)return;D0[g]=!0;const v=g.endsWith(".css"),R=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${R}`))return;const O=document.createElement("link");if(O.rel=v?"stylesheet":gb,v||(O.as="script"),O.crossOrigin="",O.href=g,f&&O.setAttribute("nonce",f),document.head.appendChild(O),v)return new Promise((N,P)=>{O.addEventListener("load",N),O.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${g}`)))})}))}function d(x){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=x,window.dispatchEvent(p),!p.defaultPrevented)throw x}return u.then(x=>{for(const p of x||[])p.status==="rejected"&&d(p.reason);return m().catch(d)})},R0=l=>{let m;const i=new Set,o=(g,v)=>{const R=typeof g=="function"?g(m):g;if(!Object.is(R,m)){const O=m;m=v??(typeof R!="object"||R===null)?R:Object.assign({},m,R),i.forEach(N=>N(m,O))}},u=()=>m,p={setState:o,getState:u,getInitialState:()=>f,subscribe:g=>(i.add(g),()=>i.delete(g))},f=m=l(o,u,p);return p},yb=(l=>l?R0(l):R0),jb=l=>l;function Nb(l,m=jb){const i=gr.useSyncExternalStore(l.subscribe,gr.useCallback(()=>m(l.getState()),[l,m]),gr.useCallback(()=>m(l.getInitialState()),[l,m]));return gr.useDebugValue(i),i}const E0=l=>{const m=yb(l),i=o=>Nb(m,o);return Object.assign(i,m),i},jn=(l=>l?E0(l):E0),vr={id:"user1",name:"John Smith",email:"john@example.com",phone:"202-555-0301",unitNumber:"301",role:"BOARD_MEMBER",linkedUnits:["301"],emergencyContact:"",emergencyPhone:"",moveInDate:"2017-04-01",notifications:{email:!0,sms:!1}},kb=[{id:"user0",name:"Alex Rivera",email:"admin@getonetwo.com",phone:"202-555-0000",role:"PLATFORM_ADMIN",unit:"",status:"active",joined:"2024-11-01",boardTitle:null},{id:"user0b",name:"Alyssa Schelbert",email:"alyssa@getonetwo.com",phone:"202-555-0001",role:"PLATFORM_ADMIN",unit:"",status:"active",joined:"2024-10-01",boardTitle:null},{id:"user-test1",name:"Test User",email:"testuser1@test.com",phone:"202-555-9999",role:"BOARD_MEMBER",unit:"301",status:"active",joined:"2024-10-01",boardTitle:"President"},{id:"user1",name:"John Smith",email:"john@example.com",phone:"202-555-0301",role:"BOARD_MEMBER",unit:"301",status:"active",joined:"2017-04-01",boardTitle:"Treasurer"},{id:"user2",name:"Sarah Johnson",email:"sarah@example.com",phone:"202-555-0204",role:"RESIDENT",unit:"204",status:"active",joined:"2019-08-15",boardTitle:null},{id:"user3",name:"Robert Mitchell",email:"robert@example.com",phone:"202-555-0401",role:"BOARD_MEMBER",unit:"401",status:"active",joined:"2015-03-01",boardTitle:"President"},{id:"user4",name:"Jennifer Adams",email:"jennifer@example.com",phone:"202-555-0202",role:"BOARD_MEMBER",unit:"202",status:"active",joined:"2018-11-10",boardTitle:"Vice President"},{id:"user5",name:"David Chen",email:"david@example.com",phone:"202-555-0102",role:"BOARD_MEMBER",unit:"102",status:"active",joined:"2020-06-01",boardTitle:"Secretary"},{id:"user6",name:"Maria Garcia",email:"maria@example.com",phone:"202-555-0403",role:"RESIDENT",unit:"403",status:"active",joined:"2021-02-15",boardTitle:null},{id:"user7",name:"Lisa Park",email:"lisa@example.com",phone:"202-555-0502",role:"RESIDENT",unit:"502",status:"active",joined:"2022-09-01",boardTitle:null}],wb=[{id:"inv1",email:"thomas@example.com",role:"BOARD_MEMBER",unit:"303",sentBy:"John Smith",sentDate:"2026-02-15",code:"SA-BRD-7X4K",status:"pending"},{id:"inv2",email:"kevin@example.com",role:"RESIDENT",unit:"407",sentBy:"Robert Mitchell",sentDate:"2026-02-18",code:"SA-RES-9M2P",status:"pending"}],jt=jn((l,m)=>({isAuthenticated:!1,authStep:"welcome",authJoinRole:"RESIDENT",currentUser:vr,currentRole:"BOARD_MEMBER",buildingMembers:kb,buildingInvites:wb,setAuthStep:i=>l({authStep:i}),setAuthJoinRole:i=>l({authJoinRole:i}),switchRole:i=>l(o=>({currentRole:i,currentUser:{...o.currentUser,role:i}})),login:i=>l({isAuthenticated:!0,currentUser:{...vr,id:i.id,name:i.name,email:i.email,phone:i.phone,role:i.role,unitNumber:i.unit,linkedUnits:i.unit?[i.unit]:[]},currentRole:i.role}),skipToDemo:()=>l({isAuthenticated:!0,currentUser:vr,currentRole:"BOARD_MEMBER"}),signOut:()=>{vb(async()=>{const{supabase:i,isBackendEnabled:o}=await Promise.resolve().then(()=>Sb);return{supabase:i,isBackendEnabled:o}},[]).then(({supabase:i,isBackendEnabled:o})=>{o&&i&&i.auth.signOut().catch(()=>{})}),l({isAuthenticated:!1,authStep:"welcome",currentUser:vr,currentRole:"BOARD_MEMBER"})},updateProfile:i=>l(o=>({currentUser:{...o.currentUser,...i}})),addMember:i=>l(o=>({buildingMembers:[...o.buildingMembers,i]})),removeMember:i=>l(o=>({buildingMembers:o.buildingMembers.filter(u=>u.id!==i)})),updateMemberRole:(i,o)=>l(u=>({buildingMembers:u.buildingMembers.map(d=>d.id===i?{...d,role:o}:d)})),addInvite:i=>l(o=>({buildingInvites:[...o.buildingInvites,i]})),revokeInvite:i=>l(o=>({buildingInvites:o.buildingInvites.filter(u=>u.id!==i)})),inviteMember:(i,o,u)=>{const d=m().generateInviteCode(o),x={id:`inv-${Date.now()}`,email:i,role:o,unit:u||"",sentBy:m().currentUser.name,sentDate:new Date().toISOString().split("T")[0],code:d,status:"pending"};l(p=>({buildingInvites:[...p.buildingInvites,x]}))},generateInviteCode:i=>{const o=i==="BOARD_MEMBER"?"BRD":i==="PROPERTY_MANAGER"?"MGR":"RES",u="ABCDEFGHJKMNPQRSTUVWXYZ23456789";let d="";for(let x=0;x<4;x++)d+=u[Math.floor(Math.random()*u.length)];return`SA-${o}-${d}`}}));console.warn(`Supabase env vars missing. Running in demo mode with local state only.
Set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY in .env.local to enable backend.`);const Cb=null,Yn=!1,Sb=Object.freeze(Object.defineProperty({__proto__:null,isBackendEnabled:Yn,supabase:Cb},Symbol.toStringTag,{value:"Module"})),Ns=jn(l=>({name:"Sunny Acres Condominium",address:{street:"1234 Constitution Avenue NW",city:"Washington",state:"District of Columbia",zip:"20001"},details:{yearBuilt:"1998",totalUnits:50,floors:8,type:"Mid-rise Condominium",sqft:"78,500 sq ft",lotSize:"1.2 acres",parking:"65 spaces (covered garage)",architect:"Thompson & Associates",contractor:"Pacific Coast Builders Inc.",amenities:["Community Room","Fitness Center","Rooftop Deck","Secure Lobby","Elevator (2)","Package Room"],entityType:"incorporated"},board:[{id:"bm1",name:"Robert Mitchell",role:"President",email:"robert@example.com",phone:"202-555-0401",term:"Jan 2025  Dec 2026"},{id:"bm2",name:"Jennifer Adams",role:"Vice President",email:"jennifer@example.com",phone:"202-555-0202",term:"Jan 2025  Dec 2026"},{id:"bm3",name:"David Chen",role:"Treasurer",email:"david@example.com",phone:"202-555-0102",term:"Jan 2025  Dec 2026"},{id:"bm4",name:"Maria Rodriguez",role:"Secretary",email:"maria@example.com",phone:"202-555-0303",term:"Jan 2024  Dec 2025"},{id:"bm5",name:"Thomas Baker",role:"Member at Large",email:"thomas@example.com",phone:"202-555-0404",term:"Jan 2024  Dec 2025"}],management:{company:"Premier Property Management",contact:"Diane Carter",title:"Property Manager",email:"diane@premierpm.com",phone:"202-555-9000",emergency:"202-555-9111",address:"2000 M Street NW, Suite 400, Washington, DC 20036",hours:"Mon-Fri 8:00 AM  5:00 PM",afterHours:"24/7 Emergency Line"},legalCounsel:[{id:"lc1",firm:"Anderson & Associates",attorney:"Patricia Anderson",email:"panderson@andersonlaw.com",phone:"202-555-7001",specialty:"HOA / Condominium Law"}],legalDocuments:[{id:"ld1",name:"Condominium Bylaws",version:"3.0 (Amended 2024)",size:"2.4 MB",status:"current",attachments:[{name:"Bylaws_v3_2024.pdf",size:"2.4 MB",uploadedAt:"2024-03-15",type:"application/pdf"}]},{id:"ld2",name:"CC&Rs",version:"2.0 (Amended 2023)",size:"1.8 MB",status:"review-due",attachments:[{name:"CCR_v2_2023.pdf",size:"1.8 MB",uploadedAt:"2023-06-20",type:"application/pdf"}]},{id:"ld3",name:"Master Deed",version:"1.0 (Original)",size:"3.2 MB",status:"current",attachments:[{name:"MasterDeed_Original.pdf",size:"3.2 MB",uploadedAt:"1998-01-15",type:"application/pdf"}]},{id:"ld4",name:"Rules & Regulations",version:"2026 Edition",size:"890 KB",status:"review-due",attachments:[]},{id:"ld5",name:"Articles of Incorporation",version:"1.0",size:"420 KB",status:"current",attachments:[{name:"Articles_of_Inc.pdf",size:"420 KB",uploadedAt:"1998-01-15",type:"application/pdf"}]},{id:"ld6",name:"Architectural Standards",version:"2.0",size:"1.1 MB",status:"review-due",attachments:[]},{id:"ld7",name:"Collection Policy",version:"2.0",size:"280 KB",status:"review-due",attachments:[]},{id:"ld8",name:"Reserve Study (2025)",version:"2025 Update",size:"5.8 MB",status:"current",attachments:[{name:"ReserveStudy_2025.pdf",size:"5.8 MB",uploadedAt:"2025-06-15",type:"application/pdf"}]}],insurance:[{id:"ins1",type:"Directors & Officers (D&O)",carrier:"Chubb Insurance",coverage:"$2,000,000",premium:"$3,200/yr",expires:"2026-09-30",policyNum:"DO-2026-4421",attachments:[{name:"DO_Policy_2026.pdf",size:"1.5 MB",uploadedAt:"2025-10-01",type:"application/pdf"}]},{id:"ins2",type:"General Liability",carrier:"Hartford Insurance",coverage:"$5,000,000",premium:"$8,500/yr",expires:"2026-09-30",policyNum:"GL-2026-8890",attachments:[{name:"GL_Policy_2026.pdf",size:"2.1 MB",uploadedAt:"2025-10-01",type:"application/pdf"}]},{id:"ins3",type:"Property / Hazard",carrier:"Travelers Insurance",coverage:"$15,000,000",premium:"$18,200/yr",expires:"2026-09-30",policyNum:"PH-2026-1155",attachments:[]},{id:"ins4",type:"Fidelity Bond",carrier:"Chubb Insurance",coverage:"$500,000",premium:"$1,100/yr",expires:"2026-09-30",policyNum:"FB-2026-3302",attachments:[]},{id:"ins5",type:"Workers Compensation",carrier:"Liberty Mutual",coverage:"Statutory",premium:"$2,400/yr",expires:"2026-12-31",policyNum:"WC-2026-5578",attachments:[]},{id:"ins6",type:"Umbrella",carrier:"Hartford Insurance",coverage:"$10,000,000",premium:"$4,500/yr",expires:"2026-09-30",policyNum:"UB-2026-7710",attachments:[]}],vendors:[{id:"v1",name:"Green Thumb Landscaping",service:"Landscaping",contact:"Mark Green",phone:"202-555-4001",email:"mark@greenthumb.com",contract:"Monthly, $650/mo",status:"active"},{id:"v2",name:"Cool Air Services",service:"HVAC",contact:"Tom Frost",phone:"202-555-4002",email:"tom@coolair.com",contract:"Annual, $3,200/yr",status:"active"},{id:"v3",name:"Apex Roofing",service:"Roofing",contact:"Diana Apex",phone:"202-555-4003",email:"diana@apexroof.com",contract:"On-call",status:"active"},{id:"v4",name:"Metro Elevator Co",service:"Elevator",contact:"James Metro",phone:"202-555-4004",email:"james@metroelevator.com",contract:"Annual inspection, $950/yr",status:"active"},{id:"v5",name:"Quick Fix Plumbing",service:"Plumbing",contact:"Pete Quick",phone:"202-555-4005",email:"pete@quickfix.com",contract:"On-call",status:"active"}],updateName:m=>l({name:m}),updateAddress:m=>l(i=>({address:{...i.address,...m}})),updateDetails:m=>l(i=>({details:{...i.details,...m}})),updateManagement:m=>l(i=>({management:{...i.management,...m}})),addBoardMember:m=>l(i=>({board:[...i.board,{id:"bm"+Date.now(),...m}]})),updateBoardMember:(m,i)=>l(o=>({board:o.board.map(u=>u.id===m?{...u,...i}:u)})),removeBoardMember:m=>l(i=>({board:i.board.filter(o=>o.id!==m)})),addLegalCounsel:m=>l(i=>({legalCounsel:[...i.legalCounsel,{id:"lc"+Date.now(),...m}]})),updateLegalCounsel:(m,i)=>l(o=>({legalCounsel:o.legalCounsel.map(u=>u.id===m?{...u,...i}:u)})),removeLegalCounsel:m=>l(i=>({legalCounsel:i.legalCounsel.filter(o=>o.id!==m)})),addLegalDocument:m=>l(i=>({legalDocuments:[...i.legalDocuments,{id:"ld"+Date.now(),...m,attachments:[]}]})),updateLegalDocument:(m,i)=>l(o=>({legalDocuments:o.legalDocuments.map(u=>u.id===m?{...u,...i}:u)})),removeLegalDocument:m=>l(i=>({legalDocuments:i.legalDocuments.filter(o=>o.id!==m)})),addLegalDocAttachment:(m,i)=>l(o=>({legalDocuments:o.legalDocuments.map(u=>u.id===m?{...u,attachments:[...u.attachments,{...i,uploadedAt:new Date().toISOString().split("T")[0]}]}:u)})),removeLegalDocAttachment:(m,i)=>l(o=>({legalDocuments:o.legalDocuments.map(u=>u.id===m?{...u,attachments:u.attachments.filter((d,x)=>x!==i)}:u)})),addInsurance:m=>l(i=>({insurance:[...i.insurance,{id:"ins"+Date.now(),...m,attachments:[]}]})),updateInsurance:(m,i)=>l(o=>({insurance:o.insurance.map(u=>u.id===m?{...u,...i}:u)})),removeInsurance:m=>l(i=>({insurance:i.insurance.filter(o=>o.id!==m)})),addInsuranceAttachment:(m,i)=>l(o=>({insurance:o.insurance.map(u=>u.id===m?{...u,attachments:[...u.attachments,{...i,uploadedAt:new Date().toISOString().split("T")[0]}]}:u)})),removeInsuranceAttachment:(m,i)=>l(o=>({insurance:o.insurance.map(u=>u.id===m?{...u,attachments:u.attachments.filter((d,x)=>x!==i)}:u)})),addVendor:m=>l(i=>({vendors:[...i.vendors,{id:"v"+Date.now(),...m}]})),updateVendor:(m,i)=>l(o=>({vendors:o.vendors.map(u=>u.id===m?{...u,...i}:u)})),removeVendor:m=>l(i=>({vendors:i.vendors.filter(o=>o.id!==m)})),toggleVendorStatus:m=>l(i=>({vendors:i.vendors.map(o=>o.id===m?{...o,status:o.status==="active"?"inactive":"active"}:o)}))})),ip={id:"demo",name:"Sunny Acres Condominium",subdomain:"demo",status:"active",tier:"compliance_pro",features:{},address:{street:"1234 Constitution Avenue NW",city:"Washington",state:"District of Columbia",zip:"20001"},totalUnits:50,isDemo:!0},rp=C.createContext(ip),op=()=>C.useContext(rp);function Ab({children:l}){const[m,i]=C.useState(ip),[o,u]=C.useState(!1),{currentUser:d,isAuthenticated:x}=jt();return Ns(p=>p.updateName),Ns(p=>p.updateAddress),Ns(p=>p.updateDetails),C.useEffect(()=>{if(!x||!d){u(!0);return}{u(!0);return}},[x,d==null?void 0:d.id]),o?e.jsx(rp.Provider,{value:m,children:l}):e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-ink-300 border-t-ink-900 rounded-full animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-ink-400",children:"Loading your building..."})]})})}function te(l){return"$"+l.toLocaleString()}function Xl(l){if(l>3&&l<21)return"th";switch(l%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}function ti(l){return l.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2)}const md={BOARD_MEMBER:"Board Member",RESIDENT:"Resident",PROPERTY_MANAGER:"Property Manager",PLATFORM_ADMIN:"Platform Admin"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cp=(...l)=>l.filter((m,i,o)=>!!m&&m.trim()!==""&&o.indexOf(m)===i).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=C.forwardRef(({color:l="currentColor",size:m=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:d,iconNode:x,...p},f)=>C.createElement("svg",{ref:f,...Rb,width:m,height:m,stroke:l,strokeWidth:o?Number(i)*24/Number(m):i,className:cp("lucide",u),...p},[...x.map(([g,v])=>C.createElement(g,v)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=(l,m)=>{const i=C.forwardRef(({className:o,...u},d)=>C.createElement(Eb,{ref:d,iconNode:m,className:cp(`lucide-${Db(l)}`,o),...u}));return i.displayName=`${l}`,i};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=ai("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=ai("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=ai("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=ai("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=ai("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function Lb(){const{currentUser:l,currentRole:m,signOut:i}=jt(),o=op(),[u,d]=C.useState(!1),x=C.useRef(null),p=Xs();C.useEffect(()=>{function g(v){x.current&&!x.current.contains(v.target)&&d(!1)}return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const f=g=>{d(!1),p(g)};return e.jsx("nav",{className:"bg-white border-b border-ink-200 sticky top-0 z-50",children:e.jsx("div",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>p("/"),children:[e.jsxs("svg",{className:"w-9 h-9",viewBox:"0 0 32 32",fill:"none",children:[e.jsx("rect",{width:"32",height:"32",rx:"4",fill:"#3D3D3D"}),e.jsx("rect",{x:"13.5",y:"7",width:"5",height:"18",rx:"1",fill:"white"}),e.jsx("rect",{x:"7",y:"13.5",width:"18",height:"5",rx:"1",fill:"white"})]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"font-display text-base font-bold text-ink-900 leading-tight",children:[o.name," ",o.isDemo?"":"HOA"]}),e.jsxs("p",{className:"text-xs text-ink-400",children:["powered by ",e.jsx("span",{className:"font-bold",children:"ONE two"})," HOA GovOps"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-ink-800",children:l.name}),e.jsx("p",{className:"text-xs text-ink-400",children:md[m]})]}),e.jsxs("div",{className:"relative",ref:x,children:[e.jsxs("button",{onClick:()=>d(!u),className:"flex items-center gap-1.5 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-ink-900 flex items-center justify-center text-white text-xs font-bold group-hover:bg-accent-600 transition-colors",children:ti(l.name)}),e.jsx(Tb,{className:`w-3.5 h-3.5 text-ink-400 group-hover:text-ink-600 transition-transform ${u?"rotate-180":""}`})]}),u&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white rounded-xl shadow-xl border border-ink-100 py-2 z-50",children:[e.jsxs("div",{className:"px-4 py-2.5 border-b border-ink-100",children:[e.jsx("p",{className:"text-sm font-semibold text-ink-900",children:l.name}),e.jsx("p",{className:"text-xs text-ink-400",children:l.email})]}),e.jsxs("button",{onClick:()=>f("/account"),className:"w-full text-left px-4 py-2.5 text-sm text-ink-700 hover:bg-mist-50 flex items-center gap-3",children:[e.jsx(Bb,{className:"w-4 h-4 text-ink-400"}),"My Account"]}),e.jsxs("button",{onClick:()=>f("/my-unit"),className:"w-full text-left px-4 py-2.5 text-sm text-ink-700 hover:bg-mist-50 flex items-center gap-3",children:[e.jsx(Mb,{className:"w-4 h-4 text-ink-400"}),"My Unit"]}),(m==="BOARD_MEMBER"||m==="PROPERTY_MANAGER")&&e.jsxs("button",{onClick:()=>f("/admin/users"),className:"w-full text-left px-4 py-2.5 text-sm text-ink-700 hover:bg-mist-50 flex items-center gap-3",children:[e.jsx(Ub,{className:"w-4 h-4 text-ink-400"}),"User Management"]}),e.jsx("div",{className:"border-t border-ink-100 mt-1 pt-1",children:e.jsxs("button",{onClick:()=>{d(!1),i(),p("/login")},className:"w-full text-left px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 flex items-center gap-3",children:[e.jsx(Ob,{className:"w-4 h-4 text-red-400"}),"Sign Out"]})})]})]})]})]})})})}const Ib={PLATFORM_ADMIN:[{id:"admin-console",label:"Admin Console",path:"/admin/console"}],BOARD_MEMBER:[{id:"dashboard",label:"Dashboard",path:"/dashboard"},{id:"boardroom",label:"Board Room",path:"/boardroom"},{id:"contacts",label:"The Building",path:"/building"},{id:"financial",label:"Fiscal Lens",path:"/financial"},{id:"archives",label:"The Archives",path:"/archives"}],RESIDENT:[{id:"dashboard",label:"Dashboard",path:"/dashboard"},{id:"community",label:"Community Room",path:"/community"},{id:"contacts",label:"The Building",path:"/building"},{id:"financial",label:"Fiscal Lens",path:"/financial"},{id:"archives",label:"The Archives",path:"/archives"}],PROPERTY_MANAGER:[{id:"dashboard",label:"Dashboard",path:"/dashboard"},{id:"boardroom",label:"Board Room",path:"/boardroom"},{id:"contacts",label:"The Building",path:"/building"},{id:"financial",label:"Fiscal Lens",path:"/financial"},{id:"archives",label:"The Archives",path:"/archives"}]};function _b(){const{currentRole:l,switchRole:m}=jt(),i=Fs(),o=Xs(),u=Ib[l],d=l==="PLATFORM_ADMIN",x=p=>p==="/"?i.pathname==="/":i.pathname.startsWith(p);return e.jsx("aside",{className:"w-60 bg-white border-r border-ink-100 sticky top-[53px] overflow-y-auto",style:{height:"calc(100vh - 53px)"},children:e.jsxs("div",{className:"p-4",children:[d?e.jsxs("div",{className:"mb-6 bg-red-50 rounded-xl p-4 border border-red-200",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"px-1.5 py-0.5 bg-red-600 text-white rounded text-[10px] font-bold uppercase tracking-wide",children:"Admin"})}),e.jsx("p",{className:"text-sm font-bold text-ink-900",children:"Platform Console"}),e.jsx("p",{className:"text-xs text-ink-400 mt-1",children:"Multi-tenancy management"})]}):e.jsxs("div",{className:"mb-6 bg-sand-100 rounded-xl p-4 border border-ink-100",children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-2",children:"View As:"}),e.jsx("select",{value:l,onChange:p=>{m(p.target.value),o("/dashboard")},className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm font-medium bg-white",children:Object.keys(md).filter(p=>p!=="PLATFORM_ADMIN").map(p=>e.jsx("option",{value:p,children:md[p]},p))}),e.jsx("p",{className:"text-xs text-ink-400 mt-2",children:"Switch roles to see different views"})]}),e.jsx("nav",{className:"space-y-1",children:u.map(p=>{if(p.separator)return e.jsx("div",{className:"my-2 mx-2 border-t border-ink-200"},p.id);const f=x(p.path);return e.jsx("button",{onClick:()=>o(p.path),className:`w-full px-3 py-2.5 rounded-lg text-left text-sm font-medium transition-colors ${f?d?"bg-red-700 text-white":"bg-ink-900 text-white":"text-ink-700 hover:bg-ink-50"}`,children:p.label},p.id)})}),!d&&e.jsx("div",{className:"mt-6 space-y-3",children:e.jsxs("div",{className:"bg-accent-50 rounded-lg p-3 border border-accent-200",children:[e.jsx("p",{className:"text-xs text-accent-600 font-medium",children:"Next Meeting"}),e.jsx("p",{className:"text-sm font-bold text-ink-900",children:"Feb 20"})]})})]})})}function qb(){return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(Lb,{}),e.jsxs("div",{className:"flex",children:[e.jsx(_b,{}),e.jsx("main",{className:"flex-1 p-6",children:e.jsx("div",{className:"animate-fade-in",children:e.jsx(Og,{})})})]})]})}const Gn=()=>e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("svg",{className:"w-14 h-14 mx-auto mb-4",viewBox:"0 0 32 32",fill:"none",children:[e.jsx("rect",{width:"32",height:"32",rx:"4",fill:"#3D3D3D"}),e.jsx("rect",{x:"13.5",y:"7",width:"5",height:"18",rx:"1",fill:"white"}),e.jsx("rect",{x:"7",y:"13.5",width:"18",height:"5",rx:"1",fill:"white"})]}),e.jsxs("h1",{className:"font-display text-2xl font-bold text-ink-900",children:[e.jsx("span",{className:"font-bold",children:"ONE two"})," HOA"]}),e.jsx("p",{className:"text-sm text-ink-400 mt-1",children:"HOA compliance made simple"})]}),td=({steps:l,current:m})=>e.jsx("div",{className:"flex items-center justify-center gap-2 mb-6",children:l.map((i,o)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:`w-7 h-7 rounded-full text-xs flex items-center justify-center font-bold ${o<m?"bg-sage-500 text-white":o===m?"bg-ink-900 text-white":"bg-ink-200 text-ink-500"}`,children:o<m?"":o+1}),e.jsx("span",{className:`text-xs font-medium ${o<=m?"text-ink-900":"text-ink-400"}`,children:i})]}),o<l.length-1&&e.jsx("div",{className:"w-6 h-px bg-ink-200"})]},i))}),yr=[{id:"essentials",name:"Essentials",price:49,features:["Compliance runbook","Financial dashboard","Case management"]},{id:"compliance_pro",name:"Compliance Pro",price:179,features:["Everything in Essentials","AI Advisor","Document vault","Payment processing","Vendor management"]},{id:"advanced_governance",name:"Advanced Governance",price:299,features:["Everything in Pro","Votes & Resolutions","Community portal","Reserve study tools"]}];function $b(){var Zs,Cs,us;const{authStep:l,setAuthStep:m,setAuthJoinRole:i,authJoinRole:o,login:u,buildingMembers:d,buildingInvites:x,addMember:p}=jt(),[f,g]=C.useState(""),[v,R]=C.useState(""),[O,N]=C.useState(""),[P,_]=C.useState(null),[T,y]=C.useState(!1),[j,q]=C.useState(!0),[A,H]=C.useState(!1),[U,L]=C.useState("compliance_pro"),[F,z]=C.useState(""),[ne,K]=C.useState(""),[ie,he]=C.useState(""),[pe,Ne]=C.useState(""),[B,I]=C.useState(""),[w,M]=C.useState("President"),[ce,E]=C.useState(""),[J,Q]=C.useState(""),[xe,Se]=C.useState("idle"),[b,ae]=C.useState(""),[Me,Ae]=C.useState(""),[ot,St]=C.useState(""),[ve,Ye]=C.useState(""),[De,et]=C.useState(""),qe=ge=>ge.toLowerCase().replace(/[^a-z0-9]/g,"").slice(0,20);C.useEffect(()=>{if(!J||J===qe(ce.slice(0,-1))||J===qe(ce+"x")){const ge=qe(ce.replace(/\b(condominium|condos?|hoa|association|residences|towers|gardens|estates|the|of)\b/gi,""));Q(ge)}},[ce]),C.useEffect(()=>{if(!J||J.length<3||!Yn){Se("idle");return}},[J]),C.useEffect(()=>{const ge=new URLSearchParams(window.location.search);ge.get("create")==="1"&&l==="welcome"&&m("join-role"),ge.get("provisioned")==="1"&&m("login");const ct=ge.get("invite");ct&&(N(ct.toUpperCase()),m("join-invite")),q(!1),ge.get("sb_access"),ge.get("sb_refresh")},[]);const[Zt,G]=C.useState(!1),ye=async()=>{if(!f||!v){alert("Please enter email and password.");return}const ge=d.find(ct=>ct.email.toLowerCase()===f.toLowerCase()&&ct.status==="active");if(!ge){alert("No account found with that email.");return}if(ge.role==="PLATFORM_ADMIN"&&v!=="SuperCooperis9"){alert("Invalid password.");return}u(ge)},[V,ke]=C.useState(!1),[_e,we]=C.useState(null),tt=async()=>{const ge=O.trim().toUpperCase();if(!ge){alert("Please enter your invitation code.");return}const ct=x.find(Jt=>Jt.code===ge&&Jt.status==="pending");if(!ct){alert("Invalid or expired invitation code.");return}_(ct),i(ct.role),he(ct.email),I(ct.unit||""),m("join-create")},ws=async()=>{if(!F||!ne){alert("Please enter your name.");return}const ge=`${F.trim()} ${ne.trim()}`,ct=ie||f;_e!=null&&_e.valid;const Jt={id:`user-${Date.now()}`,name:ge,email:ct,phone:pe,role:(P==null?void 0:P.role)||o,unit:(P==null?void 0:P.unit)||B,status:"active",joined:new Date().toISOString().split("T")[0],boardTitle:o==="BOARD_MEMBER"?w:null};p(Jt),u(Jt)},qs=()=>{if(!F||!ne){alert("Please enter your name.");return}const ge=`${F.trim()} ${ne.trim()}`,ct={id:`user-${Date.now()}`,name:ge,email:ie,phone:pe,role:"BOARD_MEMBER",unit:B,status:"active",joined:new Date().toISOString().split("T")[0],boardTitle:w};p(ct),u(ct)};return j?e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-gradient-to-br from-mist-100 via-white to-sage-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-ink-300 border-t-ink-900 rounded-full animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-ink-400",children:"Checking session..."})]})}):e.jsx("div",{className:"fixed inset-0 z-[100] bg-gradient-to-br from-ink-50 via-white to-mist-50 flex items-center justify-center overflow-y-auto py-8",children:e.jsxs("div",{className:"w-full max-w-md mx-4",children:[l==="welcome"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-ink-100 p-8",children:[e.jsx(Gn,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>m("login"),className:"w-full py-3.5 bg-ink-900 text-white rounded-xl font-semibold text-sm hover:bg-ink-800 transition-all",children:"Sign In"}),e.jsx("button",{onClick:()=>m("join-role"),className:"w-full py-3.5 border-2 border-accent-500 text-accent-700 rounded-xl font-semibold text-sm hover:bg-accent-50 transition-all",children:"Create Account"})]}),e.jsxs("div",{className:"mt-6 bg-gradient-to-br from-ink-900 to-ink-700 rounded-xl p-5 text-white",children:[e.jsx("p",{className:"text-xs font-semibold text-accent-300 uppercase tracking-wide mb-2",children:"Plans from"}),e.jsxs("div",{className:"flex items-baseline gap-1 mb-3",children:[e.jsx("span",{className:"text-3xl font-bold",children:"$49"}),e.jsx("span",{className:"text-ink-300",children:"/month per building"})]}),e.jsxs("ul",{className:"space-y-1.5 text-sm text-ink-200",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sage-400",children:""})," Resident & Board portals"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sage-400",children:""})," Financial dashboard"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sage-400",children:""})," Meeting management"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sage-400",children:""})," Document library & contacts"]})]}),e.jsx("button",{onClick:()=>m("join-role"),className:"w-full mt-4 py-2.5 bg-accent-600 text-white rounded-lg text-sm font-semibold hover:bg-accent-700 transition-all",children:"Start Free Trial "})]}),e.jsx("p",{className:"text-center text-xs text-ink-400 mt-5",children:"By continuing, you agree to our Terms of Service and Privacy Policy."}),e.jsx("div",{className:"border-t border-ink-100 mt-4 pt-4 flex items-center justify-center",children:e.jsx("a",{href:"/",className:"text-xs text-accent-600 hover:text-accent-700 font-medium",children:" Back to website"})})]}),l==="login"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-ink-100 p-8",children:[e.jsx(Gn,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:f,onChange:ge=>g(ge.target.value),className:"w-full px-4 py-3 border border-ink-200 rounded-xl text-sm",placeholder:"you@example.com",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:v,onChange:ge=>R(ge.target.value),className:"w-full px-4 py-3 border border-ink-200 rounded-xl text-sm",placeholder:"",onKeyDown:ge=>ge.key==="Enter"&&ye()})]}),e.jsx("button",{onClick:ye,disabled:Zt,className:"w-full py-3.5 bg-ink-900 text-white rounded-xl font-semibold text-sm hover:bg-ink-800 disabled:opacity-50",children:Zt?"Signing in...":"Sign In"}),e.jsx("p",{className:"text-center text-xs text-ink-400",children:e.jsx("a",{href:"/reset-password",className:"text-accent-600 hover:underline cursor-pointer",children:"Forgot password?"})})]}),e.jsx("div",{className:"border-t border-ink-100 mt-6 pt-4 text-center",children:e.jsxs("p",{className:"text-sm text-ink-500",children:["Don't have an account?"," ",e.jsx("a",{onClick:()=>m("join-role"),className:"text-accent-600 font-semibold cursor-pointer hover:underline",children:"Create one"})]})})]}),l==="join-role"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-ink-100 p-8",children:[e.jsx(Gn,{}),e.jsx("h2",{className:"font-display text-lg font-bold text-ink-900 text-center mb-1",children:"Create Your Account"}),e.jsx("p",{className:"text-sm text-ink-400 text-center mb-6",children:"What best describes you?"}),e.jsx("div",{className:"space-y-3",children:[{role:"RESIDENT",icon:"",label:"Resident / Unit Owner",desc:"I live in or own a unit  I have an invite code",bg:"bg-accent-100",next:"join-invite"},{role:"BOARD_MEMBER",icon:"",label:"Board Member",desc:"I serve on the board  join existing or set up new",bg:"bg-sage-100",next:"join-invite"},{role:"PROPERTY_MANAGER",icon:"",label:"Property Manager",desc:"I manage buildings professionally",bg:"bg-mist-100",next:"join-invite"}].map(({role:ge,icon:ct,label:Jt,desc:Kt,bg:ft,next:_t})=>e.jsx("button",{onClick:()=>{i(ge),m(_t)},className:"w-full p-4 border-2 border-ink-200 rounded-xl text-left hover:border-accent-400 hover:bg-accent-50 transition-all group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${ft} flex items-center justify-center text-lg`,children:ct}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-ink-900 text-sm",children:Jt}),e.jsx("p",{className:"text-xs text-ink-400",children:Kt})]})]})},ge))}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("a",{onClick:()=>m("welcome"),className:"text-sm text-ink-400 hover:text-ink-600 cursor-pointer",children:" Back"})})]}),l==="join-invite"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-ink-100 p-8",children:[e.jsx(Gn,{}),e.jsx("h2",{className:"font-display text-lg font-bold text-ink-900 text-center mb-1",children:"Join a Building"}),e.jsx("p",{className:"text-sm text-ink-400 text-center mb-6",children:"Enter your invitation code, or start a new building"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Invitation Code"}),e.jsx("input",{value:O,onChange:ge=>N(ge.target.value.toUpperCase()),className:"w-full px-4 py-3 border border-ink-200 rounded-xl text-sm font-mono tracking-wider text-center uppercase",placeholder:"SA-XXX-XXXX",maxLength:12,onKeyDown:ge=>ge.key==="Enter"&&tt()})]}),e.jsx("button",{onClick:tt,className:"w-full py-3.5 bg-ink-900 text-white rounded-xl font-semibold text-sm hover:bg-ink-800",children:"Continue with Code"})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-ink-200"})}),e.jsx("div",{className:"relative flex justify-center",children:e.jsx("span",{className:"bg-white px-3 text-xs text-ink-400",children:"or"})})]}),o==="BOARD_MEMBER"||o==="PROPERTY_MANAGER"?e.jsxs("div",{className:"bg-accent-50 border border-accent-200 rounded-xl p-5 text-center",children:[e.jsx("p",{className:"text-sm font-semibold text-ink-900 mb-2",children:"Starting fresh?"}),e.jsxs("p",{className:"text-xs text-ink-500 mb-3",children:["Subscribe to ",e.jsx("span",{className:"font-bold",children:"ONE two"})," and set up your building today."]}),e.jsx("button",{onClick:()=>m("board-subscribe"),className:"px-6 py-2.5 bg-accent-600 text-white rounded-lg text-sm font-semibold hover:bg-accent-700",children:"Subscribe & Create Building "})]}):e.jsxs("div",{className:"bg-mist-50 border border-mist-200 rounded-xl p-5 text-center",children:[e.jsx("p",{className:"text-sm font-semibold text-ink-900 mb-2",children:"Don't have a code?"}),e.jsx("p",{className:"text-xs text-ink-500 mb-3",children:"Ask your building's board or management company to invite you."}),e.jsx("button",{onClick:()=>{i("BOARD_MEMBER"),m("board-subscribe")},className:"px-5 py-2 bg-ink-900 text-white rounded-lg text-xs font-semibold hover:bg-ink-800",children:"I'm a board member  subscribe today"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("a",{onClick:()=>m("join-role"),className:"text-sm text-ink-400 hover:text-ink-600 cursor-pointer",children:" Back"})})]}),l==="join-create"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-ink-100 p-8",children:[e.jsx(Gn,{}),e.jsx("h2",{className:"font-display text-lg font-bold text-ink-900 text-center mb-1",children:"Create Your Account"}),P&&e.jsxs("p",{className:"text-xs text-accent-600 text-center mb-4",children:["Joining as ",P.role==="BOARD_MEMBER"?"Board Member":P.role==="PROPERTY_MANAGER"?"Property Manager":"Resident",P.unit?`  Unit ${P.unit}`:""]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"First Name *"}),e.jsx("input",{value:F,onChange:ge=>z(ge.target.value),className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:"First"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Last Name *"}),e.jsx("input",{value:ne,onChange:ge=>K(ge.target.value),className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:"Last"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:ie,onChange:ge=>he(ge.target.value),className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:"you@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Phone"}),e.jsx("input",{value:pe,onChange:ge=>Ne(ge.target.value),className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:"(xxx) xxx-xxxx"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Password *"}),e.jsx("input",{type:"password",className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Confirm *"}),e.jsx("input",{type:"password",className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:""})]})]}),e.jsx("button",{onClick:ws,className:"w-full py-3 bg-ink-900 text-white rounded-xl font-semibold text-sm hover:bg-ink-800 mt-2",children:"Create Account & Enter"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("a",{onClick:()=>m("join-invite"),className:"text-sm text-ink-400 hover:text-ink-600 cursor-pointer",children:" Back"})})]}),l==="board-subscribe"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-ink-100 p-8",children:[e.jsx(Gn,{}),e.jsx(td,{steps:["Plan","Building","Profile & Pay"],current:0}),e.jsx("h2",{className:"font-display text-lg font-bold text-ink-900 text-center mb-1",children:"Choose Your Plan"}),e.jsx("p",{className:"text-sm text-ink-400 text-center mb-6",children:"30-day free trial on all plans. Cancel anytime."}),e.jsx("div",{className:"space-y-3",children:yr.map(ge=>e.jsxs("button",{onClick:()=>L(ge.id),className:`w-full p-4 rounded-xl border-2 text-left transition-all ${U===ge.id?"border-accent-500 bg-accent-50":"border-ink-200 hover:border-ink-300"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"font-bold text-ink-900",children:ge.name}),e.jsxs("p",{className:"text-lg font-bold text-accent-600",children:["$",ge.price,e.jsx("span",{className:"text-xs font-normal text-ink-400",children:"/mo"})]})]}),e.jsx("ul",{className:"space-y-1",children:ge.features.map(ct=>e.jsxs("li",{className:"text-xs text-ink-500 flex items-center gap-1.5",children:[e.jsx("span",{className:"text-sage-500",children:""})," ",ct]},ct))})]},ge.id))}),e.jsxs("button",{onClick:()=>m("board-building"),className:"w-full py-3.5 bg-accent-600 text-white rounded-xl font-semibold text-sm hover:bg-accent-700 mt-4",children:["Continue with ",(Zs=yr.find(ge=>ge.id===U))==null?void 0:Zs.name," "]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("a",{onClick:()=>m("join-invite"),className:"text-sm text-ink-400 hover:text-ink-600 cursor-pointer",children:" Back"})})]}),l==="board-building"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-ink-100 p-8",children:[e.jsx(Gn,{}),e.jsx(td,{steps:["Plan","Building","Profile & Pay"],current:1}),e.jsx("h2",{className:"font-display text-lg font-bold text-ink-900 text-center mb-4",children:"Building Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Building / Association Name *"}),e.jsx("input",{value:ce,onChange:ge=>E(ge.target.value),className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:"e.g., Sunny Acres Condominium"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Building Short Name (URL) *"}),e.jsxs("div",{className:"flex items-center gap-0",children:[e.jsx("input",{value:J,onChange:ge=>Q(ge.target.value.toLowerCase().replace(/[^a-z0-9]/g,"").slice(0,20)),className:`flex-1 px-3 py-2.5 border rounded-l-lg text-sm font-mono ${xe==="taken"?"border-red-400 bg-red-50":xe==="available"?"border-sage-400 bg-sage-50":"border-ink-200"}`,placeholder:"sunnyacres"}),e.jsx("span",{className:"px-3 py-2.5 bg-ink-100 border border-l-0 border-ink-200 rounded-r-lg text-xs text-ink-500",children:".getonetwo.com"})]}),e.jsxs("div",{className:"mt-1 h-4",children:[xe==="checking"&&e.jsx("p",{className:"text-xs text-ink-400",children:"Checking availability..."}),xe==="available"&&J.length>=3&&e.jsxs("p",{className:"text-xs text-sage-600",children:[" ",J,".getonetwo.com is available"]}),xe==="taken"&&e.jsx("p",{className:"text-xs text-red-600",children:" Already taken  try a different name"}),xe==="idle"&&J.length>0&&J.length<3&&e.jsx("p",{className:"text-xs text-ink-400",children:"Must be at least 3 characters"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Street Address *"}),e.jsx("input",{value:b,onChange:ge=>ae(ge.target.value),className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:"123 Main St"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"City"}),e.jsx("input",{value:Me,onChange:ge=>Ae(ge.target.value),className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"State"}),e.jsx("input",{value:ot,onChange:ge=>St(ge.target.value),className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:"DC",maxLength:2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"ZIP"}),e.jsx("input",{value:ve,onChange:ge=>Ye(ge.target.value),className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:"20001"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Total Units"}),e.jsx("input",{value:De,onChange:ge=>et(ge.target.value),type:"number",className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:"14"})]}),e.jsx("button",{onClick:()=>{if(!ce){alert("Please enter your building name.");return}if(!J||J.length<3){alert("Please enter a short name (at least 3 characters) for your building URL.");return}if(xe==="taken"){alert("That short name is already taken. Please choose another.");return}if(xe==="checking"){alert("Still checking availability  please wait a moment.");return}m("board-profile")},className:"w-full py-3 bg-ink-900 text-white rounded-xl font-semibold text-sm hover:bg-ink-800 mt-2",children:"Continue "})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("a",{onClick:()=>m("board-subscribe"),className:"text-sm text-ink-400 hover:text-ink-600 cursor-pointer",children:" Back"})})]}),l==="board-profile"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-ink-100 p-8",children:[e.jsx(Gn,{}),e.jsx(td,{steps:["Plan","Building","Profile & Pay"],current:2}),e.jsx("h2",{className:"font-display text-lg font-bold text-ink-900 text-center mb-4",children:"Your Profile"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"First Name *"}),e.jsx("input",{value:F,onChange:ge=>z(ge.target.value),className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:"First"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Last Name *"}),e.jsx("input",{value:ne,onChange:ge=>K(ge.target.value),className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:"Last"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:ie,onChange:ge=>he(ge.target.value),className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:"you@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Password *"}),e.jsx("input",{type:"password",value:v,onChange:ge=>R(ge.target.value),className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Phone"}),e.jsx("input",{value:pe,onChange:ge=>Ne(ge.target.value),className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:"(xxx) xxx-xxxx"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Your Unit # (optional)"}),e.jsx("input",{value:B,onChange:ge=>I(ge.target.value),className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:"e.g., 301"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Board Role"}),e.jsxs("select",{value:w,onChange:ge=>M(ge.target.value),className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm bg-white",children:[e.jsx("option",{children:"President"}),e.jsx("option",{children:"Vice President"}),e.jsx("option",{children:"Treasurer"}),e.jsx("option",{children:"Secretary"}),e.jsx("option",{children:"Member at Large"})]})]}),e.jsxs("div",{className:"bg-mist-50 border border-mist-200 rounded-xl p-4 mt-2",children:[e.jsx("p",{className:"text-xs font-semibold text-ink-400 uppercase mb-2",children:"Order Summary"}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-ink-700",children:(Cs=yr.find(ge=>ge.id===U))==null?void 0:Cs.name}),e.jsxs("span",{className:"font-bold text-ink-900",children:["$",(us=yr.find(ge=>ge.id===U))==null?void 0:us.price,"/mo"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-ink-400 mt-1",children:[e.jsx("span",{children:ce||"Your building"}),e.jsx("span",{children:"30-day free trial"})]}),J&&e.jsxs("p",{className:"text-xs text-ink-400 mt-1",children:["URL: ",e.jsxs("span",{className:"font-mono text-ink-600",children:[J,".getonetwo.com"]})]})]}),e.jsx("button",{onClick:qs,className:"w-full py-3 bg-accent-600 text-white rounded-xl font-semibold text-sm hover:bg-accent-700 mt-2",children:"Create Account & Enter "}),e.jsx("p",{className:"text-center text-[10px] text-ink-400",children:"You'll be redirected to Stripe for secure payment. No charge during trial."})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("a",{onClick:()=>m("board-building"),className:"text-sm text-ink-400 hover:text-ink-600 cursor-pointer",children:" Back"})})]})]})})}function zb(l,m){let i;try{i=l()}catch{return}return{getItem:u=>{var d;const x=f=>f===null?null:JSON.parse(f,void 0),p=(d=i.getItem(u))!=null?d:null;return p instanceof Promise?p.then(x):x(p)},setItem:(u,d)=>i.setItem(u,JSON.stringify(d,void 0)),removeItem:u=>i.removeItem(u)}}const xd=l=>m=>{try{const i=l(m);return i instanceof Promise?i:{then(o){return xd(o)(i)},catch(o){return this}}}catch(i){return{then(o){return this},catch(o){return xd(o)(i)}}}},Pb=(l,m)=>(i,o,u)=>{let d={storage:zb(()=>window.localStorage),partialize:T=>T,version:0,merge:(T,y)=>({...y,...T}),...m},x=!1,p=0;const f=new Set,g=new Set;let v=d.storage;if(!v)return l((...T)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),i(...T)},o,u);const R=()=>{const T=d.partialize({...o()});return v.setItem(d.name,{state:T,version:d.version})},O=u.setState;u.setState=(T,y)=>(O(T,y),R());const N=l((...T)=>(i(...T),R()),o,u);u.getInitialState=()=>N;let P;const _=()=>{var T,y;if(!v)return;const j=++p;x=!1,f.forEach(A=>{var H;return A((H=o())!=null?H:N)});const q=((y=d.onRehydrateStorage)==null?void 0:y.call(d,(T=o())!=null?T:N))||void 0;return xd(v.getItem.bind(v))(d.name).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==d.version){if(d.migrate){const H=d.migrate(A.state,A.version);return H instanceof Promise?H.then(U=>[!0,U]):[!0,H]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,A.state];return[!1,void 0]}).then(A=>{var H;if(j!==p)return;const[U,L]=A;if(P=d.merge(L,(H=o())!=null?H:N),i(P,!0),U)return R()}).then(()=>{j===p&&(q==null||q(P,void 0),P=o(),x=!0,g.forEach(A=>A(P)))}).catch(A=>{j===p&&(q==null||q(void 0,A))})};return u.persist={setOptions:T=>{d={...d,...T},T.storage&&(v=T.storage)},clearStorage:()=>{v==null||v.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>_(),hasHydrated:()=>x,onHydrate:T=>(f.add(T),()=>{f.delete(T)}),onFinishHydration:T=>(g.add(T),()=>{g.delete(T)})},d.skipHydration||_(),P||N},dp=Pb,Vb=[{id:"cat1",name:"Maintenance & Repairs",budgeted:8e3,expenses:[{id:"exp1",date:"2026-01-15",description:"Plumbing repair - Unit 204",amount:450,vendor:"Quick Fix Plumbing",invoice:"INV-1001"},{id:"exp2",date:"2026-01-22",description:"HVAC filter replacement",amount:280,vendor:"Cool Air Services",invoice:"INV-1002"},{id:"exp3",date:"2026-02-03",description:"Emergency roof leak repair",amount:1200,vendor:"Apex Roofing",invoice:"INV-1003"}]},{id:"cat2",name:"Utilities",budgeted:5e3,expenses:[{id:"exp4",date:"2026-01-10",description:"Electricity - January",amount:1250,vendor:"City Power & Light",invoice:"INV-2001"},{id:"exp5",date:"2026-01-10",description:"Water & Sewer - January",amount:850,vendor:"City Water Dept",invoice:"INV-2002"},{id:"exp6",date:"2026-02-01",description:"Gas - January",amount:425,vendor:"Metro Gas Company",invoice:"INV-2003"}]},{id:"cat3",name:"Landscaping",budgeted:3e3,expenses:[{id:"exp7",date:"2026-01-20",description:"Monthly lawn service",amount:650,vendor:"Green Thumb Landscaping",invoice:"INV-3001"},{id:"exp8",date:"2026-02-05",description:"Tree trimming",amount:380,vendor:"Tree Masters LLC",invoice:"INV-3002"}]},{id:"cat4",name:"Insurance",budgeted:5500,expenses:[{id:"exp9",date:"2026-01-01",description:"Property insurance premium Q1",amount:4500,vendor:"Secure Home Insurance",invoice:"INV-4001"}]},{id:"cat5",name:"Management Fees",budgeted:2500,expenses:[{id:"exp10",date:"2026-01-31",description:"Property management - January",amount:1200,vendor:"Premier Property Mgmt",invoice:"INV-5001"},{id:"exp11",date:"2026-02-01",description:"Property management - February",amount:1200,vendor:"Premier Property Mgmt",invoice:"INV-5002"}]},{id:"cat6",name:"Legal & Professional",budgeted:1500,expenses:[{id:"exp12",date:"2026-01-28",description:"HOA legal consultation",amount:450,vendor:"Smith & Associates Law",invoice:"INV-6001"},{id:"exp13",date:"2026-02-08",description:"Annual audit services",amount:350,vendor:"CPA Solutions Inc",invoice:"INV-6002"}]}],Fb=[{id:"res1",name:"Roof Replacement",estimatedCost:85e3,currentFunding:45e3,usefulLife:25,lastReplaced:"2003",yearsRemaining:2.3,isContingency:!1},{id:"res2",name:"HVAC System",estimatedCost:95e3,currentFunding:5e4,usefulLife:20,lastReplaced:"2007",yearsRemaining:1.8,isContingency:!1},{id:"res3",name:"Elevator Modernization",estimatedCost:75e3,currentFunding:0,usefulLife:25,lastReplaced:"2005",yearsRemaining:4.1,isContingency:!1},{id:"res4",name:"Parking Lot Resurfacing",estimatedCost:45e3,currentFunding:0,usefulLife:15,lastReplaced:"2014",yearsRemaining:3.6,isContingency:!1},{id:"res5",name:"Contingency Fund",estimatedCost:3e4,currentFunding:3e4,usefulLife:0,lastReplaced:"N/A",yearsRemaining:0,isContingency:!0}],T0=[{num:"1000",name:"Assets",type:"asset",sub:"header",parent:null},{num:"1010",name:"Operating Checking",type:"asset",sub:"bank",parent:"1000"},{num:"1020",name:"Reserve Savings",type:"asset",sub:"bank",parent:"1000"},{num:"1030",name:"Petty Cash",type:"asset",sub:"bank",parent:"1000"},{num:"1100",name:"Accounts Receivable",type:"asset",sub:"receivable",parent:"1000"},{num:"1110",name:"Assessments Receivable",type:"asset",sub:"receivable",parent:"1100"},{num:"1120",name:"Special Assessments Receivable",type:"asset",sub:"receivable",parent:"1100"},{num:"1130",name:"Late Fees Receivable",type:"asset",sub:"receivable",parent:"1100"},{num:"1140",name:"Insurance Claims Receivable",type:"asset",sub:"receivable",parent:"1100"},{num:"1200",name:"Prepaid Expenses",type:"asset",sub:"prepaid",parent:"1000"},{num:"2000",name:"Liabilities",type:"liability",sub:"header",parent:null},{num:"2010",name:"Accounts Payable",type:"liability",sub:"payable",parent:"2000"},{num:"2020",name:"Prepaid Assessments",type:"liability",sub:"deferred",parent:"2000"},{num:"2030",name:"Security Deposits Held",type:"liability",sub:"deposit",parent:"2000"},{num:"2040",name:"Accrued Expenses",type:"liability",sub:"accrued",parent:"2000"},{num:"3000",name:"Equity",type:"equity",sub:"header",parent:null},{num:"3010",name:"Operating Fund Balance",type:"equity",sub:"fund",parent:"3000"},{num:"3020",name:"Reserve Fund Balance",type:"equity",sub:"fund",parent:"3000"},{num:"3030",name:"Retained Surplus / (Deficit)",type:"equity",sub:"retained",parent:"3000"},{num:"4000",name:"Income",type:"income",sub:"header",parent:null},{num:"4010",name:"Regular Assessments",type:"income",sub:"assessment",parent:"4000"},{num:"4020",name:"Special Assessments",type:"income",sub:"assessment",parent:"4000"},{num:"4030",name:"Late Fees",type:"income",sub:"fee",parent:"4000"},{num:"4040",name:"Interest Income",type:"income",sub:"interest",parent:"4000"},{num:"4050",name:"Move-In/Move-Out Fees",type:"income",sub:"fee",parent:"4000"},{num:"4060",name:"Amenity Rental Income",type:"income",sub:"fee",parent:"4000"},{num:"4070",name:"Fines & Penalties",type:"income",sub:"fee",parent:"4000"},{num:"4080",name:"Insurance Proceeds",type:"income",sub:"other",parent:"4000"},{num:"4090",name:"Other Income",type:"income",sub:"other",parent:"4000"},{num:"5000",name:"Operating Expenses",type:"expense",sub:"header",parent:null},{num:"5010",name:"Maintenance & Repairs",type:"expense",sub:"operating",parent:"5000",budgetCat:"cat1"},{num:"5020",name:"Utilities",type:"expense",sub:"operating",parent:"5000",budgetCat:"cat2"},{num:"5030",name:"Landscaping",type:"expense",sub:"operating",parent:"5000",budgetCat:"cat3"},{num:"5040",name:"Insurance",type:"expense",sub:"operating",parent:"5000",budgetCat:"cat4"},{num:"5050",name:"Management Fees",type:"expense",sub:"operating",parent:"5000",budgetCat:"cat5"},{num:"5060",name:"Legal & Professional",type:"expense",sub:"operating",parent:"5000",budgetCat:"cat6"},{num:"5070",name:"Administrative",type:"expense",sub:"operating",parent:"5000"},{num:"5080",name:"Security",type:"expense",sub:"operating",parent:"5000"},{num:"5090",name:"Cleaning & Janitorial",type:"expense",sub:"operating",parent:"5000"},{num:"5100",name:"Pest Control",type:"expense",sub:"operating",parent:"5000"},{num:"6000",name:"Reserve Expenses",type:"expense",sub:"header",parent:null},{num:"6010",name:"Roof Replacement",type:"expense",sub:"reserve",parent:"6000",reserveItem:"res1"},{num:"6020",name:"HVAC System",type:"expense",sub:"reserve",parent:"6000",reserveItem:"res2"},{num:"6030",name:"Elevator Modernization",type:"expense",sub:"reserve",parent:"6000",reserveItem:"res3"},{num:"6040",name:"Parking Lot Resurfacing",type:"expense",sub:"reserve",parent:"6000",reserveItem:"res4"},{num:"6050",name:"Contingency",type:"expense",sub:"reserve",parent:"6000",reserveItem:"res5"}],Hb=[{number:"101",owner:"Sarah Johnson",email:"sarah.j@example.com",phone:"202-555-0101",monthlyFee:450,votingPct:2.1,status:"OCCUPIED",balance:0,moveIn:"2019-06-15",sqft:850,bedrooms:1,parking:"P-101",payments:[{date:"2026-01-05",amount:450,method:"ACH",note:""},{date:"2026-02-03",amount:450,method:"ACH",note:""}],lateFees:[],specialAssessments:[]},{number:"102",owner:"Mike Davis",email:"mike.d@example.com",phone:"202-555-0102",monthlyFee:475,votingPct:2.2,status:"OCCUPIED",balance:0,moveIn:"2020-03-01",sqft:900,bedrooms:1,parking:"P-102",payments:[{date:"2026-01-04",amount:475,method:"check",note:"#4521"},{date:"2026-02-02",amount:475,method:"check",note:"#4589"}],lateFees:[],specialAssessments:[]},{number:"103",owner:"Vacant",email:"",phone:"",monthlyFee:450,votingPct:2.1,status:"VACANT",balance:0,moveIn:null,sqft:850,bedrooms:1,parking:"P-103",payments:[],lateFees:[],specialAssessments:[]},{number:"201",owner:"Lisa Chen",email:"lisa.c@example.com",phone:"202-555-0201",monthlyFee:500,votingPct:2.3,status:"OCCUPIED",balance:0,moveIn:"2018-09-01",sqft:1050,bedrooms:2,parking:"P-201",payments:[{date:"2026-01-03",amount:500,method:"ACH",note:""},{date:"2026-02-01",amount:500,method:"ACH",note:""}],lateFees:[],specialAssessments:[]},{number:"202",owner:"Tom Wilson",email:"tom.w@example.com",phone:"202-555-0202",monthlyFee:450,votingPct:2.1,status:"OCCUPIED",balance:0,moveIn:"2021-01-15",sqft:850,bedrooms:1,parking:null,payments:[{date:"2026-01-06",amount:450,method:"ACH",note:""},{date:"2026-02-05",amount:450,method:"ACH",note:""}],lateFees:[],specialAssessments:[]},{number:"203",owner:"Emma Stone",email:"emma.s@example.com",phone:"202-555-0203",monthlyFee:475,votingPct:2.2,status:"OCCUPIED",balance:450,moveIn:"2022-07-01",sqft:900,bedrooms:1,parking:"P-203",payments:[{date:"2026-01-08",amount:475,method:"check",note:"#1891"}],lateFees:[],specialAssessments:[]},{number:"301",owner:"John Smith (You)",email:"john@example.com",phone:"202-555-0301",monthlyFee:450,votingPct:2.1,status:"OCCUPIED",balance:925,moveIn:"2017-04-01",sqft:850,bedrooms:1,parking:"P-301",payments:[],lateFees:[{date:"2026-02-06",amount:25,reason:"Late payment  Jan 2026",waived:!1}],specialAssessments:[{id:"sa-1",date:"2026-01-15",amount:500,reason:"Roof emergency repair assessment",paid:!1,paidDate:null}]},{number:"302",owner:"Rachel Green",email:"rachel.g@example.com",phone:"202-555-0302",monthlyFee:450,votingPct:2.1,status:"OCCUPIED",balance:0,moveIn:"2023-11-01",sqft:850,bedrooms:1,parking:null,payments:[{date:"2026-01-01",amount:450,method:"ACH",note:""},{date:"2026-02-01",amount:450,method:"ACH",note:""}],lateFees:[],specialAssessments:[]},{number:"303",owner:"David Park",email:"david.p@example.com",phone:"202-555-0303",monthlyFee:475,votingPct:2.2,status:"OCCUPIED",balance:450,moveIn:"2020-08-15",sqft:900,bedrooms:1,parking:"P-303",payments:[{date:"2026-01-10",amount:475,method:"check",note:"#7823"}],lateFees:[],specialAssessments:[]},{number:"401",owner:"Amy Lee",email:"amy.l@example.com",phone:"202-555-0401",monthlyFee:500,votingPct:2.3,status:"OCCUPIED",balance:0,moveIn:"2019-02-01",sqft:1050,bedrooms:2,parking:"P-401",payments:[{date:"2026-01-02",amount:500,method:"ACH",note:""},{date:"2026-02-01",amount:500,method:"ACH",note:""}],lateFees:[],specialAssessments:[]},{number:"402",owner:"James Brown",email:"james.b@example.com",phone:"202-555-0402",monthlyFee:450,votingPct:2.1,status:"OCCUPIED",balance:0,moveIn:"2021-05-01",sqft:850,bedrooms:1,parking:null,payments:[{date:"2026-01-05",amount:450,method:"ACH",note:""},{date:"2026-02-04",amount:450,method:"ACH",note:""}],lateFees:[],specialAssessments:[]},{number:"403",owner:"Maria Garcia",email:"maria.g@example.com",phone:"202-555-0403",monthlyFee:475,votingPct:2.2,status:"OCCUPIED",balance:1200,moveIn:"2018-11-15",sqft:900,bedrooms:1,parking:"P-403",payments:[],lateFees:[{date:"2026-01-06",amount:25,reason:"Late payment  Dec 2025",waived:!1},{date:"2026-02-06",amount:50,reason:"Late payment  Jan 2026 (2nd offense)",waived:!1}],specialAssessments:[{id:"sa-2",date:"2026-01-15",amount:500,reason:"Roof emergency repair assessment",paid:!1,paidDate:null}]},{number:"501",owner:"Chris Taylor",email:"chris.t@example.com",phone:"202-555-0501",monthlyFee:500,votingPct:2.3,status:"OCCUPIED",balance:0,moveIn:"2022-01-01",sqft:1200,bedrooms:2,parking:"P-501",payments:[{date:"2026-01-03",amount:500,method:"ACH",note:""},{date:"2026-02-02",amount:500,method:"ACH",note:""}],lateFees:[],specialAssessments:[]},{number:"502",owner:"Nicole White",email:"nicole.w@example.com",phone:"202-555-0502",monthlyFee:550,votingPct:2.5,status:"OCCUPIED",balance:550,moveIn:"2023-06-01",sqft:1350,bedrooms:3,parking:"P-502A, P-502B",payments:[{date:"2026-01-07",amount:550,method:"check",note:"#9901"}],lateFees:[],specialAssessments:[]}],Gb=[{id:"WO-101",title:"Emergency Roof Leak Repair",vendor:"Apex Roofing",description:"Water intrusion in unit 204 from roof membrane failure",acctNum:"5010",amount:1200,status:"paid",caseId:"c3",createdDate:"2026-01-28",approvedDate:"2026-01-29",invoiceNum:"INV-1003",invoiceDate:"2026-02-03",paidDate:"2026-02-03",glEntryId:"GL1017",attachments:[{name:"INV-1003-ApexRoofing.pdf",type:"invoice",date:"2026-02-03",size:"245 KB"}]},{id:"WO-102",title:"HVAC Filter Replacement - All Units",vendor:"Cool Air Services",description:"Quarterly HVAC filter replacement for common areas",acctNum:"5010",amount:280,status:"paid",caseId:null,createdDate:"2026-01-18",approvedDate:"2026-01-19",invoiceNum:"INV-1002",invoiceDate:"2026-01-22",paidDate:"2026-01-22",glEntryId:"GL1016",attachments:[{name:"INV-1002-CoolAir.pdf",type:"invoice",date:"2026-01-22",size:"128 KB"}]},{id:"WO-103",title:"Tree Trimming - Front Entrance",vendor:"Tree Masters LLC",description:"Annual trim of oak trees along main entrance",acctNum:"5030",amount:380,status:"invoiced",caseId:null,createdDate:"2026-02-01",approvedDate:"2026-02-02",invoiceNum:"INV-3002",invoiceDate:"2026-02-05",paidDate:null,glEntryId:null,attachments:[]},{id:"WO-104",title:"Elevator Annual Inspection",vendor:"Metro Elevator Co",description:"Annual state-required elevator inspection and certification",acctNum:"5010",amount:950,status:"approved",caseId:null,createdDate:"2026-02-10",approvedDate:"2026-02-12",invoiceNum:null,invoiceDate:null,paidDate:null,glEntryId:null,attachments:[]},{id:"WO-105",title:"Lobby Painting - Water Damage",vendor:"Pro Painters LLC",description:"Repaint lobby ceiling after water leak from unit 301",acctNum:"5010",amount:1800,status:"draft",caseId:null,createdDate:"2026-02-15",approvedDate:null,invoiceNum:null,invoiceDate:null,paidDate:null,glEntryId:null,attachments:[]}],Xt=jn()(dp((l,m)=>({budgetCategories:Vb,reserveItems:Fb,chartOfAccounts:[...T0],acctStatus:Object.fromEntries(T0.map(i=>[i.num,!0])),generalLedger:[],glNextId:1e3,units:Hb,hoaDueDay:15,annualReserveContribution:12e3,workOrders:[...Gb],unitInvoices:[],activeTab:"dashboard",glFilter:{account:"",source:"",search:""},glPage:0,setActiveTab:i=>l({activeTab:i,glPage:0}),setGlFilter:i=>l(o=>({glFilter:{...o.glFilter,...i},glPage:0})),setGlPage:i=>l({glPage:i}),glPost:(i,o,u,d,x,p,f)=>{const g=m(),v={id:"GL"+g.glNextId,date:i,memo:o,debitAcct:u,creditAcct:d,amount:Math.round(x*100)/100,source:p,sourceId:f,posted:new Date().toISOString(),status:"posted"};return l({generalLedger:[...g.generalLedger,v],glNextId:g.glNextId+1}),v},seedGeneralLedger:()=>{const i=m(),o=[];let u=1e3;const d=(g,v,R,O,N,P,_)=>{o.push({id:"GL"+u++,date:g,memo:v,debitAcct:R,creditAcct:O,amount:Math.round(N*100)/100,source:P,sourceId:_,posted:new Date().toISOString(),status:"posted"})};i.units.forEach(g=>{g.status==="OCCUPIED"&&(d("2026-01-01",`Assessment - Unit ${g.number} (Jan)`,"1110","4010",g.monthlyFee,"assessment",g.number),d("2026-02-01",`Assessment - Unit ${g.number} (Feb)`,"1110","4010",g.monthlyFee,"assessment",g.number))}),i.units.forEach(g=>{g.status==="OCCUPIED"&&(d("2026-01-15",`Payment received - Unit ${g.number} (Jan)`,"1010","1110",g.monthlyFee,"payment",g.number),g.balance===0&&d("2026-02-10",`Payment received - Unit ${g.number} (Feb)`,"1010","1110",g.monthlyFee,"payment",g.number))}),i.units.forEach(g=>{g.balance>0&&g.balance>g.monthlyFee&&d("2026-02-05",`Late fee - Unit ${g.number}`,"1130","4030",25,"fee",g.number)}),i.budgetCategories.forEach(g=>{const v=i.chartOfAccounts.find(O=>O.budgetCat===g.id),R=v?v.num:"5070";g.expenses.forEach(O=>{d(O.date,O.description,R,"1010",O.amount,"expense",O.invoice)})}),i.reserveItems.forEach(g=>{g.currentFunding>0&&d("2025-12-31",`Reserve balance - ${g.name}`,"1020","3020",g.currentFunding,"transfer",g.id)});const x=i.budgetCategories.reduce((g,v)=>g+v.expenses.reduce((R,O)=>R+O.amount,0),0),f=i.units.filter(g=>g.status==="OCCUPIED").reduce((g,v)=>g+v.monthlyFee*2,0)-x+15e3;d("2025-12-31","Opening operating fund balance","1010","3010",f,"manual",null),l({generalLedger:o,glNextId:u})},getAcct:i=>m().chartOfAccounts.find(o=>o.num===i),getAcctName:i=>{const o=m().chartOfAccounts.find(u=>u.num===i);return o?`${o.num}  ${o.name}`:i},getAcctsByType:i=>m().chartOfAccounts.filter(o=>o.type===i&&o.sub!=="header"),getAcctChildren:i=>m().chartOfAccounts.filter(o=>o.parent===i),glByAccount:i=>m().generalLedger.filter(o=>o.debitAcct===i||o.creditAcct===i),acctBalance:i=>{const o=m().chartOfAccounts.find(x=>x.num===i);if(!o)return 0;const u=o.type==="asset"||o.type==="expense";let d=0;return m().generalLedger.forEach(x=>{x.debitAcct===i&&(d+=x.amount),x.creditAcct===i&&(d-=x.amount)}),u?d:-d},acctGroupBalance:i=>{const o=m().getAcctChildren(i);return o.length===0?m().acctBalance(i):o.reduce((u,d)=>m().getAcctChildren(d.num).length>0?u+m().acctGroupBalance(d.num):u+m().acctBalance(d.num),0)},getBalanceSheet:()=>{const{acctBalance:i}=m(),o={operating:i("1010"),reserves:i("1020"),pettyCash:i("1030"),assessmentsAR:i("1110"),specialAR:i("1120"),lateFeesAR:i("1130"),insuranceAR:i("1140"),prepaid:i("1200"),totalCurrent:0,totalReceivable:0,total:0};o.totalCurrent=o.operating+o.reserves+o.pettyCash,o.totalReceivable=o.assessmentsAR+o.specialAR+o.lateFeesAR+o.insuranceAR,o.total=o.totalCurrent+o.totalReceivable+o.prepaid;const u={payable:i("2010"),prepaidAssessments:i("2020"),deposits:i("2030"),accrued:i("2040"),total:0};u.total=u.payable+u.prepaidAssessments+u.deposits+u.accrued;const d={operatingFund:i("3010"),reserveFund:i("3020"),retained:i("3030"),total:0};return d.total=d.operatingFund+d.reserveFund+d.retained,{assets:o,liabilities:u,equity:d}},getIncomeStatement:(i,o)=>{const{generalLedger:u,getAcctsByType:d}=m(),x=u.filter(R=>R.date>=i&&R.date<=o),p={},f={};d("income").forEach(R=>{let O=0;x.forEach(N=>{N.creditAcct===R.num&&(O+=N.amount),N.debitAcct===R.num&&(O-=N.amount)}),O!==0&&(p[R.num]={name:R.name,amount:O})}),d("expense").forEach(R=>{let O=0;x.forEach(N=>{N.debitAcct===R.num&&(O+=N.amount),N.creditAcct===R.num&&(O-=N.amount)}),O!==0&&(f[R.num]={name:R.name,amount:O})});const g=Object.values(p).reduce((R,O)=>R+O.amount,0),v=Object.values(f).reduce((R,O)=>R+O.amount,0);return{income:p,expenses:f,totalIncome:g,totalExpenses:v,netIncome:g-v}},getBudgetVariance:()=>{const{budgetCategories:i,chartOfAccounts:o,acctBalance:u,getCategorySpent:d}=m();return i.map(x=>{const p=o.find(O=>O.budgetCat===x.id),f=p?u(p.num):d(x),g=x.budgeted,v=g-f,R=g>0?Math.round(f/g*100):0;return{id:x.id,name:x.name,budgeted:g,actual:f,variance:v,pct:R,acctNum:p==null?void 0:p.num}})},getDelinquencyAging:()=>{const i=m().units.filter(o=>o.balance>0);return{current:i.filter(o=>o.balance<=o.monthlyFee),days30:i.filter(o=>o.balance>o.monthlyFee&&o.balance<=o.monthlyFee*2),days60:i.filter(o=>o.balance>o.monthlyFee*2&&o.balance<=o.monthlyFee*3),days90plus:i.filter(o=>o.balance>o.monthlyFee*3),totalOutstanding:i.reduce((o,u)=>o+u.balance,0)}},getIncomeMetrics:()=>{const{units:i}=m(),o=i.reduce((p,f)=>p+f.monthlyFee,0),u=i.reduce((p,f)=>p+f.balance,0),d=o-u,x=Math.round(d/o*100);return{totalUnits:i.length,occupiedUnits:i.filter(p=>p.status==="OCCUPIED").length,currentUnits:i.filter(p=>p.balance===0).length,delinquentUnits:i.filter(p=>p.balance>0).length,monthlyExpected:o,monthlyCollected:d,totalOutstanding:u,collectionRate:x,annualExpected:o*12,annualCollected:d*12}},getReserveFundingStatus:()=>m().reserveItems.map(i=>{const o=i.currentFunding,u=i.estimatedCost,d=u-o,x=u>0?Math.round(o/u*100):100,p=i.yearsRemaining>0?Math.round(d/i.yearsRemaining):0;return{...i,gap:d,pct:x,annualNeeded:p}}),calculateRecommendedAnnualReserve:()=>{const i=m().reserveItems.filter(u=>!u.isContingency);let o=0;return i.forEach(u=>{u.yearsRemaining>0&&(o+=(u.estimatedCost-u.currentFunding)/u.yearsRemaining)}),o},getCategorySpent:i=>i.expenses.reduce((o,u)=>o+u.amount,0),addBudgetCategory:(i,o)=>l(u=>({budgetCategories:[...u.budgetCategories,{id:"cat"+Date.now(),name:i,budgeted:o,expenses:[]}]})),updateBudgetCategory:(i,o)=>l(u=>({budgetCategories:u.budgetCategories.map(d=>d.id===i?{...d,...o}:d)})),deleteBudgetCategory:i=>l(o=>({budgetCategories:o.budgetCategories.filter(u=>u.id!==i)})),setAnnualReserveContribution:i=>l({annualReserveContribution:i}),getOperatingBudget:()=>{const{units:i,annualReserveContribution:o,budgetCategories:u}=m(),d=i.reduce((g,v)=>g+v.monthlyFee,0)*12,x=d-o,p=u.reduce((g,v)=>g+v.budgeted,0),f=x-p;return{annualRevenue:d,reserveContribution:o,operatingBudget:x,totalAllocated:p,unallocated:f,overAllocated:p>x}},addExpense:(i,o)=>l(u=>({budgetCategories:u.budgetCategories.map(d=>d.id===i?{...d,expenses:[...d.expenses,{id:"exp"+Date.now(),...o}].sort((x,p)=>p.date.localeCompare(x.date))}:d)})),deleteExpense:(i,o)=>l(u=>({budgetCategories:u.budgetCategories.map(d=>d.id===i?{...d,expenses:d.expenses.filter(x=>x.id!==o)}:d)})),addReserveItem:i=>l(o=>({reserveItems:[...o.reserveItems,{id:"res"+Date.now(),...i}]})),updateReserveItem:(i,o)=>l(u=>({reserveItems:u.reserveItems.map(d=>d.id===i?{...d,...o}:d)})),deleteReserveItem:i=>l(o=>({reserveItems:o.reserveItems.filter(u=>u.id!==i)})),addUnit:i=>l(o=>({units:[...o.units,{...i,payments:[],lateFees:[],specialAssessments:[]}]})),setHoaDueDay:i=>l({hoaDueDay:i}),createWorkOrder:i=>l(o=>({workOrders:[...o.workOrders,{id:"WO-"+String(o.workOrders.length+1).padStart(3,"0"),title:i.title,vendor:i.vendor,description:i.title,amount:i.amount,acctNum:i.acctNum,status:"draft",createdDate:new Date().toISOString().split("T")[0],caseId:i.caseId||null,invoiceNum:null,invoiceDate:null,approvedDate:null,paidDate:null,glEntryId:null,attachments:[]}]})),approveWorkOrder:i=>l(o=>({workOrders:o.workOrders.map(u=>u.id===i&&u.status==="draft"?{...u,status:"approved",approvedDate:new Date().toISOString().split("T")[0]}:u)})),receiveInvoice:(i,o,u)=>l(d=>({workOrders:d.workOrders.map(x=>x.id===i&&x.status==="approved"?{...x,status:"invoiced",invoiceNum:o,amount:u}:x)})),payWorkOrder:i=>{const o=m().workOrders.find(x=>x.id===i);if(!o||o.status!=="invoiced")return;const u=new Date().toISOString().split("T")[0],d=m().glPost(u,`${o.title}  ${o.vendor}${o.caseId?" ("+o.caseId+")":""}`,o.acctNum,"1010",o.amount,o.caseId?"case":"expense",o.caseId||o.invoiceNum);l(x=>({workOrders:x.workOrders.map(p=>p.id===i?{...p,status:"paid",paidDate:u,glEntryId:d.id}:p)}))},addCoASection:(i,o,u)=>l(d=>{if(d.chartOfAccounts.find(p=>p.num===i))return d;const x=[...d.chartOfAccounts,{num:i,name:o,type:u,sub:"header",parent:null}];return x.sort((p,f)=>p.num.localeCompare(f.num)),{chartOfAccounts:x}}),addCoAAccount:(i,o,u,d)=>l(x=>{if(x.chartOfAccounts.find(v=>v.num===i))return x;let p=x.chartOfAccounts.find(v=>v.num===u);for(;p&&p.sub!=="header";)p=x.chartOfAccounts.find(v=>v.num===p.parent);const f=p?p.type:"expense",g=[...x.chartOfAccounts,{num:i,name:o,type:f,sub:d,parent:u}];return g.sort((v,R)=>v.num.localeCompare(R.num)),{chartOfAccounts:g}}),updateCoAAccount:(i,o,u)=>l(d=>({chartOfAccounts:d.chartOfAccounts.map(x=>x.num===i?{...x,name:o}:x),acctStatus:{...d.acctStatus,[i]:u}})),deleteCoAAccount:i=>l(o=>o.generalLedger.some(u=>u.debitAcct===i||u.creditAcct===i)?o:{chartOfAccounts:o.chartOfAccounts.filter(u=>u.num!==i)}),postManualEntry:(i,o,u,d,x)=>{m().glPost(i,o,u,d,x,"manual",null)},recordUnitPayment:(i,o,u)=>{const d=new Date().toISOString().split("T")[0];m().glPost(d,`Payment received - Unit ${i}`,"1010","1110",o,"payment",i),l(x=>({units:x.units.map(p=>p.number===i?{...p,balance:Math.max(0,p.balance-o),payments:[...p.payments,{date:d,amount:o,method:u,note:`Payment via ${u}`}]}:p)}))},waiveLateFee:(i,o)=>{l(u=>({units:u.units.map(d=>d.number===i?{...d,lateFees:d.lateFees.map((x,p)=>p===o?{...x,waived:!0}:x)}:d)}))},imposeLateFee:(i,o,u)=>{const d=new Date().toISOString().split("T")[0];m().glPost(d,`Late fee assessed - Unit ${i}`,"1130","4030",o,"fee",i),l(x=>({units:x.units.map(p=>p.number===i?{...p,lateFees:[...p.lateFees,{date:d,amount:o,reason:u,waived:!1}]}:p)}))},updateUnit:(i,o)=>{l(u=>({units:u.units.map(d=>d.number===i?{...d,...o}:d)}))},removeUnit:i=>{l(o=>({units:o.units.filter(u=>u.number!==i)}))},addSpecialAssessment:(i,o,u)=>{const d=new Date().toISOString().split("T")[0],x="sa-"+Date.now();m().glPost(d,`Special assessment - Unit ${i}: ${u}`,"1120","4020",o,"assessment",i),l(p=>({units:p.units.map(f=>f.number===i?{...f,balance:f.balance+o,specialAssessments:[...f.specialAssessments,{id:x,date:d,amount:o,reason:u,paid:!1,paidDate:null}]}:f)}))},markSpecialAssessmentPaid:(i,o)=>{const u=new Date().toISOString().split("T")[0],d=m().units.find(p=>p.number===i),x=d==null?void 0:d.specialAssessments.find(p=>p.id===o);!x||x.paid||(m().glPost(u,`Special assessment payment - Unit ${i}`,"1010","1120",x.amount,"payment",i),l(p=>({units:p.units.map(f=>f.number===i?{...f,balance:Math.max(0,f.balance-x.amount),specialAssessments:f.specialAssessments.map(g=>g.id===o?{...g,paid:!0,paidDate:u}:g)}:f)})))},stripeConnectId:null,stripeOnboardingComplete:!1,setStripeConnect:i=>l({stripeConnectId:i}),setStripeOnboarding:i=>l({stripeOnboardingComplete:i}),createUnitInvoice:(i,o,u,d)=>{const x=new Date().toISOString().split("T")[0],p=new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],f="INV-U"+Date.now().toString(36).toUpperCase(),g=o==="fee"?"1130":"1120",v=o==="fee"?"4030":"4020",R=m().glPost(x,`Invoice ${f} - Unit ${i}: ${d}`,g,v,u,o==="fee"?"fee":"assessment",i),O={id:f,unitNumber:i,type:o,description:d,amount:u,status:"sent",createdDate:x,dueDate:p,paidDate:null,paidAmount:null,paymentMethod:null,stripePaymentLink:null,glEntryId:(R==null?void 0:R.id)||null,paymentGlEntryId:null};return l(N=>({unitInvoices:[...N.unitInvoices,O]})),O},payUnitInvoice:(i,o)=>{const u=new Date().toISOString().split("T")[0],d=m().unitInvoices.find(p=>p.id===i);if(!d||d.status==="paid")return;const x=m().glPost(u,`Payment received - Invoice ${d.id} Unit ${d.unitNumber}`,"1010",d.type==="fee"?"1130":"1120",d.amount,"payment",d.unitNumber);l(p=>({unitInvoices:p.unitInvoices.map(f=>f.id===i?{...f,status:"paid",paidDate:u,paidAmount:d.amount,paymentMethod:o,paymentGlEntryId:(x==null?void 0:x.id)||null}:f),units:p.units.map(f=>f.number===d.unitNumber?{...f,balance:Math.max(0,f.balance-d.amount),payments:[...f.payments,{date:u,amount:d.amount,method:o,note:`Invoice ${d.id}`}]}:f)}))}}),{name:"onetwo-financial",partialize:l=>({budgetCategories:l.budgetCategories,reserveItems:l.reserveItems,chartOfAccounts:l.chartOfAccounts,acctStatus:l.acctStatus,generalLedger:l.generalLedger,glNextId:l.glNextId,units:l.units,hoaDueDay:l.hoaDueDay,annualReserveContribution:l.annualReserveContribution,workOrders:l.workOrders,unitInvoices:l.unitInvoices,stripeConnectId:l.stripeConnectId,stripeOnboardingComplete:l.stripeOnboardingComplete}),merge:(l,m)=>({...m,...l||{}})})),Ka=jn()(dp(l=>({meetings:[{id:"mtg1",title:"February Board Meeting",type:"BOARD",status:"SCHEDULED",date:"2026-02-20",time:"19:00",location:"Community Room",virtualLink:"",agenda:["Review January financials","Elevator maintenance proposal","Bicycle storage request","Visitor parking enforcement","Q1 landscaping contract"],notes:"",attendees:{board:[],owners:[],guests:[]},minutes:"",votes:[],linkedCaseIds:[],linkedVoteIds:[],documents:[],minutesApprovals:[]},{id:"mtg5",title:"April Board Meeting",type:"BOARD",status:"SCHEDULED",date:"2026-04-15",time:"19:00",location:"Community Room",virtualLink:"",agenda:["Q1 financial review","Reserve fund update","Insurance renewal","Summer maintenance planning"],notes:"",attendees:{board:[],owners:[],guests:[]},minutes:"",votes:[],linkedCaseIds:[],linkedVoteIds:[],documents:[],minutesApprovals:[]},{id:"mtg4",title:"January Board Meeting",type:"BOARD",status:"COMPLETED",date:"2026-01-10",time:"19:00",location:"Community Room",virtualLink:"",agenda:["Welcome new board members","Assign committee roles","Review outstanding issues","Approve meeting schedule for 2026"],notes:"First meeting of new board.",attendees:{board:["Robert Mitchell","Jennifer Adams","David Chen","Maria Rodriguez","Thomas Baker"],owners:[],guests:[]},minutes:`Meeting called to order at 7:00 PM. All board members present.

1. Welcome new board member Sarah Kim.
2. Role assignments: Robert Mitchell (President), Jennifer Adams (VP), David Chen (Treasurer).
3. 2026 meeting schedule approved.
4. Outstanding issues reviewed.

Meeting adjourned at 8:00 PM.`,votes:[],linkedCaseIds:[],linkedVoteIds:[],documents:[],minutesApprovals:[{name:"Robert Mitchell",role:"President",date:"2026-01-12"},{name:"Jennifer Adams",role:"Vice President",date:"2026-01-12"},{name:"David Chen",role:"Treasurer",date:"2026-01-13"}]},{id:"mtg2",title:"Q1 Quarterly Review",type:"QUARTERLY",status:"COMPLETED",date:"2026-01-15",time:"18:30",location:"Virtual",virtualLink:"https://zoom.us/j/example123",agenda:["Q4 2025 financial review","Reserve fund assessment","Maintenance schedule for 2026"],notes:"All board members present. Approved 2026 maintenance budget of $25,500.",attendees:{board:["Robert Mitchell","Jennifer Adams","David Chen","Maria Rodriguez","Thomas Baker"],owners:["Unit 201  Karen Liu","Unit 305  James Park"],guests:["PremierProperty  Diane Carter"]},minutes:`Meeting called to order at 6:30 PM.

1. Q4 Financial Review  Operating expenses $2,100 under budget.
2. Reserve Fund  Current $245K vs recommended $280K. Increase contribution by $500/month.
3. 2026 Maintenance  Approved budget of $25,500.

Adjourned at 7:45 PM.`,linkedCaseIds:[],linkedVoteIds:[],documents:[],minutesApprovals:[],votes:[{id:"v1",motion:"Approve 2026 maintenance budget of $25,500",type:"board",status:"passed",date:"2026-01-15",results:[{name:"Robert Mitchell",vote:"approve"},{name:"Jennifer Adams",vote:"approve"},{name:"David Chen",vote:"approve"},{name:"Maria Rodriguez",vote:"approve"},{name:"Thomas Baker",vote:"approve"}],tally:{approve:5,deny:0,abstain:0}},{id:"v2",motion:"Increase monthly reserve contribution by $500",type:"board",status:"passed",date:"2026-01-15",results:[{name:"Robert Mitchell",vote:"approve"},{name:"Jennifer Adams",vote:"approve"},{name:"David Chen",vote:"approve"},{name:"Maria Rodriguez",vote:"approve"},{name:"Thomas Baker",vote:"abstain"}],tally:{approve:4,deny:0,abstain:1}}]},{id:"mtg3",title:"Annual General Meeting 2025",type:"ANNUAL",status:"COMPLETED",date:"2025-12-10",time:"19:00",location:"Community Room",virtualLink:"",agenda:["Election of board members","Annual financial report","Major projects review","Fee structure for 2026","Q&A session"],notes:"Strong attendance (42 units). Fee increase approved.",attendees:{board:["Robert Mitchell","Jennifer Adams","David Chen","Maria Rodriguez","Thomas Baker"],owners:["Unit 101  Tom Harris","Unit 201  Karen Liu","Unit 301  Alan Park","Unit 401  Priya Patel","Unit 502  Lisa Chen"],guests:["PremierProperty  Diane Carter"]},minutes:`Annual General Meeting called to order at 7:00 PM. 42 of 50 units represented (84%).

1. Annual Financial Report  Revenue $425K, Expenses $310K, Surplus $15K to reserves.
2. Board Election  Three seats filled by acclamation.
3. Fee Structure  3% increase approved for 2026.

Adjourned at 9:15 PM.`,linkedCaseIds:[],linkedVoteIds:[],documents:[],minutesApprovals:[{name:"Robert Mitchell",role:"President",date:"2025-12-15"},{name:"Jennifer Adams",role:"Vice President",date:"2025-12-15"},{name:"David Chen",role:"Treasurer",date:"2025-12-16"},{name:"Maria Rodriguez",role:"Secretary",date:"2025-12-16"},{name:"Thomas Baker",role:"Member at Large",date:"2025-12-17"}],votes:[{id:"v3",motion:"Approve 3% assessment increase for 2026",type:"owner",status:"passed",date:"2025-12-10",results:[{name:"Unit 101",vote:"approve"},{name:"Unit 201",vote:"approve"},{name:"Unit 301",vote:"approve"},{name:"Unit 401",vote:"approve"},{name:"Unit 502",vote:"abstain"}],tally:{approve:9,deny:2,abstain:1}}]}],addMeeting:m=>{const i="mtg"+Date.now();l(o=>({meetings:[...o.meetings,{id:i,title:m.title,type:m.type,status:m.status,date:m.date,time:m.time,location:m.location,virtualLink:m.virtualLink,agenda:m.agenda,notes:m.notes,votes:[],minutes:"",attendees:m.attendees||{board:[],owners:[],guests:[]},linkedCaseIds:[],linkedVoteIds:[],documents:[],minutesApprovals:[]}]}))},updateMeeting:(m,i)=>l(o=>({meetings:o.meetings.map(u=>u.id===m?{...u,...i}:u)})),deleteMeeting:m=>l(i=>({meetings:i.meetings.filter(o=>o.id!==m)})),updateAttendees:(m,i)=>l(o=>({meetings:o.meetings.map(u=>u.id===m?{...u,attendees:i}:u)})),updateMinutes:(m,i)=>l(o=>({meetings:o.meetings.map(u=>u.id===m?{...u,minutes:i,minutesApprovals:[]}:u)})),addVote:(m,i)=>l(o=>({meetings:o.meetings.map(u=>u.id===m?{...u,votes:[...u.votes,{id:"v"+Date.now(),...i}]}:u)})),deleteVote:(m,i)=>l(o=>({meetings:o.meetings.map(u=>u.id===m?{...u,votes:u.votes.filter(d=>d.id!==i)}:u)})),linkCase:(m,i)=>l(o=>({meetings:o.meetings.map(u=>u.id===m?{...u,linkedCaseIds:[...new Set([...u.linkedCaseIds,i])]}:u)})),unlinkCase:(m,i)=>l(o=>({meetings:o.meetings.map(u=>u.id===m?{...u,linkedCaseIds:u.linkedCaseIds.filter(d=>d!==i)}:u)})),linkVote:(m,i)=>l(o=>({meetings:o.meetings.map(u=>u.id===m?{...u,linkedVoteIds:[...new Set([...u.linkedVoteIds||[],i])]}:u)})),unlinkVote:(m,i)=>l(o=>({meetings:o.meetings.map(u=>u.id===m?{...u,linkedVoteIds:(u.linkedVoteIds||[]).filter(d=>d!==i)}:u)})),addDocument:(m,i)=>l(o=>({meetings:o.meetings.map(u=>u.id===m?{...u,documents:[...u.documents||[],{id:"doc_"+Date.now(),...i}]}:u)})),removeDocument:(m,i)=>l(o=>({meetings:o.meetings.map(u=>u.id===m?{...u,documents:(u.documents||[]).filter(d=>d.id!==i)}:u)})),approveMinutes:(m,i)=>l(o=>({meetings:o.meetings.map(u=>u.id===m?{...u,minutesApprovals:[...(u.minutesApprovals||[]).filter(d=>d.name!==i.name),i]}:u)})),revokeMinutesApproval:(m,i)=>l(o=>({meetings:o.meetings.map(u=>u.id===m?{...u,minutesApprovals:(u.minutesApprovals||[]).filter(d=>d.name!==i)}:u)}))}),{name:"onetwo-meetings"})),Ir=jn(l=>({completions:{g1:!0,g3:!0,g4:!0,f1:!0,f2:!0,f4:!0,f5:!0,i1:!0,i2:!0,i4:!0,m2:!0,m3:!0,r1:!0,r2:!0,r4:!0},itemAttachments:{},filings:[{id:"rf1",name:"DC Biennial Report",category:"government",dueDate:"2026-04-01",status:"pending",filedDate:null,confirmationNum:"",notes:"File with DCRA. $80 fee.",responsible:"President",recurrence:"biennial",legalRef:"DC Code  29-102.11",attachments:[]},{id:"rf2",name:"Form 1120-H (Federal Tax Return)",category:"tax",dueDate:"2026-03-15",status:"pending",filedDate:null,confirmationNum:"",notes:"Form 1120-H for exempt function income. Due March 15. Extension available.",responsible:"Treasurer",recurrence:"annual",legalRef:"IRS Code  528",attachments:[]},{id:"rf3",name:"DC Personal Property Tax Return",category:"tax",dueDate:"2026-07-31",status:"pending",filedDate:null,confirmationNum:"",notes:"If HOA owns tangible personal property >$225K.",responsible:"Treasurer",recurrence:"annual",legalRef:"DC Code  47-1508",attachments:[]},{id:"rf4",name:"Annual Fire Safety Inspection",category:"inspection",dueDate:"2026-06-30",status:"pending",filedDate:null,confirmationNum:"",notes:"Schedule with DC Fire and EMS.",responsible:"Vice President",recurrence:"annual",legalRef:"DC Fire Code",attachments:[]},{id:"rf5",name:"Elevator Inspection Certificate",category:"inspection",dueDate:"2026-08-15",status:"filed",filedDate:"2025-08-20",confirmationNum:"ELEV-2025-8842",notes:"Annual inspection by certified inspector.",responsible:"Vice President",recurrence:"annual",legalRef:"DC Code  1-303.43",attachments:[{name:"elevator-cert-2025.pdf",size:"245 KB",uploadedAt:"2025-08-20"}]},{id:"rf6",name:"Annual Financial Audit",category:"financial",dueDate:"2026-06-30",status:"pending",filedDate:null,confirmationNum:"",notes:"Independent CPA review of HOA financials.",responsible:"Treasurer",recurrence:"annual",legalRef:"DC Code  29-1135.05",attachments:[]}],communications:[{id:"oc1",type:"notice",subject:"2026 Assessment Increase Notice (3%)",date:"2025-12-15",method:"mail+email",recipients:"All owners (50 units)",respondedBy:null,status:"sent",notes:"Included: new monthly amount, effective date, budget summary."},{id:"oc2",type:"minutes",subject:"January Board Meeting Minutes",date:"2026-01-20",method:"email",recipients:"All owners (50 units)",respondedBy:"Secretary",status:"sent",notes:"Distributed within 10 days of meeting."},{id:"oc3",type:"notice",subject:"Annual Owner Rights Notice (DC Condo Act)",date:"2026-01-10",method:"mail",recipients:"All owners (50 units)",respondedBy:null,status:"sent",notes:"Right to inspect records, attend meetings, run for board."},{id:"oc4",type:"financial",subject:"2025 Annual Financial Statements",date:"2026-02-28",method:"email+portal",recipients:"All owners (50 units)",respondedBy:"Treasurer",status:"pending",notes:"Income statement, balance sheet, reserve fund status."},{id:"oc5",type:"response",subject:"Unit 502  Balcony Enclosure Violation Notice",date:"2026-01-22",method:"certified mail",recipients:"Unit 502  Lisa Chen",respondedBy:"VP",status:"sent",notes:"First notice of violation. 30-day cure period."},{id:"oc6",type:"resale",subject:"Resale Certificate Package  Unit 204",date:"2026-02-05",method:"email",recipients:"Unit 204 buyer agent",respondedBy:"Secretary",status:"sent",notes:"Bylaws, CC&Rs, rules, budget, reserve study, insurance cert."}],toggleItem:m=>l(i=>({completions:{...i.completions,[m]:!i.completions[m]}})),setCompletion:(m,i)=>l(o=>({completions:{...o.completions,[m]:i}})),addItemAttachment:(m,i)=>l(o=>({itemAttachments:{...o.itemAttachments,[m]:[...o.itemAttachments[m]||[],i]}})),removeItemAttachment:(m,i)=>l(o=>({itemAttachments:{...o.itemAttachments,[m]:(o.itemAttachments[m]||[]).filter(u=>u.name!==i)}})),addFiling:m=>l(i=>({filings:[...i.filings,{id:"rf"+Date.now(),status:"pending",filedDate:null,confirmationNum:"",attachments:[],...m}]})),markFilingComplete:(m,i,o)=>l(u=>({filings:u.filings.map(d=>d.id===m?{...d,status:"filed",filedDate:i,confirmationNum:o}:d)})),deleteFiling:m=>l(i=>({filings:i.filings.filter(o=>o.id!==m)})),addFilingAttachment:(m,i)=>l(o=>({filings:o.filings.map(u=>u.id===m?{...u,attachments:[...u.attachments,i]}:u)})),removeFilingAttachment:(m,i)=>l(o=>({filings:o.filings.map(u=>u.id===m?{...u,attachments:u.attachments.filter(d=>d.name!==i)}:u)})),addCommunication:m=>l(i=>({communications:[{id:"oc"+Date.now(),...m},...i.communications]})),deleteCommunication:m=>l(i=>({communications:i.communications.filter(o=>o.id!==m)}))})),Is=[{id:"financial",num:"1",icon:"",label:"Fiscal Lens",color:"emerald",sits:[{id:"annual-budgeting",title:"Annual Budgeting",desc:"Setting assessments, forecasting costs, funding reserves",tags:["Setting annual assessments","Forecasting operating costs","Funding reserves"],pre:[{s:"Review current year financials and reserve balances",t:"90 days before fiscal year-end",d:"Bylaws: Budget provisions"},{s:"Obtain bids and cost estimates for upcoming expenses",t:"60-90 days out",d:"CC&Rs: Assessment authority"},{s:"Draft proposed budget with line-item detail",t:"60 days out"},{s:"Present budget at open board meeting for owner input",t:"30 days before adoption",d:"Bylaws: Notice requirements"},{s:"Distribute budget & assessment notice to all owners",t:"Per governing docs",d:"State condo act: Notice timeline"},{s:"Board votes to adopt budget and set new assessment rate",t:"Before fiscal year start",d:"Bylaws: Voting requirements"}],self:[{s:"Research state-mandated budget disclosure requirements",detail:"Review your state condo act for required financial disclosures and timelines"},{s:"File any required annual financial reports with the state",detail:"Some jurisdictions require annual filings"},{s:"If owner disputes assessment: document ratification, send formal response citing governing docs"},{s:"If needed, pursue small claims for unpaid assessments under threshold",detail:"Check local small claims limits"}],legal:[{s:"Consult attorney if assessment increase exceeds threshold requiring owner vote",w:"Most states cap increases at 10-25% without owner approval"},{s:"Legal review of budget adoption process if challenged by owners",w:"Owner files formal challenge or threatens suit"},{s:"Attorney drafts special meeting notice if supermajority vote needed",w:"Large increase or special assessment"}],notes:{DC:"DC Code  29-1135.02 requires 30-day notice before budget adoption.",CA:"Civil Code  5300 requires annual budget report including reserve funding.",_:"Review your state condo act for required budget notice periods and owner approval thresholds."}},{id:"special-assessments",title:"Special Assessments",desc:"Roof replacement, structural repairs, emergency storm damage",tags:["Roof replacement","Structural repairs","Emergency storm damage"],pre:[{s:"Identify capital need and obtain 2-3 professional cost estimates",t:"Immediately upon identifying need",d:"Reserve study"},{s:"Review governing docs for special assessment authority and voting requirements",t:"1-2 weeks",d:"Bylaws: Special assessment section"},{s:"Determine if owner vote required based on amount threshold",t:"1 week",d:"CC&Rs & State condo act"},{s:"Send written notice of proposed special assessment with justification",t:"Per governing docs (10-30 days)",d:"Bylaws: Notice provisions"},{s:"Hold meeting/vote if required; board resolution if not",t:"Per notice period"},{s:"Issue formal assessment notice with payment schedule",t:"After approval"},{s:"Offer payment plan options if amount is substantial",t:"With notice",d:"Best practice"}],self:[{s:"If owner refuses to pay: send formal demand letter citing CC&Rs and state statute",detail:"Certified mail, return receipt requested"},{s:"Record lien against non-paying unit per your state lien statute",detail:"Check county recorder requirements"},{s:"File small claims if amount is within jurisdictional limits"}],legal:[{s:"Attorney reviews special assessment process for legal compliance before adoption",w:"Assessment exceeds $5K/unit or is contested"},{s:"Attorney files liens and pursues collection for non-payment",w:"Owner is 60+ days delinquent"},{s:"Attorney initiates foreclosure on assessment lien if necessary",w:"Severe delinquency, 6-12 months"}],notes:{DC:"DC Code  29-1135.03  Special assessments may require 2/3 owner vote.",_:"Check your state statute for special assessment voting thresholds and notice requirements."}},{id:"delinquent-accounts",title:"Delinquent Accounts",desc:"Late notices, payment plans, lien filings, foreclosure",tags:["Late notices","Payment plans","Lien filings","Foreclosure proceedings"],pre:[{s:"Send first late notice (friendly reminder) after grace period",t:"5-15 days past due",d:"Bylaws: Late fee policy"},{s:"Apply late fee per governing docs; send second notice",t:"30 days past due",d:"CC&Rs: Collection policy"},{s:"Send formal demand letter via certified mail",t:"60 days past due",d:"Collection policy"},{s:"Offer payment plan agreement in writing",t:"60-90 days",d:"Board resolution"},{s:"Suspend amenity access/voting rights if permitted",t:"Per governing docs",d:"CC&Rs: Suspension provisions"},{s:"Send pre-lien notice (required in many states)",t:"90 days",d:"State condo act: Pre-lien notice"}],self:[{s:"Record assessment lien at county recorder office",detail:"Filing fees typically $25-75"},{s:"File small claims court action for amounts within limits",detail:"Prepare ledger, notices, governing doc provisions"},{s:"If payment plan agreed, document in writing signed by both parties"}],legal:[{s:"Turn over to attorney for formal collection",w:"Account is 90-120 days delinquent"},{s:"Attorney files lien and pursues judgment",w:"Amount justifies legal costs (typically >$2K)"},{s:"Attorney initiates judicial foreclosure on lien",w:"Severe cases, 12+ months delinquent"}],notes:{DC:"DC Code  29-1135.08  6 months super-lien priority.",_:"Review your state for pre-lien notice requirements and lien recording procedures."}},{id:"reserve-management",title:"Reserve Management",desc:"Reserve studies, tapping reserves, capital planning",tags:["Commissioning reserve studies","Tapping reserves","Capital planning"],pre:[{s:"Commission or update professional reserve study",t:"Every 3-5 years",d:"State condo act"},{s:"Review reserve study findings with full board",t:"2-4 weeks after study"},{s:"Adopt funding plan: full, threshold, or baseline",t:"Board vote",d:"Bylaws: Reserve provisions"},{s:"If tapping reserves: document board resolution with specific purpose",t:"Before expenditure",d:"Bylaws"},{s:"Disclose reserve status in annual budget report",t:"Annually",d:"State disclosure requirements"}],self:[{s:"If owner challenges reserve funding: prepare written response with reserve study data"},{s:"Prepare reserve disclosure for resale certificates per state requirements"}],legal:[{s:"Attorney reviews reserve borrowing or commingling questions",w:"Board wants to use reserves for non-designated purpose"},{s:"Attorney advises on fiduciary duty regarding underfunded reserves",w:"Reserve study shows significant shortfall"}],notes:{_:"Check your state for reserve study requirements, mandatory reserve components, and owner vote provisions."}}]},{id:"maintenance",num:"2",icon:"",label:"Maintenance & Property",color:"blue",sits:[{id:"common-area-repairs",title:"Common Area Repairs",desc:"Roof leaks, structural cracks, plumbing, elevator, HVAC",tags:["Roof leaks","Structural cracks","Plumbing risers","Elevator failures"],pre:[{s:"Document issue with photos, video, dates, affected areas",t:"Immediately"},{s:"Determine if common element or unit owner responsibility per CC&Rs",t:"1-3 days",d:"CC&Rs: Maintenance matrix"},{s:"Obtain 2-3 qualified contractor bids",t:"1-2 weeks"},{s:"Board approves expenditure (emergency exception for health/safety)",t:"Next board meeting",d:"Bylaws: Spending authority"},{s:"Engage contractor and oversee work; document completion",t:"Per scope"},{s:"If caused by unit owner negligence, send cost responsibility notice",t:"After repair",d:"CC&Rs: Damage responsibility"}],self:[{s:"If unit owner responsible: send formal demand for reimbursement with documentation",detail:"Include CC&R section, invoices, photos"},{s:"If contractor dispute: send demand letter citing contract terms"},{s:"File insurance claim if applicable; coordinate with unit owner insurance"}],legal:[{s:"Attorney reviews responsibility dispute between HOA and unit owner",w:"Dispute over who pays for repair"},{s:"Attorney pursues claim against contractor for defective work",w:"Contractor refuses to remedy"}],notes:{_:"Review your CC&Rs and state condo act for maintenance responsibility between HOA and individual owners."}},{id:"emergency-situations",title:"Emergency Situations",desc:"Burst pipes, flooding, fire, storm damage, sewer backups",tags:["Burst pipes","Flooding","Fire damage","Storm damage"],pre:[{s:"Ensure safety: evacuate if necessary, call 911 for fire/gas/structural",t:"Immediately"},{s:"Engage emergency mitigation contractor (water extraction, board-up)",t:"Within hours",d:"Bylaws: Emergency spending"},{s:"Document everything: photos, video, written timeline",t:"Ongoing"},{s:"Notify insurance carrier and file claim",t:"Within 24-48 hours",d:"Insurance policy"},{s:"Notify affected unit owners in writing",t:"Within 24 hours"},{s:"Board ratifies emergency expenditure at next meeting",t:"Next meeting",d:"Bylaws: Emergency provisions"}],self:[{s:"Coordinate insurance between master policy and unit HO-6 policies",detail:"Determine deductible allocation per CC&Rs"},{s:"If caused by unit owner: send formal notice of responsibility"},{s:"Document all expenses for insurance/legal recovery"}],legal:[{s:"Attorney advises on insurance coverage disputes and deductible allocation",w:"Carrier denies or underpays"},{s:"Attorney pursues third-party claims",w:"Damage caused by third party"},{s:"Attorney advises on emergency assessment authority",w:"Insurance does not cover full cost"}],notes:{_:"Most state condo acts grant boards emergency spending authority. Document emergency and ratify at next meeting."}},{id:"vendor-management",title:"Vendor Management",desc:"Hiring contractors, reviewing bids, contracts, disputes",tags:["Hiring contractors","Reviewing bids","Performance disputes"],pre:[{s:"Define scope of work and obtain minimum 3 competitive bids",t:"2-4 weeks"},{s:"Verify contractor licenses, insurance, and references",t:"1-2 weeks"},{s:"Review contract: scope, timeline, payment, warranty, indemnification",t:"1 week"},{s:"Board approves contract per spending authority",t:"Board meeting",d:"Bylaws: Contract authority"},{s:"Monitor performance; document milestones and deficiencies in writing",t:"Ongoing"},{s:"Conduct final inspection and punch list before final payment",t:"At completion"}],self:[{s:"If performance issue: send written notice citing contract provisions",detail:"Give reasonable cure period (15-30 days)"},{s:"If unresolved: send formal demand with documentation of deficiencies"},{s:"File complaint with state contractor licensing board"}],legal:[{s:"Attorney reviews contract before execution for large projects (>$25K)",w:"Best practice for major contracts"},{s:"Attorney sends demand and pursues breach of contract claim",w:"Contractor defaults or work defective"}],notes:{_:"Verify contractor licensing in your state. Require insurance certificates and include indemnification in all contracts."}},{id:"preventative-maintenance",title:"Preventative Maintenance",desc:"Annual inspections, fire safety, roof, pest control",tags:["Annual inspections","Fire/life safety","Roof inspections"],pre:[{s:"Create annual maintenance calendar with all recurring items",t:"Start of year"},{s:"Schedule all required inspections (fire, elevator, boiler, backflow)",t:"Per code",d:"Local fire code"},{s:"Document inspection results and remediation items",t:"After each inspection"},{s:"Address deficiencies within required timelines",t:"Per inspector directive"},{s:"Maintain records of all inspections and contractor certifications",t:"Ongoing"}],self:[{s:"If code violation cited: respond in writing and document remediation timeline"}],legal:[{s:"Attorney responds to citations or fines from fire/building department",w:"Formal citation or enforcement action"}],notes:{_:"Most jurisdictions require annual fire safety inspections. Keep logs of all maintenance and inspections."}}]},{id:"enforcement",num:"3",icon:"",label:"Rule Enforcement",color:"amber",sits:[{id:"covenant-violations",title:"Covenant Violations",desc:"Unauthorized construction, short-term rentals, noise, parking",tags:["Unauthorized construction","Short-term rentals","Architectural","Parking","Noise"],pre:[{s:"Document violation with photos, dates, witnesses",t:"Immediately"},{s:"Identify specific CC&R or rule section violated",t:"1-3 days",d:"CC&Rs/Rules"},{s:"Send first courtesy notice with cure period",t:"Within 1 week",d:"Bylaws: Enforcement section"},{s:"If not cured: send formal violation notice via certified mail",t:"After cure period",d:"CC&Rs: Enforcement"},{s:"Schedule hearing per governing docs (if required before fines)",t:"10-30 days notice",d:"Bylaws: Hearing procedures"},{s:"Impose fine or remedy per board resolution",t:"After hearing",d:"Fine schedule"}],self:[{s:"If owner refuses to cure: escalate fines per schedule",detail:"Document each notice and response"},{s:"If owner disputes violation: review CC&Rs and provide written explanation"},{s:"For ongoing violation: file for injunctive relief in court",detail:"Document pattern and impact"}],legal:[{s:"Attorney sends cease-and-desist letter",w:"Owner ignores multiple notices"},{s:"Attorney files for injunctive relief",w:"Ongoing violation causing damage"},{s:"Attorney pursues lawsuit for damages and compliance",w:"Serious structural or safety violation"}],notes:{_:"Follow your CC&R enforcement procedures carefully. Document everything. Most courts require exhaustion of internal remedies."}},{id:"fine-hearings",title:"Fine Hearings",desc:"Conducting hearings, imposing fines, due process",tags:["Conducting hearings","Imposing fines","Due process"],pre:[{s:"Review governing docs for hearing requirements and notice periods",t:"Before scheduling"},{s:"Send hearing notice with specific violation, date/time, and rights",t:"Per bylaws (10-30 days)",d:"Bylaws: Hearing section"},{s:"Prepare hearing packet: violation docs, photos, prior notices",t:"Before hearing"},{s:"Conduct hearing: present facts, allow owner response, board deliberates",t:"Scheduled date"},{s:"Issue written decision with any fines or required actions",t:"Within 5-10 days",d:"Bylaws"},{s:"If fine imposed: send formal notice with payment deadline",t:"With decision"}],self:[{s:"If owner appeals: review appeal process in governing docs"},{s:"If fine unpaid: add to assessment ledger and pursue as delinquency"}],legal:[{s:"Attorney reviews hearing procedures for due process compliance",w:"Before first hearing or if challenged"},{s:"Attorney defends against lawsuit challenging fine",w:"Owner files suit"}],notes:{_:"Due process is critical. Provide adequate notice, opportunity to be heard, and impartial decision-makers."}},{id:"architectural-review",title:"Architectural Review",desc:"Renovation requests, exterior mods, solar panels, windows",tags:["Renovation requests","Exterior modifications","Solar panels"],pre:[{s:"Receive written application with plans/specs",t:"Upon submission"},{s:"Review against architectural guidelines and CC&Rs",t:"1-2 weeks",d:"Architectural guidelines"},{s:"Inspect unit/area if needed",t:"Within 2 weeks"},{s:"Committee or board votes on application",t:"Next meeting or within 30 days"},{s:"Issue written decision with conditions (if approved)",t:"Within 5 days of decision"},{s:"Monitor construction for compliance with approved plans",t:"During work"}],self:[{s:"If owner proceeds without approval: issue stop-work notice"},{s:"If owner disputes denial: provide written explanation citing specific guidelines"}],legal:[{s:"Attorney reviews architectural standards for enforceability",w:"Standards being challenged"},{s:"Attorney advises on solar panel access laws (many states protect)",w:"Solar panel request denied"}],notes:{_:"Architectural standards must be applied consistently. Many states have solar access laws that limit HOA restrictions."}},{id:"pet-issues",title:"Pet & Animal Issues",desc:"Breed restrictions, ESA disputes, nuisance complaints",tags:["Breed restrictions","ESA disputes","Nuisance complaints"],pre:[{s:"Document complaint with specifics: dates, behavior, witnesses",t:"Upon complaint"},{s:"Review CC&Rs for pet rules and restrictions",t:"1-3 days",d:"CC&Rs: Pet section"},{s:"Send notice to pet owner citing specific rule and required remedy",t:"Within 1 week"},{s:"If ESA/service animal claim: request proper documentation",t:"Promptly",d:"Fair Housing Act"},{s:"If nuisance continues: schedule hearing and escalate per enforcement policy",t:"Per bylaws"}],self:[{s:"If ESA dispute: review HUD guidance on assistance animals"},{s:"If dangerous animal: report to local animal control"}],legal:[{s:"Attorney advises on ESA/FHA requirements and reasonable accommodation",w:"ESA request or dispute"},{s:"Attorney handles bite incident liability",w:"Animal bite or attack on common area"}],notes:{_:"Fair Housing Act requires reasonable accommodation for assistance animals. Breed restrictions may not apply to ESAs/service animals."}}]},{id:"legal",num:"4",icon:"",label:"Legal & Risk",color:"rose",sits:[{id:"insurance-claims",title:"Insurance Claims",desc:"Water damage, unit vs common element, deductible allocation",tags:["Water damage claims","Deductible allocation","Common vs unit damage"],pre:[{s:"Document damage immediately with photos and written timeline",t:"Immediately"},{s:"Notify insurance carrier within policy timeframe",t:"Within 24-48 hours",d:"Insurance policy"},{s:"Determine if common element or unit responsibility",t:"1-3 days",d:"CC&Rs"},{s:"Coordinate between master policy and unit HO-6 policies",t:"1-2 weeks"},{s:"Obtain repair estimates and provide to adjuster",t:"As requested"},{s:"Review settlement offer against actual damages",t:"When received"}],self:[{s:"If claim denied: review denial letter and policy provisions"},{s:"If underpaid: document actual costs and request reconsideration"}],legal:[{s:"Attorney reviews claim denial and negotiates with carrier",w:"Carrier denies valid claim"},{s:"Attorney files bad faith claim",w:"Unreasonable claim handling"}],notes:{_:"File claims promptly. Document everything. Review deductible allocation provisions in your CC&Rs."}},{id:"litigation",title:"Litigation",desc:"Suing owners, being sued, contractor disputes",tags:["Suing owners","Being sued","Contractor disputes"],pre:[{s:"Document the underlying issue thoroughly",t:"Ongoing"},{s:"Attempt resolution through internal processes first",t:"Before litigation"},{s:"Review governing docs for dispute resolution requirements (mediation, arbitration)",t:"Before filing",d:"CC&Rs: Dispute resolution"},{s:"Notify D&O insurance carrier if board is sued",t:"Immediately upon notice",d:"D&O policy"}],self:[{s:"If small claim: prepare and file in small claims court",detail:"Check jurisdictional limits"},{s:"If mediation required: schedule through approved provider"}],legal:[{s:"Attorney handles all litigation (do not self-represent HOA in court beyond small claims)",w:"Any lawsuit filed or received"},{s:"Attorney evaluates cost-benefit of litigation vs settlement",w:"Before committing to trial"}],notes:{_:"Many CC&Rs require mediation or arbitration before litigation. Check for attorneys fee provisions."}},{id:"governing-docs",title:"Governing Document Interpretation",desc:"Interpreting covenants, resolving ambiguities",tags:["Interpreting covenants","Resolving ambiguities"],pre:[{s:"Identify specific provision and gather relevant context",t:"As needed"},{s:"Review state condo act for default rules",t:"1-3 days",d:"State condo act"},{s:"Check for prior board interpretations or resolutions",t:"1-3 days"},{s:"Draft board resolution documenting interpretation",t:"1 week"}],self:[{s:"If owner disputes interpretation: provide written explanation with citations"}],legal:[{s:"Attorney provides formal opinion on ambiguous provisions",w:"Significant financial or legal consequence"},{s:"Attorney drafts amendment if current language is problematic",w:"Recurring interpretation disputes"}],notes:{_:"Document all board interpretations as resolutions. Consistent application is key to enforceability."}},{id:"bylaw-amendment",title:"Bylaw / CC&R Amendment",desc:"Full amendment lifecycle: drafting, notice, vote, recording",tags:["Amending bylaws","Updating rules","Recording amendments"],pre:[{s:"Identify need for amendment and draft proposed language",t:"1-2 months"},{s:"Legal review of proposed amendment",t:"2-4 weeks",d:"State condo act"},{s:"Send notice of proposed amendment to all owners",t:"Per governing docs",d:"Bylaws: Amendment section"},{s:"Hold meeting and conduct owner vote",t:"Per notice period"},{s:"If approved: record amendment with county recorder",t:"Within 30 days"},{s:"Distribute updated documents to all owners",t:"After recording"}],self:[{s:"If vote fails: document results and consider revised proposal"}],legal:[{s:"Attorney drafts amendment language and reviews process",w:"Any CC&R or bylaw amendment"},{s:"Attorney handles recording and distribution requirements",w:"After approval"}],notes:{_:"Most CC&R amendments require 67% owner approval. Bylaw amendments may require less. Check your specific docs."}}]},{id:"governance",num:"5",icon:"",label:"Governance",color:"violet",sits:[{id:"board-meetings",title:"Board Meetings",desc:"Agendas, executive sessions, member votes",tags:["Agendas","Executive sessions","Member votes"],pre:[{s:"Prepare and distribute agenda per notice requirements",t:"Per bylaws (5-10 days)",d:"Bylaws: Meeting notice"},{s:"Ensure quorum before conducting business",t:"At meeting start"},{s:"Conduct meeting per Roberts Rules or adopted procedures",t:"During meeting"},{s:"Record minutes and distribute to board for review",t:"Within 7 days"},{s:"Post approved minutes to community records",t:"After board approval"}],self:[{s:"If quorum not met: adjourn and reschedule per bylaws"}],legal:[{s:"Attorney advises on executive session requirements",w:"Personnel, litigation, or contract matters"}],notes:{_:"Most states require open meetings with limited executive session exceptions. Post minutes promptly."}},{id:"elections",title:"Elections",desc:"Annual elections, candidate disputes, ballot challenges",tags:["Annual elections","Candidate disputes","Ballot challenges"],pre:[{s:"Send election notice with nomination procedures",t:"Per bylaws (30-60 days)",d:"Bylaws: Election section"},{s:"Accept nominations and prepare ballot",t:"Per timeline"},{s:"Appoint independent election inspector if required",t:"Before election"},{s:"Conduct election per governing docs",t:"At annual meeting"},{s:"Certify and announce results",t:"At meeting or within 3 days"}],self:[{s:"If election challenged: review procedures and ballots",detail:"Preserve all election materials"}],legal:[{s:"Attorney advises on election disputes or challenges",w:"Contested election or procedural challenge"}],notes:{_:"Follow your bylaws election procedures exactly. Independent inspectors add credibility."}},{id:"conflict-interest",title:"Conflict of Interest",desc:"Board member recusal, related-party vendors",tags:["Board member recusal","Related-party vendors"],pre:[{s:"Board member discloses potential conflict before discussion/vote",t:"Before vote"},{s:"Recused member leaves room for discussion and vote",t:"During meeting"},{s:"Document disclosure and recusal in meeting minutes",t:"During meeting"},{s:"Ensure remaining board has quorum",t:"Before voting"}],self:[{s:"If conflict not disclosed: another board member raises the issue"}],legal:[{s:"Attorney reviews conflict of interest policy",w:"Recurring conflicts or related-party transactions"}],notes:{_:"Board members have a fiduciary duty to act in the best interest of the association, not personal gain."}}]},{id:"disputes",num:"6",icon:"",label:"Owner Disputes",color:"sky",sits:[{id:"neighbor-conflicts",title:"Neighbor Conflicts",desc:"Noise, smoking, shared wall conflicts",tags:["Noise complaints","Smoking","Shared wall conflicts"],pre:[{s:"Receive and document complaint with specifics",t:"Upon receipt"},{s:"Review CC&Rs for applicable rules",t:"1-3 days",d:"CC&Rs/Rules"},{s:"Send notice to offending owner citing specific rule",t:"Within 1 week"},{s:"If unresolved: offer mediation between parties",t:"2-4 weeks"},{s:"If still unresolved: escalate per enforcement policy",t:"Per bylaws"}],self:[{s:"If mediation fails: impose fines per hearing process"}],legal:[{s:"Attorney sends cease-and-desist if nuisance continues",w:"Ongoing nuisance after multiple notices"}],notes:{_:"Document all complaints and responses. Mediation is often more effective than enforcement for neighbor disputes."}},{id:"damage-responsibility",title:"Damage Responsibility",desc:"Leak source disputes, insurance coordination",tags:["Leak source disputes","Insurance coordination"],pre:[{s:"Investigate source of damage (plumber, inspector)",t:"Immediately"},{s:"Determine responsibility per CC&Rs maintenance matrix",t:"After investigation",d:"CC&Rs"},{s:"Notify responsible party and insurance carriers",t:"Within days"},{s:"Coordinate repairs between HOA and unit owner",t:"As needed"}],self:[{s:"If responsibility disputed: obtain independent expert opinion"}],legal:[{s:"Attorney resolves responsibility dispute and coordinates between carriers",w:"Disagreement on fault or insurance coverage"}],notes:{_:"Most CC&Rs define common vs unit boundaries. Get professional assessment of damage source."}}]},{id:"operations",num:"7",icon:"",label:"Community Ops",color:"teal",sits:[{id:"amenities",title:"Amenities Management",desc:"Pool closures, gym rules, clubhouse rentals",tags:["Pool closures","Gym rules","Clubhouse rentals"],pre:[{s:"Review current amenity rules and usage policies",t:"Annually"},{s:"Inspect facilities and document maintenance needs",t:"Monthly"},{s:"Update rules as needed through board resolution",t:"As needed"},{s:"Post rules prominently at each amenity",t:"Immediately after changes"},{s:"Enforce rules consistently",t:"Ongoing"}],self:[{s:"If rule violation: follow standard enforcement process"}],legal:[{s:"Attorney reviews liability waivers and rules for adequacy",w:"Annual review or after incident"}],notes:{_:"Consistent enforcement is key. Ensure adequate insurance for amenity areas."}},{id:"security",title:"Security Issues",desc:"Theft, access control, camera installations",tags:["Theft","Access control","Camera installations"],pre:[{s:"Document security incident with details and timeline",t:"Immediately"},{s:"Report to police if criminal activity involved",t:"Immediately"},{s:"Review and update access control measures",t:"After incident"},{s:"Notify affected owners",t:"Promptly"},{s:"Board reviews security improvements",t:"Next meeting"}],self:[{s:"If camera installation: review local privacy laws"}],legal:[{s:"Attorney advises on security camera privacy requirements",w:"Camera installation in common areas"}],notes:{_:"Balance security needs with privacy. Check local wiretapping and recording consent laws."}}]},{id:"strategic",num:"8",icon:"",label:"Strategic Decisions",color:"indigo",sits:[{id:"capital-projects",title:"Major Capital Projects",desc:"Window, siding replacement, elevator modernization",tags:["Window replacement","Siding","Elevator modernization"],pre:[{s:"Commission engineering study or assessment",t:"6-12 months before project"},{s:"Develop project scope and timeline",t:"3-6 months out"},{s:"Obtain 3+ competitive bids from qualified contractors",t:"2-3 months out"},{s:"Board approves project and funding (reserves, special assessment, loan)",t:"Board meeting"},{s:"Execute contract with performance bond for large projects",t:"After approval"},{s:"Monitor construction with regular progress meetings",t:"During project"}],self:[{s:"If contractor default: review contract remedies and bonding"}],legal:[{s:"Attorney reviews contract and bonding for major projects",w:"Projects exceeding $50K"}],notes:{_:"For large capital projects, consider hiring an owners representative to manage the contractor."}},{id:"developer-transition",title:"Developer Transition",desc:"Turnover audits, construction defect claims",tags:["Turnover audits","Construction defect claims"],pre:[{s:"Engage transition attorney before or at turnover",t:"Before turnover"},{s:"Commission independent engineering inspection",t:"At turnover"},{s:"Audit financial records and reserve funding",t:"At turnover"},{s:"Identify construction defects within warranty period",t:"Within statute period"},{s:"Pursue warranty claims and defect remediation",t:"After inspection"}],self:[{s:"Document all defects with photos and expert reports"}],legal:[{s:"Transition attorney manages entire turnover process",w:"Every developer turnover"},{s:"Attorney pursues construction defect claims",w:"Defects identified"}],notes:{_:"Developer turnovers are critical moments. Engage an experienced transition attorney early."}}]},{id:"crisis",num:"9",icon:"",label:"Crisis",color:"red",sits:[{id:"structural-safety",title:"Structural Safety Issues",desc:"Balcony collapses, foundation shifts, unsafe conditions",tags:["Balcony collapses","Foundation shifts","Unsafe conditions"],pre:[{s:"Evacuate affected areas and ensure resident safety",t:"Immediately"},{s:"Engage structural engineer for emergency assessment",t:"Within hours"},{s:"Notify local building department",t:"Immediately",d:"Building code"},{s:"Implement engineer recommendations (shoring, closures)",t:"Immediately"},{s:"Notify insurance carrier",t:"Within 24 hours"},{s:"Commission full structural investigation",t:"Within 1 week"}],self:[{s:"Document everything and maintain restricted access until cleared"}],legal:[{s:"Attorney advises on liability and disclosure requirements",w:"Any structural safety concern"},{s:"Attorney pursues claims against responsible parties",w:"Construction defect or negligence"}],notes:{_:"Structural safety is paramount. Always err on the side of caution. Evacuate first, investigate second."}},{id:"public-health",title:"Public Health",desc:"Mold, water contamination, pandemic policies",tags:["Mold","Water contamination","Pandemic policies"],pre:[{s:"Assess scope: how many units/areas affected?",t:"Immediately"},{s:"Engage appropriate professionals (mold remediation, water testing)",t:"Within 24-48 hours"},{s:"Notify affected residents with clear information",t:"Promptly"},{s:"Implement remediation per professional recommendations",t:"Per timeline"},{s:"Provide clearance testing results to affected parties",t:"After remediation"}],self:[{s:"If health department involved: cooperate fully and document compliance"}],legal:[{s:"Attorney advises on disclosure and remediation obligations",w:"Mold, contamination, or health hazard"}],notes:{_:"Public health issues require prompt, transparent communication. Engage qualified professionals immediately."}}]},{id:"admin",num:"10",icon:"",label:"Administrative",color:"slate",sits:[{id:"record-requests",title:"Record Requests",desc:"Owner inspection requests, financial transparency",tags:["Owner inspection requests","Financial transparency disputes"],pre:[{s:"Receive written request and log date received",t:"Upon receipt",d:"Bylaws: Records access"},{s:"Review state law for response timeline and scope",t:"1-3 days",d:"State condo act"},{s:"Identify requested records; determine exemptions",t:"3-5 days"},{s:"Provide records within statutory deadline; charge reasonable copying costs",t:"5-10 business days",d:"State condo act"},{s:"If partially denying: written explanation citing specific exemption",t:"With response"}],self:[{s:"If owner disputes denial: review statute and provide additional explanation"},{s:"Document what was provided and when"}],legal:[{s:"Attorney advises on privileged documents and access rights",w:"Sensitive records or dispute"},{s:"Attorney defends records access lawsuit",w:"Owner files suit"}],notes:{_:"Most states grant broad access with specific response timelines. Exemptions limited to attorney-client privilege."}},{id:"resale-certs",title:"Resale Certificates",desc:"Preparing disclosure documents for unit sales",tags:["Preparing disclosure documents"],pre:[{s:"Receive request from selling owner or agent",t:"Upon request"},{s:"Compile required info: assessments, violations, specials, reserves, insurance",t:"3-10 days",d:"State condo act"},{s:"Include all required documents per state law",t:"With certificate"},{s:"Disclose any litigation, special assessments, capital projects",t:"With certificate"},{s:"Issue certificate and charge permitted fee",t:"Within statutory deadline",d:"State condo act"}],self:[{s:"If info disputed: provide supporting documentation"},{s:"Maintain copy of each certificate in HOA records"}],legal:[{s:"Attorney reviews template for state compliance",w:"Annual or after law changes"}],notes:{_:"Most states require resale package. Check for contents, timeline, fee limits, buyer rescission rights."}},{id:"move-disputes",title:"Move-In/Move-Out Disputes",desc:"Deposit disputes, damage claims",tags:["Deposit disputes","Damage claims"],pre:[{s:"Conduct pre-move inspection of common areas",t:"Before move date",d:"Rules: Move policy"},{s:"Collect move-in deposit per rules",t:"Before move date",d:"Rules & Regulations"},{s:"Conduct post-move inspection; document damage with photos",t:"Within 24 hours"},{s:"If no damage: refund deposit within specified timeline",t:"Per rules (30 days)"},{s:"If damage: itemized deduction notice with photos and costs",t:"Per rules"}],self:[{s:"If owner disputes: provide pre/post photos and invoices"},{s:"If damage exceeds deposit: send demand for balance"}],legal:[{s:"Attorney advises on deposit retention procedures",w:"Setup or dispute"}],notes:{_:"Move deposits must be authorized by governing docs. Inspect before and after. Refund or itemize promptly."}}]}],el={pre:"Pre-Legal",self:"Self-Represented",legal:"Legal Counsel"},Or={pre:"border-emerald-300 bg-emerald-50 text-emerald-700",self:"border-amber-300 bg-amber-50 text-amber-700",legal:"border-rose-300 bg-rose-50 text-rose-700"},up={urgent:"bg-red-100 text-red-700",high:"bg-orange-100 text-orange-700",medium:"bg-yellow-100 text-yellow-700",low:"bg-slate-100 text-slate-600"};function sd(l){const m=Is.find(u=>u.id===l.catId),i=m==null?void 0:m.sits.find(u=>u.id===l.sitId);if(!i)return l;const o=l.approach==="legal"?i.legal:l.approach==="self"?i.self:i.pre;return l.steps=o.map((u,d)=>({...u,id:"s"+d,done:l.status==="closed"?!0:d<2,doneDate:l.status==="closed"?l.created:d<2?"2026-02-10":null,userNotes:""})),l}const Yb=[sd({id:"c1",catId:"enforcement",sitId:"covenant-violations",title:"Unit 502  Unauthorized Balcony Enclosure",unit:"502",owner:"Lisa Chen",approach:"pre",status:"open",priority:"high",created:"2026-01-28",notes:"Owner enclosed balcony without architectural review. Structural concerns.",steps:null,linkedWOs:[],attachments:[],boardVotes:null,additionalApproaches:[],comms:[{id:"cm1",type:"notice",subject:"First Notice  Unauthorized Balcony Enclosure",date:"2026-01-30",method:"certified mail",recipient:"Unit 502  Lisa Chen",sentBy:"VP",notes:"30-day cure period. Certified mail tracking: 9407 1234 5678.",status:"sent"}]}),sd({id:"c2",catId:"financial",sitId:"delinquent-accounts",title:"Unit 310  90-Day Delinquent Assessment",unit:"310",owner:"Mark Torres",approach:"self",status:"open",priority:"medium",created:"2026-02-01",notes:"Owner $2,700 behind. Payment plan offered but not signed.",steps:null,linkedWOs:[],attachments:[{name:"Delinquency-Notice-Unit310.pdf",type:"notice",date:"2026-02-01",size:"45 KB"}],boardVotes:null,additionalApproaches:[],comms:[{id:"cm2",type:"notice",subject:"90-Day Delinquency Notice",date:"2026-02-03",method:"certified mail",recipient:"Unit 310  Mark Torres",sentBy:"Treasurer",notes:"Amount owed: $2,700. Lien warning per DC Code  42-1903.13.",status:"sent"},{id:"cm3",type:"response",subject:"Payment Plan Proposal Sent",date:"2026-02-05",method:"email",recipient:"Unit 310  Mark Torres",sentBy:"Treasurer",notes:"Proposed 6-month installment plan. Awaiting response.",status:"sent"}]}),sd({id:"c3",catId:"maintenance",sitId:"emergency-situations",title:"Burst Pipe  3rd Floor Riser",unit:"Common",owner:"N/A",approach:"pre",status:"closed",priority:"urgent",created:"2026-01-15",notes:"Emergency repair completed. Insurance claim filed. Two units affected.",steps:null,linkedWOs:["WO-101"],attachments:[{name:"Burst-Pipe-Photos.zip",type:"evidence",date:"2026-01-15",size:"12.3 MB"},{name:"Insurance-Claim-Form.pdf",type:"claim",date:"2026-01-18",size:"320 KB"}],boardVotes:{motion:"Approve emergency repair expenditure up to $5,000",date:"2026-01-15",votes:[{name:"Robert Mitchell",role:"President",vote:"approve"},{name:"Jennifer Adams",role:"Vice President",vote:"approve"},{name:"David Chen",role:"Treasurer",vote:"approve"},{name:"Maria Rodriguez",role:"Secretary",vote:"approve"},{name:"Thomas Baker",role:"Member at Large",vote:"abstain"}]},additionalApproaches:[],comms:[{id:"cm4",type:"notice",subject:"Emergency Water Shutoff Notice",date:"2026-01-15",method:"posted",recipient:"All residents",sentBy:"President",notes:"Immediate notice posted in lobby and each floor.",status:"sent"},{id:"cm5",type:"response",subject:"Insurance Claim Confirmation",date:"2026-01-20",method:"email",recipient:"Claims adjuster  Travelers Insurance",sentBy:"Treasurer",notes:"Claim #TRV-2026-00892 filed.",status:"sent"}]})],Qb=[{id:"iss-1",type:"BUILDING_PUBLIC",category:"Maintenance",priority:"HIGH",status:"IN_PROGRESS",title:"Lobby Ceiling Water Stain",description:"Water stain appeared on main lobby ceiling near mail area. Getting larger after rain.",reportedBy:"u-resident",reporterName:"Lisa Chen",reporterEmail:"lchen@email.com",unitNumber:"502",submittedDate:"2026-02-10",upvotes:[{userId:"u-resident",userName:"Lisa Chen",unitNumber:"502"}],viewCount:14,comments:[{id:"cmt-1",author:"Board",text:"Plumber inspecting next week.",date:"2026-02-12"}],reviewNotes:[]},{id:"iss-2",type:"BUILDING_PUBLIC",category:"Safety",priority:"MEDIUM",status:"SUBMITTED",title:"Garage Door Sensor Broken",description:"Garage door B does not stop when sensor is tripped. Safety risk.",reportedBy:"u-res-2",reporterName:"Mark Torres",reporterEmail:"mtorres@email.com",unitNumber:"310",submittedDate:"2026-02-14",upvotes:[{userId:"u-res-2",userName:"Mark Torres",unitNumber:"310"},{userId:"u-resident",userName:"Lisa Chen",unitNumber:"502"}],viewCount:8,comments:[],reviewNotes:[]}],al=jn((l,m)=>({issues:Qb,cases:Yb,nextCaseNum:4,nextIssueNum:3,nextCommNum:6,addIssue:i=>l(o=>({issues:[{...i,id:`iss-${o.nextIssueNum}`,upvotes:[],viewCount:0,comments:[],reviewNotes:[]},...o.issues],nextIssueNum:o.nextIssueNum+1})),upvoteIssue:(i,o,u,d)=>l(x=>({issues:x.issues.map(p=>{if(p.id!==i)return p;const f=p.upvotes.find(g=>g.userId===o);return{...p,upvotes:f?p.upvotes.filter(g=>g.userId!==o):[...p.upvotes,{userId:o,userName:u,unitNumber:d}]}})})),updateIssueStatus:(i,o)=>l(u=>({issues:u.issues.map(d=>d.id===i?{...d,status:o}:d)})),createCase:i=>{const o=m(),u=`c${o.nextCaseNum}`,d=Is.find(v=>v.id===i.catId),x=d==null?void 0:d.sits.find(v=>v.id===i.sitId);if(!x)return u;const f=(i.approach==="legal"?x.legal:i.approach==="self"?x.self:x.pre).map((v,R)=>({...v,id:"s"+R,done:!1,doneDate:null,userNotes:""})),g={id:u,...i,status:"open",created:new Date().toISOString().split("T")[0],steps:f,linkedWOs:[],attachments:[],boardVotes:null,additionalApproaches:[],comms:[]};return l({cases:[g,...o.cases],nextCaseNum:o.nextCaseNum+1}),u},toggleStep:(i,o)=>l(u=>({cases:u.cases.map(d=>{if(d.id!==i||!d.steps)return d;const x=[...d.steps];return x[o]={...x[o],done:!x[o].done,doneDate:x[o].done?null:new Date().toISOString().split("T")[0]},{...d,steps:x}})})),addStepNote:(i,o,u)=>l(d=>({cases:d.cases.map(x=>{if(x.id!==i||!x.steps)return x;const p=[...x.steps];return p[o]={...p[o],userNotes:u},{...x,steps:p}})})),closeCase:i=>l(o=>({cases:o.cases.map(u=>{var x;if(u.id!==i)return u;const d=new Date().toISOString().split("T")[0];return{...u,status:"closed",steps:((x=u.steps)==null?void 0:x.map(p=>({...p,done:!0,doneDate:p.doneDate||d})))||null}})})),reopenCase:i=>l(o=>({cases:o.cases.map(u=>u.id===i?{...u,status:"open"}:u)})),deleteCase:i=>l(o=>({cases:o.cases.filter(u=>u.id!==i)})),addApproach:(i,o)=>l(u=>({cases:u.cases.map(d=>{if(d.id!==i)return d;const x=Is.find(v=>v.id===d.catId),p=x==null?void 0:x.sits.find(v=>v.id===d.sitId);if(!p)return d;const f=o==="legal"?p.legal:o==="self"?p.self:p.pre,g={approach:o,addedDate:new Date().toISOString().split("T")[0],steps:f.map((v,R)=>({...v,id:`a${o[0]}${R}`,done:!1,doneDate:null,userNotes:""}))};return{...d,additionalApproaches:[...d.additionalApproaches||[],g]}})})),toggleAdditionalStep:(i,o,u)=>l(d=>({cases:d.cases.map(x=>{var g;if(x.id!==i||!((g=x.additionalApproaches)!=null&&g[o]))return x;const p=[...x.additionalApproaches],f=[...p[o].steps];return f[u]={...f[u],done:!f[u].done,doneDate:f[u].done?null:new Date().toISOString().split("T")[0]},p[o]={...p[o],steps:f},{...x,additionalApproaches:p}})})),addAdditionalStepNote:(i,o,u,d)=>l(x=>({cases:x.cases.map(p=>{var v;if(p.id!==i||!((v=p.additionalApproaches)!=null&&v[o]))return p;const f=[...p.additionalApproaches],g=[...f[o].steps];return g[u]={...g[u],userNotes:d},f[o]={...f[o],steps:g},{...p,additionalApproaches:f}})})),saveBoardVote:(i,o,u,d)=>l(x=>({cases:x.cases.map(p=>p.id===i?{...p,boardVotes:{motion:o,date:u,votes:d}}:p)})),clearBoardVote:i=>l(o=>({cases:o.cases.map(u=>u.id===i?{...u,boardVotes:null}:u)})),addDocument:(i,o)=>l(u=>({cases:u.cases.map(d=>d.id===i?{...d,attachments:[...d.attachments,o]}:d)})),removeDocument:(i,o)=>l(u=>({cases:u.cases.map(d=>{if(d.id!==i)return d;const x=[...d.attachments];return x.splice(o,1),{...d,attachments:x}})})),addComm:(i,o)=>l(u=>{const d=`cm${u.nextCommNum}`;return{cases:u.cases.map(x=>x.id===i?{...x,comms:[...x.comms,{...o,id:d}]}:x),nextCommNum:u.nextCommNum+1}}),removeComm:(i,o)=>l(u=>({cases:u.cases.map(d=>{if(d.id!==i)return d;const x=[...d.comms];return x.splice(o,1),{...d,comms:x}})})),linkWO:(i,o)=>l(u=>({cases:u.cases.map(d=>d.id===i?{...d,linkedWOs:[...d.linkedWOs,o]}:d)})),unlinkWO:(i,o)=>l(u=>({cases:u.cases.map(d=>d.id===i?{...d,linkedWOs:d.linkedWOs.filter(x=>x!==o)}:d)}))})),mp=jn(l=>({archives:[],addArchive:m=>l(i=>({archives:[m,...i.archives]})),deleteArchive:m=>l(i=>({archives:i.archives.filter(o=>o.id!==m)}))}));function Nd(l){const{state:m,legalDocuments:i,insurance:o,boardCount:u}=l,d=m==="District of Columbia",x=d?"DC":m,p=d?"DC Code  29-1101 et seq.":`${x} Condo Act`,f=d?"DC Code":`${x} Code`,g=i.some(ie=>ie.name.toLowerCase().includes("bylaw")),v=i.some(ie=>ie.name.toLowerCase().includes("cc&r")||ie.name.toLowerCase().includes("declaration")),R=i.some(ie=>ie.name.toLowerCase().includes("rule")||ie.name.toLowerCase().includes("regulation")),O=i.some(ie=>ie.name.toLowerCase().includes("resale")),N=i.some(ie=>ie.name.toLowerCase().includes("collection")||ie.name.toLowerCase().includes("assessment")),P=i.some(ie=>ie.name.toLowerCase().includes("retention")),_=i.some(ie=>ie.name.toLowerCase().includes("emergency")),T=[];g&&T.push("Bylaws"),v&&T.push("CC&Rs / Declaration"),R&&T.push("Rules & Regulations"),O&&T.push("Resale Certificate Policy"),N&&T.push("Assessment Collection Policy"),P&&T.push("Document Retention Policy"),_&&T.push("Emergency Preparedness Plan");const y=[],j=g?"Bylaws":"Governing Documents",q=[{id:"g1",task:"Bylaws reviewed and up to date",role:"President",freq:"Annual",due:"2026-01-15",critical:!0,legalRef:p,autoPass:g,satisfyingAction:"document",tip:g?"Bylaws detected  cross-referencing.":"Upload bylaws for document-specific checks.",fiduciaryDuty:"obedience",whyItMatters:"Bylaws are the association's operating constitution. Every board decision must comply. Outdated bylaws that conflict with current law create legal exposure.",consequence:"Board actions outside bylaws authority may be void. Owners can challenge decisions judicially. Board members face personal liability for ultra vires acts.",howTo:["Obtain current bylaws from files or county records","Compare against current state condo act for conflicts","Flag any provisions that conflict with current law","Engage attorney for formal review if amendments needed","Present amendment proposals at annual meeting"],scope:"governance"},{id:"g2",task:"CC&Rs / Declaration reviewed",role:"President",freq:"Annual",due:"2025-06-20",critical:!0,legalRef:d?"DC Code  29-1131":`${f}  Declaration`,autoPass:!1,satisfyingAction:"document",tip:v?"Declaration detected  checks updated.":"Upload CC&Rs to enable checks.",fiduciaryDuty:"obedience",whyItMatters:"The Declaration creates the condo regime  unit boundaries, common elements, voting rights, assessment authority. It supersedes bylaws where they conflict.",consequence:"Failure to enforce CC&Rs consistently exposes the board to selective enforcement claims. Unenforced provisions may be deemed waived by courts.",howTo:["Review declaration for assessment authority and limits","Cross-reference with current state law","Verify unit boundaries and common elements match reality","Document any needed amendments for board discussion"],scope:"governance"},{id:"g3",task:"Board meeting minutes recorded, approved, and distributed",role:"Secretary",freq:"Per meeting",due:"Per meeting",critical:!0,perMeeting:!0,satisfyingAction:"review",legalRef:d?"DC Code  29-1108.06":`${f} Minutes Req.`,tip:d?"Prepare within 10 business days. Board majority approval required.":"Prepare promptly. Board approval at next meeting.",fiduciaryDuty:"care",whyItMatters:"Minutes are the official legal record of board actions. They establish decisions were properly made, quorum present, conflicts disclosed. They are the board's primary legal defense in litigation.",consequence:"Without approved minutes, board decisions may be challenged as unauthorized. In litigation, missing minutes create negative inference that proper process was not followed.",howTo:["Record during meeting: date, time, quorum count, attendees","Capture all motions verbatim with vote counts","Note conflicts of interest disclosures and recusals","Prepare draft within 10 business days","Circulate to board for review","Present for formal approval at next meeting (use Minutes Approval feature)","Distribute to owners and retain permanently"],scope:"operations"},{id:"g4",task:"Annual meeting held within 13 months of prior",role:"President",freq:"Annual",due:"2026-03-31",critical:!0,legalRef:d?"DC Code  29-1109.02":`${f}  Annual Meeting`,satisfyingAction:"meeting",meetingType:"ANNUAL",suggestedAgenda:["Election of board members","Annual financial report","Budget ratification","Reserve fund status","Q&A session"],tip:"Schedule early to allow for notice requirements (10-60 day window).",fiduciaryDuty:"obedience",whyItMatters:"The annual meeting is the primary mechanism for owner self-governance  elections, budget ratification, and accountability.",consequence:"Failure to hold within statutory timeframe allows owners to petition court to compel meeting. Board legitimacy questioned if elections delayed.",howTo:["Set date at least 60 days out for notice window","Prepare notice with date, time, location, agenda","Include proxy forms and nomination instructions","Prepare annual financial report","Arrange election inspector if contested","Verify quorum at meeting (40% of units per bylaws)"],scope:"governance"},{id:"g5",task:"Board election conducted per bylaws",role:"Secretary",freq:"Annual",due:"2026-12-31",critical:!1,legalRef:g?"Bylaws Art. III-IV":"Governing Documents",satisfyingAction:"meeting",meetingType:"ANNUAL",suggestedAgenda:["Board member nominations","Candidate statements","Board election vote"],tip:"Secret ballot per DC Code. Independent inspector recommended.",fiduciaryDuty:"obedience",whyItMatters:"Properly conducted elections ensure board legitimacy and protect against challenges. Flawed elections can result in removal of the entire board.",consequence:"Courts may invalidate elections not conducted per governing documents. DC Code permits owners to petition for court-supervised elections.",howTo:["Open nominations per bylaws timeline","Verify candidate eligibility (owner in good standing)","Distribute candidate statements","Use secret ballot per DC Code","Appoint independent inspector","Certify results and retain ballots 1 year"],scope:"governance"},{id:"g6",task:"Minimum board meetings held per bylaws",role:"President",freq:"Bi-monthly",due:"Ongoing",critical:!0,perMeeting:!0,legalRef:d?`${j} Art. IV-V; DC Code  29-1108.06`:j,tip:d?"Bylaws require bi-monthly (6/year). DC minimum quarterly (4/year). 48-hour notice.":"Hold meetings per bylaws schedule.",fiduciaryDuty:"care",whyItMatters:"Regular meetings demonstrate active oversight. Boards that meet infrequently fail to address issues promptly, increasing liability.",consequence:"Failure to meet minimum frequency violates bylaws and may constitute breach of fiduciary duty. Owners may petition court to compel meetings.",howTo:["Set annual meeting schedule at first meeting of year","Post schedule in common areas","Send 48-hour notice for each meeting","Ensure quorum (majority of board) before conducting business","Allow owner comment period"],scope:"operations"},{id:"g7",task:"Conflict of interest disclosures collected",role:"Secretary",freq:"Annual",due:"2026-02-28",critical:!1,satisfyingAction:"review",legalRef:d?"DC Code  29-406.70":`${f}  Conflicts`,tip:`${u} board members should disclose conflicts annually.`,fiduciaryDuty:"loyalty",whyItMatters:"The duty of loyalty requires putting association interests above personal. Undisclosed conflicts can void transactions and expose the board to liability.",consequence:"Transactions involving undisclosed conflicts are voidable. Board members may face personal liability for self-dealing.",howTo:["Distribute disclosure form to all board members by January 31","Disclose: business interests, vendor relationships, family in building","Conflicted member recuses from related discussion and vote","File completed forms with meeting minutes","Adopt formal conflict of interest policy if not in place"],scope:"governance"},{id:"g8",task:"File annual/biennial report with DCRA",role:"President",freq:"Biennial",due:"2026-04-01",critical:!0,satisfyingAction:"filing",legalRef:d?"DC Code  29-102.11":`${f}  Registration`,tip:d?"Biennial report to DCRA. $80 filing fee. Update officers.":"File required state registration.",fiduciaryDuty:"obedience",whyItMatters:"The association must maintain its legal registration. Failure to file may result in administrative dissolution.",consequence:"Loss of good standing, ability to sue or enforce liens. Dissolution makes board personally liable for association debts.",howTo:["Verify current registered agent and office address","Update officer/director names","Submit biennial report with $80 fee","Retain confirmation for records"],scope:"governance"}];R&&q.push({id:"g9",task:"Rules & Regulations reviewed and current",role:"President",freq:"Annual",due:"2026-06-30",critical:!1,satisfyingAction:"review",legalRef:g?"Bylaws + Rules":p,tip:"Ensure rules consistent with bylaws and law.",fiduciaryDuty:"obedience",whyItMatters:"Rules that conflict with bylaws or law are unenforceable and create legal exposure.",consequence:"Owners may challenge rules in court. Unenforceable rules undermine board authority.",howTo:["Compare rules against bylaws and CC&Rs","Verify consistency with current law","Remove conflicting provisions","Distribute updated rules with 30-day notice"],scope:"governance"});const A=[{id:"f1",task:"Annual budget approved and distributed to owners",role:"Treasurer",freq:"Annual",due:"2026-01-31",critical:!0,satisfyingAction:"meeting",meetingType:"BOARD",legalRef:d?"DC Code  29-1135.03":`${f}  Budget`,suggestedAgenda:["Review draft annual budget","Budget line items","Vote to approve"],tip:d?"Distribute to owners 30 days before fiscal year.":"Approve and distribute per governing docs.",fiduciaryDuty:"care",whyItMatters:"The budget authorizes assessments and sets spending limits. Without approval, the board may lack authority to collect or spend.",consequence:"Without approved budget, board may lack assessment authority. Owners can challenge unauthorized spending.",howTo:["Prepare draft based on prior year actuals and projections","Include: operating, reserves, insurance, utilities, maintenance","Present to board for discussion and vote","Distribute to all owners 30 days before fiscal year","Present for ratification at annual meeting"],scope:"governance"},{id:"f2",task:"Reserve study current (within 3 years)",role:"Treasurer",freq:"Every 3 years",due:"2028-06-15",critical:!0,satisfyingAction:"case",legalRef:d?"DC Code  29-1135.04":"Best practice",tip:"Professional study required. Fund at minimum 70%.",fiduciaryDuty:"care",whyItMatters:"Projects replacement costs for major common elements. Without it, board can't demonstrate adequate reserve funding  a core fiduciary obligation.",consequence:"Underfunded reserves  special assessments. Breach of duty claims. Lenders may deny mortgages.",howTo:["Engage qualified reserve study professional","Inventory all components with useful life and cost","Calculate annual funding requirement","Adjust contribution rate if underfunded","Present to board and owners"],scope:"governance"},{id:"f3",task:"Annual financial audit/review completed",role:"Treasurer",freq:"Annual",due:"2026-06-30",critical:!0,satisfyingAction:"case",legalRef:d?"DC Code  29-1135.05":`${f}  Audit`,tip:d?"Required for associations with assessments >$150K.":"Independent review recommended annually.",fiduciaryDuty:"care",whyItMatters:"Independent review provides assurance funds are properly managed. Primary check against mismanagement.",consequence:"Without review, irregularities go undetected. Board personally liable if funds mismanaged without oversight.",howTo:["Select independent CPA (rotate every 3-5 years)","Provide all financial records and bank statements","Review findings with full board","Address management letter recommendations","Distribute report with annual disclosure"],scope:"governance"},{id:"f4",task:"Fidelity bond in place",role:"Treasurer",freq:"Annual",due:"2026-09-30",critical:!0,satisfyingAction:"document",legalRef:d?"DC Code  29-1135.06":`${f}  Bond`,autoPass:o.some(ie=>ie.type.toLowerCase().includes("fidelity")),tip:"Coverage  3 months assessments + reserves.",fiduciaryDuty:"care",whyItMatters:"Protects against theft/embezzlement by board, officers, employees, or management company.",consequence:"Without bond, association bears full loss from theft. Board personally liable for failing to obtain coverage.",howTo:["Calculate minimum: 3 months assessments + reserve balance","Get quotes from insurance agent","Ensure coverage names association, board, and management","Verify current annually"],scope:"governance"},{id:"f5",task:"Tax returns filed (Form 1120-H & DC D-20)",role:"Treasurer",freq:"Annual",due:"2026-04-15",critical:!0,satisfyingAction:"filing",legalRef:d?"IRS  528; DC Code  47-1807.02":"IRS Code  528",tip:d?"Federal 1120-H and DC franchise tax (D-20, $250 minimum).":"Federal 1120-H due April 15.",fiduciaryDuty:"obedience",whyItMatters:"HOAs are taxable entities. Form 1120-H provides favorable treatment on assessment income.",consequence:"IRS penalties, interest, loss of 1120-H election. DC penalties for late franchise tax.",howTo:["Gather financials, bank interest, non-member income","Prepare Form 1120-H","File DC Form D-20 with $250 minimum tax","File by April 15 or request extension","Retain copies 7+ years"],scope:"governance"},{id:"f6",task:"Reconcile bank accounts monthly",role:"Treasurer",freq:"Monthly",due:"Monthly",critical:!1,satisfyingAction:"review",legalRef:`${j}; Fiduciary duty`,tip:"Two-signature requirement for checks >$5,000. Treasurer reviews monthly.",fiduciaryDuty:"care",whyItMatters:"Most basic financial control. Detects unauthorized transactions and cash flow issues before they become crises.",consequence:"Unreconciled accounts may conceal embezzlement. Board personally liable for losses from inadequate oversight.",howTo:["Download statements for all accounts","Compare every transaction against invoices/receipts","Verify dual signatures on checks >$5,000","Investigate discrepancies immediately","Report to board at next meeting"],scope:"operations"},{id:"f7",task:"Assessment collection policy documented",role:"Treasurer",freq:"As needed",due:"As needed",critical:!1,satisfyingAction:"document",legalRef:d?"DC Code  42-1903.13":`${j}`,autoPass:N,tip:d?"Late fee after 15 days. Lien notice after 60 days.":"Follow collection policy uniformly.",fiduciaryDuty:"care",whyItMatters:"Consistent enforcement ensures operating funds. Selective collection creates legal liability.",consequence:"Failure to collect starves operating funds. Selective enforcement may bar collection from anyone.",howTo:["Adopt written policy: late fees, interest, lien procedures","Apply uniformly  no exceptions","Late notice at 15 days","Demand letter/lien notice at 60 days","Attorney referral at 90 days"],scope:"operations"}],H=[{id:"i1",task:"D&O insurance current",role:"President",freq:"Annual",due:"2026-09-30",critical:!0,legalRef:d?"DC Code  42-1903.10":"Best practice",autoPass:o.some(ie=>ie.type.toLowerCase().includes("d&o")||ie.type.toLowerCase().includes("director")),tip:"Covers wrongful acts, mismanagement, breach of fiduciary duty.",fiduciaryDuty:"care",whyItMatters:"Without D&O, every board member is personally liable for claims. Most people will refuse to serve without it.",consequence:"Personal assets at risk for any lawsuit. Qualified candidates refuse to serve.",howTo:["Verify policy covers all current board members","Review limits vs. association assets","Ensure EPL endorsement included","Compare premiums at renewal","Present recommendation to board"],scope:"governance"},{id:"i2",task:"General liability insurance current",role:"President",freq:"Annual",due:"2026-09-30",critical:!0,legalRef:d?"DC Code  29-1135.06":`${f}  Insurance`,autoPass:o.some(ie=>ie.type.toLowerCase().includes("general liability")),tip:"Minimum $1M/$2M recommended.",fiduciaryDuty:"care",whyItMatters:"Covers bodily injury and property damage in common areas. A single serious injury can bankrupt an uninsured association.",consequence:"Without GL, association and board personally exposed to catastrophic claims.",howTo:["Verify $1M/$2M minimum limits","Review for common area exclusions","Ensure parking, pool, gym covered","Verify management company as additional insured"],scope:"governance"},{id:"i3",task:"Property insurance at replacement cost",role:"Treasurer",freq:"Annual",due:"2026-09-30",critical:!0,legalRef:g?"Bylaws Art. VIII":"Governing Documents",tip:"100% replacement cost. Review after capital improvements.",fiduciaryDuty:"care",whyItMatters:"Ensures building can be fully rebuilt after catastrophic loss. Underinsurance means owners bear the gap through special assessments.",consequence:"Underinsured  breach of duty claims. Co-insurance penalties can reduce payouts 40-60%.",howTo:["Obtain replacement cost appraisal","Compare to policy limits","Update after renovations","Review co-insurance clause"],scope:"governance"},{id:"i4",task:"Workers compensation if employees",role:"President",freq:"Annual",due:"2026-12-31",critical:!1,legalRef:d?"DC Workers Comp Act":`${x} Workers Comp`,tip:d?"Required for ALL DC employers, including part-time.":"Required if HOA has employees.",fiduciaryDuty:"obedience",whyItMatters:"Legally mandated for all employers. Even part-time workers trigger the requirement.",consequence:"Operating without is criminal. Board personally liable for workplace injuries plus penalties.",howTo:["Determine if any employees exist (including part-time)","If yes, obtain coverage immediately","Verify 1099 contractors carry their own","Maintain contractor COIs"],scope:"governance"},{id:"i5",task:"Vendor insurance certificates collected",role:"Vice President",freq:"Annual",due:"2026-03-31",critical:!1,legalRef:"Fiduciary duty",tip:"All vendors should provide COIs naming HOA as additional insured.",fiduciaryDuty:"care",whyItMatters:"Uninsured vendor causes injury  association's policy pays. Without COI, owners bear the cost.",consequence:"Board personally responsible for failing to verify vendor insurance.",howTo:["List all current vendors","Request current COIs from each","Verify HOA named as additional insured","Track expirations","Suspend work without current COI"],scope:"governance"}];g&&H.push({id:"i6",task:"Umbrella/excess liability reviewed",role:"President",freq:"Annual",due:"2026-09-30",critical:!1,legalRef:"Bylaws + Best practice",tip:"$1M-$5M excess recommended.",fiduciaryDuty:"care",whyItMatters:"One catastrophic claim can exceed GL limits. Umbrella fills the gap.",consequence:"Claim exceeding GL without umbrella falls on association and board personally.",howTo:["Review GL aggregate limits","Assess risk profile (high-rise, pool, gym)","Obtain umbrella quotes $1M-$5M","Present cost-benefit to board"],scope:"governance"});const U=[{id:"m1",task:"Fire safety systems inspected",role:"Vice President",freq:"Annual",due:"2026-06-30",critical:!0,legalRef:d?"DC Fire Code; NFPA 72":`${x} Fire Code`,tip:"Alarms, sprinklers, extinguishers, standpipes, emergency lighting.",fiduciaryDuty:"care",whyItMatters:"Highest life-safety obligation. Failed systems during emergency  deaths, catastrophic liability, criminal charges.",consequence:"Failed inspection  possible condemnation. Fire with non-functioning systems  criminal negligence.",howTo:["Schedule annual inspection with licensed company","Include all fire protection components","Address deficiencies within 30 days","Post certificate in lobby","Retain reports 7+ years"],scope:"governance"},{id:"m2",task:"Elevator inspection current",role:"Vice President",freq:"Annual",due:"2026-08-15",critical:!0,legalRef:d?"DC Code  1-303.43":`${f}  Elevator`,tip:d?"DC-licensed inspector. Certificate posted in car.":"Annual safety inspection required.",fiduciaryDuty:"care",whyItMatters:"Elevator injuries are among highest-liability events. Expired certificate = uninspected elevator.",consequence:"Expired  shutdown order. Injury in uninspected elevator  near-automatic liability.",howTo:["Schedule 60 days before expiration","Use licensed inspector","Address deficiencies before certificate issued","Post certificate in each car","Maintain service contract with 24hr emergency"],scope:"governance"},{id:"m3",task:"Common area maintenance schedule documented",role:"Vice President",freq:"Quarterly review",due:"Quarterly",critical:!1,satisfyingAction:"review",legalRef:"Best practice + Reserve Study",tip:"Preventive maintenance for HVAC, plumbing, roof, exterior. Review quarterly.",fiduciaryDuty:"care",whyItMatters:"Preventive maintenance extends system life, reduces emergencies, demonstrates active asset protection.",consequence:"Deferred maintenance  exponentially higher costs. Breach of duty for preventable deterioration.",howTo:["Inventory systems with install dates and expected life","Cross-reference with reserve study","Create seasonal calendar","Track completion","Review and adjust quarterly"],scope:"governance"},{id:"m4",task:"Vendor contracts and licenses verified",role:"Vice President",freq:"Annual",due:"Annual",critical:!1,legalRef:"Fiduciary duty",tip:"Insurance, business license, W-9 from all vendors. Review contracts annually.",fiduciaryDuty:"care",whyItMatters:"Uninsured/unlicensed vendors expose association to liability for injuries, damage, and regulatory violations.",consequence:"Unlicensed work may be voided. Uninsured injury  association bears full cost.",howTo:["Maintain master vendor list","Collect COI, license, W-9 from each","Verify workers comp for vendors with employees","Review contract terms annually","Terminate non-compliant vendors"],scope:"governance"},{id:"m5",task:"Emergency preparedness plan updated",role:"President",freq:"Annual",due:"2026-03-31",critical:!1,satisfyingAction:_?"review":"document",legalRef:"Best practice",autoPass:_,tip:_?"Plan detected. Review annually.":"Create plan with contacts, evacuation routes.",fiduciaryDuty:"care",whyItMatters:"Saves lives during emergencies. Demonstrates reasonable care in post-incident litigation.",consequence:"No plan during incident  negligence liability. Outdated contacts delay response.",howTo:["Update emergency contacts (fire, police, utilities, board)","Review evacuation routes and assembly points","Verify extinguisher and AED locations","Distribute to all residents","Post in common areas"],scope:"governance"},{id:"m6",task:"ADA compliance reviewed",role:"Vice President",freq:"Annual",due:"2026-06-30",critical:!1,legalRef:"ADA Title III",tip:"Applies to public areas: lobbies, parking, common rooms.",fiduciaryDuty:"obedience",whyItMatters:"ADA requires accessibility. Failure can result in federal complaints, lawsuits, mandatory retrofits.",consequence:"Costly retrofits, attorney fees, statutory damages. Serial litigants target non-compliant properties.",howTo:["Walk common areas with ADA checklist","Identify barriers to accessibility","Prioritize: parking, entrance, lobby, elevator, restrooms","Budget corrections","Document accommodation requests and responses"],scope:"governance"}],L=[{id:"r1",task:"Owner records current and accessible",role:"Secretary",freq:"Within 30 days of transfer",due:"Per transfer",critical:!1,satisfyingAction:"review",legalRef:d?"DC Code  29-1135.01":`${f}  Records`,tip:d?"Update within 30 days. Available for inspection upon 5 days notice.":"Update promptly upon transfers.",fiduciaryDuty:"care",whyItMatters:"Accurate records ensure proper notice, voting eligibility, and assessment billing. Incorrect records invalidate meetings and elections.",consequence:"Wrong address  meeting invalidated. Wrong owner  collection fails. Bad voter rolls  election challenge.",howTo:["Update within 30 days of sale/transfer","Verify mailing, email, phone for each unit","Maintain mortgagee records","Allow inspection upon 5 business days notice","Verify before annual meeting"],scope:"operations"},{id:"r2",task:"Meeting notices sent per statute",role:"Secretary",freq:"Per meeting",due:"Per meeting",critical:!0,perMeeting:!0,legalRef:d?"DC Code  29-1109.02(a)":`${f}  Notice`,tip:d?"Annual: 10-60 days. Board: 48hrs. Special: 10 days. Emergency: reasonable.":"Per bylaws and statute.",fiduciaryDuty:"obedience",whyItMatters:"Proper notice is due process. Actions at improperly noticed meetings may be void.",consequence:"Voidable actions. Must re-notice and re-hold, delaying decisions.",howTo:["Determine notice period for meeting type","Prepare written notice: date, time, location, agenda","Deliver per bylaws method","Document proof of delivery","Retain copies permanently"],scope:"operations"},{id:"r3",task:"Annual disclosure statement distributed",role:"Secretary",freq:"Annual",due:"2026-03-31",critical:!1,legalRef:d?"DC Code  29-1135.05":`${f}  Disclosure`,tip:d?"Include: budget, reserves, insurance, pending litigation.":"Financial and governance disclosures.",fiduciaryDuty:"care",whyItMatters:"Keeps owners informed about financial health. Transparency reduces conflict.",consequence:"Liability for non-disclosure. Some jurisdictions allow owners to withhold assessments.",howTo:["Compile: budget, actual vs budget, reserve balance","Include: insurance summary, pending litigation","Include: board members and officers","Distribute by mail or email","Retain proof of distribution"],scope:"governance"},{id:"r4",task:"Resale certificate process in place",role:"Secretary",freq:"Within 10 business days",due:"Per request",critical:!1,satisfyingAction:"document",legalRef:d?"DC Code  29-1141":`${f}  Resale`,autoPass:O,tip:d?"10 business days. Fee  statutory max.":"Provide within statutory timeframe.",fiduciaryDuty:"obedience",whyItMatters:"Required to complete condo sales. Delays can kill transactions.",consequence:"Liability for buyer/seller damages if delayed. Transaction costs if sale fails.",howTo:["Establish standard process","Prepare template with required disclosures","Verify unit account current","Fulfill within 10 business days","Charge fee  statutory maximum"],scope:"operations"},{id:"r5",task:"Document retention policy adopted",role:"Secretary",freq:"Review annually",due:"2026-06-30",critical:!1,satisfyingAction:"document",legalRef:"IRS guidelines + Best practice",autoPass:P,tip:"Financial: 7yr. Tax: permanent. Minutes: permanent. Contracts: term+6yr.",fiduciaryDuty:"care",whyItMatters:"Protects in litigation, audits, regulatory inquiries. Ensures institutional knowledge survives turnover.",consequence:"Destroyed docs  negative inference in litigation. Missing tax records  IRS penalties.",howTo:["Adopt written schedule by document type","Financial/bank: 7+ years","Tax returns: permanently","Minutes/resolutions: permanently","Contracts: duration + 6 years","Insurance claims: 10 years","Implement secure physical and digital storage"],scope:"governance"}],F=[{id:"o1",task:"Respond to owner requests within 14 days",role:"Vice President",freq:"Per request",due:"Per request",critical:!1,satisfyingAction:"review",legalRef:`${j}; Fiduciary duty`,tip:"Written acknowledgment within 14 days. Track in Case Ops.",fiduciaryDuty:"care",whyItMatters:"Timely response is a core governance obligation. Unresponsive boards erode trust and face removal petitions.",consequence:"Chronic non-responsiveness  removal petitions, litigation, regulatory complaints.",howTo:["Log all requests in Case Ops immediately","Send written acknowledgment within 5 business days","Respond substantively within 14 days","If more time needed, send interim update","Document all communications"],scope:"operations"},{id:"o2",task:"Make records available for owner inspection",role:"Secretary",freq:"As requested",due:"Within 5 business days",critical:!0,satisfyingAction:"review",legalRef:d?"DC Code  42-1903.14":`${f}  Records`,tip:"Owners may inspect: financials, minutes, contracts, insurance.",fiduciaryDuty:"obedience",whyItMatters:"Inspection rights are statutory. They are owners' primary oversight mechanism. Obstruction is a serious legal violation.",consequence:"DC allows court petition with attorney fees to prevailing owner. Board may be held in contempt.",howTo:["Establish written inspection policy","Provide access within 5 business days of written request","Allow inspection at reasonable time and place","May charge reasonable copying fees","May NOT withhold except attorney-client privileged","Document every request and fulfillment"],scope:"operations"},{id:"o3",task:"Enforce CC&Rs and rules uniformly",role:"Vice President",freq:"Ongoing",due:"Ongoing",critical:!0,satisfyingAction:"review",legalRef:"Fiduciary duty; CC&Rs",tip:"Selective enforcement = #1 source of HOA lawsuits. Document everything.",fiduciaryDuty:"loyalty",whyItMatters:"Uniform enforcement shows the board acts for all owners. Selective enforcement is the #1 lawsuit source.",consequence:"Courts may bar all enforcement if selective. Board personally liable for discrimination.",howTo:["Written violation process: notice  hearing  fine/remedy","Apply to every violation regardless of owner","Document every violation, notice, response in Case Ops","If past non-enforcement, send blanket notice before resuming","Never make exceptions for board members"],scope:"operations"},{id:"o4",task:"Annual notice of owner rights",role:"Secretary",freq:"Annual",due:"2026-01-31",critical:!1,satisfyingAction:"review",legalRef:d?"DC Code  42-1903.14(c)":`${f}`,tip:"Right to inspect records, attend meetings, run for board, vote.",fiduciaryDuty:"obedience",whyItMatters:"Many owners don't know their rights. Proactive disclosure builds trust and reduces conflict.",consequence:"Failure increases likelihood of contentious disputes and legal challenges.",howTo:["Prepare annual notice of key rights","Include: inspect records, attend meetings, run for board, vote","Include: how to request records, submit issues","Distribute with annual disclosure","Post on building portal"],scope:"governance"}],K=[{id:"governance",icon:"",label:"Governance & Legal",weight:20,items:q},{id:"financial",icon:"",label:"Financial Compliance",weight:20,items:A},{id:"insurance",icon:"",label:"Insurance & Risk",weight:15,items:H},{id:"maintenance",icon:"",label:"Maintenance & Safety",weight:15,items:U},{id:"records",icon:"",label:"Records & Communications",weight:10,items:L},{id:"owner-relations",icon:"",label:"Owner Relations",weight:10,items:F},{id:"ethics",icon:"",label:"Ethics & Fiduciary",weight:5,items:[{id:"e1",task:"Board members understand three fiduciary duties",role:"President",freq:"Annual",due:"2026-01-31",critical:!0,satisfyingAction:"review",legalRef:d?"DC Code  29-406.30":"Common law",tip:"Care: informed decisions. Loyalty: no self-dealing. Obedience: follow docs and law.",fiduciaryDuty:"care",whyItMatters:"These duties define the legal standard for every decision. Understanding them is the foundation of competent service and the board's legal defense.",consequence:"Violation  personal liability. D&O may not cover intentional or knowing violations.",howTo:["Distribute fiduciary duty summary annually","Care: attend meetings, read materials, ask questions, decide informed","Loyalty: disclose conflicts, no self-dealing, association first","Obedience: follow bylaws, CC&Rs, law in all decisions","Document acknowledgment","Consider annual training with association attorney"],scope:"governance"},{id:"e2",task:"Business judgment rule compliance",role:"President",freq:"Ongoing",due:"Ongoing",critical:!1,satisfyingAction:"review",legalRef:d?"DC Code  29-406.31":"Common law",tip:"Decisions protected if: good faith, reasonable care, informed basis, association interest.",fiduciaryDuty:"care",whyItMatters:"Protects from personal liability for bad outcomes  but only if proper process was followed.",consequence:"Decisions without information, quorum, or with undisclosed conflicts lose protection. Board personally liable.",howTo:["Before major decisions: gather information and alternatives","Get professional advice outside board expertise","Ensure quorum and proper notice","Disclose and manage conflicts","Document rationale in minutes","Vote  don't rubber-stamp"],scope:"operations"},{id:"e3",task:"No board member self-dealing",role:"President",freq:"Ongoing",due:"Ongoing",critical:!0,legalRef:d?"DC Code  29-406.70":"Duty of loyalty",tip:"Related-party transactions: disclose, recuse, disinterested approval, fair market value.",fiduciaryDuty:"loyalty",whyItMatters:"Most common basis for personal liability. Even fair transactions must be properly disclosed.",consequence:"Voidable even if fair. Disgorgement of profits + damages. D&O may deny coverage for intentional self-dealing.",howTo:["Conflicted member discloses in writing before discussion","Member leaves room during discussion and vote","Remaining board evaluates on merits","Document fair market comparison (competing bids)","Record disclosure, recusal, rationale in minutes","If in doubt, engage attorney first"],scope:"operations"}]},{id:"legal",icon:"",label:"Legal & Regulatory",weight:5,items:[{id:"l1",task:"Fair Housing Act compliance reviewed",role:"President",freq:"Annual",due:"2026-06-30",critical:!0,satisfyingAction:"review",legalRef:d?"FHA; DC Human Rights Act":"Fair Housing Act",tip:d?"DC HRA broader than FHA  includes source of income, personal appearance.":"FHA: race, color, religion, sex, national origin, disability, familial status.",fiduciaryDuty:"obedience",whyItMatters:"Violations carry severe penalties. Board members individually liable.",consequence:"$50K-$200K+ per violation. Criminal penalties for pattern. Personal liability.",howTo:["Review rules/policies for disparate impact","Ensure no rules target demographics or family types","Process accommodation requests promptly","Train board on fair housing basics annually","Never retaliate against complaint filers"],scope:"governance"},{id:"l2",task:"Legal counsel retained and accessible",role:"President",freq:"Annual",due:"2026-01-31",critical:!1,satisfyingAction:"review",legalRef:"Fiduciary duty",tip:"Attorney experienced in community association law. Review retainer annually.",fiduciaryDuty:"care",whyItMatters:"Boards aren't legal experts but must seek advice when appropriate. Available counsel ensures timely advice on critical decisions.",consequence:"Decisions without counsel  failure to exercise care. Delayed response escalates disputes.",howTo:["Verify attorney expertise in condo/HOA law","Review retainer terms and rates annually","Establish scope: contracts >$10K, disputes, collections, FHA","Budget adequate legal fees","Change counsel if response times inadequate"],scope:"governance"}]}];return g&&y.push("Bylaws detected  bylaw-specific references activated."),v&&y.push("CC&Rs/Declaration detected  declaration-specific checks enabled."),g||y.push(" No bylaws uploaded  some checks use generic references. Upload bylaws for accuracy."),{categories:K,refreshedAt:new Date().toISOString(),jurisdiction:x,documentsDetected:T,regulatoryNotes:y}}function Xb(){const{currentUser:l,currentRole:m}=jt(),i=Xt(),{meetings:o}=Ka(),u=Ir(),d=Ns(),x=al(),p=mp(),f=Xs(),g=m==="BOARD_MEMBER"||m==="PROPERTY_MANAGER",v=i.getIncomeMetrics(),R=i.getBalanceSheet(),O=i.getDelinquencyAging(),N=i.reserveItems,P=N.reduce((ve,Ye)=>ve+Ye.currentFunding,0),_=N.reduce((ve,Ye)=>ve+Ye.estimatedCost,0),T=_>0?Math.round(P/_*100):0,y=Nd({state:d.address.state,legalDocuments:d.legalDocuments.map(ve=>({name:ve.name,status:ve.status})),insurance:d.insurance.map(ve=>({type:ve.type,expires:ve.expires})),boardCount:d.board.length,hasManagement:!!d.management.company}),j=y.categories.reduce((ve,Ye)=>ve+Ye.items.length,0),q=Object.values(u.completions).filter(Boolean).length,A=j>0?Math.round(q/j*100):0,H=A>=90?"A":A>=75?"B":A>=60?"C":"D",U=d.legalDocuments.length,L=d.legalDocuments.filter(ve=>ve.status==="current").length,F=d.legalDocuments.filter(ve=>ve.attachments&&ve.attachments.length>0).length,z=U>0?Math.round(L/U*60+F/U*40):0,ne=d.insurance.length,K=d.insurance.filter(ve=>new Date(ve.expires)>new Date).length,ie=d.insurance.filter(ve=>ve.attachments&&ve.attachments.length>0).length,he=ne>0?Math.round(K/ne*70+ie/ne*30):0,pe=Math.round([d.board.length>=3,!!d.management.company,d.legalCounsel.length>0,d.vendors.filter(ve=>ve.status==="active").length>=3].filter(Boolean).length/4*100),Ne=Math.round(z*.35+he*.35+pe*.3),B=Ne>=90?"A":Ne>=80?"B":Ne>=70?"C":Ne>=60?"D":"F",I=o.filter(ve=>ve.status==="SCHEDULED"||ve.status==="RESCHEDULED").sort((ve,Ye)=>ve.date.localeCompare(Ye.date)),w=I[0],M=o.filter(ve=>ve.status==="COMPLETED"),ce=x.cases.filter(ve=>ve.status==="open"),E=ce.filter(ve=>ve.priority==="urgent"||ve.priority==="high"),J=x.issues.filter(ve=>ve.status==="SUBMITTED"),Q=u.filings.filter(ve=>ve.status==="pending"&&new Date(ve.dueDate)<new Date),xe=new Date,Se=new Date(xe.getTime()+2160*60*60*1e3),b=d.insurance.filter(ve=>{const Ye=new Date(ve.expires);return Ye>xe&&Ye<Se}),ae=(l==null?void 0:l.linkedUnits)||[],Me=i.units.filter(ve=>ae.includes(ve.number)),Ae=Me.reduce((ve,Ye)=>ve+Ye.balance+Ye.lateFees.filter(De=>!De.waived).reduce((De,et)=>De+et.amount,0),0),ot=Me[0],St=u.communications.slice(0,5);if(g){const ve=[];Q.length>0&&ve.push({label:"Overdue Filings",count:Q.length,color:"red",path:"/boardroom",icon:""}),E.length>0&&ve.push({label:"Urgent Cases",count:E.length,color:"red",path:"/issues",icon:""}),J.length>0&&ve.push({label:"New Issues",count:J.length,color:"amber",path:"/issues",icon:""}),b.length>0&&ve.push({label:"Insurance Expiring",count:b.length,color:"amber",path:"/building",icon:""}),O.days90plus.length>0&&ve.push({label:"90+ Days Past Due",count:O.days90plus.length,color:"red",path:"/building",icon:""}),T<50&&ve.push({label:"Low Reserves",count:T,color:"amber",path:"/financial",icon:""});const Ye=[];return M.slice(0,2).forEach(De=>Ye.push({icon:"",text:`${De.title} completed`,date:De.date,path:"/boardroom"})),u.filings.filter(De=>De.status==="filed").slice(0,2).forEach(De=>Ye.push({icon:"",text:`${De.name} filed`,date:De.filedDate||"",path:"/boardroom"})),St.slice(0,2).forEach(De=>Ye.push({icon:"",text:De.subject,date:De.date,path:"/boardroom"})),p.archives.slice(0,1).forEach(De=>Ye.push({icon:"",text:`${De.label} archived`,date:De.createdAt.split("T")[0],path:"/archives"})),Ye.sort((De,et)=>et.date.localeCompare(De.date)),e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{className:"bg-gradient-to-r from-ink-900 via-ink-800 to-accent-800 rounded-xl p-6 text-white shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome back, ",l.name.split(" ")[0]]}),e.jsxs("p",{className:"text-accent-200 text-sm mt-1",children:[d.name,"  ",new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-center bg-white bg-opacity-10 rounded-lg px-4 py-2",children:[e.jsx("p",{className:"text-[10px] text-accent-200",children:"Building"}),e.jsx("p",{className:`text-lg font-bold ${Ne>=80?"text-green-300":Ne>=60?"text-yellow-300":"text-red-300"}`,children:B})]}),e.jsxs("div",{className:"text-center bg-white bg-opacity-10 rounded-lg px-4 py-2",children:[e.jsx("p",{className:"text-[10px] text-accent-200",children:"Compliance"}),e.jsx("p",{className:`text-lg font-bold ${A>=75?"text-green-300":A>=60?"text-yellow-300":"text-red-300"}`,children:H})]})]})]})}),ve.length>0&&e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:ve.map(De=>e.jsxs("button",{onClick:()=>f(De.path),className:`shrink-0 flex items-center gap-2 px-4 py-2.5 rounded-xl border text-sm font-medium transition-all hover:shadow-sm ${De.color==="red"?"bg-red-50 border-red-200 text-red-800 hover:bg-red-100":"bg-amber-50 border-amber-200 text-amber-800 hover:bg-amber-100"}`,children:[e.jsx("span",{children:De.icon}),e.jsx("span",{className:"font-bold",children:De.count}),e.jsx("span",{children:De.label})]},De.label))}),(()=>{const De=d.board.find(we=>we.name===l.name),et=(De==null?void 0:De.role)||"President",Zt=y.categories.flatMap(we=>we.items).filter(we=>!u.completions[we.id]&&!we.autoPass&&we.role===et),G=u.filings.filter(we=>we.status==="pending"&&new Date(we.dueDate)<new Date&&we.responsible===et),ye=ce.filter(we=>we.priority==="urgent"||we.priority==="high"),V=I[0],ke=Zt.length+G.length+ye.length+(V?1:0);if(ke===0)return null;const _e=[];if(G.forEach(we=>_e.push({icon:"",label:we.name,sub:`Overdue: ${we.dueDate}`,path:"/boardroom",color:"red",priority:1})),ye.forEach(we=>_e.push({icon:"",label:we.title,sub:`${we.priority}  ${we.status}`,path:"/issues",color:"red",priority:2})),V){const we=Math.ceil((new Date(V.date+"T12:00").getTime()-Date.now())/864e5);we<=14&&_e.push({icon:"",label:V.title,sub:`${we<=0?"Today":`In ${we} days`}  ${V.time}`,path:"/boardroom",color:we<=3?"red":"amber",priority:3})}return Zt.slice(0,3).forEach(we=>_e.push({icon:"",label:we.task,sub:`${we.freq}  Due: ${we.due}`,path:"/boardroom",color:we.critical?"red":"amber",priority:4})),_e.sort((we,tt)=>we.priority-tt.priority),e.jsxs("div",{className:"bg-white rounded-xl border border-ink-100 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-base",children:""}),e.jsx("h2",{className:"text-sm font-bold text-ink-700",children:"Your Action Items"}),e.jsx("span",{className:"text-[10px] bg-red-100 text-red-700 px-1.5 py-0.5 rounded-full font-bold",children:ke})]}),e.jsxs("span",{className:"text-[10px] text-ink-400 font-medium",children:["Role: ",et]})]}),e.jsx("div",{className:"space-y-1.5",children:_e.slice(0,6).map((we,tt)=>e.jsxs("button",{onClick:()=>f(we.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-left text-sm transition-all hover:shadow-sm ${we.color==="red"?"bg-red-50 border border-red-100 hover:border-red-200":"bg-amber-50 border border-amber-100 hover:border-amber-200"}`,children:[e.jsx("span",{className:"text-base shrink-0",children:we.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-ink-900 truncate",children:we.label}),e.jsx("p",{className:"text-[10px] text-ink-500",children:we.sub})]}),e.jsx("span",{className:"text-ink-300 text-xs",children:""})]},tt))}),ke>6&&e.jsxs("p",{className:"text-[10px] text-ink-400 mt-2 text-center",children:["+ ",ke-6," more items"]})]})})(),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-3",children:[e.jsx(fn,{label:"Collection Rate",value:`${v.collectionRate}%`,sub:`${te(v.monthlyExpected)}/mo`,color:v.collectionRate>=90?"sage":v.collectionRate>=75?"yellow":"red",onClick:()=>f("/financial")}),e.jsx(fn,{label:"Operating Cash",value:te(R.assets.operating),sub:`${te(R.assets.totalReceivable)} AR`,color:"accent",onClick:()=>f("/financial")}),e.jsx(fn,{label:"Delinquent",value:`${v.delinquentUnits}`,sub:`${te(O.totalOutstanding)} owed`,color:v.delinquentUnits===0?"sage":"red",onClick:()=>f("/building")}),e.jsx(fn,{label:"Reserve Fund",value:`${T}%`,sub:`${te(P)} funded`,color:T>=70?"sage":T>=50?"yellow":"red",onClick:()=>f("/financial")}),e.jsx(fn,{label:"Open Cases",value:`${ce.length}`,sub:`${E.length} urgent/high`,color:E.length>0?"red":ce.length>0?"accent":"sage",onClick:()=>f("/issues")})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-5",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{onClick:()=>f("/boardroom"),className:"bg-white rounded-xl border border-ink-100 p-5 cursor-pointer hover:border-sage-300 hover:shadow-sm transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-ink-700",children:"Compliance Runbook"}),e.jsxs("span",{className:`text-2xl font-bold ${A>=75?"text-sage-600":A>=60?"text-yellow-600":"text-red-600"}`,children:[A,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-ink-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${A>=75?"bg-sage-500":A>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${A}%`}})}),e.jsxs("p",{className:"text-xs text-ink-400 mt-2",children:[q,"/",j," items  ",Q.length>0?`${Q.length} overdue filings`:"No overdue filings"]})]}),e.jsxs("div",{onClick:()=>f("/building"),className:"bg-white rounded-xl border border-ink-100 p-5 cursor-pointer hover:border-accent-300 hover:shadow-sm transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-ink-700",children:"Building Health"}),e.jsx("span",{className:`text-2xl font-bold ${Ne>=80?"text-sage-600":Ne>=60?"text-yellow-600":"text-red-600"}`,children:B})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(nd,{label:"Legal",val:`${z}%`,good:z>=80}),e.jsx(nd,{label:"Insurance",val:`${he}%`,good:he>=80}),e.jsx(nd,{label:"Governance",val:`${pe}%`,good:pe>=80})]}),e.jsx("p",{className:"text-xs text-ink-400 mt-2",children:b.length>0?` ${b.length} policy expiring soon`:" All policies current"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-bold text-ink-700 mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[e.jsx(jr,{icon:"",label:"Daily Operations",sub:`${ce.length} open`,onClick:()=>f("/boardroom")}),e.jsx(jr,{icon:"",label:"Fiscal Lens",sub:`${v.collectionRate}% rate`,onClick:()=>f("/financial")}),e.jsx(jr,{icon:"",label:"Compliance",sub:`${H} grade`,onClick:()=>f("/boardroom")}),e.jsx(jr,{icon:"",label:"Building",sub:`${B} health`,onClick:()=>f("/building")})]})]}),I.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-sm font-bold text-ink-700",children:"Upcoming Meetings"}),e.jsx("button",{onClick:()=>f("/boardroom"),className:"text-xs text-accent-600 hover:text-accent-700 font-medium",children:"View all "})]}),e.jsx("div",{className:"space-y-2",children:I.slice(0,3).map(De=>e.jsxs("div",{onClick:()=>f("/boardroom"),className:"bg-white border border-ink-100 rounded-lg p-3.5 cursor-pointer hover:border-accent-200 hover:shadow-sm transition-all flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-10 h-10 bg-accent-50 rounded-lg flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-[10px] font-bold text-accent-600 leading-none",children:new Date(De.date+"T12:00").toLocaleDateString("en-US",{month:"short"}).toUpperCase()}),e.jsx("span",{className:"text-sm font-bold text-accent-800 leading-none",children:new Date(De.date+"T12:00").getDate()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-ink-900",children:De.title}),e.jsxs("p",{className:"text-xs text-ink-400",children:[De.time,"  ",De.location]})]})]}),e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-lg font-semibold bg-accent-50 text-accent-700",children:De.type})]},De.id))})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-bold text-ink-700 mb-3",children:"Recent Activity"}),e.jsx("div",{className:"bg-white rounded-xl border border-ink-100 divide-y divide-ink-50",children:Ye.length===0?e.jsx("p",{className:"p-4 text-xs text-ink-400 text-center",children:"No recent activity"}):Ye.slice(0,8).map((De,et)=>e.jsx("div",{onClick:()=>f(De.path),className:"px-4 py-3 cursor-pointer hover:bg-mist-50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-2.5",children:[e.jsx("span",{className:"text-base mt-0.5",children:De.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-ink-800 truncate",children:De.text}),e.jsx("p",{className:"text-[10px] text-ink-400",children:De.date})]})]})},et))}),O.totalOutstanding>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h2",{className:"text-sm font-bold text-ink-700 mb-3",children:"Delinquency Aging"}),e.jsxs("div",{onClick:()=>f("/building"),className:"bg-white rounded-xl border border-ink-100 p-4 cursor-pointer hover:border-red-200 hover:shadow-sm transition-all space-y-2",children:[e.jsx(Nr,{label:"Current (0-30)",count:O.current.length,total:v.delinquentUnits,color:"yellow"}),e.jsx(Nr,{label:"30-60 Days",count:O.days30.length,total:v.delinquentUnits,color:"orange"}),e.jsx(Nr,{label:"60-90 Days",count:O.days60.length,total:v.delinquentUnits,color:"red"}),e.jsx(Nr,{label:"90+ Days",count:O.days90plus.length,total:v.delinquentUnits,color:"red"}),e.jsxs("div",{className:"pt-2 border-t border-ink-100 flex justify-between text-xs",children:[e.jsx("span",{className:"text-ink-500 font-medium",children:"Total Outstanding"}),e.jsx("span",{className:"font-bold text-red-700",children:te(O.totalOutstanding)})]})]})]})]})]})]})}return e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{className:"bg-gradient-to-r from-ink-900 via-ink-800 to-accent-800 rounded-xl p-6 text-white shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome back, ",l.name.split(" ")[0]]}),e.jsxs("p",{className:"text-accent-200 text-sm mt-1",children:[d.name,"  Unit ",l.unitNumber]})]}),ot&&e.jsxs("div",{className:`text-center rounded-lg px-5 py-2.5 ${Ae>0?"bg-red-500 bg-opacity-30":"bg-green-500 bg-opacity-20"}`,children:[e.jsx("p",{className:"text-[10px] text-accent-200",children:"Account"}),e.jsx("p",{className:"text-lg font-bold",children:Ae>0?te(Ae):" Current"})]})]})}),Ae>0&&e.jsxs("div",{onClick:()=>f("/my-unit"),className:"bg-red-50 border border-red-200 rounded-xl p-4 cursor-pointer hover:shadow-sm transition-all flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:""})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-bold text-red-900",children:["Balance Due: ",te(Ae)]}),e.jsx("p",{className:"text-xs text-red-700",children:"Your account has an outstanding balance. Pay now to stay current."})]})]}),e.jsx("button",{className:"px-4 py-2 bg-red-700 text-white rounded-lg text-sm font-semibold hover:bg-red-800 shrink-0",children:"Pay Now"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsx(fn,{label:"Monthly Fee",value:ot?te(ot.monthlyFee):"",sub:ot?`Due day ${i.hoaDueDay||1}`:"",color:"accent",onClick:()=>f("/my-unit")}),e.jsx(fn,{label:"Account Status",value:Ae===0?"Current":"Past Due",sub:Ae>0?te(Ae)+" owed":"No balance",color:Ae===0?"sage":"red",onClick:()=>f("/my-unit")}),e.jsx(fn,{label:"Next Meeting",value:w?new Date(w.date+"T12:00").toLocaleDateString("en-US",{month:"short",day:"numeric"}):"",sub:w?`${w.type}  ${w.time}`:"None scheduled",color:"accent",onClick:()=>f("/building")}),e.jsx(fn,{label:"Open Issues",value:String(J.length),sub:"Community reports",color:J.length>0?"amber":"sage",onClick:()=>f("/issues")})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-5",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-bold text-ink-700 mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>f("/my-unit"),className:"flex items-center gap-3 p-4 bg-ink-900 text-white rounded-xl hover:bg-ink-800 transition-all text-left",children:[e.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-15 rounded-lg flex items-center justify-center text-lg",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold",children:"Make a Payment"}),e.jsx("p",{className:"text-xs text-accent-200",children:Ae>0?`Pay ${te(Ae)}`:"No balance due"})]})]}),e.jsxs("button",{onClick:()=>f("/issues"),className:"flex items-center gap-3 p-4 bg-accent-600 text-white rounded-xl hover:bg-accent-700 transition-all text-left",children:[e.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-15 rounded-lg flex items-center justify-center text-lg",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold",children:"Report an Issue"}),e.jsx("p",{className:"text-xs text-accent-100",children:"Submit a request"})]})]}),e.jsxs("button",{onClick:()=>f("/building"),className:"flex items-center gap-3 p-4 bg-white border border-ink-100 rounded-xl hover:border-accent-200 hover:shadow-sm transition-all text-left",children:[e.jsx("div",{className:"w-10 h-10 bg-mist-50 rounded-lg flex items-center justify-center text-lg",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-ink-900",children:"Building Info"}),e.jsx("p",{className:"text-xs text-ink-400",children:"Docs, contacts, policies"})]})]}),e.jsxs("button",{onClick:()=>f("/archives"),className:"flex items-center gap-3 p-4 bg-white border border-ink-100 rounded-xl hover:border-accent-200 hover:shadow-sm transition-all text-left",children:[e.jsx("div",{className:"w-10 h-10 bg-mist-50 rounded-lg flex items-center justify-center text-lg",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-ink-900",children:"Archives"}),e.jsx("p",{className:"text-xs text-ink-400",children:p.archives.length>0?`${p.archives.length} archived periods`:"Historical records"})]})]})]})]}),I.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-bold text-ink-700 mb-3",children:"Upcoming Meetings"}),e.jsx("div",{className:"space-y-2",children:I.slice(0,2).map(ve=>e.jsxs("div",{className:"bg-white border border-ink-100 rounded-lg p-3.5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-10 h-10 bg-accent-50 rounded-lg flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-[10px] font-bold text-accent-600 leading-none",children:new Date(ve.date+"T12:00").toLocaleDateString("en-US",{month:"short"}).toUpperCase()}),e.jsx("span",{className:"text-sm font-bold text-accent-800 leading-none",children:new Date(ve.date+"T12:00").getDate()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-ink-900",children:ve.title}),e.jsxs("p",{className:"text-xs text-ink-400",children:[ve.time,"  ",ve.location]})]})]}),e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-lg font-semibold bg-accent-50 text-accent-700",children:ve.type})]},ve.id))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-bold text-ink-700 mb-3",children:"Building Announcements"}),e.jsx("div",{className:"bg-white rounded-xl border border-ink-100 divide-y divide-ink-50",children:St.length===0?e.jsx("p",{className:"p-4 text-xs text-ink-400 text-center",children:"No recent announcements"}):St.slice(0,5).map(ve=>e.jsxs("div",{className:"px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-semibold ${ve.type==="notice"?"bg-accent-100 text-accent-700":ve.type==="financial"?"bg-yellow-100 text-yellow-700":ve.type==="minutes"?"bg-sage-100 text-sage-700":"bg-ink-100 text-ink-600"}`,children:ve.type}),e.jsx("span",{className:"text-[10px] text-ink-400",children:ve.date})]}),e.jsx("p",{className:"text-xs font-medium text-ink-800",children:ve.subject})]},ve.id))})]}),d.management.company&&e.jsxs("div",{className:"bg-mist-50 rounded-xl border border-mist-200 p-4",children:[e.jsx("h3",{className:"text-xs font-bold text-ink-700 mb-2",children:"Management Company"}),e.jsx("p",{className:"text-sm font-semibold text-ink-900",children:d.management.company}),e.jsxs("p",{className:"text-xs text-ink-500 mt-1",children:[d.management.contact,"  ",d.management.title]}),e.jsx("p",{className:"text-xs text-accent-600 mt-1",children:d.management.phone}),e.jsx("p",{className:"text-xs text-accent-600",children:d.management.email}),d.management.emergency&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-mist-200",children:[e.jsx("p",{className:"text-[10px] font-bold text-red-700 uppercase tracking-wide",children:"Emergency"}),e.jsx("p",{className:"text-xs font-semibold text-red-800",children:d.management.emergency})]})]})]})]})]})}function fn({label:l,value:m,sub:i,color:o,onClick:u}){const d={sage:"border-sage-200 hover:border-sage-400",red:"border-red-200 hover:border-red-400",yellow:"border-yellow-200 hover:border-yellow-400",amber:"border-amber-200 hover:border-amber-400",accent:"border-accent-200 hover:border-accent-400"},x={sage:"text-sage-700",red:"text-red-700",yellow:"text-yellow-700",amber:"text-amber-700",accent:"text-accent-700"};return e.jsxs("div",{onClick:u,className:`bg-white rounded-xl border p-4 cursor-pointer hover:shadow-sm transition-all ${d[o]||d.accent}`,children:[e.jsx("p",{className:"text-[11px] text-ink-400 font-medium",children:l}),e.jsx("p",{className:`text-xl font-bold mt-1 ${x[o]||"text-ink-900"}`,children:m}),e.jsx("p",{className:"text-[10px] text-ink-400 mt-0.5",children:i})]})}function nd({label:l,val:m,good:i}){return e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] text-ink-400",children:l}),e.jsx("p",{className:`text-sm font-bold ${i?"text-sage-600":"text-yellow-600"}`,children:m})]})}function jr({icon:l,label:m,sub:i,onClick:o}){return e.jsxs("button",{onClick:o,className:"bg-white border border-ink-100 rounded-xl p-3.5 text-left hover:border-accent-200 hover:shadow-sm transition-all",children:[e.jsx("span",{className:"text-lg",children:l}),e.jsx("p",{className:"text-xs font-bold text-ink-900 mt-1.5",children:m}),e.jsx("p",{className:"text-[10px] text-ink-400",children:i})]})}function Nr({label:l,count:m,total:i,color:o}){if(m===0)return null;const u=i>0?Math.round(m/i*100):0,d=o==="yellow"?"bg-yellow-400":o==="orange"?"bg-orange-400":"bg-red-500";return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-ink-500",children:l}),e.jsxs("span",{className:"font-medium text-ink-700",children:[m," unit",m!==1?"s":""]})]}),e.jsx("div",{className:"w-full h-1.5 bg-ink-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${d}`,style:{width:`${u}%`}})})]})}function Te({title:l,subtitle:m,children:i,onClose:o,onSave:u,saveLabel:d="Save",saveColor:x="bg-ink-900 hover:bg-ink-800",footer:p,wide:f}){return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:o,children:e.jsxs("div",{className:`bg-white rounded-xl ${f?"max-w-4xl":"max-w-md"} w-full max-h-[90vh] overflow-y-auto`,onClick:g=>g.stopPropagation(),children:[e.jsx("div",{className:"border-b p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-xl font-bold text-ink-900",children:l}),m&&e.jsx("p",{className:"text-sm text-ink-500 mt-1",children:m})]}),e.jsx("button",{onClick:o,className:"text-ink-300 hover:text-ink-500 text-2xl leading-none",children:""})]})}),e.jsx("div",{className:"p-6",children:i}),(u||p)&&e.jsxs("div",{className:"border-t p-6 flex justify-end space-x-3",children:[p,!p&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-ink-700 hover:text-ink-900 font-medium",children:"Cancel"}),u&&e.jsx("button",{onClick:u,className:`px-6 py-2 text-white rounded-lg font-medium ${x}`,children:d})]})]})]})})}function xp(){const l=Xt(),{getBalanceSheet:m,getIncomeStatement:i,getIncomeMetrics:o,getBudgetVariance:u,getDelinquencyAging:d,reserveItems:x,setActiveTab:p,units:f,recordUnitPayment:g,imposeLateFee:v,waiveLateFee:R}=l,O=m(),N=i("2026-01-01","2026-12-31"),P=o(),_=d(),T=u(),y=T.reduce((M,ce)=>M+ce.budgeted,0),j=T.reduce((M,ce)=>M+ce.actual,0),q=y>0?Math.round(j/y*100):0,A=x.reduce((M,ce)=>M+ce.currentFunding,0),H=x.reduce((M,ce)=>M+ce.estimatedCost,0),U=H>0?Math.round(A/H*100):0,[L,F]=C.useState(null),[z,ne]=C.useState(null),[K,ie]=C.useState(""),[he,pe]=C.useState(null),[Ne,B]=C.useState("25"),[I,w]=C.useState("Late payment");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-sage-50 border border-sage-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-semibold text-sage-600 uppercase tracking-wide",children:"Operating Cash"}),e.jsx("p",{className:"text-2xl font-bold text-ink-900 mt-1",children:te(O.assets.operating)}),e.jsx("p",{className:"text-xs text-ink-400 mt-1",children:"Acct 1010"})]}),e.jsxs("div",{className:"bg-sage-50 border border-sage-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-semibold text-sage-600 uppercase tracking-wide",children:"Reserve Fund"}),e.jsx("p",{className:"text-2xl font-bold text-ink-900 mt-1",children:te(O.assets.reserves)}),e.jsxs("p",{className:"text-xs text-ink-400 mt-1",children:[U,"% of ",te(H)," goal"]})]}),e.jsxs("div",{className:"bg-mist-50 border border-mist-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-semibold text-ink-500 uppercase tracking-wide",children:"Accounts Receivable"}),e.jsx("p",{className:"text-2xl font-bold text-ink-900 mt-1",children:te(O.assets.totalReceivable)}),e.jsxs("p",{className:"text-xs text-ink-400 mt-1",children:[P.collectionRate,"% collection rate"]})]}),e.jsxs("div",{className:"bg-mist-50 border border-mist-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-semibold text-ink-500 uppercase tracking-wide",children:"Net Income YTD"}),e.jsx("p",{className:`text-2xl font-bold mt-1 ${N.netIncome>=0?"text-sage-700":"text-red-600"}`,children:te(N.netIncome)}),e.jsxs("p",{className:"text-xs text-ink-400 mt-1",children:["Income ",te(N.totalIncome),"  Exp ",te(N.totalExpenses)]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-sage-50 border border-sage-200 rounded-xl p-5 cursor-pointer hover:shadow-md transition-all",onClick:()=>p("budget"),children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900 mb-3",children:"Budget Burn Rate"}),e.jsxs("div",{className:"bg-white rounded-lg p-3 mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-ink-500",children:"Spent"}),e.jsxs("span",{className:"font-semibold",children:[te(j)," / ",te(y)]})]}),e.jsx("div",{className:"bg-ink-100 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full ${q>100?"bg-red-500":q>80?"bg-yellow-500":"bg-sage-500"}`,style:{width:`${Math.min(q,100)}%`}})}),e.jsxs("p",{className:"text-xs text-ink-400 mt-1",children:[q,"% consumed  ",te(y-j)," remaining"]})]}),T.filter(M=>M.pct>75).map(M=>e.jsxs("div",{className:"flex justify-between items-center py-1.5 text-sm border-t border-sage-100",children:[e.jsx("span",{className:"text-ink-700",children:M.name}),e.jsxs("span",{className:`font-semibold ${M.pct>100?"text-red-600":M.pct>80?"text-yellow-600":"text-sage-600"}`,children:[M.pct,"%"]})]},M.id))]}),e.jsxs("div",{className:"bg-mist-50 border border-mist-200 rounded-xl p-5",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900 mb-3",children:"Delinquency Aging"}),e.jsxs("div",{className:"bg-white rounded-lg p-3 space-y-2",children:[[{label:"Current (0-30 days)",data:_.current},{label:"31-60 days",data:_.days30},{label:"61-90 days",data:_.days60},{label:"90+ days",data:_.days90plus}].map(M=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-ink-500",children:M.label}),e.jsxs("span",{className:"font-semibold",children:[M.data.length," units  ",te(M.data.reduce((ce,E)=>ce+E.balance,0))]})]},M.label)),e.jsxs("div",{className:"flex justify-between text-sm border-t border-mist-200 pt-2 font-bold",children:[e.jsx("span",{children:"Total Outstanding"}),e.jsx("span",{className:"text-accent-600",children:te(_.totalOutstanding)})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{tab:"coa",label:"Chart of Accounts",icon:""},{tab:"ledger",label:"General Ledger",icon:""},{tab:"workorders",label:"WO & Invoices",icon:""},{tab:"reports",label:"Financial Reports",icon:""}].map(({tab:M,label:ce,icon:E})=>e.jsxs("button",{onClick:()=>p(M),className:"bg-white border border-ink-100 rounded-xl p-4 text-left hover:shadow-md hover:border-ink-300 transition-all group",children:[e.jsx("span",{className:"text-2xl",children:E}),e.jsx("p",{className:"text-sm font-semibold text-ink-700 mt-2 group-hover:text-accent-600",children:ce})]},M))}),e.jsxs("div",{className:"bg-sage-50 border border-sage-200 rounded-xl p-5",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900 mb-3",children:"Income & Collections"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Monthly Expected"}),e.jsx("p",{className:"text-xl font-bold text-ink-900",children:te(P.monthlyExpected)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Collection Rate"}),e.jsxs("p",{className:"text-xl font-bold text-sage-700",children:[P.collectionRate,"%"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Outstanding"}),e.jsx("p",{className:"text-xl font-bold text-accent-600",children:te(P.totalOutstanding)})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900 mb-3",children:"Unit Ledger"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs text-ink-400 uppercase tracking-wide border-b border-ink-100",children:[e.jsx("th",{className:"py-2 pr-2",children:"Unit"}),e.jsx("th",{className:"py-2 pr-2",children:"Owner"}),e.jsx("th",{className:"py-2 pr-2 text-right",children:"Monthly"}),e.jsx("th",{className:"py-2 pr-2 text-right",children:"Balance"}),e.jsx("th",{className:"py-2 pr-2",children:"Status"}),e.jsx("th",{className:"py-2 pr-2 text-right",children:"Actions"})]})}),e.jsx("tbody",{children:f.map(M=>{const ce=M.lateFees.filter(E=>!E.waived);return e.jsxs("tr",{className:`border-b border-ink-50 hover:bg-mist-50 ${M.balance>0?"bg-red-50":""}`,children:[e.jsx("td",{className:"py-2 pr-2 font-semibold cursor-pointer text-accent-600 hover:text-accent-700",onClick:()=>F(M.number),children:M.number}),e.jsx("td",{className:"py-2 pr-2 text-ink-700",children:M.owner}),e.jsx("td",{className:"py-2 pr-2 text-right",children:te(M.monthlyFee)}),e.jsx("td",{className:`py-2 pr-2 text-right font-semibold ${M.balance>0?"text-red-600":"text-sage-600"}`,children:M.balance>0?te(M.balance):"$0"}),e.jsxs("td",{className:"py-2",children:[e.jsx("span",{className:`pill px-2 py-0.5 rounded ${M.balance>0?"bg-red-100 text-red-700":M.status==="VACANT"?"bg-ink-100 text-ink-500":"bg-sage-100 text-sage-700"}`,children:M.balance>0?"Delinquent":M.status}),ce.length>0&&e.jsxs("span",{className:"ml-1 text-xs text-red-500",children:["+",ce.length," fee",ce.length>1?"s":""]})]}),e.jsx("td",{className:"py-2 pr-2 text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[M.balance>0&&e.jsx("button",{onClick:()=>{ne(M.number),ie(String(M.balance))},className:"px-2 py-0.5 bg-sage-600 text-white rounded text-xs hover:bg-sage-700",children:"Pay"}),e.jsx("button",{onClick:()=>{pe(M.number),B("25"),w("Late payment")},className:"px-2 py-0.5 bg-yellow-500 text-white rounded text-xs hover:bg-yellow-600",children:"Fee"})]})})]},M.number)})})]})})]}),L&&(()=>{const M=f.find(E=>E.number===L);if(!M)return null;const ce=M.lateFees.filter(E=>!E.waived);return e.jsx(Te,{title:`Unit ${M.number}  ${M.owner}`,subtitle:`${te(M.monthlyFee)}/mo  ${M.sqft} sqft  ${M.bedrooms}BR`,onClose:()=>F(null),wide:!0,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-mist-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Balance"}),e.jsx("p",{className:`text-xl font-bold ${M.balance>0?"text-red-600":"text-sage-600"}`,children:M.balance>0?te(M.balance):"$0"})]}),e.jsxs("div",{className:"bg-mist-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Late Fees"}),e.jsx("p",{className:"text-xl font-bold text-yellow-600",children:te(ce.reduce((E,J)=>E+J.amount,0))})]}),e.jsxs("div",{className:"bg-mist-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Paid YTD"}),e.jsx("p",{className:"text-xl font-bold text-sage-600",children:te(M.payments.reduce((E,J)=>E+J.amount,0))})]})]}),e.jsxs("div",{className:"flex gap-2",children:[M.balance>0&&e.jsx("button",{onClick:()=>{F(null),ne(M.number),ie(String(M.balance))},className:"px-4 py-2 bg-sage-600 text-white rounded-lg text-sm font-medium",children:"Record Payment"}),e.jsx("button",{onClick:()=>{F(null),pe(M.number),B("25"),w("Late payment")},className:"px-4 py-2 bg-yellow-500 text-white rounded-lg text-sm font-medium",children:"Impose Late Fee"})]}),ce.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-red-500 font-semibold uppercase mb-2",children:"Outstanding Late Fees"}),ce.map((E,J)=>e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-red-50 border border-red-100 rounded-lg mb-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-ink-700",children:E.date})," ",e.jsx("span",{className:"text-xs text-ink-400 ml-2",children:E.reason})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-red-600",children:te(E.amount)}),e.jsx("button",{onClick:()=>{R(M.number,J)},className:"text-xs text-accent-600 hover:text-accent-700",children:"Waive"})]})]},J))]}),M.payments.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-ink-400 font-semibold uppercase mb-2",children:"Payment History"}),M.payments.sort((E,J)=>J.date.localeCompare(E.date)).slice(0,8).map((E,J)=>e.jsxs("div",{className:"flex items-center justify-between py-1.5 px-3 bg-white border border-ink-50 rounded-lg mb-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-ink-700",children:E.date})," ",e.jsxs("span",{className:"text-xs text-ink-400 ml-2",children:[E.method," ",E.note]})]}),e.jsx("span",{className:"text-sm font-semibold text-sage-600",children:te(E.amount)})]},J))]})]})})})(),z&&e.jsx(Te,{title:`Record Payment  Unit ${z}`,onClose:()=>ne(null),onSave:()=>{const M=parseFloat(K);if(!M||M<=0){alert("Enter a valid amount");return}g(z,M,"check"),ne(null)},saveLabel:"Record Payment",children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Amount *"}),e.jsx("input",{type:"number",step:"0.01",value:K,onChange:M=>ie(M.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]})})}),he&&e.jsx(Te,{title:`Impose Late Fee  Unit ${he}`,onClose:()=>pe(null),onSave:()=>{const M=parseFloat(Ne);if(!M||M<=0){alert("Enter a valid amount");return}v(he,M,I),pe(null)},saveLabel:"Impose Fee",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Fee Amount *"}),e.jsx("input",{type:"number",step:"0.01",value:Ne,onChange:M=>B(M.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Reason"}),e.jsx("input",{value:I,onChange:M=>w(M.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]})]})})]})}const Zb={asset:"bg-sage-100 text-sage-700",liability:"bg-accent-100 text-accent-700",equity:"bg-mist-100 text-mist-700",income:"bg-emerald-100 text-emerald-700",expense:"bg-amber-100 text-amber-700"};function Jb(){const{chartOfAccounts:l,acctStatus:m,acctBalance:i,glByAccount:o,getAcctChildren:u,addCoASection:d,addCoAAccount:x,updateCoAAccount:p,deleteCoAAccount:f}=Xt(),[g,v]=C.useState(null),[R,O]=C.useState(""),[N,P]=C.useState({num:"",name:"",type:"expense",parent:"",sub:"operating"}),_=l.filter(y=>y.sub==="header"),T=(y,j)=>{const q=u(y.num),A=i(y.num),H=o(y.num).length,U=y.sub==="header",L=m[y.num]!==!1;return e.jsxs("div",{children:[e.jsxs("div",{className:`flex items-center justify-between py-2 px-3 rounded-lg hover:bg-mist-50 transition-colors ${L?"":"opacity-40"} ${U?"bg-ink-50":""}`,style:{paddingLeft:`${j*24+12}px`},children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"text-xs text-ink-300 font-mono w-10 shrink-0",children:y.num}),e.jsx("span",{className:`text-sm ${U?"font-bold text-ink-900":"text-ink-700"}`,children:y.name}),e.jsx("span",{className:`pill px-1.5 py-0.5 rounded ${Zb[y.type]||"bg-ink-100 text-ink-500"}`,children:y.type}),!U&&y.sub!=="header"&&e.jsx("span",{className:"text-xs text-ink-300",children:y.sub})]}),e.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[!U&&H>0&&e.jsxs("span",{className:"text-xs text-ink-400",children:[H," entries"]}),!U&&A!==0&&e.jsxs("span",{className:`text-sm font-semibold ${A>=0?"text-ink-900":"text-red-600"}`,children:["$",Math.abs(A).toLocaleString()]}),U&&e.jsx("button",{onClick:()=>{O(y.num),P({...N,parent:y.num}),v("account")},className:"text-xs text-accent-600 hover:text-accent-700 font-medium",children:"+ Add"}),!U&&e.jsx("button",{onClick:()=>{P({num:y.num,name:y.name,type:y.type,parent:y.parent||"",sub:y.sub}),v({type:"edit",num:y.num})},className:"text-xs text-ink-400 hover:text-ink-600",children:"Edit"})]})]}),q.map(F=>T(F,j+1))]},y.num)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-xs text-ink-400",children:[l.length," accounts  Standard HOA numbering"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>v("section"),className:"px-3 py-2 bg-ink-900 text-white rounded-lg hover:bg-ink-800 text-sm font-medium",children:"+ Add Section"}),e.jsx("button",{onClick:()=>v("account"),className:"px-3 py-2 border border-ink-200 text-ink-700 rounded-lg hover:bg-mist-50 text-sm font-medium",children:"+ Add Account"})]})]}),e.jsx("div",{className:"border border-ink-100 rounded-xl divide-y divide-ink-50",children:_.map(y=>T(y,0))}),g==="section"&&e.jsx(Te,{title:"Add Account Section",onClose:()=>v(null),onSave:()=>{if(!N.num||!N.name){alert("Number and name required");return}d(N.num,N.name,N.type),P({num:"",name:"",type:"expense",parent:"",sub:"operating"}),v(null)},children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Account Number *"}),e.jsx("input",{value:N.num,onChange:y=>P({...N,num:y.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg",placeholder:"e.g., 7000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Section Name *"}),e.jsx("input",{value:N.name,onChange:y=>P({...N,name:y.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg",placeholder:"e.g., Special Project Expenses"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Account Type *"}),e.jsx("select",{value:N.type,onChange:y=>P({...N,type:y.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg",children:["asset","liability","equity","income","expense"].map(y=>e.jsx("option",{value:y,children:y.charAt(0).toUpperCase()+y.slice(1)},y))})]})]})}),g==="account"&&e.jsx(Te,{title:"Add Account",onClose:()=>v(null),onSave:()=>{if(!N.num||!N.name||!N.parent){alert("All fields required");return}x(N.num,N.name,N.parent,N.sub),P({num:"",name:"",type:"expense",parent:"",sub:"operating"}),v(null)},children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Account Number *"}),e.jsx("input",{value:N.num,onChange:y=>P({...N,num:y.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg",placeholder:"e.g., 5110"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Account Name *"}),e.jsx("input",{value:N.name,onChange:y=>P({...N,name:y.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg",placeholder:"e.g., Elevator Maintenance"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Parent Section *"}),e.jsxs("select",{value:N.parent,onChange:y=>P({...N,parent:y.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg",children:[e.jsx("option",{value:"",children:"Select parent..."}),_.map(y=>e.jsxs("option",{value:y.num,children:[y.num,"  ",y.name]},y.num))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Subtype"}),e.jsx("select",{value:N.sub,onChange:y=>P({...N,sub:y.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg",children:["bank","receivable","payable","prepaid","deferred","deposit","accrued","fund","retained","assessment","fee","interest","other","operating","reserve"].map(y=>e.jsx("option",{value:y,children:y},y))})]})]})}),g&&typeof g=="object"&&g.type==="edit"&&e.jsx(Te,{title:"Edit Account",onClose:()=>v(null),onSave:()=>{p(g.num,N.name,!0),v(null)},children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Account Name *"}),e.jsx("input",{value:N.name,onChange:y=>P({...N,name:y.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]}),o(g.num).length===0&&e.jsx("button",{onClick:()=>{f(g.num),v(null)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete this account (no entries)"})]})})]})}const ad=20,Kb={case:"bg-accent-100 text-accent-700",expense:"bg-sage-100 text-sage-700",payment:"bg-sage-100 text-sage-700",assessment:"bg-mist-100 text-ink-600",fee:"bg-yellow-100 text-yellow-700",transfer:"bg-mist-100 text-ink-500",manual:"bg-ink-100 text-ink-500"};function Wb(){const{generalLedger:l,glFilter:m,glPage:i,setGlFilter:o,setGlPage:u,getAcctName:d,chartOfAccounts:x,postManualEntry:p,workOrders:f,setActiveTab:g}=Xt(),v=Xs(),[R,O]=C.useState(!1),[N,P]=C.useState({date:new Date().toISOString().split("T")[0],memo:"",debit:"",credit:"",amount:""});let _=[...l];if(m.account&&(_=_.filter(L=>L.debitAcct===m.account||L.creditAcct===m.account)),m.source&&(_=_.filter(L=>L.source===m.source)),m.search){const L=m.search.toLowerCase();_=_.filter(F=>{var z;return F.memo.toLowerCase().includes(L)||F.id.toLowerCase().includes(L)||((z=F.sourceId)==null?void 0:z.toLowerCase().includes(L))})}_.sort((L,F)=>F.date.localeCompare(L.date)||F.id.localeCompare(L.id));const T=_.length,y=Math.ceil(T/ad),j=_.slice(i*ad,(i+1)*ad),q=_.reduce((L,F)=>L+F.amount,0),A=[...new Set(l.map(L=>L.source))].sort(),H=[...new Set([...l.map(L=>L.debitAcct),...l.map(L=>L.creditAcct)])].sort(),U=x.filter(L=>L.sub!=="header");return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1 w-full",children:[e.jsxs("select",{value:m.account,onChange:L=>o({account:L.target.value}),className:"px-3 py-2 border border-ink-200 rounded-lg text-sm flex-1",children:[e.jsx("option",{value:"",children:"All Accounts"}),H.map(L=>e.jsx("option",{value:L,children:d(L)},L))]}),e.jsxs("select",{value:m.source,onChange:L=>o({source:L.target.value}),className:"px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"All Sources"}),A.map(L=>e.jsx("option",{value:L,children:L},L))]}),e.jsx("input",{type:"text",placeholder:"Search memo, ID, or source ref...",value:m.search,onChange:L=>o({search:L.target.value}),className:"px-3 py-2 border border-ink-200 rounded-lg text-sm flex-1"})]}),e.jsx("button",{onClick:()=>O(!0),className:"px-3 py-2 bg-ink-900 text-white rounded-lg hover:bg-ink-800 text-sm font-medium whitespace-nowrap",children:"+ Journal Entry"})]}),e.jsxs("div",{className:"text-xs text-ink-400",children:[T," entries  Total volume: ",te(q),(m.account||m.source||m.search)&&e.jsx("button",{onClick:()=>o({account:"",source:"",search:""}),className:"ml-2 text-accent-600 underline",children:"Clear filters"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs text-ink-400 uppercase tracking-wide border-b border-ink-100",children:[e.jsx("th",{className:"py-2 pr-2 w-16",children:"ID"}),e.jsx("th",{className:"py-2 pr-2 w-24",children:"Date"}),e.jsx("th",{className:"py-2 pr-2",children:"Memo"}),e.jsx("th",{className:"py-2 pr-2 w-28",children:"Debit"}),e.jsx("th",{className:"py-2 pr-2 w-28",children:"Credit"}),e.jsx("th",{className:"py-2 pr-2 w-24 text-right",children:"Amount"}),e.jsx("th",{className:"py-2 w-24",children:"Source"})]})}),e.jsx("tbody",{children:j.map(L=>{const F=L.sourceId?f.find(z=>z.id===L.sourceId||z.glEntryId===L.id):null;return e.jsxs("tr",{className:"border-b border-ink-50 hover:bg-mist-50",children:[e.jsx("td",{className:"py-2 pr-2 text-xs text-ink-300 font-mono",children:L.id}),e.jsx("td",{className:"py-2 pr-2 text-ink-500",children:L.date}),e.jsx("td",{className:"py-2 pr-2 text-ink-800",children:L.memo}),e.jsxs("td",{className:"py-2 pr-2 text-xs",children:[e.jsx("span",{className:"bg-sage-50 text-sage-700 px-1.5 py-0.5 rounded font-mono cursor-pointer hover:bg-sage-100",onClick:()=>o({account:L.debitAcct}),title:d(L.debitAcct),children:L.debitAcct}),e.jsx("span",{className:"text-[10px] text-ink-300 ml-1 hidden sm:inline",children:d(L.debitAcct).split("  ").pop()})]}),e.jsxs("td",{className:"py-2 pr-2 text-xs",children:[e.jsx("span",{className:"bg-accent-50 text-accent-700 px-1.5 py-0.5 rounded font-mono cursor-pointer hover:bg-accent-100",onClick:()=>o({account:L.creditAcct}),title:d(L.creditAcct),children:L.creditAcct}),e.jsx("span",{className:"text-[10px] text-ink-300 ml-1 hidden sm:inline",children:d(L.creditAcct).split("  ").pop()})]}),e.jsx("td",{className:"py-2 pr-2 text-right font-semibold",children:te(L.amount)}),e.jsx("td",{className:"py-2",children:e.jsxs("span",{className:`pill px-1.5 py-0.5 rounded text-xs font-semibold ${Kb[L.source]||"bg-ink-100 text-ink-500"} ${L.source!=="manual"&&L.source!=="transfer"?"cursor-pointer hover:opacity-80":""}`,onClick:()=>{L.source==="case"?v("/issues"):L.source==="expense"||F&&F.glEntryId?g("workorders"):L.source==="payment"||L.source==="fee"||L.source},children:[L.source,L.sourceId&&e.jsx("span",{className:"ml-0.5 text-[10px] opacity-70",children:L.sourceId}),F&&e.jsx("span",{className:"ml-0.5",children:""}),(L.source==="case"||L.source==="payment"||L.source==="fee")&&!F&&e.jsx("span",{className:"ml-0.5",children:""})]})})]},L.id)})})]})}),y>1&&e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("button",{onClick:()=>u(Math.max(0,i-1)),disabled:i===0,className:`px-3 py-1.5 border border-ink-200 rounded-lg text-sm ${i===0?"opacity-40":"hover:bg-mist-50"}`,children:" Prev"}),e.jsxs("span",{className:"text-sm text-ink-400",children:["Page ",i+1," of ",y]}),e.jsx("button",{onClick:()=>u(Math.min(y-1,i+1)),disabled:i>=y-1,className:`px-3 py-1.5 border border-ink-200 rounded-lg text-sm ${i>=y-1?"opacity-40":"hover:bg-mist-50"}`,children:"Next "})]}),R&&e.jsx(Te,{title:"Manual Journal Entry",subtitle:"Double-entry: must have equal debit and credit",onClose:()=>O(!1),onSave:()=>{const L=parseFloat(N.amount);if(!N.date||!N.memo||!N.debit||!N.credit||!L||L<=0){alert("All fields required");return}p(N.date,N.memo,N.debit,N.credit,L),O(!1),P({date:new Date().toISOString().split("T")[0],memo:"",debit:"",credit:"",amount:""})},saveLabel:"Post Entry",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Date *"}),e.jsx("input",{type:"date",value:N.date,onChange:L=>P({...N,date:L.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Amount *"}),e.jsx("input",{type:"number",step:"0.01",value:N.amount,onChange:L=>P({...N,amount:L.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg",placeholder:"0.00"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Memo *"}),e.jsx("input",{value:N.memo,onChange:L=>P({...N,memo:L.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg",placeholder:"Description of transaction"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-sage-700 mb-1",children:"Debit Account *"}),e.jsxs("select",{value:N.debit,onChange:L=>P({...N,debit:L.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Select..."}),U.map(L=>e.jsxs("option",{value:L.num,children:[L.num,"  ",L.name]},L.num))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-accent-700 mb-1",children:"Credit Account *"}),e.jsxs("select",{value:N.credit,onChange:L=>P({...N,credit:L.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Select..."}),U.map(L=>e.jsxs("option",{value:L.num,children:[L.num,"  ",L.name]},L.num))]})]})]})]})})]})}const ev={draft:"bg-ink-100 text-ink-500",approved:"bg-yellow-100 text-yellow-700",invoiced:"bg-accent-100 text-accent-700",paid:"bg-sage-100 text-sage-700"};function tv(){const{workOrders:l,unitInvoices:m,createWorkOrder:i,approveWorkOrder:o,receiveInvoice:u,payWorkOrder:d,payUnitInvoice:x,getAcctName:p,chartOfAccounts:f,generalLedger:g,budgetCategories:v,setActiveTab:R}=Xt(),[O,N]=C.useState(!1),[P,_]=C.useState(null),[T,y]=C.useState("workOrders"),[j,q]=C.useState({title:"",vendor:"",amount:"",acctNum:"5010",caseId:""}),[A,H]=C.useState({invoiceNum:"",amount:""}),U=f.filter(z=>z.sub!=="header"&&(z.type==="expense"||z.type==="asset")),L=z=>l.filter(ne=>ne.status===z),F=[{key:"draft",label:"Draft",count:L("draft").length},{key:"approved",label:"Approved",count:L("approved").length},{key:"invoiced",label:"Invoiced",count:L("invoiced").length},{key:"paid",label:"Paid",count:L("paid").length}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-1 bg-mist-50 rounded-lg p-1 w-fit",children:[e.jsxs("button",{onClick:()=>y("workOrders"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${T==="workOrders"?"bg-white shadow-sm text-ink-900":"text-ink-500 hover:text-ink-700"}`,children:["Work Orders (",l.length,")"]}),e.jsxs("button",{onClick:()=>y("unitInvoices"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${T==="unitInvoices"?"bg-white shadow-sm text-ink-900":"text-ink-500 hover:text-ink-700"}`,children:["Unit Invoices (",m.length,")"]})]}),T==="workOrders"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"grid grid-cols-4 gap-3 flex-1",children:F.map(z=>e.jsxs("div",{className:`rounded-xl p-3 border ${z.key==="paid"?"bg-sage-50 border-sage-200":"bg-white border-ink-100"}`,children:[e.jsx("p",{className:"text-xs font-semibold text-ink-400 uppercase tracking-wide",children:z.label}),e.jsx("p",{className:"text-2xl font-bold text-ink-900 mt-1",children:z.count})]},z.key))}),e.jsx("button",{onClick:()=>{q({title:"",vendor:"",amount:"",acctNum:"5010",caseId:""}),N(!0)},className:"ml-4 px-4 py-2 bg-ink-900 text-white rounded-lg hover:bg-ink-800 text-sm font-medium",children:"+ Create Work Order"})]}),e.jsx("div",{className:"space-y-2",children:l.map(z=>{var ne;return e.jsxs("div",{className:"bg-white border border-ink-100 rounded-xl p-4 hover:shadow-sm transition-all",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("span",{className:`pill px-2 py-0.5 rounded-full ${ev[z.status]}`,children:z.status}),e.jsx("span",{className:"text-xs text-ink-300 font-mono",children:z.id}),e.jsx("span",{className:"font-semibold text-ink-900 truncate",children:z.title})]})}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-ink-500",children:[z.vendor,z.caseId&&e.jsxs("span",{className:"text-accent-600 ml-2",children:[" ",z.caseId]}),z.invoiceNum&&e.jsxs("span",{className:"ml-2",children:[" Inv: ",z.invoiceNum]})]}),e.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[e.jsx("span",{className:"text-xs text-ink-300 font-mono",children:p(z.acctNum).split("  ")[0]}),e.jsx("span",{className:"font-bold text-ink-900",children:te(z.amount)}),z.status==="draft"&&e.jsx("button",{onClick:()=>o(z.id),className:"px-3 py-1 bg-yellow-500 text-white rounded text-xs font-medium hover:bg-yellow-600",children:"Approve"}),z.status==="approved"&&e.jsx("button",{onClick:()=>{_(z.id),H({invoiceNum:"",amount:String(z.amount)})},className:"px-3 py-1 bg-accent-600 text-white rounded text-xs font-medium hover:bg-accent-700",children:"Receive Invoice"}),z.status==="invoiced"&&e.jsx("button",{onClick:()=>d(z.id),className:"px-3 py-1 bg-sage-600 text-white rounded text-xs font-medium hover:bg-sage-700",children:"Pay  GL"}),z.glEntryId&&e.jsxs("span",{className:"text-xs text-sage-600 font-mono cursor-pointer hover:text-sage-800",onClick:()=>R("ledger"),title:"View in General Ledger",children:[z.glEntryId," "]})]})]}),e.jsxs("div",{className:"mt-1.5 flex flex-wrap gap-2 text-[10px]",children:[e.jsxs("span",{className:"text-ink-400",children:["GL: ",e.jsxs("span",{className:"font-mono text-ink-500",children:[z.acctNum," ",p(z.acctNum).split("  ").pop()]})]}),(()=>{const K=f.find(he=>he.num===z.acctNum),ie=K!=null&&K.budgetCat?v.find(he=>he.id===K.budgetCat):null;return ie?e.jsxs("span",{className:"text-accent-500",children:["Budget: ",ie.name]}):null})(),z.glEntryId&&e.jsxs("span",{className:"text-sage-500",children:["Posted ",((ne=g.find(K=>K.id===z.glEntryId))==null?void 0:ne.date)||""]})]})]},z.id)})})]}),T==="unitInvoices"&&e.jsx("div",{className:"space-y-2",children:m.length===0?e.jsx("div",{className:"bg-mist-50 rounded-xl p-8 text-center border border-mist-200",children:e.jsx("p",{className:"text-ink-400 text-sm",children:"No unit invoices yet. Invoices are created when fees or special assessments are applied to units."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{label:"Total",count:m.length},{label:"Sent",count:m.filter(z=>z.status==="sent").length},{label:"Paid",count:m.filter(z=>z.status==="paid").length},{label:"Outstanding",count:m.filter(z=>z.status!=="paid"&&z.status!=="void").length}].map(z=>e.jsxs("div",{className:"bg-white rounded-xl p-3 border border-ink-100",children:[e.jsx("p",{className:"text-xs font-semibold text-ink-400 uppercase",children:z.label}),e.jsx("p",{className:"text-2xl font-bold text-ink-900 mt-1",children:z.count})]},z.label))}),m.map(z=>e.jsxs("div",{className:`bg-white border rounded-xl p-4 ${z.status==="paid"?"border-sage-200":"border-ink-100"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`pill px-2 py-0.5 rounded-full text-xs font-semibold ${z.status==="paid"?"bg-sage-100 text-sage-700":z.status==="overdue"?"bg-red-100 text-red-700":"bg-accent-100 text-accent-700"}`,children:z.status}),e.jsx("span",{className:"text-xs text-ink-300 font-mono",children:z.id}),e.jsxs("span",{className:"font-semibold text-ink-900",children:["Unit ",z.unitNumber]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-bold text-ink-900",children:te(z.amount)}),z.status==="sent"&&e.jsx("button",{onClick:()=>x(z.id,"stripe"),className:"px-3 py-1 bg-sage-600 text-white rounded text-xs font-medium hover:bg-sage-700",children:"Mark Paid"}),z.glEntryId&&e.jsx("span",{className:"text-xs text-sage-600 font-mono",children:z.glEntryId})]})]}),e.jsx("p",{className:"text-sm text-ink-500 mt-1",children:z.description}),e.jsxs("div",{className:"mt-1 flex gap-3 text-[10px] text-ink-400",children:[e.jsxs("span",{children:["Created: ",z.createdDate]}),e.jsxs("span",{children:["Due: ",z.dueDate]}),z.paidDate&&e.jsxs("span",{className:"text-sage-600",children:["Paid: ",z.paidDate," via ",z.paymentMethod]})]})]},z.id))]})}),O&&e.jsx(Te,{title:"Create Work Order",onClose:()=>N(!1),onSave:()=>{if(!j.title||!j.vendor){alert("Title and vendor required");return}i({title:j.title,vendor:j.vendor,amount:parseFloat(j.amount)||0,acctNum:j.acctNum,caseId:j.caseId||void 0}),N(!1)},saveLabel:"Create",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Title *"}),e.jsx("input",{value:j.title,onChange:z=>q({...j,title:z.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"Elevator repair"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Vendor *"}),e.jsx("input",{value:j.vendor,onChange:z=>q({...j,vendor:z.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Est. Amount"}),e.jsx("input",{type:"number",value:j.amount,onChange:z=>q({...j,amount:z.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"GL Account"}),e.jsx("select",{value:j.acctNum,onChange:z=>q({...j,acctNum:z.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:U.map(z=>e.jsxs("option",{value:z.num,children:[z.num,"  ",z.name]},z.num))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Case ID (optional)"}),e.jsx("input",{value:j.caseId,onChange:z=>q({...j,caseId:z.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"c1"})]})]})}),P&&e.jsx(Te,{title:"Receive Invoice",onClose:()=>_(null),onSave:()=>{if(!A.invoiceNum){alert("Invoice number required");return}u(P,A.invoiceNum,parseFloat(A.amount)||0),_(null)},saveLabel:"Record Invoice",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Invoice Number *"}),e.jsx("input",{value:A.invoiceNum,onChange:z=>H({...A,invoiceNum:z.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"INV-2026-001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Invoice Amount"}),e.jsx("input",{type:"number",value:A.amount,onChange:z=>H({...A,amount:z.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]})]})})]})}function sv(){const l=Xt(),{getBudgetVariance:m,budgetCategories:i,addBudgetCategory:o,updateBudgetCategory:u,deleteBudgetCategory:d,getCategorySpent:x,addExpense:p,deleteExpense:f,getOperatingBudget:g,annualReserveContribution:v,setAnnualReserveContribution:R}=l,[O,N]=C.useState(!1),[P,_]=C.useState({name:"",budgeted:""}),[T,y]=C.useState(null),[j,q]=C.useState(!1),[A,H]=C.useState({description:"",amount:"",date:new Date().toISOString().split("T")[0],vendor:"",invoice:""}),[U,L]=C.useState(null),[F,z]=C.useState({name:"",budgeted:""}),[ne,K]=C.useState(!1),[ie,he]=C.useState(String(v)),pe=m(),Ne=pe.reduce((Q,xe)=>Q+xe.actual,0),B=g(),I=B.operatingBudget>0?Math.round(B.totalAllocated/B.operatingBudget*100):0,w=B.operatingBudget>0?Math.round(Ne/B.operatingBudget*100):0,M=T?i.find(Q=>Q.id===T):null,ce=()=>{const Q=parseFloat(P.budgeted);if(!P.name||!Q||Q<=0){alert("Fill all fields");return}B.totalAllocated+Q>B.operatingBudget&&!confirm(`Adding ${te(Q)} will exceed operating budget by ${te(B.totalAllocated+Q-B.operatingBudget)}.

Proceed anyway?`)||(o(P.name,Q),_({name:"",budgeted:""}),N(!1))},E=()=>{if(!U)return;const Q=parseFloat(F.budgeted);if(!F.name||!Q||Q<=0){alert("Fill all fields");return}const xe=i.find(b=>b.id===U),Se=B.totalAllocated-((xe==null?void 0:xe.budgeted)||0)+Q;Se>B.operatingBudget&&!confirm(`This change will exceed operating budget by ${te(Se-B.operatingBudget)}.

Proceed anyway?`)||(u(U,{name:F.name,budgeted:Q}),L(null))},J=(Q,xe)=>{confirm(`Delete category "${xe}" and all its expense records?`)&&d(Q)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border-2 border-ink-200 rounded-xl p-5",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900 mb-4",children:"FY 2026 Budget Allocation"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 mb-5",children:[e.jsxs("div",{className:"bg-sage-50 border border-sage-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-[10px] font-semibold text-sage-600 uppercase tracking-wider",children:"Annual Revenue"}),e.jsx("p",{className:"text-xl font-bold text-ink-900 mt-1",children:te(B.annualRevenue)}),e.jsxs("p",{className:"text-[10px] text-ink-400 mt-1",children:[l.units.length," units  12 months"]})]}),e.jsxs("div",{className:"bg-accent-50 border border-accent-200 rounded-xl p-4 cursor-pointer hover:shadow-sm",onClick:()=>{he(String(v)),K(!0)},children:[e.jsx("p",{className:"text-[10px] font-semibold text-accent-600 uppercase tracking-wider",children:"Reserve Contribution"}),e.jsxs("p",{className:"text-xl font-bold text-accent-700 mt-1",children:[" ",te(B.reserveContribution)]}),e.jsx("p",{className:"text-[10px] text-ink-400 mt-1",children:"Click to edit "})]}),e.jsxs("div",{className:"bg-mist-50 border border-mist-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-[10px] font-semibold text-ink-500 uppercase tracking-wider",children:"Operating Budget"}),e.jsx("p",{className:"text-xl font-bold text-ink-900 mt-1",children:te(B.operatingBudget)}),e.jsx("p",{className:"text-[10px] text-ink-400 mt-1",children:"Revenue  Reserves"})]}),e.jsxs("div",{className:`rounded-xl p-4 border ${B.overAllocated?"bg-red-50 border-red-300":B.unallocated===0?"bg-sage-50 border-sage-200":"bg-amber-50 border-amber-200"}`,children:[e.jsx("p",{className:`text-[10px] font-semibold uppercase tracking-wider ${B.overAllocated?"text-red-600":B.unallocated===0?"text-sage-600":"text-amber-600"}`,children:B.overAllocated?"Over-Allocated":"Unallocated"}),e.jsx("p",{className:`text-xl font-bold mt-1 ${B.overAllocated?"text-red-700":B.unallocated===0?"text-sage-700":"text-amber-700"}`,children:B.overAllocated?`(${te(Math.abs(B.unallocated))})`:te(B.unallocated)}),e.jsxs("p",{className:"text-[10px] text-ink-400 mt-1",children:[te(B.totalAllocated)," allocated of ",te(B.operatingBudget)]})]})]}),e.jsxs("div",{className:"bg-ink-100 rounded-full h-4 relative overflow-hidden",children:[e.jsx("div",{className:`h-4 rounded-l-full transition-all ${w>100?"bg-red-500":"bg-sage-500"}`,style:{width:`${Math.min(w,100)}%`}}),I>w&&e.jsx("div",{className:"h-4 transition-all bg-sage-200 absolute top-0",style:{left:`${Math.min(w,100)}%`,width:`${Math.min(I-w,100-Math.min(w,100))}%`}}),I>100&&e.jsx("div",{className:"absolute right-0 top-0 h-4 w-1 bg-red-600"})]}),e.jsxs("div",{className:"flex justify-between text-[10px] text-ink-400 mt-1.5",children:[e.jsxs("span",{children:[" Spent: ",te(Ne)," (",w,"%)"]}),e.jsxs("span",{children:[" Allocated: ",te(B.totalAllocated)," (",I,"%)"]}),e.jsxs("span",{children:["Operating budget: ",te(B.operatingBudget)]})]}),B.overAllocated&&e.jsxs("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-lg p-3 flex items-start gap-2",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold text-red-800",children:["Budget categories exceed operating budget by ",te(Math.abs(B.unallocated))]}),e.jsx("p",{className:"text-xs text-red-600 mt-0.5",children:"Reduce category budgets or increase revenue/decrease reserve contributions to balance."})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-display text-lg font-bold text-ink-900",children:["Budget Categories (",i.length,")"]}),e.jsx("button",{onClick:()=>N(!0),className:"px-4 py-2 bg-ink-900 text-white rounded-lg hover:bg-ink-800 text-sm font-medium",children:"+ Add Category"})]}),e.jsx("div",{className:"space-y-3",children:pe.map(Q=>{const xe=Q.pct>100?"red":Q.pct>80?"yellow":"sage",Se=Q.pct>100?"Over Budget":Q.pct>80?"High Spend":"On Track",b=B.operatingBudget>0?Math.round(Q.budgeted/B.operatingBudget*100):0;return e.jsxs("div",{className:"bg-white border border-ink-100 rounded-xl p-4 hover:shadow-sm transition-all",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("h4",{className:"font-semibold text-ink-900",children:Q.name}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium bg-${xe}-100 text-${xe}-700`,children:Se}),e.jsxs("span",{className:"text-[10px] text-ink-300 bg-ink-50 px-1.5 py-0.5 rounded",children:[b,"% of operating budget"]}),Q.acctNum&&e.jsx("span",{className:"text-xs text-ink-300 font-mono",children:Q.acctNum})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{L(Q.id),z({name:Q.name,budgeted:String(Q.budgeted)})},className:"text-xs text-ink-400 hover:text-ink-600",children:" Edit"}),e.jsx("button",{onClick:()=>y(Q.id),className:"text-sm text-accent-600 font-medium hover:text-accent-700",children:"View Expenses "}),e.jsx("button",{onClick:()=>J(Q.id,Q.name),className:"text-xs text-red-400 hover:text-red-600",children:""})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm mb-2",children:[e.jsxs("span",{className:"text-ink-500",children:["Budget: ",e.jsx("span",{className:"font-semibold",children:te(Q.budgeted)})]}),e.jsxs("span",{className:"text-ink-500",children:["Actual: ",e.jsx("span",{className:"font-semibold",children:te(Q.actual)})]}),e.jsxs("span",{className:`font-semibold ${Q.variance>=0?"text-sage-600":"text-red-600"}`,children:[Q.variance>=0?"+":"",te(Q.variance)," variance"]})]}),e.jsx("div",{className:"bg-ink-100 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full bg-${xe}-500 transition-all`,style:{width:`${Math.min(Q.pct,100)}%`}})})]},Q.id)})}),O&&e.jsx(Te,{title:"Add Budget Category",onClose:()=>N(!1),onSave:ce,saveLabel:"Add Category",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-mist-50 rounded-lg p-3 text-xs text-ink-500",children:e.jsxs("p",{children:["Operating budget: ",e.jsx("strong",{children:te(B.operatingBudget)}),"  Allocated: ",e.jsx("strong",{children:te(B.totalAllocated)}),"  Available: ",e.jsx("strong",{className:B.unallocated<=0?"text-red-600":"text-sage-600",children:te(Math.max(0,B.unallocated))})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-2",children:"Category Name *"}),e.jsx("input",{value:P.name,onChange:Q=>_({...P,name:Q.target.value}),className:"w-full px-3 py-2 border-2 border-ink-200 rounded-lg",placeholder:"e.g., Security Services"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-2",children:"Annual Budget *"}),e.jsx("input",{type:"number",value:P.budgeted,onChange:Q=>_({...P,budgeted:Q.target.value}),className:"w-full px-3 py-2 border-2 border-ink-200 rounded-lg",placeholder:String(Math.max(0,B.unallocated))}),P.budgeted&&parseFloat(P.budgeted)>Math.max(0,B.unallocated)&&e.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" This would exceed available budget by ",te(parseFloat(P.budgeted)-Math.max(0,B.unallocated))]})]})]})}),U&&e.jsx(Te,{title:"Edit Budget Category",onClose:()=>L(null),onSave:E,saveLabel:"Save Changes",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-mist-50 rounded-lg p-3 text-xs text-ink-500",children:e.jsxs("p",{children:["Operating budget: ",e.jsx("strong",{children:te(B.operatingBudget)}),"  Currently allocated: ",e.jsx("strong",{children:te(B.totalAllocated)})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-2",children:"Category Name *"}),e.jsx("input",{value:F.name,onChange:Q=>z({...F,name:Q.target.value}),className:"w-full px-3 py-2 border-2 border-ink-200 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-2",children:"Annual Budget *"}),e.jsx("input",{type:"number",value:F.budgeted,onChange:Q=>z({...F,budgeted:Q.target.value}),className:"w-full px-3 py-2 border-2 border-ink-200 rounded-lg"}),(()=>{const Q=i.find(b=>b.id===U),xe=parseFloat(F.budgeted)||0,Se=B.totalAllocated-((Q==null?void 0:Q.budgeted)||0)+xe;return Se>B.operatingBudget?e.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" Total allocation would exceed operating budget by ",te(Se-B.operatingBudget)]}):null})()]})]})}),ne&&e.jsx(Te,{title:"Annual Reserve Contribution",onClose:()=>K(!1),onSave:()=>{const Q=parseFloat(ie);if(isNaN(Q)||Q<0){alert("Enter a valid amount");return}R(Q),K(!1)},saveLabel:"Update",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-accent-50 rounded-lg p-3 text-xs text-accent-700",children:[e.jsx("p",{children:"This is the annual amount contributed from assessment revenue into reserve funds. It reduces the operating budget available for expense categories."}),e.jsxs("p",{className:"mt-2",children:["Recommended annual reserve: ",e.jsx("strong",{children:te(l.calculateRecommendedAnnualReserve())})," (based on reserve study)"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-2",children:"Annual Reserve Contribution *"}),e.jsx("input",{type:"number",value:ie,onChange:Q=>he(Q.target.value),className:"w-full px-3 py-2 border-2 border-ink-200 rounded-lg"}),(()=>{const Q=parseFloat(ie)||0,xe=B.annualRevenue-Q;return B.totalAllocated>xe?e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[" This would reduce operating budget to ",te(xe),", which is less than current allocations of ",te(B.totalAllocated)]}):e.jsxs("p",{className:"text-xs text-ink-400 mt-1",children:["Operating budget would be ",te(xe)," (",te(xe-B.totalAllocated)," unallocated)"]})})()]})]})}),M&&e.jsx(Te,{title:M.name,subtitle:`Budget: ${te(M.budgeted)}  Spent: ${te(x(M))}`,onClose:()=>{y(null),q(!1)},wide:!0,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-accent-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-ink-500",children:"Spent"}),e.jsx("p",{className:"text-2xl font-bold text-ink-900",children:te(x(M))})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-ink-500",children:"Remaining"}),e.jsx("p",{className:`text-2xl font-bold ${M.budgeted-x(M)>=0?"text-sage-600":"text-red-600"}`,children:te(M.budgeted-x(M))})]})]}),e.jsx("div",{className:"bg-ink-100 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full ${Math.round(x(M)/M.budgeted*100)>100?"bg-red-500":"bg-sage-500"}`,style:{width:`${Math.min(Math.round(x(M)/M.budgeted*100),100)}%`}})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"font-display text-lg font-bold text-ink-900",children:["Expenses (",M.expenses.length,")"]}),e.jsx("button",{onClick:()=>q(!0),className:"px-4 py-2 bg-sage-600 text-white rounded-lg hover:bg-sage-700 font-medium text-sm",children:"+ Add Expense"})]}),j&&e.jsxs("div",{className:"bg-mist-50 rounded-lg p-4 space-y-3 border border-mist-200",children:[e.jsx("div",{children:e.jsx("input",{value:A.description,onChange:Q=>H({...A,description:Q.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"Description"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"number",step:"0.01",value:A.amount,onChange:Q=>H({...A,amount:Q.target.value}),className:"px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"Amount"}),e.jsx("input",{type:"date",value:A.date,onChange:Q=>H({...A,date:Q.target.value}),className:"px-3 py-2 border border-ink-200 rounded-lg text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{value:A.vendor,onChange:Q=>H({...A,vendor:Q.target.value}),className:"px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"Vendor"}),e.jsx("input",{value:A.invoice,onChange:Q=>H({...A,invoice:Q.target.value}),className:"px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"Invoice #"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{const Q=parseFloat(A.amount);if(!A.description||!Q||!A.vendor||!A.invoice){alert("All fields required");return}p(M.id,{description:A.description,amount:Q,date:A.date,vendor:A.vendor,invoice:A.invoice}),H({description:"",amount:"",date:new Date().toISOString().split("T")[0],vendor:"",invoice:""}),q(!1)},className:"px-4 py-2 bg-sage-600 text-white rounded-lg text-sm font-medium",children:"Add"}),e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 text-ink-500 text-sm",children:"Cancel"})]})]}),M.expenses.length===0?e.jsx("div",{className:"text-center py-12 bg-mist-50 rounded-lg",children:e.jsx("p",{className:"text-ink-400",children:"No expenses yet"})}):e.jsx("div",{className:"space-y-2",children:M.expenses.map(Q=>e.jsx("div",{className:"bg-white border border-ink-100 rounded-lg p-4 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("span",{className:"text-sm text-ink-400",children:Q.date}),e.jsx("span",{className:"px-2 py-1 bg-accent-100 text-accent-700 text-xs rounded",children:Q.invoice})]}),e.jsx("h4",{className:"font-bold text-ink-900 mb-1",children:Q.description}),e.jsxs("p",{className:"text-sm text-ink-500",children:["Vendor: ",Q.vendor]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-ink-900",children:te(Q.amount)}),e.jsx("button",{onClick:()=>{confirm("Delete this expense?")&&f(M.id,Q.id)},className:"mt-2 text-xs text-red-600 hover:text-red-800",children:"Delete"})]})]})},Q.id))})]})})]})}function nv(){const{getReserveFundingStatus:l,calculateRecommendedAnnualReserve:m,chartOfAccounts:i,addReserveItem:o,updateReserveItem:u,deleteReserveItem:d}=Xt(),[x,p]=C.useState(null),[f,g]=C.useState(!1),[v,R]=C.useState({name:"",estimatedCost:"",currentFunding:"",usefulLife:"",lastReplaced:"",yearsRemaining:"",isContingency:!1}),O=l(),N=O.reduce((q,A)=>q+A.currentFunding,0),P=O.reduce((q,A)=>q+A.estimatedCost,0),_=P>0?Math.round(N/P*100):0,T=m(),j=O.filter(q=>!q.isContingency).filter(q=>q.yearsRemaining<3).sort((q,A)=>q.yearsRemaining-A.yearsRemaining);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-sage-50 border border-sage-200 rounded-xl p-5",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:"Reserve Fund Status"}),e.jsxs("p",{className:"text-sm text-ink-400",children:["Total: ",te(N)," of ",te(P),"  ",_,"% funded"]})]}),e.jsx("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-ink-900 text-white rounded-lg hover:bg-ink-800 text-sm font-medium",children:"+ Add Item"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("div",{className:"bg-ink-100 rounded-full h-4 mb-2",children:e.jsx("div",{className:"bg-sage-500 h-4 rounded-full",style:{width:`${_}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-ink-500",children:[_,"% funded"]}),e.jsxs("span",{className:"font-semibold text-ink-700",children:["Gap: ",te(P-N)]})]})]})]}),e.jsxs("div",{className:"bg-mist-50 border border-mist-200 rounded-xl p-5",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900 mb-2",children:"Recommended Annual Contribution"}),e.jsx("p",{className:"text-3xl font-bold text-ink-900",children:te(T)}),e.jsxs("p",{className:"text-sm text-ink-400 mt-1",children:[te(T/12),"/month  Based on remaining useful life and funding gaps"]})]}),j.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-red-800 mb-3",children:" Approaching Replacement"}),e.jsx("div",{className:"space-y-2",children:j.map(q=>e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 border border-red-100",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-ink-900",children:q.name}),e.jsxs("p",{className:"text-xs text-ink-400",children:[q.yearsRemaining," years remaining  Last: ",q.lastReplaced]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-red-700",children:[te(q.gap)," gap"]}),e.jsxs("p",{className:"text-xs text-ink-400",children:["Need ",te(q.annualNeeded),"/yr"]})]})]},q.id))})]}),e.jsx("div",{className:"space-y-3",children:O.map(q=>{const A=i.find(H=>H.reserveItem===q.id);return e.jsxs("div",{className:"bg-white border border-ink-100 rounded-xl p-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-ink-900",children:[q.name," ",q.isContingency&&e.jsx("span",{className:"pill px-2 py-0.5 rounded bg-yellow-100 text-yellow-700 ml-2",children:"Contingency"})]}),e.jsxs("p",{className:"text-xs text-ink-400",children:[A?A.num+"  ":"","Life: ",q.usefulLife,"yr  Last: ",q.lastReplaced,q.isContingency?"":"  "+q.yearsRemaining+"yr remaining"]})]}),e.jsx("button",{onClick:()=>{R({name:q.name,estimatedCost:String(q.estimatedCost),currentFunding:String(q.currentFunding),usefulLife:String(q.usefulLife),lastReplaced:q.lastReplaced,yearsRemaining:String(q.yearsRemaining),isContingency:q.isContingency}),p(q.id)},className:"px-3 py-1.5 border border-ink-200 text-ink-700 rounded-lg hover:bg-mist-50 text-xs font-medium",children:"Edit"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm mb-2",children:[e.jsxs("span",{className:"text-ink-500",children:["Funded: ",te(q.currentFunding)]}),e.jsxs("span",{className:"text-ink-500",children:["Needed: ",te(q.estimatedCost)]}),e.jsxs("span",{className:`font-semibold ${q.pct>=100?"text-sage-600":"text-accent-600"}`,children:[q.pct,"%"]})]}),e.jsx("div",{className:"bg-ink-100 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${q.pct>=75?"bg-sage-500":q.pct>=50?"bg-yellow-500":"bg-accent-500"}`,style:{width:`${Math.min(q.pct,100)}%`}})})]},q.id)})}),(f||x)&&e.jsx(Te,{title:x?"Edit Reserve Item":"Add Reserve Item",onClose:()=>{g(!1),p(null)},onSave:()=>{const q={name:v.name,estimatedCost:parseFloat(v.estimatedCost)||0,currentFunding:parseFloat(v.currentFunding)||0,usefulLife:parseFloat(v.usefulLife)||0,lastReplaced:v.lastReplaced,yearsRemaining:parseFloat(v.yearsRemaining)||0,isContingency:v.isContingency};if(!q.name){alert("Name required");return}x?u(x,q):o(q),g(!1),p(null),R({name:"",estimatedCost:"",currentFunding:"",usefulLife:"",lastReplaced:"",yearsRemaining:"",isContingency:!1})},saveLabel:x?"Save":"Add Item",footer:x?e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("button",{onClick:()=>{d(x),p(null)},className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg font-medium text-sm",children:"Delete"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{p(null)},className:"px-4 py-2 text-ink-700 font-medium",children:"Cancel"}),e.jsx("button",{onClick:()=>{u(x,{name:v.name,estimatedCost:parseFloat(v.estimatedCost)||0,currentFunding:parseFloat(v.currentFunding)||0,usefulLife:parseFloat(v.usefulLife)||0,lastReplaced:v.lastReplaced,yearsRemaining:parseFloat(v.yearsRemaining)||0,isContingency:v.isContingency}),p(null)},className:"px-6 py-2 bg-ink-900 text-white rounded-lg hover:bg-ink-800 font-medium",children:"Save"})]})]}):void 0,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Item Name *"}),e.jsx("input",{value:v.name,onChange:q=>R({...v,name:q.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Estimated Cost"}),e.jsx("input",{type:"number",value:v.estimatedCost,onChange:q=>R({...v,estimatedCost:q.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Current Funding"}),e.jsx("input",{type:"number",value:v.currentFunding,onChange:q=>R({...v,currentFunding:q.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Useful Life (yrs)"}),e.jsx("input",{type:"number",value:v.usefulLife,onChange:q=>R({...v,usefulLife:q.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Last Replaced"}),e.jsx("input",{value:v.lastReplaced,onChange:q=>R({...v,lastReplaced:q.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Years Remaining"}),e.jsx("input",{type:"number",step:"0.1",value:v.yearsRemaining,onChange:q=>R({...v,yearsRemaining:q.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:v.isContingency,onChange:q=>R({...v,isContingency:q.target.checked}),className:"h-4 w-4"}),e.jsx("span",{className:"text-sm text-ink-700",children:"Contingency fund"})]})]})})]})}function av(l,m){return l==="District of Columbia"||l==="DC"?m==="incorporated"?{formName:"Form D-20",formTitle:"Corporation Franchise Tax Return",description:"District of Columbia Corporation Franchise Tax Return for incorporated entities.",filingDeadline:"April 15 (or 15th day of 4th month after fiscal year end)",taxRate:"8.25% of DC taxable income",agency:"DC Office of Tax and Revenue (OTR)",portalUrl:"https://mytax.dc.gov",portalName:"MyTax.DC.gov",legalRef:"DC Code  47-1807 et seq."}:{formName:"Form D-30",formTitle:"Unincorporated Business Franchise Tax Return",description:"District of Columbia Unincorporated Business Franchise Tax Return for unincorporated entities.",filingDeadline:"April 15 (or 15th day of 4th month after fiscal year end)",taxRate:"8.25% of DC taxable income (first $12,500 exempt)",agency:"DC Office of Tax and Revenue (OTR)",portalUrl:"https://mytax.dc.gov",portalName:"MyTax.DC.gov",legalRef:"DC Code  47-1808 et seq."}:{formName:"State Income Tax Return",formTitle:`${l} Entity Tax Return`,description:`State-level tax return for HOA entities in ${l}.`,filingDeadline:"Varies by state",taxRate:"Varies by state",agency:`${l} Department of Revenue`,portalUrl:"#",portalName:"State Tax Portal",legalRef:"State tax code"}}function lv(){const{getBalanceSheet:l,getIncomeStatement:m,getBudgetVariance:i}=Xt(),o=Ns(),u=l(),d=m("2026-01-01","2026-12-31"),x=i(),[p,f]=C.useState("balanceSheet"),g=o.address.state,v=o.details.entityType||"incorporated",R=av(g,v),O=d.totalIncome,N=0,P=O+N,_=d.totalExpenses,T=Math.max(0,N-_*(N/(P||1))),j=Math.round(T*.3),q=[{id:"balanceSheet",label:"Balance Sheet"},{id:"incomeStatement",label:"Income Statement"},{id:"budgetVariance",label:"Budget Variance"},{id:"form1120h",label:"Form 1120-H"},{id:"localTax",label:"Local Tax Forms"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex gap-1 bg-mist-50 rounded-lg p-1 flex-wrap",children:q.map(A=>e.jsx("button",{onClick:()=>f(A.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p===A.id?"bg-white shadow-sm text-ink-900":"text-ink-500 hover:text-ink-700"}`,children:A.label},A.id))}),p==="balanceSheet"&&e.jsxs("div",{className:"bg-sage-50 border border-sage-200 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"px-5 py-4 border-b border-sage-200",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:"Balance Sheet"}),e.jsxs("p",{className:"text-xs text-ink-400",children:["As of ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"p-5 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-sage-600 uppercase tracking-wide mb-3",children:"Assets"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[[["Operating Checking",u.assets.operating],["Reserve Savings",u.assets.reserves],["Assessments Receivable",u.assets.assessmentsAR],["Late Fees Receivable",u.assets.lateFeesAR]].map(([A,H])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-ink-500",children:A}),e.jsx("span",{className:"font-medium",children:te(H)})]},A)),e.jsxs("div",{className:"flex justify-between border-t border-sage-200 pt-2 font-bold",children:[e.jsx("span",{children:"Total Assets"}),e.jsx("span",{children:te(u.assets.total)})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-accent-600 uppercase tracking-wide mb-3",children:"Liabilities"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[[["Accounts Payable",u.liabilities.payable],["Prepaid Assessments",u.liabilities.prepaidAssessments],["Security Deposits",u.liabilities.deposits]].map(([A,H])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-ink-500",children:A}),e.jsx("span",{className:"font-medium",children:te(H)})]},A)),e.jsxs("div",{className:"flex justify-between border-t border-accent-200 pt-2 font-bold",children:[e.jsx("span",{children:"Total Liabilities"}),e.jsx("span",{children:te(u.liabilities.total)})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-ink-500 uppercase tracking-wide mb-3",children:"Fund Balances"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[[["Operating Fund",u.equity.operatingFund],["Reserve Fund",u.equity.reserveFund],["Retained Surplus",u.equity.retained]].map(([A,H])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-ink-500",children:A}),e.jsx("span",{className:"font-medium",children:te(H)})]},A)),e.jsxs("div",{className:"flex justify-between border-t border-ink-200 pt-2 font-bold",children:[e.jsx("span",{children:"Total Equity"}),e.jsx("span",{children:te(u.equity.total)})]})]})]})]})]}),p==="incomeStatement"&&e.jsxs("div",{className:"bg-mist-50 border border-mist-200 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"px-5 py-4 border-b border-mist-200",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:"Income Statement (P&L)"}),e.jsx("p",{className:"text-xs text-ink-400",children:"Jan 1  Dec 31, 2026 (YTD)"})]}),e.jsxs("div",{className:"p-5 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-sage-600 uppercase tracking-wide mb-3",children:"Income"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[Object.entries(d.income).map(([A,H])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-ink-500",children:H.name}),e.jsx("span",{className:"font-medium",children:te(H.amount)})]},A)),e.jsxs("div",{className:"flex justify-between border-t border-sage-200 pt-2 font-bold text-sage-700",children:[e.jsx("span",{children:"Total Income"}),e.jsx("span",{children:te(d.totalIncome)})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-accent-600 uppercase tracking-wide mb-3",children:"Expenses"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[Object.entries(d.expenses).map(([A,H])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-ink-500",children:H.name}),e.jsx("span",{className:"font-medium",children:te(H.amount)})]},A)),e.jsxs("div",{className:"flex justify-between border-t border-accent-200 pt-2 font-bold text-accent-700",children:[e.jsx("span",{children:"Total Expenses"}),e.jsx("span",{children:te(d.totalExpenses)})]})]})]})]}),e.jsx("div",{className:"px-5 py-4 border-t border-mist-200 bg-white",children:e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Net Income"}),e.jsx("span",{className:d.netIncome>=0?"text-sage-700":"text-red-600",children:te(d.netIncome)})]})})]}),p==="budgetVariance"&&e.jsxs("div",{className:"bg-white border border-ink-100 rounded-xl overflow-hidden",children:[e.jsx("div",{className:"px-5 py-4 border-b border-ink-100",children:e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:"Budget Variance Report"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs text-ink-400 uppercase tracking-wide border-b border-ink-100 bg-mist-50",children:[e.jsx("th",{className:"px-5 py-2",children:"Category"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Budget"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Actual"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Variance"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"%"})]})}),e.jsx("tbody",{children:x.map(A=>e.jsxs("tr",{className:"border-b border-ink-50 hover:bg-mist-50",children:[e.jsx("td",{className:"px-5 py-2.5 font-medium text-ink-900",children:A.name}),e.jsx("td",{className:"px-3 py-2.5 text-right text-ink-500",children:te(A.budgeted)}),e.jsx("td",{className:"px-3 py-2.5 text-right font-medium",children:te(A.actual)}),e.jsxs("td",{className:`px-3 py-2.5 text-right font-semibold ${A.variance>=0?"text-sage-600":"text-red-600"}`,children:[A.variance>=0?"+":"",te(A.variance)]}),e.jsx("td",{className:"px-3 py-2.5 text-right",children:e.jsxs("span",{className:`pill px-2 py-0.5 rounded ${A.pct>100?"bg-red-100 text-red-700":A.pct>80?"bg-yellow-100 text-yellow-700":"bg-sage-100 text-sage-700"}`,children:[A.pct,"%"]})})]},A.id))})]})})]}),p==="form1120h"&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-white border-2 border-ink-900 rounded-xl overflow-hidden",children:[e.jsx("div",{className:"bg-ink-900 text-white px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-ink-300 font-mono",children:"Department of the Treasury  Internal Revenue Service"}),e.jsx("h3",{className:"font-display text-xl font-bold mt-1",children:"Form 1120-H"}),e.jsx("p",{className:"text-sm text-ink-200",children:"U.S. Income Tax Return for Homeowners Associations"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-ink-300",children:"Tax Year"}),e.jsx("p",{className:"text-2xl font-bold",children:"2026"})]})]})}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-mist-50 rounded-lg p-4 border border-mist-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-ink-400 uppercase font-semibold",children:"Association Name"}),e.jsx("p",{className:"text-sm font-bold text-ink-900",children:o.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-ink-400 uppercase font-semibold",children:"Address"}),e.jsxs("p",{className:"text-sm text-ink-700",children:[o.address.street,", ",o.address.city,", ",o.address.state," ",o.address.zip]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-ink-400 uppercase font-semibold",children:"Entity Type"}),e.jsx("p",{className:"text-sm text-ink-700",children:v==="incorporated"?"Incorporated":"Unincorporated"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-ink-400 uppercase font-semibold",children:"Filing Deadline"}),e.jsx("p",{className:"text-sm text-ink-700",children:"March 15, 2027 (or 15th day of 3rd month after fiscal year end)"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-ink-900 uppercase tracking-wider mb-3 pb-2 border-b border-ink-200",children:"Part I  Exempt Function Income"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-ink-600",children:"1. Assessments and dues from members"}),e.jsx("span",{className:"font-mono font-medium",children:te(O)})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-ink-600",children:"2. Other exempt function income"}),e.jsx("span",{className:"font-mono font-medium",children:te(0)})]}),e.jsxs("div",{className:"flex justify-between py-1 border-t border-ink-100 font-bold",children:[e.jsx("span",{className:"text-ink-900",children:"3. Total exempt function income"}),e.jsx("span",{className:"font-mono",children:te(O)})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-ink-900 uppercase tracking-wider mb-3 pb-2 border-b border-ink-200",children:"Part II  Taxable Income"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-ink-600",children:"4. Gross income (non-exempt: interest, rents, etc.)"}),e.jsx("span",{className:"font-mono font-medium",children:te(N)})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-ink-600",children:"5. Less: Deductions directly connected"}),e.jsxs("span",{className:"font-mono font-medium",children:["(",te(0),")"]})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-ink-600",children:"6. Taxable income before $100 exemption"}),e.jsx("span",{className:"font-mono font-medium",children:te(T)})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-ink-600",children:"7. Less: Specific deduction"}),e.jsx("span",{className:"font-mono font-medium",children:"($100)"})]}),e.jsxs("div",{className:"flex justify-between py-1 border-t border-ink-100 font-bold",children:[e.jsx("span",{className:"text-ink-900",children:"8. Taxable income"}),e.jsx("span",{className:"font-mono",children:te(Math.max(0,T-100))})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-ink-900 uppercase tracking-wider mb-3 pb-2 border-b border-ink-200",children:"Part III  Tax Computation"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-ink-600",children:"9. Tax rate (flat 30% for 1120-H filers)"}),e.jsx("span",{className:"font-mono font-medium",children:"30%"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-t border-ink-200 bg-sage-50 rounded-lg px-3 -mx-1",children:[e.jsx("span",{className:"text-lg font-bold text-ink-900",children:"10. Total Tax"}),e.jsx("span",{className:`text-lg font-bold font-mono ${j>0?"text-red-600":"text-sage-600"}`,children:te(j)})]})]})]}),e.jsx("div",{className:"bg-mist-50 border border-mist-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-xs text-ink-500",children:[e.jsx("strong",{children:"Note:"})," This form is auto-generated from your General Ledger data. All assessment income qualifies as exempt function income under IRC  528. Non-exempt income (interest, rental, etc.) is taxed at a flat 30% rate. Review with your tax advisor before filing. The $100 specific deduction is available for HOAs filing Form 1120-H."]})})]})]}),e.jsx("div",{className:"bg-indigo-50 border-2 border-indigo-200 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-indigo-900",children:"Electronic Federal Tax Payment System (EFTPS)"}),e.jsx("p",{className:"text-xs text-indigo-600 mt-1",children:"File and pay federal taxes online. IRS-authorized payment system."})]}),e.jsx("a",{href:"https://www.eftps.gov",target:"_blank",rel:"noopener noreferrer",className:"px-5 py-2.5 bg-indigo-600 text-white rounded-lg text-sm font-semibold hover:bg-indigo-700 flex items-center gap-2",children:"Go to EFTPS "})]})})]}),p==="localTax"&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-white border-2 border-ink-900 rounded-xl overflow-hidden",children:[e.jsx("div",{className:"bg-ink-900 text-white px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-ink-300 font-mono",children:R.agency}),e.jsx("h3",{className:"font-display text-xl font-bold mt-1",children:R.formName}),e.jsx("p",{className:"text-sm text-ink-200",children:R.formTitle})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-ink-300",children:"Tax Year"}),e.jsx("p",{className:"text-2xl font-bold",children:"2026"})]})]})}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-mist-50 rounded-lg p-4 border border-mist-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-ink-400 uppercase font-semibold",children:"Association Name"}),e.jsx("p",{className:"text-sm font-bold text-ink-900",children:o.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-ink-400 uppercase font-semibold",children:"Jurisdiction"}),e.jsx("p",{className:"text-sm text-ink-700",children:g})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-ink-400 uppercase font-semibold",children:"Entity Type"}),e.jsx("p",{className:"text-sm text-ink-700",children:v==="incorporated"?"Incorporated":"Unincorporated"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-ink-400 uppercase font-semibold",children:"Filing Deadline"}),e.jsx("p",{className:"text-sm text-ink-700",children:R.filingDeadline})]})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold text-amber-900",children:["Why ",R.formName,"?"]}),e.jsx("p",{className:"text-xs text-amber-700 mt-1",children:v==="incorporated"?`${o.name} is an incorporated entity. Incorporated associations in ${g} file ${R.formName} (${R.formTitle}).`:`${o.name} is an unincorporated entity. Unincorporated associations in ${g} file ${R.formName} (${R.formTitle}).`}),e.jsx("p",{className:"text-xs text-amber-600 font-mono mt-1",children:R.legalRef})]})]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-ink-900 uppercase tracking-wider mb-3 pb-2 border-b border-ink-200",children:"Income Summary (from General Ledger)"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[Object.entries(d.income).map(([A,H])=>e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-ink-600",children:H.name}),e.jsx("span",{className:"font-mono font-medium",children:te(H.amount)})]},A)),e.jsxs("div",{className:"flex justify-between py-1 border-t border-ink-100 font-bold",children:[e.jsx("span",{children:"Total Gross Income"}),e.jsx("span",{className:"font-mono",children:te(d.totalIncome)})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-ink-900 uppercase tracking-wider mb-3 pb-2 border-b border-ink-200",children:"Deductions (from General Ledger)"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[Object.entries(d.expenses).map(([A,H])=>e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-ink-600",children:H.name}),e.jsx("span",{className:"font-mono font-medium",children:te(H.amount)})]},A)),e.jsxs("div",{className:"flex justify-between py-1 border-t border-ink-100 font-bold",children:[e.jsx("span",{children:"Total Deductions"}),e.jsx("span",{className:"font-mono",children:te(d.totalExpenses)})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-ink-900 uppercase tracking-wider mb-3 pb-2 border-b border-ink-200",children:"Tax Computation"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-ink-600",children:"Net Income (Loss)"}),e.jsx("span",{className:"font-mono font-medium",children:te(d.netIncome)})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-ink-600",children:"Tax Rate"}),e.jsx("span",{className:"font-mono font-medium",children:R.taxRate})]}),e.jsxs("div",{className:"flex justify-between py-2 border-t border-ink-200 bg-sage-50 rounded-lg px-3 -mx-1",children:[e.jsx("span",{className:"text-lg font-bold text-ink-900",children:"Estimated Tax"}),e.jsx("span",{className:`text-lg font-bold font-mono ${d.netIncome>0?"text-red-600":"text-sage-600"}`,children:d.netIncome>0?te(Math.round(d.netIncome*.0825)):te(0)})]})]})]}),e.jsx("div",{className:"bg-mist-50 border border-mist-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-xs text-ink-500",children:[e.jsx("strong",{children:"Note:"})," This is an auto-generated estimate from your General Ledger. HOAs that file federal Form 1120-H and have no DC-sourced non-exempt income may have a $0 local tax liability. Consult your tax advisor for guidance on ",R.formName," filing requirements and exemptions."]})})]})]}),e.jsx("div",{className:"bg-indigo-50 border-2 border-indigo-200 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-indigo-900",children:R.agency}),e.jsxs("p",{className:"text-xs text-indigo-600 mt-1",children:["File ",R.formName," and pay ",g," taxes online."]})]}),e.jsxs("a",{href:R.portalUrl,target:"_blank",rel:"noopener noreferrer",className:"px-5 py-2.5 bg-indigo-600 text-white rounded-lg text-sm font-semibold hover:bg-indigo-700 flex items-center gap-2",children:["Go to ",R.portalName," "]})]})})]})]})}const iv=[{id:"dashboard",label:"Overview"},{id:"coa",label:"Chart of Accounts"},{id:"ledger",label:"General Ledger"},{id:"workorders",label:"WO & Invoices"},{id:"budget",label:"Budget"},{id:"reserves",label:"Reserves"},{id:"reports",label:"Reports"}],rv={dashboard:xp,coa:Jb,ledger:Wb,workorders:tv,budget:sv,reserves:nv,reports:lv};function ov(){const l=Xt(),{activeTab:m,setActiveTab:i,seedGeneralLedger:o,generalLedger:u,getBalanceSheet:d,getIncomeMetrics:x,getBudgetVariance:p,reserveItems:f}=l;C.useEffect(()=>{u.length===0&&o()},[]);const g=rv[m]||xp,v=d(),R=x(),O=p(),N=O.reduce((A,H)=>A+H.budgeted,0),P=O.reduce((A,H)=>A+H.actual,0),_=N>0?Math.round(P/N*100):0,T=f.reduce((A,H)=>A+H.currentFunding,0),y=f.reduce((A,H)=>A+H.estimatedCost,0),j=y>0?Math.round(T/y*100):0,q=Math.round(R.collectionRate*.4+Math.min(j,100)*.3+Math.max(0,100-Math.abs(_-50))*.3);return e.jsxs("div",{className:"space-y-0",children:[e.jsxs("div",{className:"bg-gradient-to-r from-ink-900 via-ink-800 to-accent-800 rounded-t-xl p-8 text-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-2xl font-bold",children:" Fiscal Lens"}),e.jsx("p",{className:"text-accent-200 text-sm mt-1",children:"Double-entry general ledger, chart of accounts, budgets, reserves & reports"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-4xl font-bold text-white",children:[q,"%"]}),e.jsx("div",{className:"text-accent-200 text-xs",children:"Financial Health"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3 mt-5",children:[e.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-3 text-center cursor-pointer hover:bg-opacity-20",onClick:()=>i("dashboard"),children:[e.jsx("p",{className:"text-[11px] text-accent-100 leading-tight",children:"Operating Cash"}),e.jsx("p",{className:"text-sm font-bold text-white mt-1",children:te(v.assets.operating)})]}),e.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-3 text-center cursor-pointer hover:bg-opacity-20",onClick:()=>i("ledger"),children:[e.jsx("p",{className:"text-[11px] text-accent-100 leading-tight",children:"Collection Rate"}),e.jsxs("p",{className:`text-sm font-bold mt-1 ${R.collectionRate>=90?"text-green-300":R.collectionRate>=75?"text-yellow-300":"text-red-300"}`,children:[R.collectionRate,"%"]})]}),e.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-3 text-center cursor-pointer hover:bg-opacity-20",onClick:()=>i("budget"),children:[e.jsx("p",{className:"text-[11px] text-accent-100 leading-tight",children:"Budget Used"}),e.jsxs("p",{className:`text-sm font-bold mt-1 ${_<=75?"text-green-300":_<=100?"text-yellow-300":"text-red-300"}`,children:[_,"%"]})]}),e.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-3 text-center cursor-pointer hover:bg-opacity-20",onClick:()=>i("reserves"),children:[e.jsx("p",{className:"text-[11px] text-accent-100 leading-tight",children:"Reserve Funded"}),e.jsxs("p",{className:`text-sm font-bold mt-1 ${j>=70?"text-green-300":j>=40?"text-yellow-300":"text-red-300"}`,children:[j,"%"]})]}),e.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-3 text-center cursor-pointer hover:bg-opacity-20",onClick:()=>i("dashboard"),children:[e.jsx("p",{className:"text-[11px] text-accent-100 leading-tight",children:"Receivables"}),e.jsx("p",{className:`text-sm font-bold mt-1 ${v.assets.totalReceivable===0?"text-green-300":"text-red-300"}`,children:te(v.assets.totalReceivable)})]})]})]}),e.jsx("div",{className:"bg-white border-x border-ink-100 border-b overflow-x-auto",children:e.jsx("div",{className:"flex min-w-max px-4",children:iv.map(A=>e.jsx("button",{onClick:()=>i(A.id),className:`px-4 py-3 text-sm font-medium border-b-2 whitespace-nowrap transition-colors ${m===A.id?"border-ink-900 text-ink-900":"border-transparent text-ink-400 hover:text-ink-700"}`,children:A.label},A.id))})}),e.jsx("div",{className:"bg-white rounded-b-xl border-x border-b border-ink-100 p-6",children:e.jsx(g,{})})]})}function cv({vote:l}){const m=l.votes.filter(p=>p.vote==="approve").length,i=l.votes.filter(p=>p.vote==="deny").length,o=l.votes.filter(p=>p.vote==="abstain").length,u=m>i,d={approve:"bg-sage-100 text-sage-700",deny:"bg-red-100 text-red-700",abstain:"bg-ink-100 text-ink-500"},x={approve:"bg-sage-50",deny:"bg-red-50",abstain:"bg-ink-50"};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-3 p-3 bg-mist-50 rounded-lg border border-mist-200",children:[e.jsx("p",{className:"text-sm font-medium text-ink-900",children:l.motion}),e.jsxs("p",{className:"text-xs text-ink-400 mt-1",children:["Vote date: ",l.date]})]}),e.jsx("div",{className:"space-y-1.5",children:l.votes.map((p,f)=>e.jsxs("div",{className:`flex items-center justify-between py-2 px-3 rounded-lg ${x[p.vote]||"bg-ink-50"} border border-ink-50`,children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-ink-900",children:p.name}),e.jsx("span",{className:"text-xs text-ink-400 ml-2",children:p.role})]}),e.jsx("span",{className:`text-[10px] font-semibold uppercase px-2 py-0.5 rounded ${d[p.vote]||"bg-ink-50 text-ink-300"}`,children:p.vote?p.vote.charAt(0).toUpperCase()+p.vote.slice(1):""})]},f))}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-ink-100 flex gap-4 text-sm",children:[e.jsxs("span",{className:"text-sage-600 font-semibold",children:[m," Approve"]}),e.jsxs("span",{className:"text-red-600 font-semibold",children:[i," Deny"]}),e.jsxs("span",{className:"text-ink-400",children:[o," Abstain"]}),e.jsx("span",{className:`ml-auto font-bold ${u?"text-sage-700":"text-red-600"}`,children:u?"PASSED":"NOT PASSED"})]})]})}function dv({caseId:l,approach:m,steps:i,onToggle:o,onNote:u}){return e.jsxs("div",{className:"bg-white rounded-xl border border-ink-100 p-5",children:[e.jsxs("h3",{className:"text-lg font-semibold text-ink-800 mb-4",children:[el[m]," Steps"," ",e.jsxs("span",{className:"text-ink-400 font-normal text-sm",children:["(",i.filter(d=>d.done).length,"/",i.length," complete)"]})]}),e.jsx("div",{className:"space-y-3",children:i.map((d,x)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("button",{onClick:()=>o(x),className:`w-8 h-8 rounded-full border-2 flex items-center justify-center shrink-0 mt-0.5 transition-all text-sm font-bold ${d.done?"bg-sage-500 border-sage-500 text-white":"border-ink-200 text-ink-300 hover:border-accent-400"}`,children:d.done?"":x+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm ${d.done?"text-ink-400 line-through":"text-ink-800 font-medium"}`,children:d.s}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[d.t&&e.jsxs("span",{className:"text-[11px] text-ink-400",children:[" ",d.t]}),d.d&&e.jsxs("span",{className:"text-[11px] text-ink-400",children:[" ",d.d]}),d.detail&&e.jsxs("span",{className:"text-[11px] text-ink-400",children:[" ",d.detail]}),d.w&&e.jsxs("span",{className:"text-[11px] text-rose-500",children:[" ",d.w]})]}),d.done&&d.doneDate&&e.jsxs("span",{className:"text-[10px] text-sage-500",children:["Completed ",d.doneDate]}),d.userNotes&&e.jsxs("p",{className:"text-xs text-ink-400 mt-1 bg-sand-100 rounded p-2",children:[" ",d.userNotes]}),e.jsx("button",{onClick:()=>{const p=prompt("Add note:",d.userNotes||"");p!==null&&u(x,p)},className:"text-[11px] text-accent-500 hover:text-accent-600 mt-1 inline-block",children:"+ Add note"})]})]},x))})]})}function uv({c:l,boardMembers:m,store:i,onClose:o}){var R,O;const[u,d]=C.useState(((R=l.boardVotes)==null?void 0:R.motion)||""),[x,p]=C.useState(((O=l.boardVotes)==null?void 0:O.date)||new Date().toISOString().split("T")[0]),[f,g]=C.useState(()=>{const N={};return m.forEach(P=>{var T,y;const _=(y=(T=l.boardVotes)==null?void 0:T.votes)==null?void 0:y.find(j=>j.name===P.name);N[P.name]=(_==null?void 0:_.vote)||""}),N}),v=()=>{if(!u.trim())return alert("Motion text is required.");const N=m.map(P=>({name:P.name,role:P.role,vote:f[P.name]||""}));i.saveBoardVote(l.id,u,x,N),o()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:o,children:e.jsxs("div",{className:"bg-white rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",onClick:N=>N.stopPropagation(),children:[e.jsxs("div",{className:"border-b p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-ink-900",children:l.boardVotes?"Edit Board Vote":"Record Board Vote"}),e.jsxs("p",{className:"text-sm text-ink-500 mt-1",children:["Case: ",l.title]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Motion / Resolution *"}),e.jsx("textarea",{value:u,onChange:N=>d(N.target.value),rows:2,className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"e.g., Motion to approve emergency repair expenditure..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Vote Date"}),e.jsx("input",{type:"date",value:x,onChange:N=>p(N.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-3",children:"Board Member Votes"}),e.jsx("div",{className:"space-y-2",children:m.map(N=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-mist-50 border border-mist-100 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-ink-900",children:N.name}),e.jsx("p",{className:"text-xs text-ink-400",children:N.role})]}),e.jsx("div",{className:"flex gap-1",children:["approve","deny","abstain"].map(P=>{const _=f[N.name]===P,T={approve:_?"bg-sage-500 text-white ring-2 ring-sage-500":"bg-sage-100 text-sage-700 hover:bg-sage-200",deny:_?"bg-red-500 text-white ring-2 ring-red-400":"bg-red-100 text-red-700 hover:bg-red-200",abstain:_?"bg-ink-400 text-white ring-2 ring-ink-300":"bg-ink-100 text-ink-500 hover:bg-ink-200"};return e.jsx("button",{onClick:()=>g(y=>({...y,[N.name]:P})),className:`px-3 py-1.5 rounded text-xs font-semibold transition-all ${T[P]}`,children:P.charAt(0).toUpperCase()+P.slice(1)},P)})})]},N.id))})]})]}),e.jsxs("div",{className:"border-t p-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-ink-700 font-medium",children:"Cancel"}),e.jsx("button",{onClick:v,className:"px-6 py-2 bg-ink-900 text-white rounded-lg hover:bg-ink-800 font-medium",children:"Save Vote"})]})]})})}function mv({caseId:l,store:m,onClose:i}){const[o,u]=C.useState("notice"),[d,x]=C.useState(""),[p,f]=C.useState("email"),[g,v]=C.useState(""),[R,O]=C.useState(""),[N,P]=C.useState(""),_=()=>{if(!d.trim()||!g.trim())return alert("Subject and recipient are required.");m.addComm(l,{type:o,subject:d,date:new Date().toISOString().split("T")[0],method:p,recipient:g,sentBy:R,notes:N,status:"sent"}),i()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:i,children:e.jsxs("div",{className:"bg-white rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",onClick:T=>T.stopPropagation(),children:[e.jsx("div",{className:"border-b p-6",children:e.jsx("h2",{className:"text-xl font-bold text-ink-900",children:"Send Communication"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Type"}),e.jsxs("select",{value:o,onChange:T=>u(T.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"notice",children:"Notice"}),e.jsx("option",{value:"response",children:"Response"}),e.jsx("option",{value:"reminder",children:"Reminder"}),e.jsx("option",{value:"violation",children:"Violation"}),e.jsx("option",{value:"legal",children:"Legal"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Method"}),e.jsxs("select",{value:p,onChange:T=>f(T.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"certified mail",children:"Certified Mail"}),e.jsx("option",{value:"posted",children:"Posted"}),e.jsx("option",{value:"hand delivered",children:"Hand Delivered"}),e.jsx("option",{value:"phone",children:"Phone"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Subject *"}),e.jsx("input",{value:d,onChange:T=>x(T.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"Communication subject"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Recipient *"}),e.jsx("input",{value:g,onChange:T=>v(T.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"e.g., Unit 502  Lisa Chen"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Sent By"}),e.jsx("input",{value:R,onChange:T=>O(T.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"e.g., President"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:N,onChange:T=>P(T.target.value),rows:3,className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"Additional details..."})]})]}),e.jsxs("div",{className:"border-t p-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:i,className:"px-4 py-2 text-ink-700 font-medium",children:"Cancel"}),e.jsx("button",{onClick:_,className:"px-6 py-2 bg-ink-900 text-white rounded-lg hover:bg-ink-800 font-medium",children:"Send"})]})]})})}function xv({caseId:l,store:m,onClose:i}){const[o,u]=C.useState(""),[d,x]=C.useState("document"),[p,f]=C.useState(""),g=()=>{if(!o.trim())return alert("Document name is required.");m.addDocument(l,{name:o,type:d,date:new Date().toISOString().split("T")[0],size:p||"N/A"}),i()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:i,children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"border-b p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-ink-900",children:"Add Document"}),e.jsx("p",{className:"text-sm text-ink-500 mt-1",children:"Attach a document to this case"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Document Name *"}),e.jsx("input",{value:o,onChange:v=>u(v.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"e.g., Violation-Photos-Unit502.zip"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Type"}),e.jsxs("select",{value:d,onChange:v=>x(v.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"document",children:"Document"}),e.jsx("option",{value:"evidence",children:"Evidence"}),e.jsx("option",{value:"notice",children:"Notice"}),e.jsx("option",{value:"legal",children:"Legal"}),e.jsx("option",{value:"claim",children:"Claim"}),e.jsx("option",{value:"invoice",children:"Invoice"}),e.jsx("option",{value:"photo",children:"Photo"}),e.jsx("option",{value:"report",children:"Report"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Size"}),e.jsx("input",{value:p,onChange:v=>f(v.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"e.g., 2.5 MB"})]})]})]}),e.jsxs("div",{className:"border-t p-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:i,className:"px-4 py-2 text-ink-700 font-medium",children:"Cancel"}),e.jsx("button",{onClick:g,className:"px-6 py-2 bg-ink-900 text-white rounded-lg hover:bg-ink-800 font-medium",children:"Add Document"})]})]})})}function pv({c:l,store:m,onClose:i}){const o=Is.find(f=>f.id===l.catId),u=o==null?void 0:o.sits.find(f=>f.id===l.sitId);if(!u)return i(),null;const d=[l.approach,...(l.additionalApproaches||[]).map(f=>f.approach)],x=["pre","self","legal"].filter(f=>!d.includes(f));if(x.length===0)return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:i,children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6 text-center",onClick:f=>f.stopPropagation(),children:[e.jsx("p",{className:"text-ink-500 mb-4",children:"All approaches are already active on this case."}),e.jsx("button",{onClick:i,className:"px-4 py-2 bg-ink-900 text-white rounded-lg font-medium",children:"OK"})]})});const p=f=>{m.addApproach(l.id,f),i()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:i,children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",onClick:f=>f.stopPropagation(),children:[e.jsxs("div",{className:"border-b p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-ink-900",children:"Add Approach"}),e.jsxs("p",{className:"text-sm text-ink-500 mt-1",children:["Layer additional steps onto this case. Current: ",el[l.approach]]})]}),e.jsx("div",{className:"p-6 space-y-3",children:x.map(f=>{const g=f==="legal"?u.legal:f==="self"?u.self:u.pre;return e.jsxs("div",{onClick:()=>p(f),className:"border border-ink-100 rounded-xl p-4 hover:border-accent-300 cursor-pointer transition-all",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`text-[10px] font-semibold uppercase px-2 py-0.5 rounded border ${Or[f]}`,children:el[f]}),e.jsxs("span",{className:"text-xs text-ink-400",children:[g.length," steps"]})]}),e.jsxs("div",{className:"text-xs text-ink-500 space-y-1",children:[g.slice(0,3).map((v,R)=>e.jsxs("p",{children:[R+1,". ",v.s]},R)),g.length>3&&e.jsxs("p",{className:"text-ink-300",children:["...+",g.length-3," more"]})]})]},f)})}),e.jsx("div",{className:"border-t p-6 flex justify-end",children:e.jsx("button",{onClick:i,className:"px-4 py-2 text-ink-700 font-medium",children:"Cancel"})})]})})}const hv=l=>"$"+l.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});function kd({embedded:l}={}){const m=al(),{cases:i,issues:o}=m,[u,d]=C.useState("tabs"),x=jt(N=>N.currentUser.role),p=jt(N=>N.currentUser),f=x!=="RESIDENT";if(u==="new")return e.jsx(gv,{onDone:N=>d(`case:${N}`),onBack:()=>d("tabs")});if(u.startsWith("case:"))return e.jsx(bv,{caseId:u.split(":")[1],onBack:()=>d("tabs"),onNav:d});const g=i.filter(N=>N.status==="open"),v=i.filter(N=>N.status==="closed"),R=g.filter(N=>N.priority==="urgent"),O=g.filter(N=>N.priority==="high");return e.jsx(fv,{open:g,closed:v,urgent:R,high:O,issues:o,isBoard:f,user:p,onNav:d,store:m,embedded:l})}function fv({open:l,closed:m,urgent:i,high:o,issues:u,isBoard:d,user:x,onNav:p,store:f,embedded:g}){const[v,R]=C.useState("open"),[O,N]=C.useState(""),[P,_]=C.useState("all"),[T,y]=C.useState("all"),[j,q]=C.useState(!1),[A,H]=C.useState(""),[U,L]=C.useState(""),[F,z]=C.useState("Maintenance"),[ne,K]=C.useState("MEDIUM"),ie=()=>{var w;A.trim()&&(f.addIssue({type:"BUILDING_PUBLIC",category:F,priority:ne,status:"SUBMITTED",title:A,description:U,reportedBy:x.id,reporterName:x.name,reporterEmail:x.email,unitNumber:((w=x.linkedUnits)==null?void 0:w[0])||"",submittedDate:new Date().toISOString().split("T")[0]}),H(""),L(""),q(!1))},he=w=>{var xe,Se;const M={Maintenance:"maintenance",Safety:"safety",Noise:"noise","Common Area":"common-area",Parking:"parking",Other:"other"},ce={HIGH:"high",MEDIUM:"medium",LOW:"low",URGENT:"urgent"},E=M[w.category]||"other",J=((xe=Is.find(b=>b.id===E))==null?void 0:xe.sits)||Is[0].sits,Q=f.createCase({catId:E,sitId:((Se=J[0])==null?void 0:Se.id)||"other",approach:"pre",title:w.title,unit:w.unitNumber||"",owner:w.reporterName,priority:ce[w.priority]||"medium",notes:`Converted from issue ${w.id}. ${w.description}`});f.updateIssueStatus(w.id,"IN_PROGRESS"),p(`case:${Q}`)};let pe=[...l];if(O){const w=O.toLowerCase();pe=pe.filter(M=>{var ce,E;return M.title.toLowerCase().includes(w)||M.id.toLowerCase().includes(w)||((ce=M.unit)==null?void 0:ce.toLowerCase().includes(w))||((E=M.owner)==null?void 0:E.toLowerCase().includes(w))})}P!=="all"&&(pe=pe.filter(w=>w.priority===P)),T!=="all"&&(pe=pe.filter(w=>w.catId===T));let Ne=[...m];if(O){const w=O.toLowerCase();Ne=Ne.filter(M=>M.title.toLowerCase().includes(w)||M.id.toLowerCase().includes(w))}const B=[...new Set(l.map(w=>w.catId))],I=[{id:"open",label:"Open Cases",badge:l.length||void 0},{id:"issues",label:"Recent Issues",badge:u.filter(w=>w.status==="SUBMITTED").length||void 0},{id:"archive",label:"Case Archive",badge:m.length||void 0}];return e.jsxs("div",{className:g?"space-y-4":"space-y-0",children:[!g&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-ink-900 via-ink-800 to-accent-800 rounded-t-xl p-8 text-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-2xl font-bold",children:d?" Daily Operations":"Issues & Cases"}),e.jsx("p",{className:"text-accent-200 text-sm mt-1",children:"Case tracking and issue management"})]}),e.jsx("div",{className:"flex items-center gap-4",children:d&&e.jsx("button",{onClick:()=>p("new"),className:"px-4 py-2 bg-white text-ink-900 rounded-lg text-sm font-medium hover:bg-accent-100",children:" New Case"})})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mt-5",children:[{val:l.length,label:"Open Cases",icon:""},{val:i.length,label:"Urgent",icon:""},{val:o.length,label:"High Priority",icon:""},{val:m.length,label:"Closed",icon:""}].map(w=>e.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-3 text-center cursor-pointer hover:bg-opacity-20",onClick:()=>R(w.label==="Closed"?"archive":"open"),children:[e.jsx("span",{className:"text-xl",children:w.icon}),e.jsx("p",{className:"text-[11px] text-accent-100 mt-0.5 leading-tight",children:w.label}),e.jsx("p",{className:"text-sm font-bold text-white mt-1",children:w.val})]},w.label))})]}),e.jsx("div",{className:"bg-white border-x border-ink-100 border-b overflow-x-auto",children:e.jsx("div",{className:"flex min-w-max px-4",children:I.map(w=>e.jsxs("button",{onClick:()=>R(w.id),className:`px-5 py-3 text-sm font-medium border-b-2 whitespace-nowrap transition-colors flex items-center gap-2 ${v===w.id?"border-ink-900 text-ink-900":"border-transparent text-ink-400 hover:text-ink-700"}`,children:[w.label,w.badge&&e.jsx("span",{className:"bg-red-500 text-white text-[10px] rounded-full px-1.5 py-0.5 font-bold",children:w.badge})]},w.id))})})]}),g&&e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"flex gap-1 bg-mist-50 rounded-lg p-1",children:I.map(w=>e.jsxs("button",{onClick:()=>R(w.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${v===w.id?"bg-white shadow-sm text-ink-900":"text-ink-500 hover:text-ink-700"}`,children:[w.label,w.badge?e.jsx("span",{className:`text-[10px] rounded-full px-1.5 py-0.5 font-bold ${v===w.id?"bg-ink-100 text-ink-600":"bg-ink-200 text-ink-500"}`,children:w.badge}):null]},w.id))}),d&&e.jsx("button",{onClick:()=>p("new"),className:"px-4 py-2 bg-ink-900 text-white rounded-lg text-sm font-medium hover:bg-ink-800 shrink-0",children:"+ New Case"})]}),e.jsxs("div",{className:g?"":"bg-white rounded-b-xl border-x border-b border-ink-100 p-6",children:[v==="open"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"text",placeholder:"Search cases...",value:O,onChange:w=>N(w.target.value),className:"flex-1 px-3 py-2 border border-ink-200 rounded-lg text-sm"}),e.jsxs("select",{value:P,onChange:w=>_(w.target.value),className:"px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"urgent",children:"Urgent"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]}),B.length>1&&e.jsxs("select",{value:T,onChange:w=>y(w.target.value),className:"px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:"All Categories"}),B.map(w=>{const M=Is.find(ce=>ce.id===w);return e.jsx("option",{value:w,children:(M==null?void 0:M.label)||w},w)})]})]}),e.jsxs("p",{className:"text-xs text-ink-400",children:[pe.length," case",pe.length!==1?"s":"",O||P!=="all"||T!=="all"?" (filtered)":""]}),pe.length===0?e.jsx("p",{className:"text-sm text-ink-400 py-8 text-center",children:"No open cases match your filters."}):e.jsx("div",{className:"divide-y divide-ink-50",children:pe.map(w=>{const M=Is.find(ce=>ce.id===w.catId);return e.jsxs("div",{className:"py-3 flex items-center gap-4 hover:bg-mist-50 -mx-2 px-2 rounded-lg cursor-pointer",onClick:()=>p(`case:${w.id}`),children:[e.jsx("span",{className:`shrink-0 w-2 h-2 rounded-full ${w.priority==="urgent"?"bg-red-500":w.priority==="high"?"bg-orange-500":w.priority==="medium"?"bg-yellow-500":"bg-slate-300"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-xs font-mono text-ink-300",children:w.id}),e.jsx("p",{className:"text-sm font-semibold text-ink-900 truncate",children:w.title})]}),e.jsxs("p",{className:"text-xs text-ink-400 mt-0.5",children:[(M==null?void 0:M.label)||w.catId,"  ",w.unit?`Unit ${w.unit}`:"No unit",w.owner?`  ${w.owner}`:"","  ",w.dateOpened]})]}),e.jsx("span",{className:`shrink-0 text-[10px] font-bold uppercase px-2 py-0.5 rounded ${up[w.priority]||"bg-ink-100 text-ink-500"}`,children:w.priority}),e.jsx("span",{className:`shrink-0 text-[10px] font-semibold uppercase px-2 py-0.5 rounded ${Or[w.approach]||"bg-ink-100 text-ink-500"}`,children:el[w.approach]||w.approach}),e.jsx("span",{className:"text-ink-300 text-sm",children:""})]},w.id)})})]}),v==="issues"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-xs text-ink-400",children:[u.length," issue",u.length!==1?"s":""," reported"]}),e.jsx("button",{onClick:()=>q(!j),className:"px-4 py-2 bg-ink-900 text-white rounded-lg text-sm font-medium hover:bg-ink-800",children:j?"Cancel":" Report Issue"})]}),j&&e.jsxs("div",{className:"bg-mist-50 rounded-xl border border-mist-200 p-5 space-y-3",children:[e.jsx("input",{value:A,onChange:w=>H(w.target.value),placeholder:"Issue title",className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm bg-white"}),e.jsx("textarea",{value:U,onChange:w=>L(w.target.value),placeholder:"Description...",rows:3,className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm bg-white"}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsx("select",{value:F,onChange:w=>z(w.target.value),className:"px-3 py-2 border border-ink-200 rounded-lg text-sm bg-white",children:["Maintenance","Safety","Noise","Common Area","Parking","Other"].map(w=>e.jsx("option",{children:w},w))}),e.jsxs("select",{value:ne,onChange:w=>K(w.target.value),className:"px-3 py-2 border border-ink-200 rounded-lg text-sm bg-white",children:[e.jsx("option",{value:"HIGH",children:"High"}),e.jsx("option",{value:"MEDIUM",children:"Medium"}),e.jsx("option",{value:"LOW",children:"Low"})]}),e.jsx("button",{onClick:ie,className:"px-6 py-2 bg-accent-600 text-white rounded-lg text-sm font-medium hover:bg-accent-700",children:"Submit"})]})]}),e.jsxs("div",{className:"divide-y divide-ink-50",children:[u.map(w=>e.jsxs("div",{className:"py-3 flex items-start gap-3",children:[e.jsxs("button",{onClick:()=>{var M;return f.upvoteIssue(w.id,x.id,x.name,((M=x.linkedUnits)==null?void 0:M[0])||"")},className:"flex flex-col items-center shrink-0 mt-1",children:[e.jsx("span",{className:`text-base ${w.upvotes.find(M=>M.userId===x.id)?"text-accent-500":"text-ink-300"}`,children:""}),e.jsx("span",{className:"text-[10px] font-bold text-ink-500",children:w.upvotes.length})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:`text-[10px] font-semibold uppercase px-1.5 py-0.5 rounded ${w.priority==="HIGH"?"bg-red-100 text-red-700":w.priority==="MEDIUM"?"bg-yellow-100 text-yellow-700":"bg-slate-100 text-slate-600"}`,children:w.priority}),e.jsx("span",{className:"text-[10px] font-semibold uppercase px-1.5 py-0.5 rounded bg-ink-100 text-ink-500",children:w.category}),e.jsx("span",{className:`text-[10px] font-semibold uppercase px-1.5 py-0.5 rounded ${w.status==="SUBMITTED"?"bg-amber-100 text-amber-700":w.status==="IN_PROGRESS"?"bg-accent-100 text-accent-700":"bg-sage-100 text-sage-700"}`,children:w.status.replace("_"," ")})]}),e.jsx("p",{className:"text-sm font-semibold text-ink-900 mt-1",children:w.title}),w.description&&e.jsx("p",{className:"text-xs text-ink-400 mt-0.5",children:w.description}),e.jsxs("p",{className:"text-[11px] text-ink-300 mt-1",children:["Reported by ",w.reporterName,"  ",w.submittedDate,"  ",w.viewCount," views"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[d&&["SUBMITTED","IN_PROGRESS","RESOLVED","CLOSED"].map(M=>e.jsx("button",{onClick:()=>f.updateIssueStatus(w.id,M),className:`px-2 py-0.5 rounded text-[10px] font-semibold ${w.status===M?"bg-ink-900 text-white":"bg-ink-50 text-ink-400 hover:bg-ink-100"}`,children:M.replace("_"," ")},M)),d&&w.status!=="CLOSED"&&e.jsx("button",{onClick:M=>{M.stopPropagation(),he(w)},className:"px-2.5 py-0.5 rounded text-[10px] font-semibold bg-accent-600 text-white hover:bg-accent-700 ml-1",children:" Convert to Case"})]})]})]},w.id)),u.length===0&&e.jsx("p",{className:"text-sm text-ink-400 text-center py-8",children:"No issues reported."})]})]}),v==="archive"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:e.jsx("input",{type:"text",placeholder:"Search closed cases...",value:O,onChange:w=>N(w.target.value),className:"flex-1 px-3 py-2 border border-ink-200 rounded-lg text-sm"})}),e.jsxs("p",{className:"text-xs text-ink-400",children:[Ne.length," closed case",Ne.length!==1?"s":""]}),Ne.length===0?e.jsx("p",{className:"text-sm text-ink-400 py-8 text-center",children:"No closed cases."}):e.jsx("div",{className:"divide-y divide-ink-50",children:Ne.map(w=>{const M=Is.find(ce=>ce.id===w.catId);return e.jsxs("div",{className:"py-3 flex items-center gap-4 hover:bg-mist-50 -mx-2 px-2 rounded-lg cursor-pointer",onClick:()=>p(`case:${w.id}`),children:[e.jsx("span",{className:"shrink-0 w-2 h-2 rounded-full bg-sage-400"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-xs font-mono text-ink-300",children:w.id}),e.jsx("p",{className:"text-sm font-medium text-ink-700 truncate",children:w.title})]}),e.jsxs("p",{className:"text-xs text-ink-400 mt-0.5",children:[(M==null?void 0:M.label)||w.catId,"  ",w.unit?`Unit ${w.unit}`:"","  Opened ",w.dateOpened,w.dateClosed?`  Closed ${w.dateClosed}`:""]})]}),e.jsx("span",{className:"shrink-0 text-[10px] font-semibold uppercase px-2 py-0.5 rounded bg-sage-100 text-sage-700",children:"Closed"}),e.jsx("span",{className:"text-ink-300 text-sm",children:""})]},w.id)})})]})]})]})}function gv({onDone:l,onBack:m}){const{createCase:i}=al(),[o,u]=C.useState(1),[d,x]=C.useState(null),[p,f]=C.useState(null),[g,v]=C.useState("pre"),[R,O]=C.useState(""),[N,P]=C.useState(""),[_,T]=C.useState(""),[y,j]=C.useState("medium"),[q,A]=C.useState(""),H=Is.find(F=>F.id===d),U=H==null?void 0:H.sits.find(F=>F.id===p),L=()=>{if(!d||!p||!R.trim())return;const F=i({catId:d,sitId:p,approach:g,title:R,unit:N,owner:_,priority:y,notes:q});l(F)};return e.jsxs("div",{className:"space-y-5",children:[e.jsx("button",{onClick:m,className:"text-xs text-ink-400 hover:text-ink-600",children:" Back to Dashboard"}),e.jsx("h2",{className:"text-2xl font-bold text-ink-900",children:"New Case"}),e.jsx("div",{className:"flex gap-2 mb-4",children:[1,2,3].map(F=>e.jsx("div",{className:`h-1.5 flex-1 rounded-full ${o>=F?"bg-accent-500":"bg-ink-100"}`},F))}),o===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-ink-800",children:"1. What's the situation?"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-2",children:Is.map(F=>e.jsxs("button",{onClick:()=>{x(F.id),f(null)},className:`rounded-xl border-2 p-3 text-center transition-all ${d===F.id?"border-accent-400 bg-accent-50 shadow-sm":"border-ink-100 bg-white hover:border-ink-200"}`,children:[e.jsx("span",{className:"text-xl",children:F.icon}),e.jsx("p",{className:"text-xs font-semibold text-ink-700 mt-1",children:F.label})]},F.id))}),H&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm font-medium text-ink-600",children:"Select situation type:"}),e.jsx("div",{className:"space-y-2",children:H.sits.map(F=>e.jsxs("button",{onClick:()=>f(F.id),className:`w-full text-left rounded-xl border-2 p-4 transition-all ${p===F.id?"border-accent-400 bg-accent-50":"border-ink-100 bg-white hover:border-ink-200"}`,children:[e.jsx("p",{className:"text-sm font-semibold text-ink-900",children:F.title}),e.jsx("p",{className:"text-xs text-ink-400 mt-0.5",children:F.desc}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:F.tags.slice(0,4).map(z=>e.jsx("span",{className:"text-[10px] bg-ink-50 text-ink-400 px-1.5 py-0.5 rounded",children:z},z))})]},F.id))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>d&&p?u(2):void 0,className:`px-6 py-2.5 rounded-lg text-sm font-semibold ${d&&p?"bg-ink-900 text-white hover:bg-ink-800 cursor-pointer":"bg-ink-100 text-ink-300 cursor-not-allowed"}`,children:"Next "})})]}),o===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:()=>u(1),className:"text-xs text-ink-400 hover:text-ink-600",children:" Back"}),e.jsx("h3",{className:"text-lg font-semibold text-ink-800",children:"2. Choose approach"}),e.jsxs("p",{className:"text-sm text-ink-500",children:["For: ",e.jsx("span",{className:"font-medium text-ink-700",children:U==null?void 0:U.title})]}),e.jsx("div",{className:"grid sm:grid-cols-3 gap-3",children:[{id:"pre",label:"Pre-Legal",desc:"Board-managed steps. Document, notify, escalate through internal procedures.",border:"border-emerald-400",bg:"bg-emerald-50",text:"text-emerald-700"},{id:"self",label:"Self-Represented",desc:"Board acts without attorney. Liens, small claims, formal demands.",border:"border-amber-400",bg:"bg-amber-50",text:"text-amber-700"},{id:"legal",label:"Legal Counsel",desc:"Attorney-led. Cease & desist, litigation, foreclosure.",border:"border-rose-400",bg:"bg-rose-50",text:"text-rose-700"}].map(F=>{var ne;const z=((ne=F.id==="legal"?U==null?void 0:U.legal:F.id==="self"?U==null?void 0:U.self:U==null?void 0:U.pre)==null?void 0:ne.length)||0;return e.jsxs("button",{onClick:()=>v(F.id),className:`rounded-xl border-2 p-4 text-left transition-all ${g===F.id?`${F.border} ${F.bg}`:"border-ink-100 bg-white hover:border-ink-200"}`,children:[e.jsx("p",{className:`text-sm font-bold ${F.text}`,children:F.label}),e.jsx("p",{className:"text-xs text-ink-500 mt-1",children:F.desc}),e.jsxs("p",{className:"text-[10px] text-ink-400 mt-2",children:[z," steps"]})]},F.id)})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:()=>u(1),className:"px-6 py-2.5 rounded-lg text-sm font-semibold border border-ink-200 text-ink-600 hover:bg-ink-50",children:" Back"}),e.jsx("button",{onClick:()=>u(3),className:"px-6 py-2.5 rounded-lg text-sm font-semibold bg-ink-900 text-white hover:bg-ink-800",children:"Next "})]})]}),o===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:()=>u(2),className:"text-xs text-ink-400 hover:text-ink-600",children:" Back"}),e.jsx("h3",{className:"text-lg font-semibold text-ink-800",children:"3. Case details"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Case Title *"}),e.jsx("input",{value:R,onChange:F=>O(F.target.value),placeholder:`e.g., Unit 502  ${(U==null?void 0:U.title)||"Issue description"}`,className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Unit #"}),e.jsx("input",{value:N,onChange:F=>P(F.target.value),placeholder:"e.g., 502 or Common",className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Owner / Contact"}),e.jsx("input",{value:_,onChange:F=>T(F.target.value),placeholder:"Owner name",className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Priority"}),e.jsx("div",{className:"flex gap-2",children:["low","medium","high","urgent"].map(F=>e.jsx("button",{onClick:()=>j(F),className:`px-4 py-1.5 rounded-lg text-xs font-semibold border transition-all ${y===F?"border-ink-900 bg-ink-900 text-white":"border-ink-200 text-ink-500 hover:border-ink-300"}`,children:F.charAt(0).toUpperCase()+F.slice(1)},F))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:q,onChange:F=>A(F.target.value),rows:3,className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"Background details..."})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:()=>u(2),className:"px-6 py-2.5 rounded-lg text-sm font-semibold border border-ink-200 text-ink-600 hover:bg-ink-50",children:" Back"}),e.jsx("button",{onClick:L,className:`px-6 py-2.5 rounded-lg text-sm font-semibold ${R.trim()?"bg-accent-500 text-white hover:bg-accent-600":"bg-ink-100 text-ink-300 cursor-not-allowed"}`,children:"Create Case "})]})]})]})}function bv({caseId:l,onBack:m,onNav:i}){var F,z;const o=al(),{board:u}=Ns(),d=Xt(),{workOrders:x}=d,p=o.cases.find(ne=>ne.id===l),[f,g]=C.useState(!1),[v,R]=C.useState(!1),[O,N]=C.useState(!1),[P,_]=C.useState(!1),[T,y]=C.useState(!1),[j,q]=C.useState({title:"",vendor:"",amount:"",acctNum:"6050"});if(!p)return e.jsxs("div",{children:[e.jsx("button",{onClick:m,className:"text-xs text-ink-400",children:" Back"}),e.jsx("p",{className:"text-ink-400 mt-4",children:"Case not found."})]});const A=Is.find(ne=>ne.id===p.catId),H=A==null?void 0:A.sits.find(ne=>ne.id===p.sitId),U=p.steps?Math.round(p.steps.filter(ne=>ne.done).length/p.steps.length*100):0,L=((F=H==null?void 0:H.notes)==null?void 0:F._)||"";return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("button",{onClick:m,className:"text-xs text-ink-400 hover:text-ink-600",children:" Dashboard"}),e.jsx("span",{className:"text-ink-300",children:""}),e.jsx("button",{onClick:()=>i("cases"),className:"text-xs text-ink-400 hover:text-ink-600",children:"All Cases"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-ink-100 p-5",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("span",{className:"text-3xl",children:(A==null?void 0:A.icon)||""}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[e.jsx("span",{className:`text-[10px] font-semibold uppercase px-2 py-0.5 rounded ${up[p.priority]}`,children:p.priority}),e.jsx("span",{className:`text-[10px] font-semibold uppercase px-2 py-0.5 rounded border ${Or[p.approach]}`,children:el[p.approach]}),e.jsx("span",{className:`text-[10px] font-semibold uppercase px-2 py-0.5 rounded ${p.status==="open"?"bg-accent-50 text-accent-600":"bg-sage-100 text-sage-700"}`,children:p.status})]}),e.jsx("h2",{className:"text-xl font-bold text-ink-900",children:p.title}),e.jsxs("p",{className:"text-sm text-ink-400 mt-1",children:[(H==null?void 0:H.title)||"","  Unit ",p.unit,"  ",p.owner,"  Created ",p.created]}),p.notes&&e.jsx("p",{className:"text-sm text-ink-500 mt-2 bg-sand-100 rounded-lg p-3",children:p.notes})]}),e.jsxs("div",{className:"shrink-0 text-center",children:[e.jsxs("svg",{viewBox:"0 0 36 36",className:"w-16 h-16",children:[e.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#e5e7eb",strokeWidth:"3"}),e.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:p.status==="closed"?"#22c55e":"#f59e0b",strokeWidth:"3",strokeDasharray:`${U}, 100`})]}),e.jsxs("span",{className:"text-sm font-bold text-ink-700",children:[U,"%"]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-ink-50 flex-wrap",children:[p.status==="open"?e.jsx("button",{onClick:()=>{confirm("Close this case?")&&o.closeCase(l)},className:"px-4 py-1.5 bg-sage-600 text-white rounded-lg text-xs font-semibold hover:bg-sage-700",children:" Close Case"}):e.jsx("button",{onClick:()=>o.reopenCase(l),className:"px-4 py-1.5 bg-ink-900 text-white rounded-lg text-xs font-semibold hover:bg-ink-800",children:" Reopen"}),e.jsx("button",{onClick:()=>_(!0),className:"px-4 py-1.5 border border-ink-200 text-ink-600 rounded-lg text-xs font-semibold hover:bg-ink-50",children:"+ Add Approach"}),e.jsx("button",{onClick:()=>{confirm("Delete this case?")&&(o.deleteCase(l),m())},className:"px-4 py-1.5 text-red-500 rounded-lg text-xs font-semibold hover:bg-red-50 ml-auto",children:"Delete"})]})]}),L&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-amber-700 uppercase tracking-wide",children:"Jurisdiction Guidance"}),e.jsx("p",{className:"text-sm text-amber-900 mt-1",children:L})]})]})}),p.steps&&e.jsx(dv,{caseId:l,approach:p.approach,steps:p.steps,onToggle:ne=>o.toggleStep(l,ne),onNote:(ne,K)=>o.addStepNote(l,ne,K)}),(z=p.additionalApproaches)==null?void 0:z.map((ne,K)=>e.jsxs("div",{className:"bg-white rounded-xl border border-ink-100 p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:`text-[10px] font-semibold uppercase px-2 py-0.5 rounded border ${Or[ne.approach]}`,children:el[ne.approach]}),e.jsx("h3",{className:"text-lg font-semibold text-ink-800",children:"Steps"}),e.jsxs("span",{className:"text-ink-400 text-sm",children:["(",ne.steps.filter(ie=>ie.done).length,"/",ne.steps.length," complete  added ",ne.addedDate,")"]})]}),e.jsx("div",{className:"space-y-3",children:ne.steps.map((ie,he)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("button",{onClick:()=>o.toggleAdditionalStep(l,K,he),className:`w-8 h-8 rounded-full border-2 flex items-center justify-center shrink-0 mt-0.5 transition-all text-sm font-bold ${ie.done?"bg-sage-500 border-sage-500 text-white":"border-ink-200 text-ink-300 hover:border-accent-400"}`,children:ie.done?"":he+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm ${ie.done?"text-ink-400 line-through":"text-ink-800 font-medium"}`,children:ie.s}),ie.w&&e.jsxs("span",{className:"text-[11px] text-rose-500",children:[" ",ie.w]}),ie.done&&ie.doneDate&&e.jsxs("span",{className:"text-[10px] text-sage-500 block",children:["Completed ",ie.doneDate]}),ie.userNotes&&e.jsxs("p",{className:"text-xs text-ink-400 mt-1 bg-sand-100 rounded p-2",children:[" ",ie.userNotes]}),e.jsx("button",{onClick:()=>{const pe=prompt("Add note:",ie.userNotes||"");pe!==null&&o.addAdditionalStepNote(l,K,he,pe)},className:"text-[11px] text-accent-500 hover:text-accent-600 mt-1 inline-block",children:"+ Add note"})]})]},he))})]},K)),e.jsxs("div",{className:"bg-white rounded-xl border border-ink-100 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-ink-800",children:"Board Vote"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(!0),className:`px-3 py-1.5 rounded-lg text-xs font-medium ${p.boardVotes?"border border-ink-200 text-ink-700 hover:bg-mist-50":"bg-ink-900 text-white hover:bg-ink-800"}`,children:p.boardVotes?"Edit Vote":"Record Vote"}),p.boardVotes&&e.jsx("button",{onClick:()=>{confirm("Remove vote?")&&o.clearBoardVote(l)},className:"px-3 py-1.5 text-red-400 hover:bg-red-50 rounded-lg text-xs font-medium",children:"Remove"})]})]}),p.boardVotes?e.jsx(cv,{vote:p.boardVotes}):e.jsx("p",{className:"text-sm text-ink-400 py-3 text-center",children:"No board vote recorded for this case."})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-ink-100 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-ink-800",children:"Documents"}),e.jsx("button",{onClick:()=>N(!0),className:"px-3 py-1.5 bg-ink-900 text-white rounded-lg text-xs font-medium hover:bg-ink-800",children:" Upload"})]}),p.attachments.length>0?e.jsx("div",{className:"space-y-1.5",children:p.attachments.map((ne,K)=>{const ie={evidence:"bg-amber-100 text-amber-700",notice:"bg-accent-100 text-accent-700",legal:"bg-rose-100 text-rose-700",claim:"bg-purple-100 text-purple-700"};return e.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-mist-50 border border-mist-100 rounded-lg group",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"text-ink-400",children:""}),e.jsx("span",{className:"text-sm text-ink-700 truncate",children:ne.name}),e.jsx("span",{className:`text-[10px] font-semibold uppercase px-1.5 py-0.5 rounded ${ie[ne.type]||"bg-ink-100 text-ink-500"}`,children:ne.type}),e.jsx("span",{className:"text-xs text-ink-300",children:ne.size})]}),e.jsx("button",{onClick:()=>o.removeDocument(l,K),className:"text-xs text-red-400 opacity-0 group-hover:opacity-100 hover:text-red-600 shrink-0 ml-2",children:""})]},K)})}):e.jsx("p",{className:"text-sm text-ink-400 py-3 text-center",children:"No documents attached."})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-ink-100 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-ink-800",children:"Communications"}),e.jsx("button",{onClick:()=>R(!0),className:"px-3 py-1.5 bg-ink-900 text-white rounded-lg text-xs font-medium hover:bg-ink-800",children:" Send"})]}),p.comms.length>0?e.jsx("div",{className:"space-y-2",children:[...p.comms].sort((ne,K)=>K.date.localeCompare(ne.date)).map((ne,K)=>{const ie={notice:"",response:"",reminder:"",violation:"",legal:""};return e.jsx("div",{className:"p-3 bg-mist-50 border border-mist-100 rounded-lg group",children:e.jsxs("div",{className:"flex items-start gap-2.5",children:[e.jsx("span",{className:"text-base mt-0.5",children:ie[ne.type]||""}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-ink-900",children:ne.subject}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5 flex-wrap",children:[e.jsx("span",{className:`text-[10px] font-semibold uppercase px-1.5 py-0.5 rounded ${ne.status==="sent"?"bg-sage-100 text-sage-700":"bg-ink-100 text-ink-500"}`,children:ne.status}),e.jsxs("span",{className:"text-[11px] text-ink-400",children:[ne.date,"  via ",ne.method]}),e.jsxs("span",{className:"text-[11px] text-ink-500",children:[" ",ne.recipient]})]})]}),e.jsx("button",{onClick:()=>o.removeComm(l,K),className:"text-xs text-red-400 opacity-0 group-hover:opacity-100 hover:text-red-600 shrink-0",children:""})]}),ne.notes&&e.jsx("p",{className:"text-xs text-ink-400 mt-1",children:ne.notes})]})]})},ne.id)})}):e.jsx("p",{className:"text-sm text-ink-400 py-3 text-center",children:"No communications sent."})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-ink-100 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-ink-800",children:"Financials"}),e.jsx("button",{onClick:()=>{q({title:`${p.title}`,vendor:"",amount:"",acctNum:"6050"}),y(!0)},className:"px-3 py-1.5 bg-ink-900 text-white rounded-lg text-xs font-medium hover:bg-ink-800",children:"+ Create Work Order"})]}),p.linkedWOs.length>0?e.jsx("div",{className:"space-y-2",children:p.linkedWOs.map(ne=>{const K=x.find(he=>he.id===ne);if(!K)return e.jsxs("div",{className:"p-3 bg-red-50 rounded-lg text-sm text-red-500",children:["WO ",ne," not found"]},ne);const ie={draft:"bg-ink-100 text-ink-500",approved:"bg-yellow-100 text-yellow-700",invoiced:"bg-accent-100 text-accent-700",paid:"bg-sage-100 text-sage-700"};return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 p-3 bg-mist-50 border border-mist-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[e.jsx("span",{className:`text-[10px] font-semibold uppercase px-2 py-0.5 rounded ${ie[K.status]}`,children:K.status}),e.jsx("span",{className:"text-xs font-mono text-ink-300",children:K.id}),e.jsx("span",{className:"text-sm font-medium text-ink-900 truncate",children:K.title})]}),e.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[e.jsx("span",{className:"text-sm text-ink-500",children:K.vendor}),e.jsx("span",{className:"font-bold text-ink-900",children:hv(K.amount)}),e.jsx("button",{onClick:()=>o.unlinkWO(l,ne),className:"px-2 py-1 text-xs text-red-400 hover:bg-red-50 rounded font-medium",children:"Unlink"})]})]},ne)})}):e.jsx("p",{className:"text-sm text-ink-400 py-4 text-center",children:"No work orders linked."})]}),f&&e.jsx(uv,{c:p,boardMembers:u,store:o,onClose:()=>g(!1)}),v&&e.jsx(mv,{caseId:l,store:o,onClose:()=>R(!1)}),O&&e.jsx(xv,{caseId:l,store:o,onClose:()=>N(!1)}),P&&e.jsx(pv,{c:p,store:o,onClose:()=>_(!1)}),T&&e.jsx(Te,{title:"Create Work Order",onClose:()=>y(!1),onSave:()=>{if(!j.title||!j.vendor||!j.amount){alert("Title, vendor, and amount required");return}d.createWorkOrder({title:j.title,vendor:j.vendor,amount:parseFloat(j.amount),acctNum:j.acctNum,caseId:l});const ne=d.workOrders[d.workOrders.length-1];ne&&o.linkWO(l,ne.id),y(!1)},saveLabel:"Create & Link",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Title *"}),e.jsx("input",{value:j.title,onChange:ne=>q({...j,title:ne.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Vendor *"}),e.jsx("input",{value:j.vendor,onChange:ne=>q({...j,vendor:ne.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"Company name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Amount *"}),e.jsx("input",{type:"number",value:j.amount,onChange:ne=>q({...j,amount:ne.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"0.00"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Expense Account"}),e.jsx("select",{value:j.acctNum,onChange:ne=>q({...j,acctNum:ne.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:d.chartOfAccounts.filter(ne=>ne.type==="expense").map(ne=>e.jsxs("option",{value:ne.num,children:[ne.num,"  ",ne.name]},ne.num))})]}),e.jsx("div",{className:"bg-mist-50 border border-mist-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-ink-600",children:["This creates a work order in Fiscal Lens and links it to case ",e.jsx("strong",{children:l}),". The WO will appear in AP/Work Orders for approval and payment."]})})]})})]})}const Ht=l=>"$"+l.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});function Zl(l){if(l.status==="VACANT")return{label:"Vacant",color:"bg-ink-100 text-ink-500",sortOrder:4};if(l.balance===0)return{label:"Current",color:"bg-sage-100 text-sage-700",sortOrder:0};const m=Math.ceil(l.balance/l.monthlyFee);return m<=1?{label:"1 Month Behind",color:"bg-yellow-100 text-yellow-700",sortOrder:1}:m<=2?{label:"2 Months Behind",color:"bg-orange-100 text-orange-700",sortOrder:2}:{label:"Delinquent",color:"bg-red-100 text-red-700",sortOrder:3}}function M0(l,m){const i=l.address;return`${i.street}, Unit ${m}, ${i.city}, ${i.state} ${i.zip}`}function vv({unitNum:l,onEdit:m,onPay:i,onFee:o,onSpecial:u}){const[d,x]=C.useState(!1),p=C.useRef(null);return C.useEffect(()=>{const f=g=>{p.current&&!p.current.contains(g.target)&&x(!1)};return d&&document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[d]),e.jsxs("div",{ref:p,className:"relative",children:[e.jsx("button",{onClick:()=>x(!d),className:"p-1.5 hover:bg-ink-100 rounded-lg transition-colors",children:e.jsxs("svg",{className:"w-4 h-4 text-ink-400",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("circle",{cx:"10",cy:"4",r:"1.5"}),e.jsx("circle",{cx:"10",cy:"10",r:"1.5"}),e.jsx("circle",{cx:"10",cy:"16",r:"1.5"})]})}),d&&e.jsx("div",{className:"absolute right-0 top-8 z-30 bg-white border border-ink-200 rounded-lg shadow-lg py-1 w-44",children:[{label:" Edit Unit",action:m},{label:" Record Payment",action:i},{label:" Apply Fee",action:o},{label:" Special Assessment",action:u}].map(f=>e.jsx("button",{onClick:()=>{f.action(),x(!1)},className:"w-full text-left px-3 py-2 text-sm text-ink-700 hover:bg-mist-50 transition-colors",children:f.label},f.label))})]})}function yv(){const l=Xt(),m=Ns(),{currentRole:i}=jt(),o=i==="BOARD_MEMBER"||i==="PROPERTY_MANAGER",[u,d]=C.useState(null),[x,p]=C.useState(null),[f,g]=C.useState(""),[v,R]=C.useState("all"),[O,N]=C.useState("number"),[P,_]=C.useState({}),[T,y]=C.useState([]),j=G=>P[G]||"",q=(G,ye)=>_(V=>({...V,[G]:ye})),A=()=>{_({}),y([])},H=l.units.find(G=>G.number===x),U=l.stripeConnectId&&l.stripeOnboardingComplete;let L=l.units.filter(G=>v==="current"?G.status==="OCCUPIED"&&G.balance===0:v==="behind"?G.status==="OCCUPIED"&&G.balance>0&&Math.ceil(G.balance/G.monthlyFee)<=2:v==="delinquent"?G.status==="OCCUPIED"&&G.balance>0&&Math.ceil(G.balance/G.monthlyFee)>2:v==="vacant"?G.status==="VACANT":!0);if(f){const G=f.toLowerCase();L=L.filter(ye=>ye.number.includes(G)||ye.owner.toLowerCase().includes(G)||ye.email.toLowerCase().includes(G))}L.sort((G,ye)=>O==="balance"?ye.balance-G.balance:O==="accountStatus"?Zl(G).sortOrder-Zl(ye).sortOrder:O==="owner"?G.owner.localeCompare(ye.owner):G.number.localeCompare(ye.number));const F=l.units.length,z=l.units.filter(G=>G.status==="OCCUPIED"),ne=z.filter(G=>G.balance===0).length,K=z.filter(G=>G.balance>0&&Math.ceil(G.balance/G.monthlyFee)<=2).length,ie=z.filter(G=>G.balance>0&&Math.ceil(G.balance/G.monthlyFee)>2).length,he=l.units.reduce((G,ye)=>G+ye.balance,0),pe=l.units.reduce((G,ye)=>G+ye.monthlyFee,0),B=l.units.flatMap(G=>G.specialAssessments.filter(ye=>!ye.paid)).reduce((G,ye)=>G+ye.amount,0),I={all:l.units.length,current:ne,behind:K,delinquent:ie,vacant:F-z.length},w=G=>{p(G),d("detail")},M=G=>{const ye=l.units.find(V=>V.number===G);ye&&(p(G),_({owner:ye.owner,email:ye.email,phone:ye.phone,monthlyFee:String(ye.monthlyFee),votingPct:String(ye.votingPct),status:ye.status,sqft:String(ye.sqft),bedrooms:String(ye.bedrooms),parking:ye.parking||"",moveIn:ye.moveIn||""}),d("editUnit"))},ce=G=>{p(G),A(),d("pay")},E=G=>{p(G),A(),q("amount","25"),q("reason","Late payment"),d("fee")},J=G=>{p(G),A(),d("special")},Q=()=>{if(!j("number")||!j("monthlyFee"))return alert("Unit number and monthly fee are required.");l.addUnit({number:j("number"),owner:j("owner")||"Vacant",email:j("email"),phone:j("phone"),monthlyFee:parseInt(j("monthlyFee"))||0,votingPct:parseFloat(j("votingPct"))||0,status:j("status")||"VACANT",balance:0,moveIn:j("moveIn")||null,sqft:parseInt(j("sqft"))||0,bedrooms:parseInt(j("bedrooms"))||0,parking:j("parking")||null}),d(null),A()},xe=()=>{x&&(l.updateUnit(x,{owner:j("owner"),email:j("email"),phone:j("phone"),monthlyFee:parseInt(j("monthlyFee"))||0,votingPct:parseFloat(j("votingPct"))||0,status:j("status"),sqft:parseInt(j("sqft"))||0,bedrooms:parseInt(j("bedrooms"))||0,parking:j("parking")||null,moveIn:j("moveIn")||null}),d(null),A())},Se=()=>{!x||!j("amount")||(l.recordUnitPayment(x,parseFloat(j("amount")),j("method")||"ACH"),d(null),A())},[b,ae]=C.useState(!1),Me=async(G,ye,V,ke,_e)=>{const we=l.units.find(ws=>ws.number===ye),tt=(we==null?void 0:we.email)||"";return we!=null&&we.owner,tt?(console.warn("Supabase env vars not configured, skipping email send"),{sent:!1,error:"Backend not configured. Set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY in Vercel environment variables."}):{sent:!1,error:`No email address on file for Unit ${ye}.`}},Ae=async()=>{if(!x||!j("amount"))return;const G=parseFloat(j("amount")),ye=j("reason")||"Late payment";ae(!0),l.imposeLateFee(x,G,ye);const V=l.createUnitInvoice(x,"fee",G,`Late Fee: ${ye}`),ke=await Me(V.id,x);ae(!1);const _e=l.units.find(we=>we.number===x);ke.sent?alert(` Late fee of ${Ht(G)} imposed on Unit ${x}.
Invoice ${V.id} created.
Email sent to ${_e==null?void 0:_e.email}.${ke.paymentUrl?`
 Stripe payment link included.`:`
 No Stripe payment link  `+(ke.error||"check STRIPE_SECRET_KEY secret.")}`):alert(`Late fee of ${Ht(G)} imposed on Unit ${x}.
Invoice ${V.id} created.
 Email: ${ke.error}`),d(null),A()},ot=async()=>{if(!x||!j("amount")||!j("reason"))return alert("Amount and reason required.");const G=parseFloat(j("amount")),ye=j("reason");ae(!0),l.addSpecialAssessment(x,G,ye);const V=l.createUnitInvoice(x,"special_assessment",G,`Special Assessment: ${ye}`),ke=await Me(V.id,x);ae(!1);const _e=l.units.find(we=>we.number===x);ke.sent?alert(` Special assessment of ${Ht(G)} added to Unit ${x}.
Invoice ${V.id} created.
Email sent to ${_e==null?void 0:_e.email}.${ke.paymentUrl?`
 Stripe payment link included.`:`
 No Stripe payment link  `+(ke.error||"check STRIPE_SECRET_KEY secret.")}`):alert(`Special assessment of ${Ht(G)} added to Unit ${x}.
Invoice ${V.id} created.
 Email: ${ke.error}`),d(null),A()},St=async()=>{if(!j("amount")||!j("reason")||T.length===0)return alert("Select units, enter amount and reason.");const G=parseFloat(j("amount")),ye=j("reason");ae(!0);let V=0;for(const ke of T){l.addSpecialAssessment(ke,G,ye);const _e=l.createUnitInvoice(ke,"special_assessment",G,`Special Assessment: ${ye}`);(await Me(_e.id,ke)).sent&&V++}ae(!1),alert(`Bulk assessment of ${Ht(G)} applied to ${T.length} units.
 ${V}/${T.length} invoice emails sent.`),d(null),A()},ve=async()=>{if(!j("unitNum")||!j("amount")||!j("description"))return alert("All fields required.");const G=parseFloat(j("amount"));ae(!0),l.addSpecialAssessment(j("unitNum"),G,j("description"));const ye=l.createUnitInvoice(j("unitNum"),"special_assessment",G,j("description")),V=await Me(ye.id,j("unitNum"),G,j("description"));ae(!1);const ke=l.units.find(_e=>_e.number===j("unitNum"));V.sent?alert(` Invoice ${ye.id} sent to ${(ke==null?void 0:ke.owner)||j("unitNum")} (${ke==null?void 0:ke.email}).`):alert(`Invoice ${ye.id} created for ${(ke==null?void 0:ke.owner)||j("unitNum")}.
 Email: ${V.error}`),d(null),A()},Ye=()=>{!j("unitNum")||!j("monthlyFee")||(l.updateUnit(j("unitNum"),{monthlyFee:parseInt(j("monthlyFee"))}),d(null),A())},De=()=>{const G="acct_"+Math.random().toString(36).slice(2,14);l.setStripeConnect(G),alert(`Demo: Connected Account ${G} created.`)},et=()=>{l.setStripeOnboarding(!0),alert("Demo: Onboarding complete.")},qe=(G,ye,V="text",ke="")=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:G}),e.jsx("input",{type:V,value:j(ye),onChange:_e=>q(ye,_e.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:ke})]}),Zt=G=>l.unitInvoices.filter(ye=>ye.unitNumber===G);return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:`rounded-xl border-2 px-5 py-4 flex items-center justify-between flex-wrap gap-3 ${U?"bg-sage-50 border-sage-200":l.stripeConnectId?"bg-amber-50 border-amber-200":"bg-indigo-50 border-indigo-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-6 h-6 text-indigo-600 shrink-0",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M13.976 9.15c-2.172-.806-3.356-1.426-3.356-2.409 0-.831.683-1.305 1.901-1.305 2.227 0 4.515.858 6.09 1.631l.89-5.494C18.252.975 15.697 0 12.165 0 9.667 0 7.589.654 6.104 1.872 4.56 3.147 3.757 4.992 3.757 7.218c0 4.039 2.467 5.76 6.476 7.219 2.585.92 3.445 1.574 3.445 2.583 0 .98-.84 1.545-2.354 1.545-1.875 0-4.965-.921-6.99-2.109l-.9 5.555C5.175 22.99 8.385 24 11.714 24c2.641 0 4.843-.624 6.328-1.813 1.664-1.305 2.525-3.236 2.525-5.732 0-4.128-2.524-5.851-6.591-7.305z"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${U?"bg-sage-500":l.stripeConnectId?"bg-amber-500 animate-pulse":"bg-ink-300"}`}),e.jsx("span",{className:"text-sm font-semibold text-ink-900",children:U?"Stripe Connected":l.stripeConnectId?"Onboarding Incomplete":"Stripe Not Connected"})]}),l.stripeConnectId&&e.jsx("p",{className:"text-[10px] text-ink-400 font-mono mt-0.5",children:l.stripeConnectId})]})]}),e.jsxs("div",{className:"flex gap-2",children:[!l.stripeConnectId&&e.jsx("button",{onClick:De,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700",children:"Connect Stripe "}),l.stripeConnectId&&!l.stripeOnboardingComplete&&e.jsx("button",{onClick:et,className:"px-4 py-2 bg-amber-600 text-white rounded-lg text-sm font-medium hover:bg-amber-700",children:"Complete Onboarding "}),U&&e.jsx("button",{onClick:()=>window.open("https://dashboard.stripe.com","_blank"),className:"px-3 py-2 bg-white border border-ink-200 text-ink-700 rounded-lg text-xs font-medium hover:bg-ink-50",children:"Dashboard "}),e.jsx("button",{onClick:()=>d("stripe"),className:"px-3 py-2 bg-white border border-ink-200 text-ink-700 rounded-lg text-xs font-medium hover:bg-ink-50",children:"Details"})]})]}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-3",children:[{val:String(F),label:"Total Units",color:"text-ink-900"},{val:String(ne),label:"Current",color:"text-sage-600"},{val:String(K),label:"Behind",color:K>0?"text-yellow-600":"text-sage-600"},{val:String(ie),label:"Delinquent",color:ie>0?"text-red-600":"text-sage-600"},{val:Ht(he+B),label:"Total Receivable",color:he>0?"text-red-600":"text-sage-600"},{val:Ht(pe),label:"Monthly Revenue",color:"text-ink-900"}].map(G=>e.jsxs("div",{className:"bg-mist-50 rounded-lg p-3 border border-mist-100",children:[e.jsx("p",{className:`text-lg font-bold ${G.color}`,children:G.val}),e.jsx("p",{className:"text-[11px] text-ink-400",children:G.label})]},G.label))}),o&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>{A(),q("dueDay",String(l.hoaDueDay)),d("editDueDay")},className:"px-3 py-2 bg-white border border-ink-200 text-ink-700 rounded-lg text-xs font-medium hover:bg-ink-50",children:" Due Day"}),e.jsx("button",{onClick:()=>{A(),d("editMonthly")},className:"px-3 py-2 bg-white border border-ink-200 text-ink-700 rounded-lg text-xs font-medium hover:bg-ink-50",children:" Edit Monthly Fee"}),e.jsx("button",{onClick:()=>{A(),y(z.map(G=>G.number)),d("bulkAssessment")},className:"px-3 py-2 bg-amber-600 text-white rounded-lg text-xs font-medium hover:bg-amber-700",children:" Bulk Assessment"}),U&&e.jsx("button",{onClick:()=>{A(),d("sendInvoice")},className:"px-3 py-2 bg-indigo-600 text-white rounded-lg text-xs font-medium hover:bg-indigo-700",children:" Send Invoice"}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{onClick:()=>{A(),q("status","VACANT"),d("addUnit")},className:"px-3 py-2 bg-ink-900 text-white rounded-lg text-xs font-medium hover:bg-ink-800",children:"+ Add Unit"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[e.jsx("input",{value:f,onChange:G=>g(G.target.value),placeholder:"Search units, owners, email...",className:"flex-1 min-w-[200px] px-3 py-2 border border-ink-200 rounded-lg text-sm"}),e.jsx("div",{className:"flex gap-1.5",children:["all","current","behind","delinquent","vacant"].map(G=>e.jsxs("button",{onClick:()=>R(G),className:`px-3 py-1.5 rounded-lg text-xs font-semibold border transition-colors ${v===G?"border-ink-900 bg-ink-900 text-white":"border-ink-200 text-ink-500 hover:border-ink-300"}`,children:[G==="all"?"All":G==="behind"?"Behind":G.charAt(0).toUpperCase()+G.slice(1),G!=="all"&&I[G]>0&&e.jsx("span",{className:"ml-1 text-[10px] opacity-70",children:I[G]})]},G))}),e.jsxs("select",{value:O,onChange:G=>N(G.target.value),className:"px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"number",children:"Sort: Unit #"}),e.jsx("option",{value:"owner",children:"Sort: Owner"}),e.jsx("option",{value:"balance",children:"Sort: Balance"}),e.jsx("option",{value:"accountStatus",children:"Sort: Status"})]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-ink-200 text-left",children:[e.jsx("th",{className:"py-3 px-3 text-xs font-semibold text-ink-500 uppercase tracking-wider",children:"Unit"}),e.jsx("th",{className:"py-3 px-3 text-xs font-semibold text-ink-500 uppercase tracking-wider",children:"Owner"}),e.jsx("th",{className:"py-3 px-3 text-xs font-semibold text-ink-500 uppercase tracking-wider",children:"Monthly"}),e.jsx("th",{className:"py-3 px-3 text-xs font-semibold text-ink-500 uppercase tracking-wider",children:"Balance"}),e.jsx("th",{className:"py-3 px-3 text-xs font-semibold text-ink-500 uppercase tracking-wider",children:"Fees / SA"}),e.jsx("th",{className:"py-3 px-3 text-xs font-semibold text-ink-500 uppercase tracking-wider",children:"Account Status"}),e.jsx("th",{className:"py-3 px-3 text-xs font-semibold text-ink-500 uppercase tracking-wider",children:"Last Payment"}),o&&e.jsx("th",{className:"py-3 px-3 text-xs font-semibold text-ink-500 uppercase tracking-wider text-right",children:"Actions"})]})}),e.jsx("tbody",{children:L.map(G=>{const ye=Zl(G),V=G.lateFees.filter(we=>!we.waived).length,ke=G.specialAssessments.filter(we=>!we.paid).length,_e=G.payments.length>0?[...G.payments].sort((we,tt)=>tt.date.localeCompare(we.date))[0]:null;return e.jsxs("tr",{className:`border-b border-ink-50 hover:bg-mist-50 transition-colors ${ye.sortOrder>=3&&G.status!=="VACANT"?"bg-red-50 bg-opacity-30":ye.sortOrder>=1&&G.status!=="VACANT"?"bg-yellow-50 bg-opacity-20":""}`,children:[e.jsx("td",{className:"py-3 px-3",children:e.jsx("button",{onClick:()=>w(G.number),className:"font-bold text-accent-600 hover:text-accent-700",children:G.number})}),e.jsx("td",{className:"py-3 px-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-ink-900",children:G.owner}),e.jsx("p",{className:"text-xs text-ink-400",children:G.email})]})}),e.jsx("td",{className:"py-3 px-3 font-medium text-ink-900",children:Ht(G.monthlyFee)}),e.jsx("td",{className:"py-3 px-3",children:e.jsx("span",{className:`font-bold ${G.balance>0?"text-red-600":"text-sage-600"}`,children:Ht(G.balance)})}),e.jsx("td",{className:"py-3 px-3",children:e.jsxs("div",{className:"flex gap-1",children:[V>0&&e.jsxs("span",{className:"text-[10px] bg-red-100 text-red-700 px-1.5 py-0.5 rounded font-semibold",children:[V," fee",V>1?"s":""]}),ke>0&&e.jsxs("span",{className:"text-[10px] bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded font-semibold",children:[ke," SA"]}),V===0&&ke===0&&e.jsx("span",{className:"text-ink-300",children:""})]})}),e.jsx("td",{className:"py-3 px-3",children:e.jsx("span",{className:`text-[10px] font-semibold uppercase px-2 py-0.5 rounded ${ye.color}`,children:ye.label})}),e.jsx("td",{className:"py-3 px-3 text-xs text-ink-400",children:_e?`${_e.date}  ${_e.method}`:""}),o&&e.jsx("td",{className:"py-3 px-3 text-right",children:e.jsx(vv,{unitNum:G.number,onEdit:()=>M(G.number),onPay:()=>ce(G.number),onFee:()=>E(G.number),onSpecial:()=>J(G.number)})})]},G.number)})})]}),L.length===0&&e.jsx("p",{className:"text-center py-8 text-sm text-ink-400",children:"No units match filters."})]}),e.jsxs("p",{className:"text-xs text-ink-400",children:[L.length," unit",L.length!==1?"s":""," shown",v!=="all"?` (${v})`:""]}),u==="detail"&&H&&(()=>{const G=M0(m,H.number),ye=Zt(H.number);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>d(null),children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:V=>V.stopPropagation(),children:[e.jsxs("div",{className:"border-b p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("h2",{className:"text-xl font-bold text-ink-900",children:["Unit ",H.number]}),e.jsx("span",{className:`text-[10px] font-semibold uppercase px-2 py-0.5 rounded ${Zl(H).color}`,children:Zl(H).label})]}),e.jsxs("p",{className:"text-sm text-ink-400",children:[H.owner,"  ",H.email]}),e.jsx("p",{className:"text-xs text-ink-300 mt-1",children:G})]}),e.jsxs("div",{className:"flex gap-2",children:[o&&e.jsx("button",{onClick:()=>M(H.number),className:"px-3 py-1.5 border border-ink-200 text-ink-600 rounded-lg text-xs font-medium hover:bg-ink-50",children:"Edit"}),e.jsx("button",{onClick:()=>d(null),className:"text-ink-400 hover:text-ink-600 text-xl",children:""})]})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"Monthly Fee",val:Ht(H.monthlyFee)},{label:"Balance",val:Ht(H.balance),red:H.balance>0},{label:"Sq Ft",val:String(H.sqft)},{label:"Bedrooms",val:String(H.bedrooms)}].map(V=>e.jsxs("div",{className:"bg-mist-50 rounded-lg p-3 border border-mist-100",children:[e.jsx("p",{className:"text-[11px] text-ink-400",children:V.label}),e.jsx("p",{className:`text-lg font-bold ${V.red?"text-red-600":"text-ink-900"}`,children:V.val})]},V.label))}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-ink-400",children:"Status:"})," ",e.jsx("span",{className:"font-medium",children:H.status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-ink-400",children:"Move-in:"})," ",e.jsx("span",{className:"font-medium",children:H.moveIn||""})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-ink-400",children:"Parking:"})," ",e.jsx("span",{className:"font-medium",children:H.parking||""})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-bold text-ink-800",children:"Late Fees & Fines"}),o&&e.jsx("button",{onClick:()=>E(H.number),className:"text-xs text-red-600 font-medium",children:"+ Impose Fee"})]}),H.lateFees.length===0?e.jsx("p",{className:"text-xs text-ink-400 bg-mist-50 rounded-lg p-3",children:"No fees."}):e.jsx("div",{className:"space-y-1.5",children:H.lateFees.map((V,ke)=>e.jsxs("div",{className:`flex items-center justify-between p-2.5 rounded-lg border ${V.waived?"bg-ink-50 border-ink-100 opacity-50":"bg-red-50 border-red-100"}`,children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-sm font-medium ${V.waived?"line-through text-ink-400":"text-ink-900"}`,children:Ht(V.amount)}),e.jsx("span",{className:"text-xs text-ink-400 ml-2",children:V.reason}),e.jsx("span",{className:"text-xs text-ink-300 ml-2",children:V.date})]}),!V.waived&&o&&e.jsx("button",{onClick:()=>l.waiveLateFee(H.number,ke),className:"text-xs text-sage-600 font-medium",children:"Waive"}),V.waived&&e.jsx("span",{className:"text-[10px] text-sage-500 font-semibold",children:"WAIVED"})]},ke))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-bold text-ink-800",children:"Special Assessments"}),o&&e.jsx("button",{onClick:()=>J(H.number),className:"text-xs text-amber-600 font-medium",children:"+ Add Assessment"})]}),H.specialAssessments.length===0?e.jsx("p",{className:"text-xs text-ink-400 bg-mist-50 rounded-lg p-3",children:"No special assessments."}):e.jsx("div",{className:"space-y-1.5",children:H.specialAssessments.map(V=>e.jsxs("div",{className:`flex items-center justify-between p-2.5 rounded-lg border ${V.paid?"bg-sage-50 border-sage-100":"bg-amber-50 border-amber-100"}`,children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-sm font-medium ${V.paid?"text-sage-700":"text-ink-900"}`,children:Ht(V.amount)}),e.jsx("span",{className:"text-xs text-ink-400 ml-2",children:V.reason}),e.jsx("span",{className:"text-xs text-ink-300 ml-2",children:V.date})]}),V.paid?e.jsxs("span",{className:"text-[10px] text-sage-600 font-semibold",children:["PAID ",V.paidDate]}):o?e.jsx("button",{onClick:()=>l.markSpecialAssessmentPaid(H.number,V.id),className:"px-2.5 py-1 bg-sage-600 text-white rounded text-xs font-medium hover:bg-sage-700",children:"Mark Paid"}):e.jsx("span",{className:"text-[10px] text-amber-600 font-semibold",children:"OUTSTANDING"})]},V.id))})]}),ye.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-ink-800 mb-2",children:"Invoices"}),e.jsx("div",{className:"space-y-1.5",children:ye.map(V=>e.jsxs("div",{className:`flex items-center justify-between p-2.5 rounded-lg border ${V.status==="paid"?"bg-sage-50 border-sage-100":"bg-white border-ink-100"}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-mono text-ink-400",children:V.id}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-semibold ${V.status==="paid"?"bg-sage-100 text-sage-700":V.status==="overdue"?"bg-red-100 text-red-700":"bg-accent-100 text-accent-700"}`,children:V.status.toUpperCase()})]}),e.jsx("p",{className:"text-xs text-ink-600 mt-0.5",children:V.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-bold text-ink-900",children:Ht(V.amount)}),e.jsx("p",{className:"text-[10px] text-ink-400",children:V.createdDate})]})]},V.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-bold text-ink-800",children:"Payment History"}),o&&e.jsx("button",{onClick:()=>ce(H.number),className:"text-xs text-sage-600 font-medium",children:"+ Record Payment"})]}),H.payments.length===0?e.jsx("p",{className:"text-xs text-ink-400 bg-mist-50 rounded-lg p-3",children:"No payments recorded."}):e.jsx("div",{className:"space-y-1",children:[...H.payments].reverse().map((V,ke)=>e.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-mist-50 rounded-lg border border-mist-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sage-500",children:""}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-ink-900",children:Ht(V.amount)}),e.jsxs("span",{className:"text-xs text-ink-400 ml-2",children:["via ",V.method]}),V.note&&e.jsx("span",{className:"text-xs text-ink-300 ml-2",children:V.note})]})]}),e.jsx("span",{className:"text-xs text-ink-400",children:V.date})]},ke))})]})]})]})})})(),u==="addUnit"&&e.jsx(Te,{title:"Add Unit",onClose:()=>{d(null),A()},onSave:Q,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[qe("Unit Number *","number","text","e.g., 601"),qe("Monthly Fee *","monthlyFee","number","450")]}),e.jsxs("p",{className:"text-xs text-ink-400 bg-mist-50 rounded-lg p-2",children:["Address: ",m.address.street,", Unit ",j("number")||"___",", ",m.address.city,", ",m.address.state," ",m.address.zip]}),qe("Owner Name","owner","text","Owner name or Vacant"),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[qe("Email","email","email"),qe("Phone","phone")]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[qe("Sq Ft","sqft","number"),qe("Bedrooms","bedrooms","number"),qe("Parking","parking","text","P-601")]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Status"}),e.jsxs("select",{value:j("status"),onChange:G=>q("status",G.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"VACANT",children:"Vacant"}),e.jsx("option",{value:"OCCUPIED",children:"Occupied"})]})]}),qe("Voting %","votingPct","number","2.1")]}),qe("Move-in Date","moveIn","date")]})}),u==="editUnit"&&e.jsx(Te,{title:`Edit Unit ${x}`,onClose:()=>{d(null),A()},onSave:xe,children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-ink-400 bg-mist-50 rounded-lg p-2",children:M0(m,x||"")}),qe("Owner Name","owner"),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[qe("Email","email","email"),qe("Phone","phone")]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[qe("Monthly Fee","monthlyFee","number"),qe("Voting %","votingPct","number")]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[qe("Sq Ft","sqft","number"),qe("Bedrooms","bedrooms","number"),qe("Parking","parking")]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Status"}),e.jsxs("select",{value:j("status"),onChange:G=>q("status",G.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"OCCUPIED",children:"Occupied"}),e.jsx("option",{value:"VACANT",children:"Vacant"})]})]}),qe("Move-in Date","moveIn","date")]}),o&&e.jsx("div",{className:"pt-2 border-t",children:e.jsx("button",{onClick:()=>{confirm(`Delete unit ${x}?`)&&(l.removeUnit(x),d(null),A())},className:"text-xs text-red-500 hover:text-red-700 font-medium",children:"Delete this unit"})})]})}),u==="pay"&&e.jsx(Te,{title:`Record Payment  Unit ${x}`,onClose:()=>{d(null),A()},onSave:Se,children:e.jsxs("div",{className:"space-y-3",children:[qe("Amount *","amount","number",H?String(H.balance):""),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Method"}),e.jsxs("select",{value:j("method")||"ACH",onChange:G=>q("method",G.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"ACH",children:"ACH / Bank Transfer"}),e.jsx("option",{value:"check",children:"Check"}),U&&e.jsx("option",{value:"stripe",children:"Stripe (Online)"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"wire",children:"Wire Transfer"})]})]})]})}),u==="fee"&&e.jsx(Te,{title:`Impose Fee  Unit ${x}`,onClose:()=>{d(null),A()},onSave:Ae,saveLabel:b?"Sending...":"Save",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-ink-500 bg-amber-50 rounded-lg p-3 border border-amber-100",children:"A fee invoice will be created, recorded in the GL, and emailed to the unit owner."}),qe("Amount *","amount","number","25"),qe("Reason *","reason","text","e.g., Late payment  Feb 2026"),b&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-accent-600",children:[e.jsx("span",{className:"animate-spin",children:""})," Sending invoice email..."]})]})}),u==="special"&&e.jsx(Te,{title:`Special Assessment  Unit ${x}`,onClose:()=>{d(null),A()},onSave:ot,saveLabel:b?"Sending...":"Save",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-ink-500 bg-amber-50 rounded-lg p-3 border border-amber-100",children:"A special assessment invoice will be created, recorded in the GL, and emailed to the unit owner with a Stripe payment link."}),qe("Amount *","amount","number","500"),qe("Reason *","reason","text","e.g., Roof emergency repair assessment"),b&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-accent-600",children:[e.jsx("span",{className:"animate-spin",children:""})," Sending invoice email..."]})]})}),u==="editDueDay"&&e.jsx(Te,{title:"Assessment Due Day",onClose:()=>{d(null),A()},onSave:()=>{l.setHoaDueDay(parseInt(j("dueDay"))||1),d(null),A()},children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-ink-500",children:"Set the day of the month when monthly assessments are due."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Due Day (1-28)"}),e.jsx("input",{type:"number",min:"1",max:"28",value:j("dueDay"),onChange:G=>q("dueDay",G.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]})]})}),u==="editMonthly"&&e.jsx(Te,{title:"Edit Unit Monthly Fee",onClose:()=>{d(null),A()},onSave:Ye,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Select Unit"}),e.jsxs("select",{value:j("unitNum"),onChange:G=>{q("unitNum",G.target.value);const ye=l.units.find(V=>V.number===G.target.value);ye&&q("monthlyFee",String(ye.monthlyFee))},className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Select unit..."}),l.units.map(G=>e.jsxs("option",{value:G.number,children:["Unit ",G.number,"  ",G.owner," (",Ht(G.monthlyFee),")"]},G.number))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"New Monthly Fee"}),e.jsx("input",{type:"number",value:j("monthlyFee"),onChange:G=>q("monthlyFee",G.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]})]})}),u==="bulkAssessment"&&e.jsx(Te,{title:"Bulk Special Assessment",onClose:()=>{d(null),A()},onSave:St,saveLabel:"Apply Assessment",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-ink-500 bg-amber-50 rounded-lg p-3 border border-amber-100",children:"Apply a one-time special assessment to multiple units. Invoices will be created for each unit and recorded in the GL."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Amount per unit *"}),e.jsx("input",{type:"number",value:j("amount"),onChange:G=>q("amount",G.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Reason *"}),e.jsx("input",{value:j("reason"),onChange:G=>q("reason",G.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"e.g., Roof emergency repair"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("label",{className:"text-xs font-medium text-ink-700",children:["Apply to units (",T.length," selected)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>y(z.map(G=>G.number)),className:"text-[10px] text-accent-600 font-medium",children:"All Occupied"}),e.jsx("button",{type:"button",onClick:()=>y([]),className:"text-[10px] text-ink-400 font-medium",children:"Clear"})]})]}),e.jsx("div",{className:"max-h-40 overflow-y-auto border border-ink-200 rounded-lg divide-y divide-ink-50",children:l.units.filter(G=>G.status==="OCCUPIED").map(G=>e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 hover:bg-mist-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:T.includes(G.number),onChange:ye=>{ye.target.checked?y(V=>[...V,G.number]):y(V=>V.filter(ke=>ke!==G.number))},className:"rounded"}),e.jsx("span",{className:"text-xs font-medium text-ink-700",children:G.number}),e.jsx("span",{className:"text-xs text-ink-400",children:G.owner})]},G.number))})]}),j("amount")&&T.length>0&&e.jsx("div",{className:"bg-white border border-ink-200 rounded-lg p-3 text-center",children:e.jsxs("p",{className:"text-xs text-ink-500",children:["Total: ",e.jsx("strong",{className:"text-ink-900",children:Ht(parseFloat(j("amount"))*T.length)})," across ",T.length," units"]})})]})}),u==="sendInvoice"&&e.jsx(Te,{title:"Send Payment Invoice",onClose:()=>{d(null),A()},onSave:ve,saveLabel:"Send Invoice",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-ink-500 bg-indigo-50 rounded-lg p-3 border border-indigo-100",children:"Create an invoice and email the payment link to the unit owner. Recorded in GL."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Unit *"}),e.jsxs("select",{value:j("unitNum"),onChange:G=>q("unitNum",G.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Select unit..."}),l.units.filter(G=>G.status==="OCCUPIED").map(G=>e.jsxs("option",{value:G.number,children:["Unit ",G.number,"  ",G.owner]},G.number))]})]}),qe("Amount *","amount","number","500"),qe("Description *","description","text","e.g., Window replacement  Unit 301")]})}),u==="stripe"&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>d(null),children:e.jsxs("div",{className:"bg-white rounded-xl max-w-lg w-full",onClick:G=>G.stopPropagation(),children:[e.jsx("div",{className:"border-b p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-8 h-8 text-indigo-600",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M13.976 9.15c-2.172-.806-3.356-1.426-3.356-2.409 0-.831.683-1.305 1.901-1.305 2.227 0 4.515.858 6.09 1.631l.89-5.494C18.252.975 15.697 0 12.165 0 9.667 0 7.589.654 6.104 1.872 4.56 3.147 3.757 4.992 3.757 7.218c0 4.039 2.467 5.76 6.476 7.219 2.585.92 3.445 1.574 3.445 2.583 0 .98-.84 1.545-2.354 1.545-1.875 0-4.965-.921-6.99-2.109l-.9 5.555C5.175 22.99 8.385 24 11.714 24c2.641 0 4.843-.624 6.328-1.813 1.664-1.305 2.525-3.236 2.525-5.732 0-4.128-2.524-5.851-6.591-7.305z"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-ink-900",children:"Stripe Connect"}),e.jsxs("p",{className:"text-sm text-ink-400",children:["Payment processing for ",m.name]})]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:`rounded-xl p-4 border ${U?"bg-sage-50 border-sage-200":l.stripeConnectId?"bg-amber-50 border-amber-200":"bg-mist-50 border-mist-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`w-2.5 h-2.5 rounded-full ${U?"bg-sage-500":l.stripeConnectId?"bg-amber-500 animate-pulse":"bg-ink-300"}`}),e.jsx("span",{className:"text-sm font-bold text-ink-900",children:U?"Connected & Active":l.stripeConnectId?"Onboarding Incomplete":"Not Connected"})]}),l.stripeConnectId&&e.jsxs("p",{className:"text-xs text-ink-400 font-mono",children:["Account: ",l.stripeConnectId]})]}),e.jsxs("div",{className:"flex gap-3",children:[l.stripeConnectId?l.stripeOnboardingComplete?e.jsx("button",{onClick:()=>window.open("https://dashboard.stripe.com","_blank"),className:"flex-1 px-4 py-3 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 text-sm",children:"Open Stripe Dashboard "}):e.jsx("button",{onClick:et,className:"flex-1 px-4 py-3 bg-amber-600 text-white rounded-lg font-semibold hover:bg-amber-700 text-sm",children:"Complete Onboarding "}):e.jsx("button",{onClick:De,className:"flex-1 px-4 py-3 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 text-sm",children:"Connect with Stripe "}),e.jsx("button",{onClick:()=>d(null),className:"px-4 py-3 border border-ink-200 text-ink-600 rounded-lg font-medium text-sm hover:bg-ink-50",children:"Close"})]})]})]})})]})}const ld=[{key:"bylaws",name:"Condominium Bylaws",required:!0,legalRef:"DC Code  29-1105.02",desc:"Governs the internal affairs of the association. Must be recorded with the deed."},{key:"ccrs",name:"CC&Rs / Declaration",required:!0,legalRef:"DC Code  29-1105.01",desc:"Covenants, conditions, and restrictions that bind all unit owners."},{key:"master-deed",name:"Master Deed / Plat",required:!0,legalRef:"DC Code  29-1103",desc:"Legal instrument creating the condominium. Filed with the recorder of deeds."},{key:"articles",name:"Articles of Incorporation",required:!0,legalRef:"DC Code  29-1101",desc:"Establishes the association as a legal entity."},{key:"rules",name:"Rules & Regulations",required:!0,legalRef:"DC Code  29-1105.02(a)(10)",desc:"Day-to-day rules adopted by the board. Must be consistent with bylaws and CC&Rs."},{key:"collection",name:"Collection Policy",required:!0,legalRef:"DC Code  29-1135.03",desc:"Written policy for assessment collection, late fees, and lien procedures."},{key:"reserve-study",name:"Reserve Study",required:!0,legalRef:"DC Code  29-1135.03(b)",desc:"Professional analysis of building component lifespans and funding needs. Update every 3-5 years."},{key:"arch-standards",name:"Architectural Standards",required:!1,legalRef:"Best Practice",desc:"Guidelines for unit modifications, renovations, and alterations."},{key:"pet-policy",name:"Pet Policy",required:!1,legalRef:"Best Practice",desc:"Rules governing pet ownership, breeds, and common area access."},{key:"move-in-out",name:"Move-In/Move-Out Policy",required:!1,legalRef:"Best Practice",desc:"Procedures, deposits, scheduling, and damage responsibilities for moves."},{key:"conflict-policy",name:"Conflict of Interest Policy",required:!1,legalRef:"DC Code  29-406.70",desc:"Requires board members to disclose and manage conflicts of interest."},{key:"doc-retention",name:"Document Retention Policy",required:!1,legalRef:"Best Practice",desc:"Specifies how long to retain financial, legal, and administrative records (typically 7+ years)."},{key:"emergency-plan",name:"Emergency Preparedness Plan",required:!1,legalRef:"Best Practice",desc:"Evacuation routes, emergency contacts, and disaster response procedures."}];function Jl(l,m,i){const o=i.toLowerCase();return l.find(u=>u.name.toLowerCase().includes(o.split("/")[0].trim().toLowerCase().replace("condominium ","").replace(" policy","")))}function jv({store:l,openAdd:m,openEdit:i,isBoard:o}){const u=l.legalDocuments,d=l.address.state,x=ld.filter(_=>_.required),p=ld.filter(_=>!_.required);x.filter(_=>Jl(u,_.key,_.name));const f=x.filter(_=>{const T=Jl(u,_.key,_.name);return T&&T.status==="current"}),g=p.filter(_=>Jl(u,_.key,_.name)),v=x.length>0?Math.round(f.length/x.length*100):100,R=p.length>0?Math.round(g.length/p.length*100):100,O=Math.round(v*.8+R*.2),N=O>=90?"A":O>=80?"B":O>=70?"C":O>=60?"D":"F",P=O>=80?"sage":O>=60?"yellow":"red";return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:`bg-gradient-to-br from-${P}-50 to-${P}-100 border-2 border-${P}-200 rounded-xl p-5`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-xl font-bold text-ink-900",children:" Legal & Bylaws Compliance"}),e.jsxs("p",{className:"text-sm text-ink-500 mt-0.5",children:["Based on ",e.jsx("strong",{children:d})," condominium law and HOA best practices"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-4xl font-bold text-${P}-600`,children:N}),e.jsxs("p",{className:`text-sm font-bold text-${P}-600`,children:[O,"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-ink-100",children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Required Documents"}),e.jsxs("p",{className:"text-lg font-bold text-ink-900",children:[f.length,e.jsxs("span",{className:"text-sm font-normal text-ink-400",children:["/",x.length]})]}),e.jsx("div",{className:"mt-1.5 h-2 bg-ink-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-${P}-500 rounded-full`,style:{width:`${v}%`}})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-ink-100",children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Optional / Best Practice"}),e.jsxs("p",{className:"text-lg font-bold text-ink-900",children:[g.length,e.jsxs("span",{className:"text-sm font-normal text-ink-400",children:["/",p.length]})]}),e.jsx("div",{className:"mt-1.5 h-2 bg-ink-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-accent-400 rounded-full",style:{width:`${R}%`}})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-ink-100",children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Review Due"}),e.jsx("p",{className:`text-lg font-bold ${u.filter(_=>_.status==="review-due").length>0?"text-yellow-600":"text-sage-600"}`,children:u.filter(_=>_.status==="review-due").length}),e.jsx("p",{className:"text-[11px] text-ink-400 mt-1",children:"documents need attention"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-bold text-ink-800 uppercase tracking-wider",children:"Required by Law"}),e.jsxs("span",{className:"text-xs text-ink-400",children:[d," Condominium Act"]})]}),e.jsx("div",{className:"space-y-2",children:x.map(_=>{const T=Jl(u,_.key,_.name),y=!!T,j=(T==null?void 0:T.status)==="current";return e.jsx("div",{className:`rounded-xl border p-4 transition-all ${y?j?"border-sage-200 bg-sage-50 bg-opacity-40":"border-yellow-200 bg-yellow-50 bg-opacity-40":"border-red-200 bg-red-50 bg-opacity-40"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center shrink-0 mt-0.5 text-sm font-bold ${y?j?"bg-sage-500 text-white":"bg-yellow-500 text-white":"bg-red-200 text-red-600"}`,children:y?j?"":"!":""}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-bold text-ink-900",children:_.name}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-red-100 text-red-600 font-semibold uppercase",children:"Required"}),e.jsx("span",{className:"text-[10px] text-ink-400 font-mono",children:_.legalRef})]}),e.jsx("p",{className:"text-xs text-ink-500 mt-0.5",children:_.desc}),T&&e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded font-semibold ${T.status==="current"?"bg-sage-100 text-sage-700":"bg-yellow-100 text-yellow-700"}`,children:T.status==="current"?" Current":" Review Due"}),e.jsxs("span",{className:"text-[11px] text-ink-400",children:[T.version,"  ",T.size,T.attachments&&T.attachments.length>0?`   ${T.attachments.length} file${T.attachments.length>1?"s":""}`:"   No file attached"]}),e.jsx("button",{onClick:()=>i(T.id,{name:T.name,version:T.version,size:T.size,status:T.status}),className:"text-[11px] text-accent-600 font-medium hover:text-accent-700",children:"Edit"}),e.jsx("button",{onClick:()=>{confirm("Remove?")&&l.removeLegalDocument(T.id)},className:"text-[11px] text-red-400 hover:text-red-600",children:"Remove"})]}),!T&&e.jsx("button",{onClick:m,className:"mt-2 text-xs text-accent-600 font-medium hover:text-accent-700",children:"+ Add this document"})]})]})},_.key)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("h4",{className:"text-sm font-bold text-ink-800 uppercase tracking-wider",children:"Recommended / Best Practice"})}),e.jsx("div",{className:"space-y-2",children:p.map(_=>{const T=Jl(u,_.key,_.name),y=!!T;return e.jsx("div",{className:`rounded-xl border p-4 transition-all ${y?"border-sage-200 bg-white":"border-ink-100 bg-white"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center shrink-0 mt-0.5 text-sm font-bold ${y?"bg-sage-500 text-white":"bg-ink-100 text-ink-400"}`,children:y?"":""}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-bold text-ink-900",children:_.name}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-ink-100 text-ink-500 font-semibold uppercase",children:"Optional"}),_.legalRef!=="Best Practice"&&e.jsx("span",{className:"text-[10px] text-ink-400 font-mono",children:_.legalRef})]}),e.jsx("p",{className:"text-xs text-ink-500 mt-0.5",children:_.desc}),T&&e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded font-semibold ${T.status==="current"?"bg-sage-100 text-sage-700":"bg-yellow-100 text-yellow-700"}`,children:T.status==="current"?" Current":" Review Due"}),e.jsxs("span",{className:"text-[11px] text-ink-400",children:[T.version,"  ",T.size,T.attachments&&T.attachments.length>0?`   ${T.attachments.length} file${T.attachments.length>1?"s":""}`:"   No file attached"]}),e.jsx("button",{onClick:()=>i(T.id,{name:T.name,version:T.version,size:T.size,status:T.status}),className:"text-[11px] text-accent-600 font-medium hover:text-accent-700",children:"Edit"}),e.jsx("button",{onClick:()=>{confirm("Remove?")&&l.removeLegalDocument(T.id)},className:"text-[11px] text-red-400 hover:text-red-600",children:"Remove"})]}),!T&&e.jsx("button",{onClick:m,className:"mt-2 text-xs text-ink-400 font-medium hover:text-accent-600",children:"+ Add this document"})]})]})},_.key)})})]}),(()=>{const _=ld.map(y=>y.name.toLowerCase().replace("condominium ","").replace(" policy","").split("/")[0].trim()),T=u.filter(y=>!_.some(j=>y.name.toLowerCase().includes(j)));return T.length===0?null:e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("h4",{className:"text-sm font-bold text-ink-800 uppercase tracking-wider",children:"Additional Documents"})}),e.jsx("div",{className:"space-y-2",children:T.map(y=>e.jsxs("div",{className:"rounded-xl border border-ink-100 bg-white p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-accent-500",children:""}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-ink-900 text-sm",children:y.name}),e.jsxs("p",{className:"text-xs text-ink-500",children:[y.version,"  ",y.size]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded font-semibold ${y.status==="current"?"bg-sage-100 text-sage-700":"bg-yellow-100 text-yellow-700"}`,children:y.status==="current"?" Current":" Review Due"}),e.jsx("button",{onClick:()=>i(y.id,{name:y.name,version:y.version,size:y.size,status:y.status}),className:"text-xs text-accent-600 font-medium",children:"Edit"}),e.jsx("button",{onClick:()=>{confirm("Remove?")&&l.removeLegalDocument(y.id)},className:"text-xs text-red-400 hover:text-red-600",children:"Remove"})]})]},y.id))})]})})(),e.jsx("button",{onClick:m,className:"w-full py-3 border-2 border-dashed border-ink-200 rounded-xl text-sm text-ink-500 hover:border-accent-300 hover:text-accent-600 transition-colors font-medium",children:"+ Add Additional Document"})]})}const kr=[{key:"gl",name:"General Liability",required:!0,legalRef:"DC Code  29-1135.06",desc:"Covers bodily injury and property damage in common areas. Minimum $1M/$2M recommended.",minCoverage:"$1,000,000"},{key:"property",name:"Property / Hazard",required:!0,legalRef:"DC Code  29-1135.06",desc:"Covers the building structure, common elements, and fixtures at 100% replacement cost.",minCoverage:"Full Replacement"},{key:"do",name:"Directors & Officers (D&O)",required:!0,legalRef:"Best Practice / Fannie Mae",desc:"Protects board members from personal liability for decisions made in their official capacity.",minCoverage:"$1,000,000"},{key:"fidelity",name:"Fidelity Bond",required:!0,legalRef:"DC Code  29-1135.06",desc:"Covers theft or misappropriation of association funds by employees, board members, or management.",minCoverage:"3 months assessments"},{key:"workers-comp",name:"Workers Compensation",required:!0,legalRef:"DC Workers Comp Act",desc:"Required if the association has any employees. Covers workplace injuries and illnesses.",minCoverage:"Statutory"},{key:"umbrella",name:"Umbrella / Excess Liability",required:!1,legalRef:"Best Practice",desc:"Provides additional coverage above primary policy limits. Recommended $5M-$10M.",minCoverage:"$5,000,000"},{key:"flood",name:"Flood Insurance",required:!1,legalRef:"FEMA / Lender Req",desc:"Required if building is in a FEMA-designated flood zone. Recommended for all properties.",minCoverage:"Varies"},{key:"earthquake",name:"Earthquake Insurance",required:!1,legalRef:"Best Practice",desc:"Covers damage from seismic events. Not common in DC but may be required by lenders.",minCoverage:"Varies"},{key:"cyber",name:"Cyber Liability",required:!1,legalRef:"Best Practice",desc:"Covers data breaches, ransomware, and cyber incidents affecting owner personal data.",minCoverage:"$500,000"},{key:"equipment",name:"Equipment Breakdown",required:!1,legalRef:"Best Practice",desc:"Covers mechanical/electrical breakdown of elevators, HVAC, boilers, and building systems.",minCoverage:"Varies"}];function Kl(l,m){const i=m.toLowerCase();return l.find(o=>{const u=o.type.toLowerCase();return i.includes("d&o")||i.includes("directors")?u.includes("d&o")||u.includes("directors"):i.includes("general liability")?u.includes("general liability"):i.includes("property")||i.includes("hazard")?u.includes("property")||u.includes("hazard"):i.includes("fidelity")?u.includes("fidelity"):i.includes("workers")?u.includes("workers")||u.includes("worker"):i.includes("umbrella")?u.includes("umbrella")||u.includes("excess"):i.includes("flood")?u.includes("flood"):i.includes("earthquake")?u.includes("earthquake")||u.includes("seismic"):i.includes("cyber")?u.includes("cyber"):i.includes("equipment")?u.includes("equipment")||u.includes("breakdown"):!1})}function id(l){const m=new Date(l),i=new Date,o=Math.floor((m.getTime()-i.getTime())/(1e3*60*60*24));return o<=60&&o>0}function Qa(l){return new Date(l)<new Date}function Nv({store:l,openAdd:m,openEdit:i,isBoard:o}){const u=l.insurance,d=l.address.state,x=kr.filter(y=>y.required),p=kr.filter(y=>!y.required),f=x.filter(y=>{const j=Kl(u,y.name);return j&&!Qa(j.expires)}),g=p.filter(y=>{const j=Kl(u,y.name);return j&&!Qa(j.expires)}),v=u.filter(y=>id(y.expires));u.filter(y=>Qa(y.expires));const R=x.length>0?Math.round(f.length/x.length*100):100,O=p.length>0?Math.round(g.length/p.length*100):100,N=Math.round(R*.8+O*.2),P=N>=90?"A":N>=80?"B":N>=70?"C":N>=60?"D":"F",_=N>=80?"sage":N>=60?"yellow":"red",T=u.reduce((y,j)=>{const q=parseFloat(j.premium.replace(/[^0-9.]/g,""));return y+(isNaN(q)?0:q)},0);return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:`bg-gradient-to-br from-${_}-50 to-${_}-100 border-2 border-${_}-200 rounded-xl p-5`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-xl font-bold text-ink-900",children:" Insurance Compliance"}),e.jsxs("p",{className:"text-sm text-ink-500 mt-0.5",children:["Based on ",e.jsx("strong",{children:d})," condominium law, Fannie Mae, and industry standards"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-4xl font-bold text-${_}-600`,children:P}),e.jsxs("p",{className:`text-sm font-bold text-${_}-600`,children:[N,"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-ink-100",children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Required Policies"}),e.jsxs("p",{className:"text-lg font-bold text-ink-900",children:[f.length,e.jsxs("span",{className:"text-sm font-normal text-ink-400",children:["/",x.length]})]}),e.jsx("div",{className:"mt-1.5 h-2 bg-ink-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-${_}-500 rounded-full`,style:{width:`${R}%`}})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-ink-100",children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Optional Coverage"}),e.jsxs("p",{className:"text-lg font-bold text-ink-900",children:[g.length,e.jsxs("span",{className:"text-sm font-normal text-ink-400",children:["/",p.length]})]}),e.jsx("div",{className:"mt-1.5 h-2 bg-ink-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-accent-400 rounded-full",style:{width:`${O}%`}})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-ink-100",children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Expiring Soon"}),e.jsx("p",{className:`text-lg font-bold ${v.length>0?"text-yellow-600":"text-sage-600"}`,children:v.length}),e.jsx("p",{className:"text-[11px] text-ink-400 mt-1",children:"within 60 days"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-ink-100",children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Annual Premium"}),e.jsxs("p",{className:"text-lg font-bold text-ink-900",children:["$",T.toLocaleString()]}),e.jsx("p",{className:"text-[11px] text-ink-400 mt-1",children:"total coverage cost"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-bold text-ink-800 uppercase tracking-wider",children:"Required Coverage"}),e.jsxs("span",{className:"text-xs text-ink-400",children:[d," law & lending requirements"]})]}),e.jsx("div",{className:"space-y-2",children:x.map(y=>{const j=Kl(u,y.name),q=!!j,A=j?Qa(j.expires):!1,H=j?id(j.expires):!1,U=!q||A?"red":H?"yellow":"sage";return e.jsx("div",{className:`rounded-xl border p-4 transition-all ${U==="sage"?"border-sage-200 bg-sage-50 bg-opacity-40":U==="yellow"?"border-yellow-200 bg-yellow-50 bg-opacity-40":"border-red-200 bg-red-50 bg-opacity-40"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center shrink-0 mt-0.5 text-sm font-bold ${U==="sage"?"bg-sage-500 text-white":U==="yellow"?"bg-yellow-500 text-white":"bg-red-200 text-red-600"}`,children:U==="sage"?"":U==="yellow"?"!":""}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-bold text-ink-900",children:y.name}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-red-100 text-red-600 font-semibold uppercase",children:"Required"}),e.jsx("span",{className:"text-[10px] text-ink-400 font-mono",children:y.legalRef})]}),e.jsx("p",{className:"text-xs text-ink-500 mt-0.5",children:y.desc}),e.jsxs("p",{className:"text-[11px] text-ink-400 mt-0.5",children:["Min coverage: ",e.jsx("strong",{children:y.minCoverage})]}),j&&e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[A&&e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded font-semibold bg-red-100 text-red-700",children:" EXPIRED"}),H&&!A&&e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded font-semibold bg-yellow-100 text-yellow-700",children:"Expiring Soon"}),!A&&!H&&e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded font-semibold bg-sage-100 text-sage-700",children:" Active"}),e.jsxs("span",{className:"text-[11px] text-ink-400",children:[j.carrier,"  ",j.coverage,"  Exp ",j.expires,j.attachments&&j.attachments.length>0?`   ${j.attachments.length} file${j.attachments.length>1?"s":""}`:"   No doc attached"]}),e.jsx("button",{onClick:()=>i(j.id,{type:j.type,carrier:j.carrier,coverage:j.coverage,premium:j.premium,expires:j.expires,policyNum:j.policyNum}),className:"text-[11px] text-accent-600 font-medium hover:text-accent-700",children:"Edit"}),e.jsx("button",{onClick:()=>{confirm("Remove?")&&l.removeInsurance(j.id)},className:"text-[11px] text-red-400 hover:text-red-600",children:"Remove"})]}),!j&&e.jsx("button",{onClick:m,className:"mt-2 text-xs text-accent-600 font-medium hover:text-accent-700",children:"+ Add this policy"})]})]})},y.key)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("h4",{className:"text-sm font-bold text-ink-800 uppercase tracking-wider",children:"Recommended / Optional Coverage"})}),e.jsx("div",{className:"space-y-2",children:p.map(y=>{const j=Kl(u,y.name),q=!!j;return e.jsx("div",{className:`rounded-xl border p-4 transition-all ${q?"border-sage-200 bg-white":"border-ink-100 bg-white"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center shrink-0 mt-0.5 text-sm font-bold ${q?"bg-sage-500 text-white":"bg-ink-100 text-ink-400"}`,children:q?"":""}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-bold text-ink-900",children:y.name}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-ink-100 text-ink-500 font-semibold uppercase",children:"Optional"})]}),e.jsx("p",{className:"text-xs text-ink-500 mt-0.5",children:y.desc}),j&&e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[e.jsxs("span",{className:"text-[11px] text-ink-400",children:[j.carrier,"  ",j.coverage,"  ",j.premium,"  Exp ",j.expires,j.attachments&&j.attachments.length>0?`   ${j.attachments.length}`:""]}),e.jsx("button",{onClick:()=>i(j.id,{type:j.type,carrier:j.carrier,coverage:j.coverage,premium:j.premium,expires:j.expires,policyNum:j.policyNum}),className:"text-[11px] text-accent-600 font-medium hover:text-accent-700",children:"Edit"}),e.jsx("button",{onClick:()=>{confirm("Remove?")&&l.removeInsurance(j.id)},className:"text-[11px] text-red-400 hover:text-red-600",children:"Remove"})]}),!j&&e.jsx("button",{onClick:m,className:"mt-2 text-xs text-ink-400 font-medium hover:text-accent-600",children:"+ Add this policy"})]})]})},y.key)})})]}),(()=>{kr.map(j=>j.name.toLowerCase());const y=u.filter(j=>!kr.some(q=>Kl([j],q.name)));return y.length===0?null:e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-ink-800 uppercase tracking-wider mb-3",children:"Additional Policies"}),e.jsx("div",{className:"space-y-2",children:y.map(j=>e.jsx("div",{className:"rounded-xl border border-ink-100 bg-white p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-ink-900 text-sm",children:j.type}),e.jsxs("div",{className:"flex gap-3 text-xs text-ink-500 mt-1",children:[e.jsx("span",{children:j.carrier}),e.jsx("span",{children:j.coverage}),e.jsx("span",{children:j.premium}),e.jsxs("span",{children:["Exp ",j.expires]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[Qa(j.expires)&&e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded font-semibold bg-red-100 text-red-700",children:"EXPIRED"}),id(j.expires)&&!Qa(j.expires)&&e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded font-semibold bg-yellow-100 text-yellow-700",children:"Expiring"}),e.jsx("button",{onClick:()=>i(j.id,{type:j.type,carrier:j.carrier,coverage:j.coverage,premium:j.premium,expires:j.expires,policyNum:j.policyNum}),className:"text-xs text-accent-600 font-medium",children:"Edit"}),e.jsx("button",{onClick:()=>{confirm("Remove?")&&l.removeInsurance(j.id)},className:"text-xs text-red-400 hover:text-red-600",children:"Remove"})]})]})},j.id))})]})})(),e.jsx("button",{onClick:m,className:"w-full py-3 border-2 border-dashed border-ink-200 rounded-xl text-sm text-ink-500 hover:border-accent-300 hover:text-accent-600 transition-colors font-medium",children:"+ Add Additional Policy"})]})}const O0=["details","contacts","units","legal","insurance","vendors"],kv={details:"Building Details",contacts:"Contacts",units:"The Units",legal:"Legal & Bylaws",insurance:"Insurance",vendors:"Vendors"};function wv(){const l=Ns(),{currentRole:m}=jt(),i=Xt(),o=m==="BOARD_MEMBER"||m==="PROPERTY_MANAGER",[u,d]=C.useState("details"),x=o?O0:O0.filter(I=>I!=="units"),[p,f]=C.useState(null),[g,v]=C.useState(""),[R,O]=C.useState({}),N=I=>R[I]||"",P=(I,w)=>O(M=>({...M,[I]:w})),_=()=>O({}),T=(I,w,M)=>{v(w),O(M),f(I)},y=({label:I,k:w,type:M="text",placeholder:ce=""})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:I}),e.jsx("input",{type:M,value:N(w),onChange:E=>P(w,E.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:ce})]}),j=l.legalDocuments.length,q=l.legalDocuments.filter(I=>I.status==="current").length,A=l.legalDocuments.filter(I=>I.attachments&&I.attachments.length>0).length,H=j>0?Math.round(q/j*60+A/j*40):0,U=l.insurance.length,L=l.insurance.filter(I=>new Date(I.expires)>new Date).length,F=l.insurance.filter(I=>I.attachments&&I.attachments.length>0).length,z=U>0?Math.round(L/U*70+F/U*30):0,ne=l.board.length>=3,K=!!l.management.company,ie=l.legalCounsel.length>0,he=l.vendors.filter(I=>I.status==="active").length>=3,pe=Math.round([ne,K,ie,he].filter(Boolean).length/4*100),Ne=Math.round(H*.35+z*.35+pe*.3),B=Ne>=90?"A":Ne>=80?"B":Ne>=70?"C":Ne>=60?"D":"F";return e.jsxs("div",{className:"space-y-0",children:[e.jsxs("div",{className:"bg-gradient-to-r from-ink-900 via-ink-800 to-accent-800 rounded-t-xl p-8 text-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"font-display text-2xl font-bold",children:[" ",l.name]}),e.jsxs("p",{className:"text-accent-200 text-sm mt-1",children:[l.address.street,", ",l.address.city,", ",l.address.state," ",l.address.zip]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-white",children:B}),e.jsxs("div",{className:"text-accent-200 text-xs",children:["Health ",Ne,"%"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mt-5",children:[{label:"Legal & Bylaws",score:H,detail:`${q}/${j}`,tab:"legal"},{label:"Insurance",score:z,detail:`${L}/${U}`,tab:"insurance"},{label:"Governance",score:pe,detail:`Board ${l.board.length}`,tab:"contacts"},(()=>{const I=i.units.filter(ce=>ce.status==="OCCUPIED"),w=I.filter(ce=>ce.balance>0),M=I.length>0?Math.round(w.length/I.length*100):0;return{label:"Delinquency Rate",score:100-M,detail:`${w.length}/${I.length} units`,tab:"units",displayScore:M}})()].map(I=>e.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-3 text-center cursor-pointer hover:bg-opacity-20",onClick:()=>d(I.tab),children:[e.jsx("p",{className:"text-[11px] text-accent-100 leading-tight",children:I.label}),e.jsx("p",{className:`text-sm font-bold mt-1 ${I.label==="Delinquency Rate"?I.displayScore<=10?"text-green-300":I.displayScore<=25?"text-yellow-300":"text-red-300":I.score>=80?"text-green-300":I.score>=60?"text-yellow-300":"text-red-300"}`,children:I.label==="Delinquency Rate"?`${I.displayScore}%`:`${I.score}%`}),e.jsx("p",{className:"text-[10px] text-accent-300",children:I.detail})]},I.label))})]}),e.jsx("div",{className:"bg-white border-x border-ink-100 border-b overflow-x-auto",children:e.jsx("div",{className:"flex min-w-max px-4",children:x.map(I=>e.jsx("button",{onClick:()=>d(I),className:`px-5 py-3 text-sm font-medium border-b-2 whitespace-nowrap transition-colors ${u===I?"border-ink-900 text-ink-900":"border-transparent text-ink-400 hover:text-ink-700"}`,children:kv[I]},I))})}),e.jsxs("div",{className:"bg-white rounded-b-xl border-x border-b border-ink-100 p-6",children:[u==="contacts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-display text-xl font-bold text-ink-900",children:"Board of Directors"}),e.jsx("button",{onClick:()=>{_(),f("addBoard")},className:"px-4 py-2 bg-ink-900 text-white rounded-lg hover:bg-ink-800 text-sm font-medium",children:"+ Add Member"})]}),e.jsx("div",{className:"space-y-3",children:l.board.map(I=>e.jsx("div",{className:"bg-accent-50 rounded-xl p-5 border border-accent-200 hover:shadow-sm transition-all",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-14 w-14 rounded-full bg-ink-900 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"text-white font-bold text-lg",children:ti(I.name)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-bold text-ink-900",children:I.name}),e.jsx("p",{className:"text-sm text-accent-600 font-semibold",children:I.role}),e.jsxs("p",{className:"text-xs text-ink-500",children:["Term: ",I.term]}),e.jsxs("div",{className:"flex gap-4 mt-2 text-sm text-ink-700",children:[e.jsxs("span",{children:[" ",I.email]}),e.jsxs("span",{children:[" ",I.phone]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>T("editBoard",I.id,{name:I.name,role:I.role,email:I.email,phone:I.phone,term:I.term}),className:"text-xs text-accent-600 hover:text-accent-700 font-medium",children:"Edit"}),e.jsx("button",{onClick:()=>{confirm(`Remove ${I.name}?`)&&l.removeBoardMember(I.id)},className:"text-xs text-red-400 hover:text-red-600",children:"Remove"})]})]})},I.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-display text-xl font-bold text-ink-900",children:"Property Management"}),e.jsx("button",{onClick:()=>{O({company:l.management.company,contact:l.management.contact,title:l.management.title,email:l.management.email,phone:l.management.phone,emergency:l.management.emergency,address:l.management.address,hours:l.management.hours}),f("editMgmt")},className:"text-sm text-accent-600 font-medium hover:text-accent-700",children:"Edit"})]}),e.jsxs("div",{className:"bg-sage-50 rounded-xl p-5 border border-sage-200",children:[e.jsx("h4",{className:"text-lg font-bold text-ink-900",children:l.management.company}),e.jsxs("p",{className:"text-sm text-sage-600 font-semibold",children:[l.management.contact,"  ",l.management.title]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-ink-400",children:"Email:"})," ",e.jsx("span",{className:"text-ink-700",children:l.management.email})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-ink-400",children:"Phone:"})," ",e.jsx("span",{className:"text-ink-700",children:l.management.phone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-ink-400",children:"Emergency:"})," ",e.jsx("span",{className:"text-red-600 font-semibold",children:l.management.emergency})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-ink-400",children:"Hours:"})," ",e.jsx("span",{className:"text-ink-700",children:l.management.hours})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-display text-xl font-bold text-ink-900",children:"Legal Counsel"}),e.jsx("button",{onClick:()=>{_(),f("addCounsel")},className:"px-4 py-2 bg-ink-900 text-white rounded-lg hover:bg-ink-800 text-sm font-medium",children:"+ Add Counsel"})]}),l.legalCounsel.map(I=>e.jsx("div",{className:"bg-mist-50 rounded-xl p-5 border border-mist-200 mb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-ink-900",children:I.firm}),e.jsxs("p",{className:"text-sm text-ink-600",children:[I.attorney,"  ",I.specialty]}),e.jsxs("div",{className:"flex gap-4 mt-2 text-sm text-ink-700",children:[e.jsxs("span",{children:[" ",I.email]}),e.jsxs("span",{children:[" ",I.phone]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>T("editCounsel",I.id,{firm:I.firm,attorney:I.attorney,email:I.email,phone:I.phone,specialty:I.specialty}),className:"text-xs text-accent-600 font-medium",children:"Edit"}),e.jsx("button",{onClick:()=>{confirm("Remove?")&&l.removeLegalCounsel(I.id)},className:"text-xs text-red-400 hover:text-red-600",children:"Remove"})]})]})},I.id))]})]}),u==="units"&&o&&e.jsx(yv,{}),u==="details"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-mist-50 rounded-xl p-5 border border-mist-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-display text-xl font-bold text-ink-900",children:"Property Details"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{O({street:l.address.street,city:l.address.city,state:l.address.state,zip:l.address.zip}),f("editAddress")},className:"text-sm text-accent-600 font-medium",children:"Edit Address"}),e.jsx("button",{onClick:()=>{O({yearBuilt:l.details.yearBuilt,totalUnits:String(l.details.totalUnits),floors:String(l.details.floors),type:l.details.type,sqft:l.details.sqft,lotSize:l.details.lotSize,parking:l.details.parking,architect:l.details.architect,contractor:l.details.contractor,amenities:l.details.amenities.join(", "),entityType:l.details.entityType}),f("editDetails")},className:"text-sm text-accent-600 font-medium",children:"Edit Details"})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[["Year Built",l.details.yearBuilt],["Units",l.details.totalUnits],["Floors",l.details.floors],["Type",l.details.type],["Sq Footage",l.details.sqft],["Lot Size",l.details.lotSize],["Parking",l.details.parking],["Entity",l.details.entityType==="incorporated"?"Incorporated":"Unincorporated"]].map(([I,w])=>e.jsxs("div",{className:"bg-white rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-ink-500 mb-1",children:I}),e.jsx("p",{className:"text-sm font-bold text-ink-900",children:w})]},I))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-ink-900 mb-2",children:"Building Team"}),e.jsxs("p",{className:"text-sm text-ink-500",children:[e.jsx("strong",{children:"Architect:"})," ",l.details.architect]}),e.jsxs("p",{className:"text-sm text-ink-500",children:[e.jsx("strong",{children:"Contractor:"})," ",l.details.contractor]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-ink-900 mb-2",children:"Amenities"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.details.amenities.map(I=>e.jsxs("span",{className:"px-3 py-1 bg-accent-100 text-accent-700 rounded-full text-xs font-medium",children:[" ",I]},I))})]})]}),u==="legal"&&e.jsx(jv,{store:l,isBoard:o,openAdd:()=>{_(),f("addDoc")},openEdit:(I,w)=>T("editDoc",I,w)}),u==="insurance"&&e.jsx(Nv,{store:l,isBoard:o,openAdd:()=>{_(),f("addIns")},openEdit:(I,w)=>T("editIns",I,w)}),u==="vendors"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-display text-xl font-bold text-ink-900",children:"Preferred Vendors"}),e.jsx("button",{onClick:()=>{_(),f("addVendor")},className:"px-4 py-2 bg-ink-900 text-white rounded-lg hover:bg-ink-800 text-sm font-medium",children:"+ Add Vendor"})]}),l.vendors.map(I=>e.jsx("div",{className:`bg-white border rounded-xl p-4 hover:shadow-sm transition-all ${I.status==="inactive"?"opacity-50 border-ink-100":"border-ink-100"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-bold text-ink-900",children:I.name}),e.jsx("span",{className:`pill px-2 py-0.5 rounded text-xs ${I.status==="active"?"bg-sage-100 text-sage-700":"bg-ink-100 text-ink-500"}`,children:I.status})]}),e.jsx("p",{className:"text-sm text-accent-600",children:I.service}),e.jsxs("p",{className:"text-xs text-ink-500",children:[I.contact,"  ",I.phone,"  ",I.email]}),e.jsx("p",{className:"text-xs text-ink-400 mt-1",children:I.contract})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l.toggleVendorStatus(I.id),className:`text-xs font-medium ${I.status==="active"?"text-yellow-600":"text-sage-600"}`,children:I.status==="active"?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>T("editVendor",I.id,{name:I.name,service:I.service,contact:I.contact,phone:I.phone,email:I.email,contract:I.contract}),className:"text-xs text-accent-600 font-medium",children:"Edit"}),e.jsx("button",{onClick:()=>{confirm("Remove?")&&l.removeVendor(I.id)},className:"text-xs text-red-400 hover:text-red-600",children:"Remove"})]})]})},I.id))]})]}),(p==="addBoard"||p==="editBoard")&&e.jsx(Te,{title:p==="addBoard"?"Add Board Member":"Edit Board Member",onClose:()=>{f(null),_()},onSave:()=>{if(!N("name")||!N("role")){alert("Name and role required");return}const I={name:N("name"),role:N("role"),email:N("email"),phone:N("phone"),term:N("term")};p==="addBoard"?l.addBoardMember(I):l.updateBoardMember(g,I),f(null),_()},children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{label:"Full Name *",k:"name",placeholder:"Jane Doe"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Board Role *"}),e.jsxs("select",{value:N("role"),onChange:I=>P("role",I.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Select..."}),["President","Vice President","Treasurer","Secretary","Member at Large"].map(I=>e.jsx("option",{children:I},I))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{label:"Email",k:"email",type:"email"}),e.jsx(y,{label:"Phone",k:"phone"})]}),e.jsx(y,{label:"Term",k:"term",placeholder:"Jan 2025  Dec 2026"})]})}),p==="editMgmt"&&e.jsx(Te,{title:"Edit Property Management",onClose:()=>{f(null),_()},onSave:()=>{l.updateManagement({company:N("company"),contact:N("contact"),title:N("title"),email:N("email"),phone:N("phone"),emergency:N("emergency"),address:N("address"),hours:N("hours")}),f(null),_()},children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{label:"Company Name",k:"company"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{label:"Contact",k:"contact"}),e.jsx(y,{label:"Title",k:"title"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{label:"Email",k:"email",type:"email"}),e.jsx(y,{label:"Phone",k:"phone"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{label:"Emergency",k:"emergency"}),e.jsx(y,{label:"Hours",k:"hours"})]}),e.jsx(y,{label:"Address",k:"address"})]})}),(p==="addCounsel"||p==="editCounsel")&&e.jsx(Te,{title:p==="addCounsel"?"Add Legal Counsel":"Edit Legal Counsel",onClose:()=>{f(null),_()},onSave:()=>{if(!N("firm")||!N("attorney")){alert("Firm and attorney required");return}const I={firm:N("firm"),attorney:N("attorney"),email:N("email"),phone:N("phone"),specialty:N("specialty")};p==="addCounsel"?l.addLegalCounsel(I):l.updateLegalCounsel(g,I),f(null),_()},children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{label:"Firm Name *",k:"firm"}),e.jsx(y,{label:"Attorney *",k:"attorney"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{label:"Email",k:"email",type:"email"}),e.jsx(y,{label:"Phone",k:"phone"})]}),e.jsx(y,{label:"Specialty",k:"specialty",placeholder:"HOA / Condominium Law"})]})}),p==="editAddress"&&e.jsx(Te,{title:"Edit Building Address",onClose:()=>{f(null),_()},onSave:()=>{l.updateAddress({street:N("street"),city:N("city"),state:N("state"),zip:N("zip")}),f(null),_()},children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{label:"Street",k:"street"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(y,{label:"City",k:"city"}),e.jsx(y,{label:"State",k:"state"}),e.jsx(y,{label:"ZIP",k:"zip"})]})]})}),p==="editDetails"&&e.jsx(Te,{title:"Edit Building Details",onClose:()=>{f(null),_()},onSave:()=>{l.updateDetails({yearBuilt:N("yearBuilt"),totalUnits:parseInt(N("totalUnits"))||0,floors:parseInt(N("floors"))||0,type:N("type"),sqft:N("sqft"),lotSize:N("lotSize"),parking:N("parking"),architect:N("architect"),contractor:N("contractor"),amenities:N("amenities").split(",").map(I=>I.trim()).filter(Boolean),entityType:N("entityType")||"incorporated"}),f(null),_()},children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(y,{label:"Year Built",k:"yearBuilt"}),e.jsx(y,{label:"Total Units",k:"totalUnits",type:"number"}),e.jsx(y,{label:"Floors",k:"floors",type:"number"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{label:"Type",k:"type"}),e.jsx(y,{label:"Sq Footage",k:"sqft"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{label:"Lot Size",k:"lotSize"}),e.jsx(y,{label:"Parking",k:"parking"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{label:"Architect",k:"architect"}),e.jsx(y,{label:"Contractor",k:"contractor"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Entity Type"}),e.jsxs("select",{value:N("entityType")||"incorporated",onChange:I=>P("entityType",I.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"incorporated",children:"Incorporated"}),e.jsx("option",{value:"unincorporated",children:"Unincorporated"})]})]}),e.jsx(y,{label:"Amenities (comma-separated)",k:"amenities"})]})}),(p==="addDoc"||p==="editDoc")&&e.jsx(Te,{title:p==="addDoc"?"Add Document":"Edit Document",onClose:()=>{f(null),_()},onSave:()=>{if(!N("name")){alert("Name required");return}const I={name:N("name"),version:N("version"),size:N("size"),status:N("status")||"current"};p==="addDoc"?l.addLegalDocument(I):l.updateLegalDocument(g,I),f(null),_()},children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{label:"Document Name *",k:"name"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{label:"Version",k:"version",placeholder:"1.0"}),e.jsx(y,{label:"File Size",k:"size",placeholder:"1.2 MB"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Status"}),e.jsxs("select",{value:N("status")||"current",onChange:I=>P("status",I.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"current",children:"Current"}),e.jsx("option",{value:"review-due",children:"Review Due"})]})]}),p==="editDoc"&&(()=>{const I=l.legalDocuments.find(w=>w.id===g);return I?e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-2",children:"Attachments"}),I.attachments.length>0&&e.jsx("div",{className:"space-y-1.5 mb-2",children:I.attachments.map((w,M)=>e.jsxs("div",{className:"flex items-center justify-between py-1.5 px-3 bg-mist-50 border border-mist-100 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-accent-500 text-sm",children:""}),e.jsx("span",{className:"text-xs font-medium text-ink-700",children:w.name}),e.jsxs("span",{className:"text-[10px] text-ink-400",children:[w.size,"  ",w.uploadedAt]})]}),e.jsx("button",{type:"button",onClick:()=>l.removeLegalDocAttachment(g,M),className:"text-[10px] text-red-400 hover:text-red-600",children:"Remove"})]},M))}),e.jsx("button",{type:"button",onClick:()=>{const w=prompt("File name (e.g., Bylaws_v3.pdf):");if(w){const M=prompt("File size (e.g., 2.4 MB):")||"1.0 MB";l.addLegalDocAttachment(g,{name:w,size:M,type:"application/pdf"})}},className:"w-full py-2 border-2 border-dashed border-ink-200 rounded-lg text-xs text-ink-500 hover:border-accent-300 hover:text-accent-600",children:"+ Attach File"})]}):null})()]})}),(p==="addIns"||p==="editIns")&&e.jsx(Te,{title:p==="addIns"?"Add Insurance Policy":"Edit Policy",onClose:()=>{f(null),_()},onSave:()=>{if(!N("type")||!N("carrier")){alert("Type and carrier required");return}const I={type:N("type"),carrier:N("carrier"),coverage:N("coverage"),premium:N("premium"),expires:N("expires"),policyNum:N("policyNum")};p==="addIns"?l.addInsurance(I):l.updateInsurance(g,I),f(null),_()},children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{label:"Policy Type *",k:"type",placeholder:"General Liability"}),e.jsx(y,{label:"Policy #",k:"policyNum"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{label:"Carrier *",k:"carrier"}),e.jsx(y,{label:"Coverage",k:"coverage"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{label:"Premium",k:"premium",placeholder:"$8,500/yr"}),e.jsx(y,{label:"Expires",k:"expires",type:"date"})]}),p==="editIns"&&(()=>{const I=l.insurance.find(w=>w.id===g);return I?e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-2",children:"Policy Documents"}),I.attachments.length>0&&e.jsx("div",{className:"space-y-1.5 mb-2",children:I.attachments.map((w,M)=>e.jsxs("div",{className:"flex items-center justify-between py-1.5 px-3 bg-mist-50 border border-mist-100 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-accent-500 text-sm",children:""}),e.jsx("span",{className:"text-xs font-medium text-ink-700",children:w.name}),e.jsxs("span",{className:"text-[10px] text-ink-400",children:[w.size,"  ",w.uploadedAt]})]}),e.jsx("button",{type:"button",onClick:()=>l.removeInsuranceAttachment(g,M),className:"text-[10px] text-red-400 hover:text-red-600",children:"Remove"})]},M))}),e.jsx("button",{type:"button",onClick:()=>{const w=prompt("File name (e.g., GL_Policy_2026.pdf):");if(w){const M=prompt("File size (e.g., 2.1 MB):")||"1.0 MB";l.addInsuranceAttachment(g,{name:w,size:M,type:"application/pdf"})}},className:"w-full py-2 border-2 border-dashed border-ink-200 rounded-lg text-xs text-ink-500 hover:border-accent-300 hover:text-accent-600",children:"+ Attach Policy Document"})]}):null})()]})}),(p==="addVendor"||p==="editVendor")&&e.jsx(Te,{title:p==="addVendor"?"Add Vendor":"Edit Vendor",onClose:()=>{f(null),_()},onSave:()=>{if(!N("name")||!N("service")){alert("Name and service required");return}p==="addVendor"?l.addVendor({name:N("name"),service:N("service"),contact:N("contact"),phone:N("phone"),email:N("email"),contract:N("contract"),status:"active"}):l.updateVendor(g,{name:N("name"),service:N("service"),contact:N("contact"),phone:N("phone"),email:N("email"),contract:N("contract")}),f(null),_()},children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{label:"Company Name *",k:"name"}),e.jsx(y,{label:"Service *",k:"service",placeholder:"Plumbing"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{label:"Contact Person",k:"contact"}),e.jsx(y,{label:"Phone",k:"phone"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{label:"Email",k:"email",type:"email"}),e.jsx(y,{label:"Contract",k:"contract",placeholder:"On-call"})]})]})})]})}const gn=l=>"$"+(l||0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}),Cv=[{id:"overview",label:"Overview",icon:""},{id:"compliance",label:"Compliance",icon:""},{id:"refresh",label:"Regulatory Refresh",icon:""},{id:"filings",label:"Filings",icon:""},{id:"meetings",label:"Meetings",icon:""},{id:"communications",label:"Communications",icon:""},{id:"financial",label:"Fiscal Snapshot",icon:""},{id:"insurance",label:"Insurance",icon:""},{id:"legal",label:"Legal Docs",icon:""},{id:"board",label:"Board",icon:""}];function Sv(){const l=mp(),{currentRole:m,currentUser:i}=jt(),o=Ir(),u=Ka(),d=Ns(),x=Xt(),p=m==="BOARD_MEMBER"||m==="PROPERTY_MANAGER",[f,g]=C.useState(null),[v,R]=C.useState("overview"),[O,N]=C.useState(!1),[P,_]=C.useState(String(new Date().getFullYear()-1)),[T,y]=C.useState(null),j=l.archives.find(U=>U.id===f),q=()=>{const U=parseInt(P)||new Date().getFullYear()-1,L=`${U}-01-01`,F=`${U}-12-31`,z=Nd({state:d.address.state,legalDocuments:d.legalDocuments.map(w=>({name:w.name,status:w.status})),insurance:d.insurance.map(w=>({type:w.type,expires:w.expires})),boardCount:d.board.length,hasManagement:!!d.management.company}),ne=z.categories.map(w=>{const M=w.items.filter(ce=>o.completions[ce.id]).length;return{pct:w.items.length>0?Math.round(M/w.items.length*100):100,weight:w.weight}}),K=ne.reduce((w,M)=>w+M.weight,0),ie=Math.round(ne.reduce((w,M)=>w+M.pct*M.weight/K,0)),he=ie>=90?"A":ie>=80?"B":ie>=70?"C":ie>=60?"D":"F";z.categories.forEach(w=>{w.items.forEach(M=>{M.autoPass&&!o.completions[M.id]&&o.setCompletion(M.id,!0)})});const pe=x.getIncomeMetrics(),Ne=x.units.filter(w=>w.status==="OCCUPIED"),B=z.categories.reduce((w,M)=>w+M.items.length,0),I={id:"arc_"+Date.now(),label:`FY ${U} (Jan 1, ${U}  Dec 31, ${U})`,periodStart:L,periodEnd:F,createdAt:new Date().toISOString(),createdBy:(i==null?void 0:i.name)||"Board Member",compliance:{runbookCompletions:{...o.completions},healthIndex:ie,grade:he},regulatoryRefresh:{refreshedAt:z.refreshedAt,jurisdiction:z.jurisdiction,documentsDetected:z.documentsDetected,regulatoryNotes:z.regulatoryNotes,categoryCount:z.categories.length,totalChecklistItems:B},filings:o.filings.filter(w=>w.dueDate>=L&&w.dueDate<=F).map(w=>({...w,attachments:[...w.attachments]})),meetings:u.meetings.filter(w=>w.date>=L&&w.date<=F).map(w=>({...w,votes:[...w.votes],attendees:{...w.attendees},agenda:[...w.agenda]})),communications:o.communications.filter(w=>w.date>=L&&w.date<=F).map(w=>({...w})),financial:{collectionRate:pe.collectionRate||0,totalBudgeted:pe.annualExpected||0,totalActual:pe.annualCollected||0,reserveBalance:245e3,totalAR:x.units.reduce((w,M)=>w+M.balance,0),monthlyRevenue:x.units.reduce((w,M)=>w+M.monthlyFee,0),unitCount:x.units.length,occupiedCount:Ne.length,delinquentCount:Ne.filter(w=>w.balance>0).length},insurance:d.insurance.map(w=>({type:w.type,carrier:w.carrier,policyNumber:w.policyNum,coverage:w.coverage,premium:w.premium,expires:w.expires,status:new Date(w.expires)>new Date(F)?"active":"expired"})),legalDocuments:d.legalDocuments.map(w=>({name:w.name,version:w.version,status:w.status,attachments:(w.attachments||[]).map(M=>({name:M.name,size:M.size}))})),board:d.board.map(w=>({name:w.name,role:w.role,term:w.term}))};l.addArchive(I),y(z),N(!1),alert(` Archive created for FY ${U}.

Regulatory refresh completed:
 Jurisdiction: ${z.jurisdiction}
 Documents detected: ${z.documentsDetected.length}
 Compliance items: ${B}
 ${z.regulatoryNotes.length} regulatory notes
 ${z.categories.filter(w=>w.items.some(M=>M.autoPass)).length} categories with auto-pass items updated`)},A=({rounded:U="rounded-t-xl"})=>e.jsx("div",{className:`bg-gradient-to-r from-ink-900 via-ink-800 to-accent-800 ${U} p-8 text-white shadow-sm`,children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[f&&e.jsx("button",{onClick:()=>g(null),className:"text-accent-200 hover:text-white text-sm mb-2 inline-flex items-center gap-1",children:" Back to Archives"}),e.jsx("h2",{className:"font-display text-2xl font-bold",children:" The Archives"}),e.jsx("p",{className:"text-accent-200 text-sm mt-1",children:j?`${j.label}  Created ${new Date(j.createdAt).toLocaleDateString()} by ${j.createdBy}`:l.archives.length>0?`${l.archives.length} archived period${l.archives.length!==1?"s":""}  Read-only historical records`:"Historical compliance records and audit trail"})]}),p&&!f&&e.jsx("button",{onClick:()=>{_(String(new Date().getFullYear()-1)),N(!0)},className:"px-5 py-2.5 bg-white bg-opacity-15 hover:bg-opacity-25 text-white rounded-lg text-sm font-semibold border border-white border-opacity-25 transition-colors",children:" Create Archive"})]})});if(l.archives.length===0&&!O)return e.jsxs("div",{className:"space-y-0",children:[e.jsx(A,{rounded:"rounded-t-xl"}),e.jsxs("div",{className:"bg-white rounded-b-xl border-x border-b border-ink-100 p-12 text-center",children:[e.jsx("p",{className:"text-5xl mb-4",children:""}),e.jsx("h3",{className:"text-lg font-bold text-ink-900 mb-2",children:"No archives yet"}),e.jsx("p",{className:"text-sm text-ink-500 max-w-md mx-auto mb-6",children:p?"Create an annual archive to capture a permanent, read-only snapshot of all compliance, financial, and governance records for a fiscal year. A regulatory refresh is performed automatically to ensure requirements are current.":"Your board has not yet created any annual archives. Once they do, you'll be able to view all historical records here."}),p&&e.jsx("button",{onClick:()=>{_(String(new Date().getFullYear()-1)),N(!0)},className:"px-6 py-3 bg-ink-900 text-white rounded-lg text-sm font-semibold hover:bg-ink-800",children:" Create Your First Archive"})]}),O&&e.jsx(H,{})]});if(!j)return e.jsxs("div",{className:"space-y-0",children:[e.jsx(A,{}),e.jsx("div",{className:"bg-white rounded-b-xl border-x border-b border-ink-100 p-6",children:e.jsx("div",{className:"grid gap-4",children:l.archives.map(U=>e.jsx("div",{className:"border border-ink-100 rounded-xl hover:border-accent-200 hover:shadow-sm transition-all cursor-pointer",onClick:()=>{g(U.id),R("overview")},children:e.jsxs("div",{className:"p-5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-accent-100 rounded-xl flex items-center justify-center text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-ink-900",children:U.label}),e.jsxs("p",{className:"text-xs text-ink-500",children:["Created ",new Date(U.createdAt).toLocaleDateString()," by ",U.createdBy]}),U.regulatoryRefresh&&e.jsxs("p",{className:"text-[10px] text-accent-600 mt-0.5",children:[" Regulatory refresh: ",U.regulatoryRefresh.jurisdiction,"  ",U.regulatoryRefresh.documentsDetected.length," docs detected  ",U.regulatoryRefresh.totalChecklistItems," checklist items"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Health"}),e.jsx("p",{className:"text-sm font-bold text-ink-900",children:U.compliance.grade})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Meetings"}),e.jsx("p",{className:"text-sm font-bold text-ink-900",children:U.meetings.length})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Filings"}),e.jsx("p",{className:"text-sm font-bold text-ink-900",children:U.filings.length})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Comms"}),e.jsx("p",{className:"text-sm font-bold text-ink-900",children:U.communications.length})]})]}),p&&e.jsx("button",{onClick:L=>{L.stopPropagation(),confirm("Delete this archive? This cannot be undone.")&&l.deleteArchive(U.id)},className:"text-xs text-red-400 hover:text-red-600 ml-2",children:"Delete"}),e.jsx("span",{className:"text-accent-400 text-lg",children:""})]})]})},U.id))})}),O&&e.jsx(H,{})]});return e.jsxs("div",{className:"space-y-0",children:[e.jsx(A,{}),e.jsx("div",{className:"bg-white border-x border-ink-100 border-b overflow-x-auto",children:e.jsx("div",{className:"flex min-w-max px-4",children:Cv.map(U=>e.jsxs("button",{onClick:()=>R(U.id),className:`px-4 py-3 text-sm font-medium border-b-2 whitespace-nowrap transition-colors ${v===U.id?"border-ink-900 text-ink-900":"border-transparent text-ink-400 hover:text-ink-700"}`,children:[U.icon," ",U.label]},U.id))})}),e.jsxs("div",{className:"bg-white rounded-b-xl border-x border-b border-ink-100 p-6",children:[v==="overview"&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsx(Ot,{label:"Compliance Grade",val:j.compliance.grade,sub:`${j.compliance.healthIndex}%`}),e.jsx(Ot,{label:"Meetings Held",val:String(j.meetings.filter(U=>U.status==="COMPLETED").length),sub:`${j.meetings.length} total`}),e.jsx(Ot,{label:"Filings Complete",val:String(j.filings.filter(U=>U.status==="filed").length),sub:`of ${j.filings.length}`}),e.jsx(Ot,{label:"Collection Rate",val:`${j.financial.collectionRate}%`,sub:gn(j.financial.totalAR)+" AR"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsx(Ot,{label:"Budget",val:gn(j.financial.totalBudgeted),sub:`Actual: ${gn(j.financial.totalActual)}`}),e.jsx(Ot,{label:"Units",val:`${j.financial.occupiedCount}/${j.financial.unitCount}`,sub:`${j.financial.delinquentCount} delinquent`}),e.jsx(Ot,{label:"Insurance",val:String(j.insurance.length),sub:`${j.insurance.filter(U=>U.status==="active").length} active`}),e.jsx(Ot,{label:"Board Members",val:String(j.board.length),sub:""})]}),j.regulatoryRefresh&&e.jsxs("div",{className:"bg-accent-50 border border-accent-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("h4",{className:"text-sm font-bold text-accent-800",children:"Regulatory Refresh at Archive Time"})]}),e.jsxs("p",{className:"text-xs text-accent-700",children:["Jurisdiction: ",e.jsx("strong",{children:j.regulatoryRefresh.jurisdiction}),"  ",j.regulatoryRefresh.categoryCount," categories  ",j.regulatoryRefresh.totalChecklistItems," checklist items  ",j.regulatoryRefresh.documentsDetected.length," documents detected"]}),j.regulatoryRefresh.documentsDetected.length>0&&e.jsxs("p",{className:"text-xs text-accent-600 mt-1",children:["Documents: ",j.regulatoryRefresh.documentsDetected.join(", ")]})]})]}),v==="compliance"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:"Compliance Runbook Snapshot"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:`text-3xl font-bold ${j.compliance.healthIndex>=80?"text-sage-600":j.compliance.healthIndex>=60?"text-yellow-600":"text-red-600"}`,children:j.compliance.grade}),e.jsxs("span",{className:"text-sm text-ink-500",children:["Health Index: ",j.compliance.healthIndex,"%"]})]}),e.jsxs("div",{className:"bg-mist-50 rounded-xl border border-mist-200 p-4 space-y-2",children:[e.jsx("p",{className:"text-xs font-bold text-ink-800 mb-2",children:"Checklist Item Status"}),Object.entries(j.compliance.runbookCompletions).map(([U,L])=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:`w-5 h-5 rounded flex items-center justify-center text-[10px] ${L?"bg-sage-100 text-sage-600":"bg-red-100 text-red-600"}`,children:L?"":""}),e.jsx("span",{className:"font-mono text-ink-500",children:U}),e.jsx("span",{className:L?"text-sage-600":"text-red-600",children:L?"Complete":"Incomplete"})]},U))]})]}),v==="refresh"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:" Regulatory Refresh Report"}),j.regulatoryRefresh?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsx(Ot,{label:"Jurisdiction",val:j.regulatoryRefresh.jurisdiction,sub:""}),e.jsx(Ot,{label:"Categories",val:String(j.regulatoryRefresh.categoryCount),sub:""}),e.jsx(Ot,{label:"Checklist Items",val:String(j.regulatoryRefresh.totalChecklistItems),sub:""}),e.jsx(Ot,{label:"Docs Detected",val:String(j.regulatoryRefresh.documentsDetected.length),sub:""})]}),j.regulatoryRefresh.documentsDetected.length>0&&e.jsxs("div",{className:"bg-sage-50 border border-sage-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-bold text-sage-800 mb-2",children:" Documents Detected"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:j.regulatoryRefresh.documentsDetected.map(U=>e.jsxs("span",{className:"text-xs bg-sage-100 text-sage-700 px-2.5 py-1 rounded-lg font-medium",children:[" ",U]},U))}),e.jsx("p",{className:"text-[10px] text-sage-600 mt-2",children:"These documents were detected in Legal & Bylaws at archive time. Compliance checks were dynamically adjusted to reference them."})]}),j.regulatoryRefresh.regulatoryNotes.length>0&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-bold text-amber-800 mb-2",children:" Regulatory Notes"}),e.jsx("div",{className:"space-y-1.5",children:j.regulatoryRefresh.regulatoryNotes.map((U,L)=>e.jsx("p",{className:"text-xs text-amber-700",children:U},L))})]}),e.jsxs("p",{className:"text-[10px] text-ink-400",children:["Refresh performed: ",new Date(j.regulatoryRefresh.refreshedAt).toLocaleString()]})]}):e.jsx("p",{className:"text-sm text-ink-400 p-4",children:"No regulatory refresh data available for this archive (created before this feature)."})]}),v==="filings"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-display text-lg font-bold text-ink-900",children:["Filings & Deadlines (",j.filings.length,")"]}),j.filings.length===0?e.jsx("p",{className:"text-sm text-ink-400 p-4",children:"No filings for this period."}):e.jsx("div",{className:"bg-white rounded-xl border border-ink-100 divide-y divide-ink-50",children:j.filings.map(U=>e.jsxs("div",{className:`p-4 ${U.status==="filed"?"bg-sage-50 bg-opacity-50":"bg-red-50 bg-opacity-30"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("p",{className:"text-sm font-medium text-ink-900",children:U.name}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-semibold ${U.status==="filed"?"bg-sage-100 text-sage-700":"bg-red-100 text-red-700"}`,children:U.status==="filed"?" Filed":"Not Filed"})]}),e.jsxs("p",{className:"text-xs text-ink-500 mt-1",children:["Due: ",U.dueDate,"  ",U.responsible,U.filedDate?`  Filed: ${U.filedDate}`:"",U.confirmationNum?`  Ref: ${U.confirmationNum}`:""]}),U.attachments.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:U.attachments.map(L=>e.jsxs("span",{className:"text-[10px] bg-mist-50 border border-mist-200 rounded px-2 py-0.5",children:[" ",L.name," (",L.size,")"]},L.name))})]},U.id))})]}),v==="meetings"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-display text-lg font-bold text-ink-900",children:["Meetings (",j.meetings.length,")"]}),j.meetings.length===0?e.jsx("p",{className:"text-sm text-ink-400 p-4",children:"No meetings for this period."}):e.jsx("div",{className:"space-y-4",children:j.meetings.sort((U,L)=>L.date.localeCompare(U.date)).map(U=>e.jsxs("div",{className:"border border-ink-100 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-mist-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-bold text-ink-900",children:U.title}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-semibold ${U.status==="COMPLETED"?"bg-sage-100 text-sage-700":"bg-accent-100 text-accent-700"}`,children:U.status}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-ink-100 text-ink-600",children:U.type})]}),e.jsxs("p",{className:"text-xs text-ink-500 mt-1",children:[U.date,"  ",U.time,"  ",U.location]})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[U.agenda.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-ink-700 mb-1",children:"Agenda"}),e.jsx("ul",{className:"text-xs text-ink-600 space-y-0.5",children:U.agenda.map((L,F)=>e.jsxs("li",{children:[" ",L]},F))})]}),U.attendees.board.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-ink-700 mb-1",children:"Board Attendees"}),e.jsx("p",{className:"text-xs text-ink-600",children:U.attendees.board.join(", ")})]}),U.attendees.owners.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-ink-700 mb-1",children:"Owner Attendees"}),e.jsx("p",{className:"text-xs text-ink-600",children:U.attendees.owners.join(", ")})]}),U.attendees.guests.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-ink-700 mb-1",children:"Guests"}),e.jsx("p",{className:"text-xs text-ink-600",children:U.attendees.guests.join(", ")})]}),U.minutes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-ink-700 mb-1",children:"Minutes"}),e.jsx("pre",{className:"text-xs text-ink-600 whitespace-pre-wrap bg-white rounded-lg border border-ink-100 p-3",children:U.minutes})]}),U.votes.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-bold text-ink-700 mb-1",children:["Votes (",U.votes.length,")"]}),e.jsx("div",{className:"space-y-2",children:U.votes.map(L=>e.jsxs("div",{className:"bg-white border border-ink-100 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-xs font-medium text-ink-900",children:L.motion}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-semibold ${L.status==="passed"?"bg-sage-100 text-sage-700":"bg-red-100 text-red-700"}`,children:L.status})]}),e.jsxs("p",{className:"text-[10px] text-ink-400 mt-1",children:["Approve: ",L.tally.approve,"  Deny: ",L.tally.deny,"  Abstain: ",L.tally.abstain]}),L.results.length>0&&e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:L.results.map((F,z)=>e.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${F.vote==="approve"?"bg-sage-50 text-sage-700":F.vote==="deny"?"bg-red-50 text-red-700":"bg-ink-50 text-ink-500"}`,children:[F.name,": ",F.vote]},z))})]},L.id))})]})]})]},U.id))})]}),v==="communications"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-display text-lg font-bold text-ink-900",children:["Communications (",j.communications.length,")"]}),j.communications.length===0?e.jsx("p",{className:"text-sm text-ink-400 p-4",children:"No communications."}):e.jsx("div",{className:"bg-white rounded-xl border border-ink-100 divide-y divide-ink-50",children:j.communications.map(U=>e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("p",{className:"text-sm font-medium text-ink-900",children:U.subject}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-ink-100 text-ink-600",children:U.type}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${U.status==="sent"?"bg-sage-100 text-sage-700":"bg-yellow-100 text-yellow-700"}`,children:U.status})]}),e.jsxs("p",{className:"text-xs text-ink-500 mt-1",children:[U.date,"  ",U.method,"  ",U.recipients]}),U.notes&&e.jsx("p",{className:"text-xs text-ink-400 mt-1",children:U.notes})]},U.id))})]}),v==="financial"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:"Fiscal Lens Snapshot"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[e.jsx(Ot,{label:"Collection Rate",val:`${j.financial.collectionRate}%`,sub:""}),e.jsx(Ot,{label:"Total Budgeted",val:gn(j.financial.totalBudgeted),sub:""}),e.jsx(Ot,{label:"Total Actual",val:gn(j.financial.totalActual),sub:`Variance: ${gn(j.financial.totalBudgeted-j.financial.totalActual)}`}),e.jsx(Ot,{label:"Reserve Balance",val:gn(j.financial.reserveBalance),sub:""}),e.jsx(Ot,{label:"Total Receivable",val:gn(j.financial.totalAR),sub:""}),e.jsx(Ot,{label:"Monthly Revenue",val:gn(j.financial.monthlyRevenue),sub:""}),e.jsx(Ot,{label:"Units",val:`${j.financial.occupiedCount}/${j.financial.unitCount}`,sub:"Occupied / Total"}),e.jsx(Ot,{label:"Delinquent",val:String(j.financial.delinquentCount),sub:`${j.financial.occupiedCount>0?Math.round(j.financial.delinquentCount/j.financial.occupiedCount*100):0}% rate`})]})]}),v==="insurance"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-display text-lg font-bold text-ink-900",children:["Insurance Policies (",j.insurance.length,")"]}),j.insurance.length===0?e.jsx("p",{className:"text-sm text-ink-400 p-4",children:"No insurance records."}):e.jsx("div",{className:"bg-white rounded-xl border border-ink-100 divide-y divide-ink-50",children:j.insurance.map((U,L)=>e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-bold text-ink-900",children:U.type}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-semibold ${U.status==="active"?"bg-sage-100 text-sage-700":"bg-red-100 text-red-700"}`,children:U.status})]}),e.jsxs("p",{className:"text-xs text-ink-500 mt-1",children:[U.carrier,"  Policy #",U.policyNumber,"  Coverage: ",U.coverage,"  Premium: ",U.premium,"  Expires: ",U.expires]})]},L))})]}),v==="legal"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-display text-lg font-bold text-ink-900",children:["Legal & Governing Documents (",j.legalDocuments.length,")"]}),j.legalDocuments.length===0?e.jsx("p",{className:"text-sm text-ink-400 p-4",children:"No documents."}):e.jsx("div",{className:"bg-white rounded-xl border border-ink-100 divide-y divide-ink-50",children:j.legalDocuments.map((U,L)=>e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-bold text-ink-900",children:U.name}),e.jsxs("span",{className:"text-xs text-ink-400",children:["v",U.version]}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-semibold ${U.status==="current"?"bg-sage-100 text-sage-700":"bg-yellow-100 text-yellow-700"}`,children:U.status})]}),U.attachments.length>0&&e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:U.attachments.map(F=>e.jsxs("span",{className:"text-[10px] bg-mist-50 border border-mist-200 rounded px-2 py-0.5",children:[" ",F.name," (",F.size,")"]},F.name))})]},L))})]}),v==="board"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-display text-lg font-bold text-ink-900",children:["Board Composition (",j.board.length,")"]}),j.board.length===0?e.jsx("p",{className:"text-sm text-ink-400 p-4",children:"No board data."}):e.jsx("div",{className:"bg-white rounded-xl border border-ink-100 divide-y divide-ink-50",children:j.board.map((U,L)=>e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-ink-900",children:U.name}),e.jsx("p",{className:"text-xs text-ink-500",children:U.role})]}),e.jsxs("span",{className:"text-xs text-ink-400",children:["Term: ",U.term]})]},L))})]})]}),O&&e.jsx(H,{})]});function H(){return e.jsx(Te,{title:" Create Annual Archive",onClose:()=>N(!1),onSave:q,saveLabel:"Create Archive",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-ink-700",children:"Create a permanent read-only snapshot of all compliance, financial, and governance records for a fiscal year."}),e.jsxs("div",{className:"bg-accent-50 border border-accent-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("h4",{className:"text-sm font-bold text-accent-800",children:"Automatic Regulatory Refresh"})]}),e.jsxs("p",{className:"text-xs text-accent-700",children:["When you create this archive, the system will automatically check current local regulations for ",e.jsx("strong",{children:d.address.state})," and cross-reference all uploaded legal and bylaw documents to ensure compliance requirements are accurate and up to date. Auto-pass checklist items will be updated based on detected documents."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Fiscal Year"}),e.jsx("select",{value:P,onChange:U=>_(U.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[2025,2024,2023].map(U=>e.jsxs("option",{value:U,children:["FY ",U," (Jan 1  Dec 31, ",U,")"]},U))})]}),e.jsxs("div",{className:"bg-mist-50 border border-mist-200 rounded-xl p-4 space-y-2",children:[e.jsx("p",{className:"text-xs font-bold text-ink-900",children:"What gets archived:"}),[{icon:"",label:"Compliance Runbook",desc:"All checklist completions and health score"},{icon:"",label:"Regulatory Refresh",desc:"Jurisdiction check, detected documents, updated requirements"},{icon:"",label:"Filings & Deadlines",desc:"All filings with statuses and attached proof documents"},{icon:"",label:"Meetings",desc:"Agendas, minutes, attendance records, and vote results"},{icon:"",label:"Communications",desc:"Owner communication log with type, method, and status"},{icon:"",label:"Fiscal Lens Snapshot",desc:"Collection rate, budget vs actual, reserve balance, receivables"},{icon:"",label:"Insurance Policies",desc:"All policies with carrier, coverage, and expiration"},{icon:"",label:"Legal & Governing Documents",desc:"Document versions and attached files"},{icon:"",label:"Board Composition",desc:"Board members, roles, and terms during the period"}].map(U=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-sm",children:U.icon}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-ink-800",children:U.label}),e.jsxs("span",{className:"text-xs text-ink-400 ml-1",children:[" ",U.desc]})]})]},U.label))]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-amber-800",children:[e.jsx("strong",{children:"Note:"})," Archives are read-only snapshots visible to all users (including residents) in The Archives module for transparency and auditing."]})})]})})}}function Ot({label:l,val:m,sub:i}){return e.jsxs("div",{className:"bg-mist-50 rounded-lg p-3 border border-mist-100",children:[e.jsx("p",{className:"text-[11px] text-ink-400",children:l}),e.jsx("p",{className:"text-lg font-bold text-ink-900 mt-0.5",children:m}),i&&e.jsx("p",{className:"text-[10px] text-ink-400",children:i})]})}function Av(){const{currentUser:l}=jt(),m=Xt(),{units:i,hoaDueDay:o,recordUnitPayment:u,markSpecialAssessmentPaid:d,stripeConnectId:x,stripeOnboardingComplete:p}=m;Xs();const[f,g]=C.useState(null),[v,R]=C.useState(null),[O,N]=C.useState(!1),P=(l==null?void 0:l.linkedUnits)||[],_=i.filter(M=>P.includes(M.number)),T=x&&p,y=i,[j,q]=C.useState(!1),{updateProfile:A}=jt(),H=(M,ce)=>{const E=[...P,M];A({linkedUnits:E}),ce&&l&&m.updateUnit(M,{owner:l.name,email:l.email,phone:l.phone||"",status:"OCCUPIED"})},U=M=>{const ce=P.filter(E=>E!==M);A({linkedUnits:ce})};if(_.length===0)return e.jsxs("div",{className:"max-w-xl mx-auto text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"font-display text-2xl font-bold text-ink-900 mb-2",children:"No Unit Linked"}),e.jsx("p",{className:"text-ink-500 mb-6",children:"Select your unit(s) from the list below to view assessments, payment history, and manage your HOA account."}),e.jsxs("div",{className:"bg-white rounded-xl border border-ink-100 shadow-sm max-w-md mx-auto",children:[e.jsx("div",{className:"border-b px-5 py-3",children:e.jsx("h3",{className:"text-sm font-bold text-ink-800",children:"Available Units"})}),e.jsx("div",{className:"max-h-64 overflow-y-auto divide-y divide-ink-50",children:y.length===0?e.jsx("p",{className:"p-4 text-sm text-ink-400",children:"No units configured yet. Contact your board administrator."}):y.map(M=>e.jsxs("div",{className:"flex items-center justify-between px-5 py-3 hover:bg-mist-50",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold text-ink-900",children:["Unit ",M.number]}),e.jsxs("p",{className:"text-xs text-ink-400",children:[M.owner,"  ",M.status]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>H(M.number,!0),className:"px-3 py-1.5 bg-accent-600 text-white rounded-lg text-xs font-medium hover:bg-accent-700",children:"Link as Primary"}),e.jsx("button",{onClick:()=>H(M.number,!1),className:"px-3 py-1.5 bg-ink-100 text-ink-600 rounded-lg text-xs font-medium hover:bg-ink-200",children:"Link as Co-owner"})]})]},M.number))})]})]});const L=f&&_.find(M=>M.number===f)||_[0],F=L.lateFees.filter(M=>!M.waived),z=F.reduce((M,ce)=>M+ce.amount,0),ne=L.specialAssessments.filter(M=>!M.paid),K=ne.reduce((M,ce)=>M+ce.amount,0),ie=L.balance+z,he=L.payments.reduce((M,ce)=>M+ce.amount,0),pe=L.balance>0,Ne=(M,ce,E)=>{confirm(`Stripe Checkout: Pay ${te(M)} for "${ce}"?

In production, this redirects to Stripe's hosted checkout page.`)&&E()},B=()=>{N(!0),R(null),alert(`Demo: Recurring payment enrolled.

In production, this creates a Stripe Subscription via hosted checkout.
The resident is redirected to Stripe to enter payment details, then back to the app.`)},I=()=>{alert(`Demo: Opens Stripe Billing Portal.

In production, this redirects to Stripe's customer portal where residents can:
- Update payment method
- View invoices & receipts
- Cancel recurring payments`)},w=({className:M="w-4 h-4"})=>e.jsx("svg",{className:M,viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M13.976 9.15c-2.172-.806-3.356-1.426-3.356-2.409 0-.831.683-1.305 1.901-1.305 2.227 0 4.515.858 6.09 1.631l.89-5.494C18.252.975 15.697 0 12.165 0 9.667 0 7.589.654 6.104 1.872 4.56 3.147 3.757 4.992 3.757 7.218c0 4.039 2.467 5.76 6.476 7.219 2.585.92 3.445 1.574 3.445 2.583 0 .98-.84 1.545-2.354 1.545-1.875 0-4.965-.921-6.99-2.109l-.9 5.555C5.175 22.99 8.385 24 11.714 24c2.641 0 4.843-.624 6.328-1.813 1.664-1.305 2.525-3.236 2.525-5.732 0-4.128-2.524-5.851-6.591-7.305z"})});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-ink-900 via-ink-800 to-accent-800 rounded-xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"font-display text-2xl font-bold",children:["My Unit",_.length>1?"s":""]}),e.jsxs("p",{className:"text-accent-100 text-sm mt-1",children:[l==null?void 0:l.name,"  ",_.length," unit",_.length!==1?"s":"","  Due ",o,Xl(o)," monthly"]})]}),e.jsx("button",{onClick:()=>q(!0),className:"px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg text-sm font-medium hover:bg-opacity-30",children:"+ Link Unit"})]})}),_.length>1&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-ink-100 p-4",children:e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:"text-sm font-medium text-ink-600",children:"Your Units:"}),_.map(M=>e.jsx("button",{onClick:()=>g(M.number),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${(f||_[0].number)===M.number?"bg-ink-900 text-white shadow-md":M.balance>0?"bg-red-50 text-red-700 border border-red-200":"bg-ink-50 text-ink-700 hover:bg-ink-100"}`,children:e.jsx("span",{className:"font-bold",children:M.number})},M.number))]})}),e.jsxs("div",{className:`bg-white rounded-xl shadow-sm border ${pe?"border-red-200":"border-ink-100"} overflow-hidden`,children:[e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-16 h-16 rounded-xl ${pe?"bg-red-100":"bg-sage-100"} flex items-center justify-center`,children:e.jsx("span",{className:`text-2xl font-bold ${pe?"text-red-700":"text-sage-700"}`,children:L.number})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h2",{className:"font-display text-xl font-bold text-ink-900",children:L.owner}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${pe?"bg-red-100 text-red-700":L.status==="VACANT"?"bg-ink-100 text-ink-500":"bg-sage-100 text-sage-700"}`,children:pe?"Delinquent":L.status})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-ink-500",children:[L.email&&e.jsxs("span",{children:[" ",L.email]}),L.phone&&e.jsxs("span",{children:[" ",L.phone]}),L.sqft>0&&e.jsxs("span",{children:[L.sqft," sqft"]}),L.bedrooms>0&&e.jsxs("span",{children:[L.bedrooms,"BR"]}),L.parking&&e.jsxs("span",{children:["P: ",L.parking]})]})]}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsx("p",{className:`text-2xl font-bold ${pe?"text-red-600":"text-sage-600"}`,children:te(ie+K)}),e.jsx("p",{className:"text-xs text-ink-400",children:pe?"total owed":"balance"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3 p-5 pt-0",children:[e.jsxs("div",{className:"bg-mist-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-ink-400 uppercase font-semibold",children:"Monthly"}),e.jsx("p",{className:"text-lg font-bold text-ink-900",children:te(L.monthlyFee)})]}),e.jsxs("div",{className:"bg-mist-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-ink-400 uppercase font-semibold",children:"Paid YTD"}),e.jsx("p",{className:"text-lg font-bold text-sage-600",children:te(he)})]}),e.jsxs("div",{className:`${pe?"bg-red-50":"bg-mist-50"} rounded-lg p-3`,children:[e.jsx("p",{className:`text-xs ${pe?"text-red-500":"text-ink-400"} uppercase font-semibold`,children:"Balance"}),e.jsx("p",{className:`text-lg font-bold ${pe?"text-red-600":"text-ink-900"}`,children:te(L.balance)})]}),e.jsxs("div",{className:"bg-mist-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-ink-400 uppercase font-semibold",children:"Late Fees"}),e.jsx("p",{className:`text-lg font-bold ${z>0?"text-yellow-600":"text-ink-900"}`,children:te(z)})]}),e.jsxs("div",{className:"bg-mist-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-ink-400 uppercase font-semibold",children:"Assessments"}),e.jsx("p",{className:`text-lg font-bold ${K>0?"text-amber-600":"text-ink-900"}`,children:te(K)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-ink-100 overflow-hidden",children:[e.jsxs("div",{className:"border-b px-5 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h3",{className:"font-display text-lg font-semibold text-ink-800",children:"Payments"})]}),O&&e.jsx("span",{className:"px-2.5 py-1 rounded-full bg-sage-100 text-sage-700 text-xs font-semibold",children:" AutoPay Enrolled"})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[!T&&e.jsxs("div",{className:"bg-ink-50 rounded-xl p-5 border border-ink-100 text-center",children:[e.jsx("p",{className:"text-ink-500 text-sm mb-1",children:"Online payments are not yet enabled for this building."}),e.jsx("p",{className:"text-xs text-ink-400",children:"Contact your board or management company to set up Stripe Connect."})]}),T&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`${pe?"bg-red-50 border-red-200":"bg-accent-50 border-accent-200"} border-2 rounded-xl p-5`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-semibold text-ink-700",children:"Current Balance"}),e.jsx("span",{className:`px-2.5 py-1 rounded-full ${pe?"bg-red-100 text-red-700":"bg-sage-100 text-sage-700"} text-xs font-semibold`,children:pe?" Past Due":" Current"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-ink-500",children:"Monthly Assessment"}),e.jsx("span",{className:"font-medium",children:te(L.monthlyFee)})]}),L.balance>L.monthlyFee&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-ink-500",children:"Past Due Balance"}),e.jsx("span",{className:"font-medium text-red-600",children:te(L.balance-L.monthlyFee)})]}),z>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-ink-500",children:"Late Fees"}),e.jsx("span",{className:"font-medium text-red-600",children:te(z)})]}),K>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-ink-500",children:"Special Assessments"}),e.jsx("span",{className:"font-medium text-amber-600",children:te(K)})]}),e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold text-ink-900",children:"Total Due"}),e.jsx("span",{className:"font-display text-2xl font-bold text-ink-900",children:te(ie+K)})]})})]}),ie+K>0?e.jsxs("button",{onClick:()=>{Ne(ie+K,`Unit ${L.number}  Full Balance`,()=>{u(L.number,ie,"stripe"),ne.forEach(M=>d(L.number,M.id))})},className:"w-full mt-3 py-3.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold text-base transition-all hover:shadow-md flex items-center justify-center gap-2",children:[e.jsx(w,{}),"Pay ",te(ie+K)," Now"]}):e.jsx("div",{className:"text-center mt-3 py-3 text-sage-600 font-medium text-sm",children:" No balance due  you're all set!"})]}),e.jsxs("div",{className:`rounded-xl border-2 p-5 ${O?"bg-sage-50 border-sage-200":"bg-indigo-50 border-indigo-200"}`,children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-ink-900",children:" Recurring Monthly Payment"}),e.jsx("p",{className:"text-xs text-ink-500 mt-0.5",children:O?`Enrolled  ${te(L.monthlyFee)}/mo charged automatically on the ${o}${Xl(o)}`:`Auto-pay ${te(L.monthlyFee)}/mo on the ${o}${Xl(o)} of each month`})]})}),O?e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:I,className:"flex-1 py-2.5 bg-white border border-ink-200 text-ink-700 rounded-lg font-medium text-sm hover:bg-ink-50",children:"Manage Billing "}),e.jsx("button",{onClick:()=>{confirm("Cancel recurring payment?")&&N(!1)},className:"px-4 py-2.5 bg-red-50 text-red-600 rounded-lg font-medium text-sm hover:bg-red-100 border border-red-200",children:"Cancel"})]}):e.jsxs("button",{onClick:()=>R("setupRecurring"),className:"w-full mt-3 py-2.5 bg-indigo-600 text-white rounded-lg font-semibold text-sm hover:bg-indigo-700 flex items-center justify-center gap-2",children:[e.jsx(w,{className:"w-3.5 h-3.5"}),"Set Up AutoPay"]})]})]}),ne.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs text-amber-600 font-semibold uppercase mb-2",children:"Special Assessments Due"}),e.jsx("div",{className:"space-y-2",children:ne.map(M=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-amber-50 border border-amber-100 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-ink-900",children:M.reason}),e.jsxs("p",{className:"text-xs text-ink-400",children:[M.date,"  ",te(M.amount)]})]}),T?e.jsxs("button",{onClick:()=>Ne(M.amount,`Special Assessment: ${M.reason}`,()=>d(L.number,M.id)),className:"px-4 py-2 bg-amber-600 text-white rounded-lg text-xs font-semibold hover:bg-amber-700 flex items-center gap-1.5",children:[e.jsx(w,{className:"w-3 h-3"})," Pay ",te(M.amount)]}):e.jsx("span",{className:"text-xs text-amber-600 font-semibold",children:"OUTSTANDING"})]},M.id))})]}),F.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs text-red-500 font-semibold uppercase mb-2",children:"Late Fees & Fines"}),e.jsx("div",{className:"space-y-2",children:F.map((M,ce)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 border border-red-100 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-ink-900",children:M.reason}),e.jsxs("p",{className:"text-xs text-ink-400",children:[M.date,"  ",te(M.amount)]})]}),T?e.jsxs("button",{onClick:()=>Ne(M.amount,`Late Fee: ${M.reason}`,()=>u(L.number,M.amount,"stripe")),className:"px-4 py-2 bg-red-600 text-white rounded-lg text-xs font-semibold hover:bg-red-700 flex items-center gap-1.5",children:[e.jsx(w,{className:"w-3 h-3"})," Pay ",te(M.amount)]}):e.jsx("span",{className:"text-xs text-red-600 font-semibold",children:te(M.amount)})]},ce))})]}),L.specialAssessments.filter(M=>M.paid).length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs text-ink-400 font-semibold uppercase mb-2",children:"Completed Assessments"}),e.jsx("div",{className:"space-y-1.5",children:L.specialAssessments.filter(M=>M.paid).map(M=>e.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-sage-50 border border-sage-100 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sage-500 text-xs",children:""}),e.jsx("span",{className:"text-xs text-ink-700",children:M.reason})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-medium text-sage-600",children:te(M.amount)}),e.jsxs("span",{className:"text-[10px] text-ink-400",children:["Paid ",M.paidDate]})]})]},M.id))})]}),L.payments.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs text-ink-400 font-semibold uppercase mb-2",children:"Payment History"}),e.jsx("div",{className:"space-y-1.5",children:[...L.payments].sort((M,ce)=>ce.date.localeCompare(M.date)).slice(0,8).map((M,ce)=>e.jsxs("div",{className:"flex items-center justify-between py-2.5 px-3 bg-white border border-ink-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sage-500 text-xs",children:""}),e.jsx("span",{className:"text-xs text-ink-700",children:M.date}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-medium ${M.method==="stripe"?"bg-indigo-100 text-indigo-600":"bg-ink-100 text-ink-500"}`,children:M.method==="stripe"?"Stripe":M.method.toUpperCase()}),M.note&&e.jsx("span",{className:"text-xs text-ink-400",children:M.note})]}),e.jsx("span",{className:"text-sm font-semibold text-ink-900",children:te(M.amount)})]},ce))})]})]})]}),v==="setupRecurring"&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>R(null),children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",onClick:M=>M.stopPropagation(),children:[e.jsx("div",{className:"border-b p-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:"w-6 h-6 text-indigo-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-ink-900",children:"Set Up Recurring Payment"}),e.jsx("p",{className:"text-xs text-ink-400",children:"Stripe Subscription for monthly HOA assessments"})]})]})}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"bg-indigo-50 rounded-xl p-4 border border-indigo-100",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-ink-600",children:"Monthly Assessment"}),e.jsxs("span",{className:"text-lg font-bold text-ink-900",children:[te(L.monthlyFee),"/mo"]})]}),e.jsxs("div",{className:"flex justify-between text-xs text-ink-400",children:[e.jsxs("span",{children:["Unit ",L.number]}),e.jsxs("span",{children:["Billed on the ",o,Xl(o)," of each month"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xs font-bold text-ink-700 uppercase",children:"How it works"}),[{step:"1",text:"You'll be redirected to Stripe's secure checkout page"},{step:"2",text:"Enter your card or bank account details"},{step:"3",text:`${te(L.monthlyFee)} is charged automatically each month on the ${o}${Xl(o)}`},{step:"4",text:"Manage or cancel anytime via the Billing Portal"}].map(M=>e.jsxs("div",{className:"flex items-start gap-2.5",children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-indigo-600 text-white text-[10px] font-bold flex items-center justify-center shrink-0 mt-0.5",children:M.step}),e.jsx("span",{className:"text-sm text-ink-600",children:M.text})]},M.step))]}),e.jsx("div",{className:"bg-sand-100 rounded-lg p-3 border border-ink-100",children:e.jsxs("p",{className:"text-xs text-ink-500",children:[e.jsx("strong",{children:"Secure:"})," Payment details are handled by Stripe and never stored on our servers."]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:B,className:"flex-1 py-3 bg-indigo-600 text-white rounded-lg font-semibold text-sm hover:bg-indigo-700 flex items-center justify-center gap-2",children:[e.jsx(w,{})," Continue to Stripe "]}),e.jsx("button",{onClick:()=>R(null),className:"px-4 py-3 border border-ink-200 text-ink-600 rounded-lg font-medium text-sm hover:bg-ink-50",children:"Cancel"})]})]})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>q(!1),children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",onClick:M=>M.stopPropagation(),children:[e.jsxs("div",{className:"border-b p-5 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-ink-900",children:"Link a Unit"}),e.jsx("p",{className:"text-xs text-ink-400 mt-1",children:"Primary: your name, email & phone auto-populate as unit contact. Co-owner: link only."})]}),e.jsx("button",{onClick:()=>q(!1),className:"text-ink-400 hover:text-ink-600 text-xl",children:""})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto divide-y divide-ink-50",children:y.filter(M=>!P.includes(M.number)).length===0?e.jsx("p",{className:"p-5 text-sm text-ink-400 text-center",children:"All units are already linked to your account."}):y.filter(M=>!P.includes(M.number)).map(M=>e.jsxs("div",{className:"flex items-center justify-between px-5 py-3 hover:bg-mist-50",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold text-ink-900",children:["Unit ",M.number]}),e.jsxs("p",{className:"text-xs text-ink-400",children:[M.owner,"  ",M.status]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{H(M.number,!0),q(!1)},className:"px-3 py-1.5 bg-accent-600 text-white rounded-lg text-xs font-medium hover:bg-accent-700",children:"Primary"}),e.jsx("button",{onClick:()=>{H(M.number,!1),q(!1)},className:"px-3 py-1.5 bg-ink-100 text-ink-600 rounded-lg text-xs font-medium hover:bg-ink-200",children:"Co-owner"})]})]},M.number))}),P.length>0&&e.jsxs("div",{className:"border-t p-4",children:[e.jsx("p",{className:"text-xs font-semibold text-ink-500 uppercase mb-2",children:"Currently Linked"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(M=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-mist-50 border border-mist-200 rounded-lg text-xs text-ink-700",children:["Unit ",M,e.jsx("button",{onClick:()=>U(M),className:"text-red-400 hover:text-red-600 font-bold",children:""})]},M))})]})]})})]})}function Dv(){const{currentUser:l,updateProfile:m}=jt(),[i,o]=C.useState((l==null?void 0:l.name)||""),[u,d]=C.useState((l==null?void 0:l.email)||""),[x,p]=C.useState((l==null?void 0:l.phone)||""),[f,g]=C.useState(!1),[v,R]=C.useState(""),O=()=>{m({name:i,email:u,phone:x}),g(!0),setTimeout(()=>g(!1),2e3)};return e.jsxs("div",{className:"space-y-6 max-w-2xl",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-ink-100 p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-ink-900 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"text-white text-xl font-bold",children:ti((l==null?void 0:l.name)||"")})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-2xl font-bold text-ink-900",children:"Account Settings"}),e.jsx("p",{className:"text-sm text-ink-500",children:l==null?void 0:l.email})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-ink-100 p-6 space-y-4",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:"Profile Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Full Name"}),e.jsx("input",{value:i,onChange:N=>o(N.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:u,onChange:N=>d(N.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Phone Number"}),e.jsx("input",{value:x,onChange:N=>p(N.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:O,className:"px-6 py-2 bg-ink-900 text-white rounded-lg hover:bg-ink-800 font-medium",children:"Save Changes"}),f&&e.jsx("span",{className:"text-sm text-sage-600 font-medium",children:" Saved"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-ink-100 p-6 space-y-4",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:"Linked Units"}),e.jsx("p",{className:"text-sm text-ink-500",children:"Units associated with your account for payments and notifications."}),l!=null&&l.linkedUnits&&l.linkedUnits.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:l.linkedUnits.map(N=>e.jsxs("div",{className:"bg-sage-50 border border-sage-200 rounded-lg px-4 py-2 flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold text-ink-900",children:["Unit ",N]}),e.jsx("span",{className:"pill px-1.5 py-0.5 rounded bg-sage-100 text-sage-700 text-xs",children:"Linked"})]},N))}):e.jsx("div",{className:"bg-mist-50 rounded-lg p-4 text-center text-ink-400",children:"No units linked yet"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:v,onChange:N=>R(N.target.value),className:"flex-1 px-3 py-2 border border-ink-200 rounded-lg",placeholder:"Enter unit number (e.g., 204)"}),e.jsx("button",{onClick:()=>{v&&(m({linkedUnits:[...(l==null?void 0:l.linkedUnits)||[],v]}),R(""))},className:"px-4 py-2 bg-accent-600 text-white rounded-lg hover:bg-accent-700 font-medium",children:"Link Unit"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-ink-100 p-6 space-y-4",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:"Notification Preferences"}),[{label:"Payment reminders",desc:"Receive reminders before assessment due dates",default:!0},{label:"Meeting notices",desc:"Get notified about upcoming meetings and agenda changes",default:!0},{label:"Issue updates",desc:"Status changes on issues you reported or upvoted",default:!0},{label:"Board announcements",desc:"Community-wide announcements from the board",default:!0},{label:"Financial reports",desc:"Monthly and quarterly financial summaries",default:!1}].map(N=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-ink-900",children:N.label}),e.jsx("p",{className:"text-xs text-ink-400",children:N.desc})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",defaultChecked:N.default,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-ink-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-sage-500"})]})]},N.label))]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-ink-100 p-6 space-y-4",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:"Security"}),e.jsx("button",{className:"px-4 py-2 border border-ink-200 text-ink-700 rounded-lg hover:bg-mist-50 font-medium text-sm",children:"Change Password"}),e.jsx("button",{className:"px-4 py-2 border border-ink-200 text-ink-700 rounded-lg hover:bg-mist-50 font-medium text-sm ml-3",children:"Enable Two-Factor Authentication"})]})]})}const wr=l=>l==="board_member"||l==="BOARD_MEMBER"?"Board Member":l==="property_manager"||l==="PROPERTY_MANAGER"?"Property Manager":"Resident",Cr=l=>l==="board_member"||l==="BOARD_MEMBER"?"bg-sage-100 text-sage-700":l==="property_manager"||l==="PROPERTY_MANAGER"?"bg-accent-100 text-accent-700":"bg-mist-100 text-ink-600";function Rv(){const{currentUser:l,buildingMembers:m,buildingInvites:i,inviteMember:o,removeMember:u,revokeInvite:d}=jt(),x=op(),[p,f]=C.useState([]),[g,v]=C.useState([]),[R,O]=C.useState(!0),[N,P]=C.useState(!1),[_,T]=C.useState(!1),[y,j]=C.useState({email:"",role:"resident",unit:""}),[q,A]=C.useState(""),[H,U]=C.useState("resident"),[L,F]=C.useState(!1);C.useEffect(()=>{!x.isDemo&&Yn||O(!1)},[x.id]);const z=async()=>{if(!y.email){alert("Email is required");return}if(x.isDemo||!Yn){o(y.email,y.role.toUpperCase(),y.unit||void 0),j({email:"",role:"resident",unit:""}),P(!1);return}},ne=async()=>{const B=q.trim().split(`
`).filter(w=>w.trim());if(!B.length){alert("Enter at least one email address");return}const I=B.map(w=>{const M=w.split(",").map(ce=>ce.trim());return{email:M[0],role:H,unit:M[1]||""}}).filter(w=>w.email.includes("@"));if(!I.length){alert("No valid email addresses found");return}if(x.isDemo||!Yn){I.forEach(w=>o(w.email,H.toUpperCase(),w.unit||void 0)),A(""),T(!1);return}},K=async(B,I)=>{if(confirm("Revoke this invitation?")&&(x.isDemo||!Yn)){d(I);return}},ie=async B=>{if(x.isDemo||!Yn){alert("Resend is not available in demo mode.");return}},he=x.isDemo?m.filter(B=>B.role!=="PLATFORM_ADMIN"):p,Ne=(x.isDemo?i:g.filter(B=>B.status==="pending")).length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-2xl font-bold text-ink-900",children:"User Management"}),e.jsxs("p",{className:"text-sm text-ink-500",children:[he.length," member",he.length!==1?"s":"",Ne>0&&`  ${Ne} pending invite${Ne!==1?"s":""}`]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>T(!0),className:"px-4 py-2 border border-ink-200 text-ink-700 rounded-lg hover:bg-ink-50 font-medium text-sm",children:"Bulk Invite"}),e.jsx("button",{onClick:()=>P(!0),className:"px-4 py-2 bg-ink-900 text-white rounded-lg hover:bg-ink-800 font-medium text-sm",children:"+ Invite Member"})]})]}),R&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-ink-300 border-t-ink-900 rounded-full animate-spin mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-ink-400",children:"Loading members..."})]}),Ne>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-5",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900 mb-3",children:"Pending Invitations"}),e.jsx("div",{className:"space-y-2",children:x.isDemo?i.map(B=>e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-yellow-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`pill px-2 py-0.5 rounded text-xs ${Cr(B.role)}`,children:wr(B.role)}),B.unit&&e.jsxs("span",{className:"text-xs text-ink-400",children:["Unit ",B.unit]})]}),e.jsx("p",{className:"text-sm text-ink-700",children:B.email}),e.jsx("p",{className:"text-xs text-ink-400 font-mono",children:B.code})]}),e.jsx("button",{onClick:()=>d(B.code),className:"px-3 py-1.5 bg-red-100 text-red-600 rounded-lg text-xs font-medium hover:bg-red-200",children:"Revoke"})]},B.code)):g.filter(B=>B.status==="pending").map(B=>e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-yellow-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`pill px-2 py-0.5 rounded text-xs ${Cr(B.role)}`,children:wr(B.role)}),B.unit&&e.jsxs("span",{className:"text-xs text-ink-400",children:["Unit ",B.unit]})]}),e.jsx("p",{className:"text-sm text-ink-700",children:B.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("p",{className:"text-xs text-ink-400 font-mono",children:B.code}),e.jsx("span",{className:"text-xs text-ink-300",children:""}),e.jsxs("p",{className:"text-xs text-ink-400",children:["by ",B.invited_by_name]}),e.jsx("span",{className:"text-xs text-ink-300",children:""}),e.jsxs("p",{className:"text-xs text-ink-400",children:["expires ",new Date(B.expires_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ie(),disabled:L,className:"px-3 py-1.5 bg-accent-100 text-accent-700 rounded-lg text-xs font-medium hover:bg-accent-200 disabled:opacity-50",children:L?"...":"Resend"}),e.jsx("button",{onClick:()=>K(B.id,B.code),className:"px-3 py-1.5 bg-red-100 text-red-600 rounded-lg text-xs font-medium hover:bg-red-200",children:"Revoke"})]})]},B.id))})]}),!R&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-ink-100",children:[e.jsx("div",{className:"border-b px-5 py-4",children:e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:"Members"})}),e.jsxs("div",{className:"divide-y divide-ink-50",children:[x.isDemo?m.filter(B=>B.role!=="PLATFORM_ADMIN").map(B=>e.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-mist-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-ink-900 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"text-white font-bold text-sm",children:ti(B.name)})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-semibold text-ink-900",children:B.name}),e.jsx("span",{className:`pill px-2 py-0.5 rounded text-xs ${Cr(B.role)}`,children:wr(B.role)}),B.unit&&e.jsxs("span",{className:"text-xs text-ink-400",children:["Unit ",B.unit]})]}),e.jsx("p",{className:"text-xs text-ink-500",children:B.email})]})]}),e.jsx("button",{onClick:()=>{confirm(`Remove ${B.name}?`)&&u(B.id)},className:"text-xs text-red-400 hover:text-red-600",children:"Remove"})]},B.id)):p.map(B=>e.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-mist-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-ink-900 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"text-white font-bold text-sm",children:ti(B.name||B.email||"?")})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-semibold text-ink-900",children:B.name||B.email||B.user_id.slice(0,8)}),e.jsx("span",{className:`pill px-2 py-0.5 rounded text-xs ${Cr(B.role)}`,children:wr(B.role)}),B.board_title&&e.jsx("span",{className:"text-xs text-ink-400",children:B.board_title}),B.unit&&e.jsxs("span",{className:"text-xs text-ink-400",children:["Unit ",B.unit]})]}),e.jsx("p",{className:"text-xs text-ink-500",children:B.email||"Joined "+new Date(B.created_at).toLocaleDateString()})]})]}),B.user_id!==l.id&&e.jsx("button",{className:"text-xs text-red-400 hover:text-red-600",children:"Remove"})]},B.id)),!x.isDemo&&p.length===0&&!R&&e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-ink-400 text-sm",children:"No members yet. Invite your first member to get started."})})]})]}),N&&e.jsx(Te,{title:"Invite Member",subtitle:`Send an invitation to join ${x.name}`,onClose:()=>P(!1),onSave:z,saveLabel:L?"Sending...":"Send Invitation",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Email Address *"}),e.jsx("input",{type:"email",value:y.email,onChange:B=>j({...y,email:B.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg",placeholder:"person@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Role *"}),e.jsxs("select",{value:y.role,onChange:B=>j({...y,role:B.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg",children:[e.jsx("option",{value:"resident",children:"Resident"}),e.jsx("option",{value:"board_member",children:"Board Member"}),e.jsx("option",{value:"property_manager",children:"Property Manager"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Unit Number (optional)"}),e.jsx("input",{value:y.unit,onChange:B=>j({...y,unit:B.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg",placeholder:"e.g., 204"})]}),e.jsx("div",{className:"bg-mist-50 border border-mist-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-ink-500",children:["An email will be sent from ",e.jsx("strong",{children:"noreply@getonetwo.com"})," with reply-to set to ",e.jsx("strong",{children:l.email}),". The recipient will receive a unique invitation code and link to join ",x.name,"."]})})]})}),_&&e.jsx(Te,{title:"Bulk Invite",subtitle:`Invite multiple people to ${x.name}`,onClose:()=>T(!1),onSave:ne,saveLabel:L?"Sending...":"Send All Invitations",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Role for all invitees"}),e.jsxs("select",{value:H,onChange:B=>U(B.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg",children:[e.jsx("option",{value:"resident",children:"Resident"}),e.jsx("option",{value:"board_member",children:"Board Member"}),e.jsx("option",{value:"property_manager",children:"Property Manager"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Email addresses (one per line)"}),e.jsx("textarea",{value:q,onChange:B=>A(B.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm font-mono h-40",placeholder:`alice@example.com, 101
bob@example.com, 204
carol@example.com`}),e.jsxs("p",{className:"text-xs text-ink-400 mt-1",children:["Format: ",e.jsx("span",{className:"font-mono",children:"email"})," or ",e.jsx("span",{className:"font-mono",children:"email, unit"}),"  one per line"]})]}),e.jsx("div",{className:"bg-mist-50 border border-mist-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-ink-500",children:[q.trim().split(`
`).filter(B=>B.trim()&&B.includes("@")).length," invitation",q.trim().split(`
`).filter(B=>B.trim()&&B.includes("@")).length!==1?"s":""," will be sent. Each person receives a unique code and link."]})})]})})]})}const ds={essentials:{fiscalLens:!0,caseOps:!0,complianceRunbook:!0,aiAdvisor:!1,documentVault:!1,paymentProcessing:!1,votesResolutions:!1,communityPortal:!1,vendorManagement:!1,reserveStudyTools:!1},compliance_pro:{fiscalLens:!0,caseOps:!0,complianceRunbook:!0,aiAdvisor:!0,documentVault:!0,paymentProcessing:!0,votesResolutions:!1,communityPortal:!1,vendorManagement:!0,reserveStudyTools:!1},advanced_governance:{fiscalLens:!0,caseOps:!0,complianceRunbook:!0,aiAdvisor:!0,documentVault:!0,paymentProcessing:!0,votesResolutions:!0,communityPortal:!0,vendorManagement:!0,reserveStudyTools:!0}};function B0(l,m){let i=l.toLowerCase().replace(/[^a-z0-9]+/g,"").replace(/condominium|hoa|association|residences|towers|gardens|condos/gi,"").trim();i||(i="building"),i.length>20&&(i=i.slice(0,20));let o=i,u=2;for(;m.includes(o);)o=i+u,u++;return o}const Ev=[{id:"bld-001",name:"Sunny Acres Condominium",subdomain:"sunnyacres",address:{street:"1234 Constitution Ave NW",city:"Washington",state:"DC",zip:"20001"},totalUnits:50,yearBuilt:"1998",status:"active",createdAt:"2025-03-15",subscription:{tier:"compliance_pro",status:"active",startDate:"2025-03-15",nextBillingDate:"2026-03-15",monthlyRate:179,trialEndsAt:null},stats:{activeUsers:7,occupiedUnits:48,collectionRate:94,complianceScore:82,openCases:3,monthlyRevenue:6860},primaryContact:{name:"Robert Mitchell",email:"robert@example.com",phone:"202-555-0401",role:"President"},features:{...ds.compliance_pro},onboardingChecklist:{accountCreated:!0,buildingProfileComplete:!0,unitsConfigured:!0,firstUserInvited:!0,bylawsUploaded:!0,financialSetupDone:!0,goLive:!0}},{id:"bld-002",name:"Park View Towers",subdomain:"parkview",address:{street:"800 Park Road NW",city:"Washington",state:"DC",zip:"20010"},totalUnits:120,yearBuilt:"2005",status:"active",createdAt:"2025-06-01",subscription:{tier:"advanced_governance",status:"active",startDate:"2025-06-01",nextBillingDate:"2026-06-01",monthlyRate:299,trialEndsAt:null},stats:{activeUsers:24,occupiedUnits:115,collectionRate:97,complianceScore:91,openCases:5,monthlyRevenue:23e3},primaryContact:{name:"Amanda Torres",email:"amanda@parkview.com",phone:"202-555-1200",role:"Property Manager"},features:{...ds.advanced_governance},onboardingChecklist:{accountCreated:!0,buildingProfileComplete:!0,unitsConfigured:!0,firstUserInvited:!0,bylawsUploaded:!0,financialSetupDone:!0,goLive:!0}},{id:"bld-003",name:"Georgetown Gardens HOA",subdomain:"georgetowngardens",address:{street:"3100 Wisconsin Ave NW",city:"Washington",state:"DC",zip:"20016"},totalUnits:28,yearBuilt:"1962",status:"active",createdAt:"2025-09-10",subscription:{tier:"essentials",status:"active",startDate:"2025-09-10",nextBillingDate:"2026-03-10",monthlyRate:49,trialEndsAt:null},stats:{activeUsers:4,occupiedUnits:26,collectionRate:88,complianceScore:65,openCases:1,monthlyRevenue:3640},primaryContact:{name:"William Chen",email:"wchen@gtowngardens.com",phone:"202-555-2800",role:"Treasurer"},features:{...ds.essentials},onboardingChecklist:{accountCreated:!0,buildingProfileComplete:!0,unitsConfigured:!0,firstUserInvited:!0,bylawsUploaded:!1,financialSetupDone:!0,goLive:!0}},{id:"bld-004",name:"Capitol Hill Residences",subdomain:"capitolhill",address:{street:"500 East Capitol St SE",city:"Washington",state:"DC",zip:"20003"},totalUnits:75,yearBuilt:"2012",status:"onboarding",createdAt:"2026-02-01",subscription:{tier:"compliance_pro",status:"trial",startDate:"2026-02-01",nextBillingDate:"2026-03-01",monthlyRate:179,trialEndsAt:"2026-03-01"},stats:{activeUsers:2,occupiedUnits:0,collectionRate:0,complianceScore:0,openCases:0,monthlyRevenue:0},primaryContact:{name:"Priya Sharma",email:"priya@capitolhill.com",phone:"202-555-7500",role:"President"},features:{...ds.compliance_pro},onboardingChecklist:{accountCreated:!0,buildingProfileComplete:!0,unitsConfigured:!1,firstUserInvited:!1,bylawsUploaded:!1,financialSetupDone:!1,goLive:!1}},{id:"bld-005",name:"Dupont Circle Condos",subdomain:"dupontcircle",address:{street:"1800 Connecticut Ave NW",city:"Washington",state:"DC",zip:"20009"},totalUnits:36,yearBuilt:"1985",status:"suspended",createdAt:"2025-01-20",subscription:{tier:"essentials",status:"past_due",startDate:"2025-01-20",nextBillingDate:"2026-01-20",monthlyRate:49,trialEndsAt:null},stats:{activeUsers:3,occupiedUnits:34,collectionRate:91,complianceScore:72,openCases:2,monthlyRevenue:4080},primaryContact:{name:"James Wilson",email:"jwilson@dupontcondos.com",phone:"202-555-3600",role:"Vice President"},features:{...ds.essentials},onboardingChecklist:{accountCreated:!0,buildingProfileComplete:!0,unitsConfigured:!0,firstUserInvited:!0,bylawsUploaded:!0,financialSetupDone:!0,goLive:!0}}],Tv=[{id:"padm-000",name:"Alyssa Schelbert",email:"alyssa@getonetwo.com",role:"super_admin",status:"active",lastLogin:"2026-02-22T10:00:00Z",createdAt:"2024-10-01",buildings:["*"]},{id:"padm-001",name:"Alex Rivera",email:"alex@onetwo.com",role:"super_admin",status:"active",lastLogin:"2026-02-20T08:30:00Z",createdAt:"2024-11-01",buildings:["*"]},{id:"padm-002",name:"Morgan Lee",email:"morgan@onetwo.com",role:"support",status:"active",lastLogin:"2026-02-19T14:22:00Z",createdAt:"2025-02-15",buildings:["*"]},{id:"padm-003",name:"Jordan Kim",email:"jordan@onetwo.com",role:"billing",status:"active",lastLogin:"2026-02-18T10:05:00Z",createdAt:"2025-06-01",buildings:["*"]},{id:"padm-004",name:"Casey Nguyen",email:"casey@onetwo.com",role:"readonly",status:"inactive",lastLogin:"2026-01-15T09:00:00Z",createdAt:"2025-09-01",buildings:["bld-001","bld-002"]}],Mv=[{id:"aud-001",timestamp:"2026-02-20T08:32:00Z",actor:"Alex Rivera",actorRole:"super_admin",action:"login",target:"Platform",details:"Admin login from 192.168.1.10",buildingId:null},{id:"aud-002",timestamp:"2026-02-19T16:45:00Z",actor:"Morgan Lee",actorRole:"support",action:"building.update",target:"Capitol Hill Residences",details:"Extended trial period to Mar 15",buildingId:"bld-004"},{id:"aud-003",timestamp:"2026-02-18T11:20:00Z",actor:"Jordan Kim",actorRole:"billing",action:"subscription.update",target:"Dupont Circle Condos",details:"Sent past-due notice (invoice #INV-2026-0042)",buildingId:"bld-005"},{id:"aud-004",timestamp:"2026-02-17T09:15:00Z",actor:"Alex Rivera",actorRole:"super_admin",action:"building.suspend",target:"Dupont Circle Condos",details:"Account suspended  45 days past due",buildingId:"bld-005"},{id:"aud-005",timestamp:"2026-02-15T14:30:00Z",actor:"Alex Rivera",actorRole:"super_admin",action:"building.create",target:"Capitol Hill Residences",details:"New building onboarded  Professional trial started",buildingId:"bld-004"},{id:"aud-006",timestamp:"2026-02-14T10:00:00Z",actor:"Morgan Lee",actorRole:"support",action:"user.assist",target:"Georgetown Gardens",details:"Reset password for William Chen",buildingId:"bld-003"},{id:"aud-007",timestamp:"2026-02-12T16:00:00Z",actor:"Alex Rivera",actorRole:"super_admin",action:"feature.toggle",target:"Park View Towers",details:"Enabled AI Advisor feature",buildingId:"bld-002"},{id:"aud-008",timestamp:"2026-02-10T08:45:00Z",actor:"Jordan Kim",actorRole:"billing",action:"subscription.upgrade",target:"Park View Towers",details:"Upgraded Professional  Enterprise",buildingId:"bld-002"}],Ov=[{id:"tkt-001",buildingId:"bld-003",buildingName:"Georgetown Gardens HOA",subject:"Cannot upload bylaws PDF",description:"Getting error when trying to upload bylaws document. File is 4.2MB PDF.",status:"open",priority:"medium",assignedTo:null,createdBy:"William Chen",createdAt:"2026-02-21T09:30:00Z",updatedAt:"2026-02-21T09:30:00Z",notes:[]},{id:"tkt-002",buildingId:"bld-001",buildingName:"Sunny Acres Condominium",subject:"Need to add property manager role",description:"We hired PremierProperty as our management company. Need to set up their access.",status:"in_progress",priority:"high",assignedTo:"Morgan Lee",createdBy:"Robert Mitchell",createdAt:"2026-02-19T14:00:00Z",updatedAt:"2026-02-20T10:15:00Z",notes:[{author:"Morgan Lee",text:"Sent PM invite instructions to Robert. Following up.",date:"2026-02-20T10:15:00Z"}]},{id:"tkt-003",buildingId:"bld-005",buildingName:"Dupont Circle Condos",subject:"Payment method update failing",description:'Trying to update credit card but getting "card declined" even though card is valid.',status:"waiting",priority:"urgent",assignedTo:"Jordan Kim",createdBy:"James Wilson",createdAt:"2026-02-18T16:20:00Z",updatedAt:"2026-02-19T11:00:00Z",notes:[{author:"Jordan Kim",text:"Contacted payment processor. Waiting for response on hold.",date:"2026-02-19T11:00:00Z"}]},{id:"tkt-004",buildingId:"bld-002",buildingName:"Park View Towers",subject:"Compliance report export",description:"Can we get a CSV export of our compliance status for the board meeting?",status:"resolved",priority:"low",assignedTo:"Morgan Lee",createdBy:"Amanda Torres",createdAt:"2026-02-15T08:00:00Z",updatedAt:"2026-02-16T14:30:00Z",notes:[{author:"Morgan Lee",text:"Generated and emailed compliance report CSV.",date:"2026-02-16T14:30:00Z"}]}],Bv=[{id:"ann-001",title:"Votes & Resolutions Now Available",message:"Advanced Governance subscribers can now create ownership-weighted elections with full compliance tracking.",audience:"advanced_governance",status:"sent",createdBy:"Alyssa Schelbert",createdAt:"2026-02-15",sentAt:"2026-02-15"},{id:"ann-002",title:"Scheduled Maintenance  Feb 28",message:"Brief downtime expected Feb 28 2-4 AM ET for infrastructure upgrades.",audience:"all",status:"draft",createdBy:"Alex Rivera",createdAt:"2026-02-22",sentAt:null}],Uv=[{id:"tmpl-001",name:"Welcome  New Building",subject:"Welcome to ONE two, {{building_name}}!",body:`Hi {{contact_name}},

Your building {{building_name}} is now set up at {{subdomain}}.getonetwo.com.

Your 30-day trial of {{tier_name}} begins today. Here's how to get started:

1. Complete your building profile
2. Configure your units
3. Invite your first board member or resident
4. Upload your governing documents

Questions? Reply to this email or visit our help center.

 The ONE two Team`,trigger:"onboarding_welcome",lastEdited:"2026-01-10"},{id:"tmpl-002",name:"Trial Ending  7 Days",subject:"Your ONE two trial ends in 7 days",body:`Hi {{contact_name}},

Your trial for {{building_name}} ({{tier_name}}) ends on {{trial_end_date}}.

To continue uninterrupted:
 Log in at {{subdomain}}.getonetwo.com
 Go to Account Settings  Billing
 Add a payment method

Need more time? Reply and we'll extend your trial.`,trigger:"trial_ending",lastEdited:"2026-01-15"},{id:"tmpl-003",name:"Payment Past Due",subject:"Action required: Payment overdue for {{building_name}}",body:`Hi {{contact_name}},

We were unable to process payment of {{amount}} for {{building_name}}.

Please update your payment method within 15 days to avoid service interruption.

Update billing: {{subdomain}}.getonetwo.com/settings/billing`,trigger:"past_due",lastEdited:"2026-01-20"},{id:"tmpl-004",name:"Feature Update",subject:"New in ONE two: {{feature_name}}",body:`Hi {{contact_name}},

We've just launched {{feature_name}} for {{tier_name}} subscribers.

{{feature_description}}

Log in to try it: {{subdomain}}.getonetwo.com`,trigger:"feature_update",lastEdited:"2026-02-10"},{id:"tmpl-005",name:"Monthly Summary Report",subject:"Your {{month}} summary for {{building_name}}",body:`Hi {{contact_name}},

Here's your monthly summary for {{building_name}}:

 Compliance Score: {{compliance_score}}%
 Collection Rate: {{collection_rate}}%
 Open Cases: {{open_cases}}
 Active Users: {{active_users}}

View full details: {{subdomain}}.getonetwo.com/dashboard`,trigger:"monthly_report",lastEdited:"2026-02-01"}],Lv=[{id:"inv-001",buildingId:"bld-001",buildingName:"Sunny Acres Condominium",amount:179,status:"paid",date:"2026-02-01",dueDate:"2026-02-15",paidDate:"2026-02-03"},{id:"inv-002",buildingId:"bld-001",buildingName:"Sunny Acres Condominium",amount:179,status:"paid",date:"2026-01-01",dueDate:"2026-01-15",paidDate:"2026-01-02"},{id:"inv-003",buildingId:"bld-002",buildingName:"Park View Towers",amount:299,status:"paid",date:"2026-02-01",dueDate:"2026-02-15",paidDate:"2026-02-01"},{id:"inv-004",buildingId:"bld-002",buildingName:"Park View Towers",amount:299,status:"paid",date:"2026-01-01",dueDate:"2026-01-15",paidDate:"2026-01-03"},{id:"inv-005",buildingId:"bld-003",buildingName:"Georgetown Gardens HOA",amount:49,status:"paid",date:"2026-02-01",dueDate:"2026-02-15",paidDate:"2026-02-10"},{id:"inv-006",buildingId:"bld-005",buildingName:"Dupont Circle Condos",amount:49,status:"overdue",date:"2026-01-20",dueDate:"2026-02-03",paidDate:null},{id:"inv-007",buildingId:"bld-005",buildingName:"Dupont Circle Condos",amount:49,status:"overdue",date:"2025-12-20",dueDate:"2026-01-03",paidDate:null}],Iv=jn((l,m)=>({tenants:Ev,platformUsers:Tv,auditLog:Mv,supportTickets:Ov,announcements:Bv,emailTemplates:Uv,invoices:Lv,impersonating:null,getPlatformMetrics:()=>{const{tenants:i}=m(),o=i.filter(p=>p.status==="active"),u=i.reduce((p,f)=>p+f.stats.activeUsers,0),d=i.filter(p=>["active","trial"].includes(p.subscription.status)).reduce((p,f)=>p+f.subscription.monthlyRate,0),x=o.length>0?Math.round(o.reduce((p,f)=>p+f.stats.complianceScore,0)/o.length):0;return{totalBuildings:i.length,activeBuildings:o.length,totalUnits:i.reduce((p,f)=>p+f.totalUnits,0),totalUsers:u,mrr:d,arr:d*12,avgCompliance:x,trialBuildings:i.filter(p=>p.subscription.status==="trial").length,pastDueBuildings:i.filter(p=>p.subscription.status==="past_due").length}},updateTenantStatus:(i,o)=>l(u=>({tenants:u.tenants.map(d=>d.id===i?{...d,status:o}:d)})),updateSubscription:(i,o)=>l(u=>({tenants:u.tenants.map(d=>d.id===i?{...d,subscription:{...d.subscription,...o}}:d)})),toggleFeature:(i,o)=>l(u=>({tenants:u.tenants.map(d=>d.id===i?{...d,features:{...d.features,[o]:!d.features[o]}}:d)})),addTenant:i=>l(o=>({tenants:[...o.tenants,i]})),changeTier:(i,o,u)=>l(d=>{var x;return{tenants:d.tenants.map(p=>p.id===i?{...p,subscription:{...p.subscription,tier:o,monthlyRate:{essentials:49,compliance_pro:179,advanced_governance:299}[o]},features:{...ds[o]}}:p),auditLog:[{id:`aud-${Date.now()}`,timestamp:new Date().toISOString(),actor:u,actorRole:"super_admin",action:"subscription.tier_change",target:((x=d.tenants.find(p=>p.id===i))==null?void 0:x.name)||i,details:`Tier changed to ${o}  features auto-updated`,buildingId:i},...d.auditLog]}}),updateOnboardingStep:(i,o,u)=>l(d=>({tenants:d.tenants.map(x=>x.id===i?{...x,onboardingChecklist:{...x.onboardingChecklist,[o]:u}}:x)})),addPlatformUser:i=>l(o=>({platformUsers:[...o.platformUsers,i]})),updatePlatformUser:(i,o)=>l(u=>({platformUsers:u.platformUsers.map(d=>d.id===i?{...d,...o}:d)})),removePlatformUser:i=>l(o=>({platformUsers:o.platformUsers.filter(u=>u.id!==i)})),addAuditEntry:i=>l(o=>({auditLog:[{...i,id:`aud-${Date.now()}`,timestamp:new Date().toISOString()},...o.auditLog]})),addTicket:i=>l(o=>({supportTickets:[{...i,id:`tkt-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),notes:[]},...o.supportTickets]})),updateTicket:(i,o)=>l(u=>({supportTickets:u.supportTickets.map(d=>d.id===i?{...d,...o,updatedAt:new Date().toISOString()}:d)})),addTicketNote:(i,o,u)=>l(d=>({supportTickets:d.supportTickets.map(x=>x.id===i?{...x,notes:[...x.notes,{author:o,text:u,date:new Date().toISOString()}],updatedAt:new Date().toISOString()}:x)})),addAnnouncement:i=>l(o=>({announcements:[{...i,id:`ann-${Date.now()}`,createdAt:new Date().toISOString().split("T")[0],sentAt:null},...o.announcements]})),sendAnnouncement:i=>l(o=>({announcements:o.announcements.map(u=>u.id===i?{...u,status:"sent",sentAt:new Date().toISOString().split("T")[0]}:u)})),deleteAnnouncement:i=>l(o=>({announcements:o.announcements.filter(u=>u.id!==i)})),updateTemplate:(i,o)=>l(u=>({emailTemplates:u.emailTemplates.map(d=>d.id===i?{...d,...o,lastEdited:new Date().toISOString().split("T")[0]}:d)})),addTemplate:i=>l(o=>({emailTemplates:[...o.emailTemplates,{...i,id:`tmpl-${Date.now()}`,lastEdited:new Date().toISOString().split("T")[0]}]})),setImpersonating:i=>l({impersonating:i})})),Wl={active:"bg-sage-100 text-sage-700",onboarding:"bg-accent-100 text-accent-700",suspended:"bg-red-100 text-red-700",archived:"bg-ink-100 text-ink-500",trial:"bg-yellow-100 text-yellow-700",past_due:"bg-red-100 text-red-700",cancelled:"bg-ink-100 text-ink-500"},Xa={essentials:"bg-ink-100 text-ink-600",compliance_pro:"bg-accent-100 text-accent-700",advanced_governance:"bg-sage-100 text-sage-700"},Sr={essentials:49,compliance_pro:179,advanced_governance:299},cs={essentials:"Essentials",compliance_pro:"Compliance Pro",advanced_governance:"Advanced Governance"},U0={super_admin:"bg-red-100 text-red-700",support:"bg-accent-100 text-accent-700",billing:"bg-sage-100 text-sage-700",readonly:"bg-ink-100 text-ink-500"},Ar={fiscalLens:"Fiscal Lens",caseOps:"Case Ops",complianceRunbook:"Compliance Runbook",aiAdvisor:"AI Advisor",documentVault:"Document Vault",paymentProcessing:"Payment Processing",votesResolutions:"Votes & Resolutions",communityPortal:"Community Portal",vendorManagement:"Vendor Management",reserveStudyTools:"Reserve Study Tools"},L0={open:"bg-red-100 text-red-700",in_progress:"bg-accent-100 text-accent-700",waiting:"bg-yellow-100 text-yellow-700",resolved:"bg-sage-100 text-sage-700",closed:"bg-ink-100 text-ink-500"},I0={low:"bg-ink-50 text-ink-500",medium:"bg-yellow-50 text-yellow-700",high:"bg-orange-100 text-orange-700",urgent:"bg-red-100 text-red-700"};function _v({on:l,onChange:m}){return e.jsx("button",{onClick:m,className:`w-10 h-5 rounded-full relative transition-colors cursor-pointer ${l?"bg-sage-500":"bg-ink-200"}`,children:e.jsx("div",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full transition-transform shadow-sm ${l?"left-[22px]":"left-0.5"}`})})}function qv(){const l=Iv(),{tenants:m,platformUsers:i,auditLog:o,supportTickets:u,announcements:d,emailTemplates:x,invoices:p,impersonating:f}=l,{currentUser:g}=jt(),v=l.getPlatformMetrics(),R=(g==null?void 0:g.name)||"Admin",[O,N]=C.useState("overview"),[P,_]=C.useState(null),[T,y]=C.useState(null),[j,q]=C.useState(""),[A,H]=C.useState({name:"",street:"",city:"",state:"",zip:"",units:"",yearBuilt:"",contactName:"",contactEmail:"",contactPhone:"",tier:"compliance_pro"}),[U,L]=C.useState({name:"",email:"",role:"support"}),[F,z]=C.useState({buildingId:"",subject:"",description:"",priority:"medium"}),[ne,K]=C.useState(""),[ie,he]=C.useState(null),[pe,Ne]=C.useState({title:"",message:"",audience:"all"}),[B,I]=C.useState(null),[w,M]=C.useState({subject:"",body:""}),ce=()=>{if(!A.name||!A.contactEmail){alert("Building name and contact email required");return}const b=`bld-${Date.now()}`,ae=new Date().toISOString().split("T")[0],Me=new Date(Date.now()+30*864e5).toISOString().split("T")[0],Ae=B0(A.name,m.map(ot=>ot.subdomain));l.addTenant({id:b,name:A.name,subdomain:Ae,address:{street:A.street,city:A.city,state:A.state,zip:A.zip},totalUnits:parseInt(A.units)||0,yearBuilt:A.yearBuilt,status:"onboarding",createdAt:ae,subscription:{tier:A.tier,status:"trial",startDate:ae,nextBillingDate:Me,monthlyRate:Sr[A.tier],trialEndsAt:Me},stats:{activeUsers:0,occupiedUnits:0,collectionRate:0,complianceScore:0,openCases:0,monthlyRevenue:0},primaryContact:{name:A.contactName,email:A.contactEmail,phone:A.contactPhone,role:"Primary Contact"},features:{...ds[A.tier]},onboardingChecklist:{accountCreated:!0,buildingProfileComplete:!!A.street,unitsConfigured:!1,firstUserInvited:!1,bylawsUploaded:!1,financialSetupDone:!1,goLive:!1}}),l.addAuditEntry({actor:R,actorRole:"super_admin",action:"building.create",target:A.name,details:`Onboarded: ${Ae}.getonetwo.com  ${cs[A.tier]} trial`,buildingId:b}),H({name:"",street:"",city:"",state:"",zip:"",units:"",yearBuilt:"",contactName:"",contactEmail:"",contactPhone:"",tier:"compliance_pro"}),y(null)},E=m.find(b=>b.id===P),J=u.filter(b=>b.status!=="resolved"&&b.status!=="closed"),Q=p.filter(b=>b.status==="paid").reduce((b,ae)=>b+ae.amount,0),xe=p.filter(b=>b.status==="overdue").reduce((b,ae)=>b+ae.amount,0),Se=[{id:"overview",label:" Overview"},{id:"buildings",label:" Buildings"},{id:"onboarding",label:" Onboarding"},{id:"tiers",label:" Tiers"},{id:"support",label:" Support",badge:J.length||void 0},{id:"config",label:" Config"},{id:"revenue",label:" Revenue"},{id:"health",label:" Health"},{id:"users",label:" Users"},{id:"audit",label:" Audit"}];return e.jsxs("div",{className:"space-y-0",children:[f&&(()=>{const b=m.find(ae=>ae.id===f);return b?e.jsxs("div",{className:"bg-yellow-400 text-yellow-900 px-4 py-2 flex items-center justify-between text-sm font-semibold",children:[e.jsxs("span",{children:[" Viewing as: ",b.name," (",b.subdomain,".getonetwo.com)"]}),e.jsx("button",{onClick:()=>{l.setImpersonating(null),l.addAuditEntry({actor:R,actorRole:"super_admin",action:"impersonate.end",target:b.name,details:"Stopped impersonating",buildingId:b.id})},className:"px-3 py-1 bg-yellow-900 text-yellow-100 rounded text-xs",children:"Exit View-As"})]}):null})(),e.jsxs("div",{className:"bg-gradient-to-r from-ink-900 via-ink-800 to-red-900 rounded-t-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("span",{className:"px-2 py-0.5 bg-red-500 bg-opacity-30 rounded text-xs font-bold uppercase",children:"Platform Admin"}),e.jsxs("span",{className:"text-xs text-red-200",children:["Logged in as ",R]})]}),e.jsx("h2",{className:"font-display text-2xl font-bold",children:"Multi-Tenancy Console"}),e.jsxs("p",{className:"text-red-200 text-sm mt-1",children:[v.totalBuildings," buildings  ",v.totalUnits," units  ",v.totalUsers," users  MRR ",te(v.mrr)]})]}),e.jsx("div",{className:"bg-white border-x border-b border-ink-100 overflow-x-auto",children:e.jsx("div",{className:"flex min-w-max px-4",children:Se.map(b=>e.jsxs("button",{onClick:()=>{N(b.id),_(null)},className:`px-3.5 py-3 text-sm font-medium border-b-2 whitespace-nowrap transition-colors flex items-center gap-1.5 ${O===b.id?"border-red-600 text-ink-900":"border-transparent text-ink-400 hover:text-ink-700"}`,children:[b.label,b.badge&&e.jsx("span",{className:"bg-red-500 text-white text-[10px] rounded-full px-1.5 py-0.5 font-bold",children:b.badge})]},b.id))})}),e.jsxs("div",{className:"bg-white rounded-b-xl border-x border-b border-ink-100 p-6",children:[O==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[{label:"Active Buildings",value:v.activeBuildings,sub:`of ${v.totalBuildings}`},{label:"MRR",value:te(v.mrr),sub:`ARR ${te(v.arr)}`},{label:"Platform Users",value:v.totalUsers,sub:"all buildings"},{label:"Avg Compliance",value:`${v.avgCompliance}%`,sub:v.avgCompliance>=80?"Healthy":"Needs attention"}].map(b=>e.jsxs("div",{className:"bg-white border border-ink-100 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-semibold text-ink-400 uppercase",children:b.label}),e.jsx("p",{className:"text-2xl font-bold text-ink-900 mt-1",children:b.value}),e.jsx("p",{className:"text-xs text-ink-400",children:b.sub})]},b.label))}),v.pastDueBuildings>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("div",{children:e.jsxs("p",{className:"font-semibold text-red-800",children:[v.pastDueBuildings," past due"]})})]}),J.length>0&&e.jsxs("div",{className:"bg-accent-50 border border-accent-200 rounded-xl p-4 flex items-center gap-3 cursor-pointer",onClick:()=>N("support"),children:[e.jsx("span",{className:"text-xl",children:""}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-accent-800",children:[J.length," open support ticket",J.length!==1?"s":""]}),e.jsxs("p",{className:"text-xs text-accent-600",children:[J.filter(b=>b.priority==="urgent").length," urgent"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900 mb-3",children:"Subscription Mix"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["essentials","compliance_pro","advanced_governance"].map(b=>{const ae=m.filter(Ae=>Ae.subscription.tier===b).length,Me=m.filter(Ae=>Ae.subscription.tier===b&&["active","trial"].includes(Ae.subscription.status)).reduce((Ae,ot)=>Ae+ot.subscription.monthlyRate,0);return e.jsxs("div",{className:`rounded-xl p-4 border ${Xa[b].split(" ")[0]}`,children:[e.jsx("p",{className:"text-xs font-semibold uppercase",children:cs[b]}),e.jsx("p",{className:"text-2xl font-bold text-ink-900 mt-1",children:ae}),e.jsxs("p",{className:"text-xs text-ink-500",children:[te(Me),"/mo"]})]},b)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900 mb-3",children:"All Buildings"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:m.map(b=>e.jsxs("div",{className:"bg-white border border-ink-100 rounded-xl p-4 hover:shadow-md cursor-pointer",onClick:()=>{N("buildings"),_(b.id)},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-ink-900 truncate",children:b.name}),e.jsxs("div",{className:"flex gap-1.5 shrink-0",children:[e.jsx("span",{className:`pill px-2 py-0.5 rounded text-xs font-semibold ${Wl[b.status]}`,children:b.status}),e.jsx("span",{className:`pill px-2 py-0.5 rounded text-xs font-semibold ${Xa[b.subscription.tier]}`,children:cs[b.subscription.tier]})]})]}),e.jsxs("p",{className:"text-xs text-accent-600 font-mono mb-1",children:[b.subdomain,".getonetwo.com"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-ink-400",children:"Units"}),e.jsx("p",{className:"font-bold",children:b.totalUnits})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-ink-400",children:"Users"}),e.jsx("p",{className:"font-bold",children:b.stats.activeUsers})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-ink-400",children:"Collect."}),e.jsxs("p",{className:`font-bold ${b.stats.collectionRate>=90?"text-sage-600":"text-red-600"}`,children:[b.stats.collectionRate||"","%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-ink-400",children:"MRR"}),e.jsx("p",{className:"font-bold",children:te(b.subscription.monthlyRate)})]})]})]},b.id))})]})]}),O==="buildings"&&!E&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-display text-lg font-bold text-ink-900",children:["Buildings (",m.length,")"]}),e.jsx("button",{onClick:()=>y("addBldg"),className:"px-4 py-2 bg-ink-900 text-white rounded-lg text-sm font-medium",children:"+ Onboard"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs text-ink-400 uppercase border-b border-ink-100",children:[e.jsx("th",{className:"py-2 pr-3",children:"Building"}),e.jsx("th",{className:"py-2 pr-3",children:"Subdomain"}),e.jsx("th",{className:"py-2 pr-3",children:"Status"}),e.jsx("th",{className:"py-2 pr-3",children:"Tier"}),e.jsx("th",{className:"py-2 pr-3 text-right",children:"Units"}),e.jsx("th",{className:"py-2 pr-3 text-right",children:"MRR"}),e.jsx("th",{className:"py-2",children:"Contact"})]})}),e.jsx("tbody",{children:m.map(b=>e.jsxs("tr",{className:"border-b border-ink-50 hover:bg-mist-50 cursor-pointer",onClick:()=>_(b.id),children:[e.jsx("td",{className:"py-3 pr-3",children:e.jsx("p",{className:"font-semibold text-ink-900",children:b.name})}),e.jsx("td",{className:"py-3 pr-3",children:e.jsxs("span",{className:"text-xs font-mono text-accent-600",children:[b.subdomain,".getonetwo.com"]})}),e.jsx("td",{className:"py-3 pr-3",children:e.jsx("span",{className:`pill px-2 py-0.5 rounded text-xs font-semibold ${Wl[b.status]}`,children:b.status})}),e.jsx("td",{className:"py-3 pr-3",children:e.jsx("span",{className:`pill px-2 py-0.5 rounded text-xs font-semibold ${Xa[b.subscription.tier]}`,children:cs[b.subscription.tier]})}),e.jsx("td",{className:"py-3 pr-3 text-right",children:b.totalUnits}),e.jsx("td",{className:"py-3 pr-3 text-right font-semibold",children:te(b.subscription.monthlyRate)}),e.jsx("td",{className:"py-3 text-xs text-ink-500",children:b.primaryContact.name})]},b.id))})]})})]}),O==="buildings"&&E&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("button",{onClick:()=>_(null),className:"text-sm text-accent-600 font-medium",children:" Back"}),e.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-2xl font-bold text-ink-900",children:E.name}),e.jsxs("p",{className:"text-sm text-ink-500",children:[E.address.street,", ",E.address.city,", ",E.address.state," ",E.address.zip]}),e.jsxs("p",{className:"text-xs text-accent-600 font-mono mt-1",children:[" ",E.subdomain,".getonetwo.com"]})]}),e.jsxs("div",{className:"flex gap-2 shrink-0",children:[e.jsx("span",{className:`pill px-3 py-1 rounded text-sm font-semibold ${Wl[E.status]}`,children:E.status}),e.jsx("span",{className:`pill px-3 py-1 rounded text-sm font-semibold ${Xa[E.subscription.tier]}`,children:cs[E.subscription.tier]})]})]}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-3",children:[{l:"Units",v:E.totalUnits},{l:"Occupied",v:E.stats.occupiedUnits},{l:"Users",v:E.stats.activeUsers},{l:"Collection",v:`${E.stats.collectionRate}%`},{l:"Compliance",v:`${E.stats.complianceScore}%`},{l:"Cases",v:E.stats.openCases}].map(b=>e.jsxs("div",{className:"bg-mist-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-ink-400",children:b.l}),e.jsx("p",{className:"text-lg font-bold text-ink-900",children:b.v})]},b.l))}),e.jsxs("div",{className:"bg-white border border-ink-100 rounded-xl p-5",children:[e.jsx("h4",{className:"font-bold text-ink-900 mb-3",children:"Actions"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>{l.setImpersonating(E.id),l.addAuditEntry({actor:R,actorRole:"super_admin",action:"impersonate.start",target:E.name,details:`Viewing as ${E.name}`,buildingId:E.id})},className:"px-4 py-2 bg-yellow-500 text-white rounded-lg text-sm font-medium hover:bg-yellow-600",children:" View as Tenant"}),E.status!=="active"&&e.jsx("button",{onClick:()=>{l.updateTenantStatus(E.id,"active"),l.addAuditEntry({actor:R,actorRole:"super_admin",action:"building.activate",target:E.name,details:"Activated",buildingId:E.id})},className:"px-4 py-2 bg-sage-600 text-white rounded-lg text-sm font-medium",children:" Activate"}),E.status!=="suspended"&&e.jsx("button",{onClick:()=>{l.updateTenantStatus(E.id,"suspended"),l.addAuditEntry({actor:R,actorRole:"super_admin",action:"building.suspend",target:E.name,details:"Suspended",buildingId:E.id})},className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium",children:" Suspend"}),E.status==="onboarding"&&e.jsx("button",{onClick:()=>{l.updateTenantStatus(E.id,"active"),l.addAuditEntry({actor:R,actorRole:"super_admin",action:"building.activate",target:E.name,details:"Onboarding complete",buildingId:E.id})},className:"px-4 py-2 bg-accent-600 text-white rounded-lg text-sm font-medium",children:" Complete Onboarding"})]})]}),e.jsxs("div",{className:"bg-accent-50 border border-accent-200 rounded-xl p-5",children:[e.jsx("h4",{className:"font-bold text-ink-900 mb-3",children:"Subscription"}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 text-sm mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Tier"}),e.jsx("p",{className:"font-bold",children:cs[E.subscription.tier]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Status"}),e.jsx("p",{className:"font-bold capitalize",children:E.subscription.status.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Rate"}),e.jsxs("p",{className:"font-bold",children:[te(E.subscription.monthlyRate),"/mo"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Start"}),e.jsx("p",{className:"font-bold",children:E.subscription.startDate})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-ink-400",children:"Next Billing"}),e.jsx("p",{className:"font-bold",children:E.subscription.nextBillingDate})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[["essentials","compliance_pro","advanced_governance"].filter(b=>b!==E.subscription.tier).map(b=>e.jsxs("button",{onClick:()=>l.changeTier(E.id,b,R),className:"px-3 py-1.5 border border-ink-200 rounded-lg text-xs font-medium",children:[" ",cs[b]," (",te(Sr[b]),")"]},b)),E.subscription.status==="past_due"&&e.jsx("button",{onClick:()=>{l.updateSubscription(E.id,{status:"active"}),l.addAuditEntry({actor:R,actorRole:"super_admin",action:"subscription.resolve",target:E.name,details:"Resolved",buildingId:E.id})},className:"px-3 py-1.5 bg-sage-600 text-white rounded-lg text-xs font-medium",children:" Mark Paid"})]}),e.jsx("p",{className:"text-[10px] text-ink-400 mt-3",children:"Tier change auto-updates feature flags."})]}),e.jsxs("div",{className:"bg-white border border-ink-100 rounded-xl p-5",children:[e.jsx("h4",{className:"font-bold text-ink-900 mb-3",children:"Feature Flags"}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:Object.entries(E.features).map(([b,ae])=>{const Me=ds[E.subscription.tier][b],Ae=ae!==Me;return e.jsxs("div",{className:`flex items-center justify-between py-2.5 px-3 rounded-lg ${Ae?"bg-yellow-50 border border-yellow-200":"bg-mist-50"}`,children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-ink-700",children:Ar[b]||b}),Ae&&e.jsx("span",{className:"ml-1.5 text-[9px] bg-yellow-200 text-yellow-800 px-1 py-0.5 rounded font-bold",children:"OVERRIDE"})]}),e.jsx(_v,{on:ae,onChange:()=>{l.toggleFeature(E.id,b),l.addAuditEntry({actor:R,actorRole:"super_admin",action:"feature.toggle",target:E.name,details:`${ae?"Disabled":"Enabled"} ${Ar[b]}`,buildingId:E.id})}})]},b)})})]}),e.jsxs("div",{className:"bg-white border border-ink-100 rounded-xl p-5",children:[e.jsx("h4",{className:"font-bold text-ink-900 mb-3",children:"Onboarding"}),e.jsx("div",{className:"space-y-2",children:Object.entries(E.onboardingChecklist).map(([b,ae])=>{const Me={accountCreated:"Account created",buildingProfileComplete:"Profile complete",unitsConfigured:"Units configured",firstUserInvited:"First user invited",bylawsUploaded:"Bylaws uploaded",financialSetupDone:"Financials set up",goLive:"Go-live"};return e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-mist-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ae,onChange:()=>l.updateOnboardingStep(E.id,b,!ae),className:"h-4 w-4"}),e.jsx("span",{className:`text-sm ${ae?"text-ink-500 line-through":"text-ink-900 font-medium"}`,children:Me[b]})]},b)})})]}),p.filter(b=>b.buildingId===E.id).length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-ink-900 mb-3",children:"Invoices"}),e.jsx("div",{className:"space-y-1",children:p.filter(b=>b.buildingId===E.id).map(b=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-ink-50 text-sm",children:[e.jsx("span",{className:"text-ink-500",children:b.date}),e.jsx("span",{className:"font-semibold",children:te(b.amount)}),e.jsx("span",{className:`pill px-2 py-0.5 rounded text-xs ${b.status==="paid"?"bg-sage-100 text-sage-700":"bg-red-100 text-red-700"}`,children:b.status})]},b.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-ink-900 mb-3",children:"Audit Trail"}),e.jsx("div",{className:"bg-white border border-ink-100 rounded-xl overflow-hidden",children:o.filter(b=>b.buildingId===E.id).length===0?e.jsx("p",{className:"p-4 text-sm text-ink-400",children:"No entries."}):e.jsx("div",{className:"divide-y divide-ink-50",children:o.filter(b=>b.buildingId===E.id).slice(0,10).map(b=>e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2.5 text-sm",children:[e.jsx("span",{className:"text-xs text-ink-300 w-28 shrink-0",children:new Date(b.timestamp).toLocaleDateString()}),e.jsx("span",{className:"font-mono text-xs text-ink-400",children:b.action}),e.jsx("span",{className:"text-ink-600 truncate",children:b.details})]},b.id))})})]})]}),O==="onboarding"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:" Onboarding Pipeline"}),e.jsx("button",{onClick:()=>y("addBldg"),className:"px-4 py-2 bg-ink-900 text-white rounded-lg text-sm font-medium",children:"+ Onboard"})]}),e.jsx("div",{className:"bg-mist-50 border border-mist-200 rounded-xl p-5",children:e.jsxs("p",{className:"text-xs text-ink-400",children:["When onboarded: subdomain provisioned at ",e.jsx("strong",{children:"[name].getonetwo.com"}),", features set to tier defaults, checklist initiated, welcome email queued."]})}),m.filter(b=>b.status==="onboarding").length===0?e.jsx("p",{className:"text-sm text-ink-400 text-center py-8",children:"No buildings onboarding."}):m.filter(b=>b.status==="onboarding").map(b=>{const ae=Object.values(b.onboardingChecklist),Me=ae.filter(Boolean).length,Ae=Math.round(Me/ae.length*100);return e.jsxs("div",{className:"bg-white border border-accent-200 rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-ink-900",children:b.name}),e.jsxs("p",{className:"text-xs text-accent-600 font-mono",children:[b.subdomain,".getonetwo.com"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold",children:[Ae,"%"]}),e.jsxs("p",{className:"text-[10px] text-ink-400",children:[Me,"/",ae.length]})]})]}),e.jsx("div",{className:"w-full h-2 bg-ink-100 rounded-full mb-3",children:e.jsx("div",{className:"h-full bg-accent-500 rounded-full",style:{width:`${Ae}%`}})}),Ae===100&&e.jsx("button",{onClick:()=>{l.updateTenantStatus(b.id,"active"),l.addAuditEntry({actor:R,actorRole:"super_admin",action:"building.activate",target:b.name,details:"Go-live",buildingId:b.id})},className:"mt-2 px-4 py-2 bg-sage-600 text-white rounded-lg text-sm font-medium w-full",children:" Go Live"})]},b.id)}),m.filter(b=>b.subscription.status==="trial").length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-ink-900 mb-3",children:"Active Trials"}),m.filter(b=>b.subscription.status==="trial").map(b=>{const ae=Math.max(0,Math.ceil((new Date(b.subscription.trialEndsAt||"").getTime()-Date.now())/864e5));return e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-ink-900",children:b.name}),e.jsxs("p",{className:"text-xs text-yellow-700",children:[cs[b.subscription.tier],"  ",ae,"d left"]})]}),e.jsxs("span",{className:`text-sm font-bold ${ae<=7?"text-red-600":"text-yellow-700"}`,children:[ae,"d"]})]},b.id)})]})]}),O==="tiers"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:" Tiers & Feature Matrix"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs text-ink-400 uppercase border-b border-ink-200",children:[e.jsx("th",{className:"py-3 pr-6 w-48",children:"Feature"}),["essentials","compliance_pro","advanced_governance"].map(b=>e.jsxs("th",{className:"py-3 px-4 text-center",children:[e.jsx("span",{className:`pill px-2.5 py-1 rounded text-xs font-bold ${Xa[b]}`,children:cs[b]}),e.jsxs("p",{className:"text-lg font-bold text-ink-900 mt-1",children:[te(Sr[b]),"/mo"]})]},b))]})}),e.jsx("tbody",{children:Object.keys(ds.essentials).map(b=>e.jsxs("tr",{className:"border-b border-ink-50",children:[e.jsx("td",{className:"py-3 pr-6 font-medium text-ink-700",children:Ar[b]}),["essentials","compliance_pro","advanced_governance"].map(ae=>e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsx("span",{className:`text-lg ${ds[ae][b]?"text-sage-600":"text-ink-200"}`,children:ds[ae][b]?"":""})},ae))]},b))})]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-ink-900 mb-3",children:"Buildings by Tier"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:["essentials","compliance_pro","advanced_governance"].map(b=>e.jsxs("div",{className:`rounded-xl p-4 border ${Xa[b].split(" ")[0]}`,children:[e.jsx("p",{className:"text-xs font-bold uppercase mb-2",children:cs[b]}),m.filter(ae=>ae.subscription.tier===b).map(ae=>e.jsxs("div",{className:"flex items-center justify-between py-1.5",children:[e.jsx("span",{className:"text-sm text-ink-700",children:ae.name}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${Wl[ae.status]}`,children:ae.status})]},ae.id))]},b))})]})]}),O==="support"&&!ie&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-display text-lg font-bold text-ink-900",children:[" Support Tickets (",u.length,")"]}),e.jsx("button",{onClick:()=>{z({buildingId:"",subject:"",description:"",priority:"medium"}),y("addTicket")},className:"px-4 py-2 bg-ink-900 text-white rounded-lg text-sm font-medium",children:"+ New Ticket"})]}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{l:"Open",c:u.filter(b=>b.status==="open").length,color:"red"},{l:"In Progress",c:u.filter(b=>b.status==="in_progress").length,color:"accent"},{l:"Waiting",c:u.filter(b=>b.status==="waiting").length,color:"yellow"},{l:"Resolved",c:u.filter(b=>b.status==="resolved"||b.status==="closed").length,color:"sage"}].map(b=>e.jsxs("div",{className:"bg-mist-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:`text-2xl font-bold text-${b.color}-600`,children:b.c}),e.jsx("p",{className:"text-xs text-ink-400",children:b.l})]},b.l))}),e.jsx("div",{className:"space-y-2",children:u.map(b=>e.jsx("div",{className:"bg-white border border-ink-100 rounded-xl p-4 hover:shadow-sm cursor-pointer",onClick:()=>he(b.id),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`pill px-2 py-0.5 rounded text-xs font-semibold ${I0[b.priority]}`,children:b.priority}),e.jsx("span",{className:`pill px-2 py-0.5 rounded text-xs font-semibold ${L0[b.status]}`,children:b.status.replace("_"," ")}),e.jsx("p",{className:"font-semibold text-ink-900",children:b.subject})]}),e.jsxs("p",{className:"text-xs text-ink-500",children:[b.buildingName,"  by ",b.createdBy,"  ",new Date(b.createdAt).toLocaleDateString()]})]}),b.assignedTo&&e.jsx("span",{className:"text-xs bg-mist-100 px-2 py-1 rounded shrink-0",children:b.assignedTo})]})},b.id))})]}),O==="support"&&ie&&(()=>{const b=u.find(ae=>ae.id===ie);return b?e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:()=>he(null),className:"text-sm text-accent-600 font-medium",children:" Back"}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-ink-900",children:b.subject}),e.jsxs("p",{className:"text-sm text-ink-500",children:[b.buildingName,"  ",b.createdBy,"  ",new Date(b.createdAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:`pill px-2 py-1 rounded text-xs font-bold ${I0[b.priority]}`,children:b.priority}),e.jsx("span",{className:`pill px-2 py-1 rounded text-xs font-bold ${L0[b.status]}`,children:b.status.replace("_"," ")})]})]}),e.jsx("div",{className:"bg-mist-50 rounded-xl p-4 text-sm text-ink-700",children:b.description}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("select",{value:b.status,onChange:ae=>l.updateTicket(b.id,{status:ae.target.value}),className:"px-3 py-1.5 border border-ink-200 rounded-lg text-xs",children:[e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"waiting",children:"Waiting"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"closed",children:"Closed"})]}),e.jsxs("select",{value:b.assignedTo||"",onChange:ae=>l.updateTicket(b.id,{assignedTo:ae.target.value||null}),className:"px-3 py-1.5 border border-ink-200 rounded-lg text-xs",children:[e.jsx("option",{value:"",children:"Unassigned"}),i.filter(ae=>ae.status==="active").map(ae=>e.jsx("option",{value:ae.name,children:ae.name},ae.id))]}),e.jsx("button",{onClick:()=>{l.setImpersonating(b.buildingId),l.addAuditEntry({actor:R,actorRole:"super_admin",action:"impersonate.start",target:b.buildingName,details:`Impersonating for ticket ${b.id}`,buildingId:b.buildingId})},className:"px-3 py-1.5 bg-yellow-500 text-white rounded-lg text-xs font-medium",children:" View as Tenant"})]}),b.notes.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-ink-900 mb-2",children:"Notes"}),e.jsx("div",{className:"space-y-2",children:b.notes.map((ae,Me)=>e.jsxs("div",{className:"bg-white border border-ink-100 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-semibold text-ink-700",children:ae.author}),e.jsx("span",{className:"text-[10px] text-ink-400",children:new Date(ae.date).toLocaleString()})]}),e.jsx("p",{className:"text-sm text-ink-600",children:ae.text})]},Me))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:ne,onChange:ae=>K(ae.target.value),placeholder:"Add a note...",className:"flex-1 px-3 py-2 border border-ink-200 rounded-lg text-sm",onKeyDown:ae=>{ae.key==="Enter"&&ne.trim()&&(l.addTicketNote(b.id,R,ne.trim()),K(""))}}),e.jsx("button",{onClick:()=>{ne.trim()&&(l.addTicketNote(b.id,R,ne.trim()),K(""))},className:"px-4 py-2 bg-ink-900 text-white rounded-lg text-sm font-medium",children:"Add"})]})]}):null})(),O==="config"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:" System Configuration"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-ink-900 mb-3",children:"Email Templates"}),e.jsxs("p",{className:"text-xs text-ink-400 mb-3",children:["Templates use ","{{","variable","}}","  placeholders. Used for automated and manual communications."]}),e.jsx("div",{className:"space-y-2",children:x.map(b=>e.jsxs("div",{className:"bg-white border border-ink-100 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-ink-900",children:b.name}),e.jsxs("p",{className:"text-xs text-ink-400",children:["Trigger: ",e.jsx("span",{className:"font-mono text-accent-600",children:b.trigger}),"  Last edited ",b.lastEdited]})]}),e.jsx("button",{onClick:()=>{I(b.id),M({subject:b.subject,body:b.body}),y("editTemplate")},className:"px-3 py-1.5 border border-ink-200 rounded-lg text-xs font-medium",children:"Edit"})]}),e.jsxs("p",{className:"text-xs text-ink-500 font-mono bg-mist-50 rounded p-2",children:["Subject: ",b.subject]})]},b.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-bold text-ink-900",children:"Announcements"}),e.jsx("button",{onClick:()=>{Ne({title:"",message:"",audience:"all"}),y("addAnn")},className:"px-4 py-2 bg-ink-900 text-white rounded-lg text-sm font-medium",children:"+ New"})]}),e.jsx("div",{className:"space-y-2",children:d.map(b=>e.jsxs("div",{className:"bg-white border border-ink-100 rounded-xl p-4 flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-semibold text-ink-900",children:b.title}),e.jsx("span",{className:`pill px-2 py-0.5 rounded text-xs ${b.status==="sent"?"bg-sage-100 text-sage-700":"bg-yellow-100 text-yellow-700"}`,children:b.status}),e.jsxs("span",{className:"text-xs text-ink-400",children:[" ",b.audience==="all"?"All buildings":cs[b.audience]||b.audience]})]}),e.jsxs("p",{className:"text-xs text-ink-500",children:[b.message.slice(0,120),b.message.length>120?"...":""]}),e.jsxs("p",{className:"text-[10px] text-ink-400 mt-1",children:["by ",b.createdBy,"  ",b.createdAt,b.sentAt?`  sent ${b.sentAt}`:""]})]}),e.jsxs("div",{className:"flex gap-1 shrink-0",children:[b.status==="draft"&&e.jsx("button",{onClick:()=>{l.sendAnnouncement(b.id),l.addAuditEntry({actor:R,actorRole:"super_admin",action:"announcement.send",target:b.title,details:`Sent to ${b.audience}`,buildingId:null})},className:"px-3 py-1.5 bg-sage-600 text-white rounded-lg text-xs font-medium",children:"Send"}),e.jsx("button",{onClick:()=>l.deleteAnnouncement(b.id),className:"text-xs text-red-400 px-2",children:""})]})]},b.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-ink-900 mb-3",children:"Default Feature Sets per Tier"}),e.jsx("p",{className:"text-xs text-ink-400 mb-3",children:"These defaults are applied when a building is onboarded or changes tier. Individual buildings can override."}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-ink-400 uppercase border-b border-ink-100",children:[e.jsx("th",{className:"py-2 pr-4",children:"Feature"}),["essentials","compliance_pro","advanced_governance"].map(b=>e.jsx("th",{className:"py-2 px-3 text-center",children:cs[b]},b))]})}),e.jsx("tbody",{children:Object.keys(ds.essentials).map(b=>e.jsxs("tr",{className:"border-b border-ink-50",children:[e.jsx("td",{className:"py-2 pr-4 text-ink-700",children:Ar[b]}),["essentials","compliance_pro","advanced_governance"].map(ae=>e.jsx("td",{className:"py-2 px-3 text-center",children:ds[ae][b]?e.jsx("span",{className:"text-sage-600",children:""}):e.jsx("span",{className:"text-ink-200",children:""})},ae))]},b))})]})})]})]}),O==="revenue"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:" Revenue & Billing"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[{l:"MRR",v:te(v.mrr),sub:"Monthly recurring"},{l:"ARR",v:te(v.arr),sub:"Annual projection"},{l:"Collected",v:te(Q),sub:"This period"},{l:"Overdue",v:te(xe),sub:`${p.filter(b=>b.status==="overdue").length} invoices`,color:xe>0?"text-red-600":""}].map(b=>e.jsxs("div",{className:"bg-white border border-ink-100 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-semibold text-ink-400 uppercase",children:b.l}),e.jsx("p",{className:`text-2xl font-bold mt-1 ${b.color||"text-ink-900"}`,children:b.v}),e.jsx("p",{className:"text-xs text-ink-400",children:b.sub})]},b.l))}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-ink-900 mb-3",children:"Revenue by Tier"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["essentials","compliance_pro","advanced_governance"].map(b=>{const ae=m.filter(ot=>ot.subscription.tier===b&&["active","trial"].includes(ot.subscription.status)),Me=ae.reduce((ot,St)=>ot+St.subscription.monthlyRate,0),Ae=v.mrr>0?Math.round(Me/v.mrr*100):0;return e.jsxs("div",{className:"bg-mist-50 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-bold uppercase text-ink-500",children:cs[b]}),e.jsxs("p",{className:"text-xl font-bold text-ink-900 mt-1",children:[te(Me),"/mo"]}),e.jsxs("p",{className:"text-xs text-ink-400",children:[ae.length," buildings  ",Ae,"% of MRR"]}),e.jsx("div",{className:"w-full h-1.5 bg-ink-100 rounded-full mt-2",children:e.jsx("div",{className:"h-full bg-accent-500 rounded-full",style:{width:`${Ae}%`}})})]},b)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-ink-900 mb-3",children:"Recent Invoices"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs text-ink-400 uppercase border-b border-ink-100",children:[e.jsx("th",{className:"py-2 pr-3",children:"Invoice"}),e.jsx("th",{className:"py-2 pr-3",children:"Building"}),e.jsx("th",{className:"py-2 pr-3",children:"Date"}),e.jsx("th",{className:"py-2 pr-3",children:"Due"}),e.jsx("th",{className:"py-2 pr-3 text-right",children:"Amount"}),e.jsx("th",{className:"py-2 pr-3",children:"Status"}),e.jsx("th",{className:"py-2",children:"Paid"})]})}),e.jsx("tbody",{children:p.sort((b,ae)=>ae.date.localeCompare(b.date)).map(b=>e.jsxs("tr",{className:"border-b border-ink-50",children:[e.jsx("td",{className:"py-2.5 pr-3 font-mono text-xs text-ink-400",children:b.id}),e.jsx("td",{className:"py-2.5 pr-3 text-ink-700",children:b.buildingName}),e.jsx("td",{className:"py-2.5 pr-3 text-xs text-ink-500",children:b.date}),e.jsx("td",{className:"py-2.5 pr-3 text-xs text-ink-500",children:b.dueDate}),e.jsx("td",{className:"py-2.5 pr-3 text-right font-semibold",children:te(b.amount)}),e.jsx("td",{className:"py-2.5 pr-3",children:e.jsx("span",{className:`pill px-2 py-0.5 rounded text-xs ${b.status==="paid"?"bg-sage-100 text-sage-700":b.status==="overdue"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:b.status})}),e.jsx("td",{className:"py-2.5 text-xs text-ink-500",children:b.paidDate||""})]},b.id))})]})})]})]}),O==="health"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:" Tenant Health"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-sage-50 border border-sage-200 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-sage-700",children:m.filter(b=>b.stats.complianceScore>=80).length}),e.jsx("p",{className:"text-xs text-sage-600",children:"Healthy (80%)"})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-yellow-700",children:m.filter(b=>b.stats.complianceScore>=50&&b.stats.complianceScore<80).length}),e.jsx("p",{className:"text-xs text-yellow-600",children:"At Risk (50-79%)"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-red-700",children:m.filter(b=>b.stats.complianceScore<50&&b.status==="active").length}),e.jsxs("p",{className:"text-xs text-red-600",children:["Critical (","<","50%)"]})]})]}),e.jsx("div",{className:"space-y-2",children:m.filter(b=>b.status!=="archived").sort((b,ae)=>b.stats.complianceScore-ae.stats.complianceScore).map(b=>{const ae=b.stats.complianceScore,Me=ae>=80?"sage":ae>=50?"yellow":"red";return e.jsxs("div",{className:"bg-white border border-ink-100 rounded-xl p-4 flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-semibold text-ink-900",children:b.name}),e.jsx("span",{className:`pill px-2 py-0.5 rounded text-xs ${Wl[b.status]}`,children:b.status})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-ink-400",children:"Compliance"}),e.jsxs("p",{className:`font-bold text-${Me}-600`,children:[ae||"","%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-ink-400",children:"Collection"}),e.jsxs("p",{className:`font-bold ${b.stats.collectionRate>=90?"text-sage-600":"text-red-600"}`,children:[b.stats.collectionRate||"","%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-ink-400",children:"Users"}),e.jsx("p",{className:"font-bold",children:b.stats.activeUsers})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-ink-400",children:"Cases"}),e.jsx("p",{className:"font-bold",children:b.stats.openCases})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-ink-400",children:"MRR"}),e.jsx("p",{className:"font-bold",children:te(b.subscription.monthlyRate)})]})]})]}),e.jsxs("div",{className:"w-20 shrink-0",children:[e.jsx("div",{className:"w-full h-2 bg-ink-100 rounded-full",children:e.jsx("div",{className:`h-full bg-${Me}-500 rounded-full`,style:{width:`${ae}%`}})}),e.jsxs("p",{className:`text-center text-xs font-bold mt-1 text-${Me}-600`,children:[ae,"%"]})]})]},b.id)})})]}),O==="users"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-display text-lg font-bold text-ink-900",children:["Platform Users (",i.length,")"]}),e.jsx("button",{onClick:()=>{L({name:"",email:"",role:"support"}),y("addUser")},className:"px-4 py-2 bg-ink-900 text-white rounded-lg text-sm font-medium",children:"+ Add"})]}),e.jsx("div",{className:"space-y-3",children:i.map(b=>e.jsxs("div",{className:"bg-white border border-ink-100 rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`h-10 w-10 rounded-full ${b.status==="active"?"bg-ink-900":"bg-ink-300"} flex items-center justify-center shrink-0`,children:e.jsx("span",{className:"text-white font-bold text-sm",children:b.name.split(" ").map(ae=>ae[0]).join("")})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-semibold text-ink-900",children:b.name}),e.jsx("span",{className:`pill px-2 py-0.5 rounded text-xs font-semibold ${U0[b.role]}`,children:b.role.replace("_"," ")})]}),e.jsx("p",{className:"text-xs text-ink-500",children:b.email}),e.jsxs("p",{className:"text-xs text-ink-400",children:["Last: ",b.lastLogin?new Date(b.lastLogin).toLocaleDateString():"Never"]})]})]}),e.jsx("button",{onClick:()=>{confirm(`Remove ${b.name}?`)&&(l.removePlatformUser(b.id),l.addAuditEntry({actor:R,actorRole:"super_admin",action:"user.remove",target:b.name,details:`Removed (${b.role})`,buildingId:null}))},className:"text-xs text-red-500",children:"Remove"})]},b.id))})]}),O==="audit"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsxs("h3",{className:"font-display text-lg font-bold text-ink-900",children:["Audit Log (",o.length,")"]}),e.jsx("input",{value:j,onChange:b=>q(b.target.value),placeholder:"Filter...",className:"px-3 py-2 border border-ink-200 rounded-lg text-sm w-72"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs text-ink-400 uppercase border-b border-ink-100",children:[e.jsx("th",{className:"py-2 pr-3 w-40",children:"Timestamp"}),e.jsx("th",{className:"py-2 pr-3",children:"Actor"}),e.jsx("th",{className:"py-2 pr-3",children:"Role"}),e.jsx("th",{className:"py-2 pr-3",children:"Action"}),e.jsx("th",{className:"py-2 pr-3",children:"Target"}),e.jsx("th",{className:"py-2",children:"Details"})]})}),e.jsx("tbody",{children:o.filter(b=>!j||[b.actor,b.action,b.target,b.details].some(ae=>ae.toLowerCase().includes(j.toLowerCase()))).map(b=>e.jsxs("tr",{className:"border-b border-ink-50 hover:bg-mist-50",children:[e.jsx("td",{className:"py-2.5 pr-3 text-xs text-ink-400 whitespace-nowrap",children:new Date(b.timestamp).toLocaleString()}),e.jsx("td",{className:"py-2.5 pr-3 font-medium text-ink-900 whitespace-nowrap",children:b.actor}),e.jsx("td",{className:"py-2.5 pr-3",children:e.jsx("span",{className:`pill px-1.5 py-0.5 rounded text-xs ${U0[b.actorRole]}`,children:b.actorRole.replace("_"," ")})}),e.jsx("td",{className:"py-2.5 pr-3 text-ink-600 font-mono text-xs whitespace-nowrap",children:b.action}),e.jsx("td",{className:"py-2.5 pr-3 text-ink-700 whitespace-nowrap",children:b.target}),e.jsx("td",{className:"py-2.5 text-ink-500 truncate max-w-xs",children:b.details})]},b.id))})]})})]})]}),T==="addBldg"&&e.jsx(Te,{title:"Onboard New Building",subtitle:"Provisions subdomain and starts trial",onClose:()=>y(null),onSave:ce,saveLabel:"Create & Provision",wide:!0,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border-b border-ink-100 pb-2",children:e.jsx("p",{className:"text-xs font-semibold text-ink-400 uppercase",children:"Building"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Name *"}),e.jsx("input",{value:A.name,onChange:b=>H({...A,name:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg",placeholder:"Sunny Acres Condominium"})]}),A.name&&e.jsx("div",{className:"bg-accent-50 border border-accent-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-accent-800",children:[" ",e.jsxs("strong",{className:"font-mono",children:[B0(A.name,m.map(b=>b.subdomain)),".getonetwo.com"]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Street"}),e.jsx("input",{value:A.street,onChange:b=>H({...A,street:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"City"}),e.jsx("input",{value:A.city,onChange:b=>H({...A,city:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"State"}),e.jsx("input",{value:A.state,onChange:b=>H({...A,state:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg",maxLength:2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"ZIP"}),e.jsx("input",{value:A.zip,onChange:b=>H({...A,zip:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Units"}),e.jsx("input",{type:"number",value:A.units,onChange:b=>H({...A,units:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Year Built"}),e.jsx("input",{value:A.yearBuilt,onChange:b=>H({...A,yearBuilt:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]})]}),e.jsx("div",{className:"border-b border-ink-100 pb-2 mt-2",children:e.jsx("p",{className:"text-xs font-semibold text-ink-400 uppercase",children:"Primary Contact"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Name"}),e.jsx("input",{value:A.contactName,onChange:b=>H({...A,contactName:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Email *"}),e.jsx("input",{value:A.contactEmail,onChange:b=>H({...A,contactEmail:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Phone"}),e.jsx("input",{value:A.contactPhone,onChange:b=>H({...A,contactPhone:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]})]}),e.jsx("div",{className:"border-b border-ink-100 pb-2 mt-2",children:e.jsx("p",{className:"text-xs font-semibold text-ink-400 uppercase",children:"Tier"})}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["essentials","compliance_pro","advanced_governance"].map(b=>e.jsxs("button",{type:"button",onClick:()=>H({...A,tier:b}),className:`p-3 rounded-xl border-2 text-left ${A.tier===b?"border-accent-500 bg-accent-50":"border-ink-100 hover:border-ink-200"}`,children:[e.jsx("p",{className:"font-bold text-ink-900",children:cs[b]}),e.jsxs("p",{className:"text-lg font-bold text-accent-600",children:[te(Sr[b]),e.jsx("span",{className:"text-xs font-normal text-ink-400",children:"/mo"})]}),e.jsxs("p",{className:"text-xs text-ink-400 mt-1",children:[Object.entries(ds[b]).filter(([,ae])=>ae).length," features"]})]},b))})]})}),T==="addUser"&&e.jsx(Te,{title:"Add Platform User",onClose:()=>y(null),onSave:()=>{if(!U.name||!U.email){alert("Required");return}l.addPlatformUser({id:`padm-${Date.now()}`,name:U.name,email:U.email,role:U.role,status:"active",lastLogin:"",createdAt:new Date().toISOString().split("T")[0],buildings:["*"]}),l.addAuditEntry({actor:R,actorRole:"super_admin",action:"user.create",target:U.name,details:`Created (${U.role})`,buildingId:null}),y(null)},saveLabel:"Create",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Name *"}),e.jsx("input",{value:U.name,onChange:b=>L({...U,name:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Email *"}),e.jsx("input",{value:U.email,onChange:b=>L({...U,email:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Role"}),e.jsxs("select",{value:U.role,onChange:b=>L({...U,role:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg bg-white",children:[e.jsx("option",{value:"super_admin",children:"Super Admin"}),e.jsx("option",{value:"support",children:"Support"}),e.jsx("option",{value:"billing",children:"Billing"}),e.jsx("option",{value:"readonly",children:"Read Only"})]})]})]})}),T==="addTicket"&&e.jsx(Te,{title:"Create Support Ticket",onClose:()=>y(null),onSave:()=>{if(!F.subject||!F.buildingId){alert("Building and subject required");return}const b=m.find(ae=>ae.id===F.buildingId);l.addTicket({buildingId:F.buildingId,buildingName:(b==null?void 0:b.name)||"",subject:F.subject,description:F.description,status:"open",priority:F.priority,assignedTo:null,createdBy:R}),y(null)},saveLabel:"Create",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Building *"}),e.jsxs("select",{value:F.buildingId,onChange:b=>z({...F,buildingId:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Select..."}),m.map(b=>e.jsx("option",{value:b.id,children:b.name},b.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Subject *"}),e.jsx("input",{value:F.subject,onChange:b=>z({...F,subject:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Description"}),e.jsx("textarea",{value:F.description,onChange:b=>z({...F,description:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Priority"}),e.jsxs("select",{value:F.priority,onChange:b=>z({...F,priority:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]})]})}),T==="addAnn"&&e.jsx(Te,{title:"New Announcement",onClose:()=>y(null),onSave:()=>{if(!pe.title){alert("Title required");return}l.addAnnouncement({title:pe.title,message:pe.message,audience:pe.audience,status:"draft",createdBy:R}),y(null)},saveLabel:"Save Draft",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Title *"}),e.jsx("input",{value:pe.title,onChange:b=>Ne({...pe,title:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Message"}),e.jsx("textarea",{value:pe.message,onChange:b=>Ne({...pe,message:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",rows:4})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Audience"}),e.jsxs("select",{value:pe.audience,onChange:b=>Ne({...pe,audience:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:"All Buildings"}),e.jsx("option",{value:"essentials",children:"Essentials Tier"}),e.jsx("option",{value:"compliance_pro",children:"Compliance Pro"}),e.jsx("option",{value:"advanced_governance",children:"Advanced Governance"})]})]})]})}),T==="editTemplate"&&B&&e.jsx(Te,{title:"Edit Email Template",onClose:()=>{y(null),I(null)},onSave:()=>{l.updateTemplate(B,{subject:w.subject,body:w.body}),y(null),I(null)},saveLabel:"Save",wide:!0,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Subject Line"}),e.jsx("input",{value:w.subject,onChange:b=>M({...w,subject:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-1",children:"Body"}),e.jsx("textarea",{value:w.body,onChange:b=>M({...w,body:b.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm font-mono",rows:12})]}),e.jsxs("p",{className:"text-[10px] text-ink-400",children:["Variables: ","{{building_name}}, {{contact_name}}, {{subdomain}}, {{tier_name}}, {{trial_end_date}}, {{amount}}, {{compliance_score}}"]})]})})]})}const bn=()=>"tl_"+Date.now()+"_"+Math.random().toString(36).slice(2,6),Br=jn((l,m)=>({elections:[],addElection:i=>l(o=>{const u="elec_"+Date.now(),d=new Date().toISOString();return{elections:[{...i,id:u,createdAt:d,ballots:[],timeline:[{id:bn(),type:"created",description:`Vote created: ${i.title}`,date:d,actor:i.createdBy}],comments:[],resolution:null,linkedCaseId:null},...o.elections]}}),updateElection:(i,o)=>l(u=>({elections:u.elections.map(d=>d.id===i?{...d,...o}:d)})),deleteElection:i=>l(o=>({elections:o.elections.filter(u=>u.id!==i)})),openElection:(i,o)=>l(u=>{const d=new Date().toISOString();return{elections:u.elections.map(x=>x.id===i?{...x,status:"open",openedAt:d,timeline:[...x.timeline,{id:bn(),type:"opened",description:"Voting opened",date:d,actor:o}]}:x)}}),closeElection:(i,o)=>l(u=>{const d=new Date().toISOString();return{elections:u.elections.map(x=>x.id===i?{...x,status:"closed",closedAt:d,timeline:[...x.timeline,{id:bn(),type:"closed",description:"Voting closed",date:d,actor:o}]}:x)}}),certifyElection:(i,o)=>l(u=>{const d=new Date().toISOString();return{elections:u.elections.map(x=>x.id===i?{...x,status:"certified",certifiedAt:d,certifiedBy:o,timeline:[...x.timeline,{id:bn(),type:"certified",description:`Results certified by ${o}`,date:d,actor:o}]}:x)}}),addBallotItem:(i,o)=>l(u=>({elections:u.elections.map(d=>d.id===i?{...d,ballotItems:[...d.ballotItems,{...o,id:"bi_"+Date.now()+"_"+Math.random().toString(36).slice(2,6),attachments:[]}]}:d)})),updateBallotItem:(i,o,u)=>l(d=>({elections:d.elections.map(x=>x.id===i?{...x,ballotItems:x.ballotItems.map(p=>p.id===o?{...p,...u}:p)}:x)})),removeBallotItem:(i,o)=>l(u=>({elections:u.elections.map(d=>d.id===i?{...d,ballotItems:d.ballotItems.filter(x=>x.id!==o)}:d)})),addBallotAttachment:(i,o,u)=>l(d=>({elections:d.elections.map(x=>{var p;return x.id===i?{...x,ballotItems:x.ballotItems.map(f=>f.id===o?{...f,attachments:[...f.attachments,{...u,id:"att_"+Date.now()}]}:f),timeline:[...x.timeline,{id:bn(),type:"document_added",description:`Document "${u.name}" attached to "${((p=x.ballotItems.find(f=>f.id===o))==null?void 0:p.title)||""}"`,date:new Date().toISOString(),actor:u.uploadedBy}]}:x})})),removeBallotAttachment:(i,o,u)=>l(d=>({elections:d.elections.map(x=>x.id===i?{...x,ballotItems:x.ballotItems.map(p=>p.id===o?{...p,attachments:p.attachments.filter(f=>f.id!==u)}:p)}:x)})),recordBallot:(i,o,u)=>l(d=>{const x=new Date().toISOString();return{elections:d.elections.map(p=>{if(p.id!==i)return p;const f=p.ballots.filter(v=>v.unitNumber!==o.unitNumber),g=o.isProxy?`Proxy vote recorded: Unit ${o.unitNumber} (by ${o.proxyVoterName||u})`:`Ballot recorded: Unit ${o.unitNumber} via ${o.method}`;return{...p,ballots:[...f,{...o,id:"bal_"+Date.now(),recordedAt:x}],timeline:[...p.timeline,{id:bn(),type:"ballot_recorded",description:g,date:x,actor:u}]}})}}),removeBallot:(i,o)=>l(u=>({elections:u.elections.map(d=>d.id===i?{...d,ballots:d.ballots.filter(x=>x.id!==o)}:d)})),addComment:(i,o)=>l(u=>{const d=new Date().toISOString();return{elections:u.elections.map(x=>x.id===i?{...x,comments:[...x.comments,{...o,id:"vc_"+Date.now(),createdAt:d}],timeline:[...x.timeline,{id:bn(),type:"comment",description:`Comment by Unit ${o.unitNumber}`,date:d,actor:o.owner}]}:x)}}),addTimelineEvent:(i,o)=>l(u=>({elections:u.elections.map(d=>d.id===i?{...d,timeline:[...d.timeline,{...o,id:bn()}]}:d)})),setComplianceChecks:(i,o)=>l(u=>({elections:u.elections.map(d=>d.id===i?{...d,complianceChecks:o}:d)})),updateComplianceCheck:(i,o,u)=>l(d=>({elections:d.elections.map(x=>x.id===i?{...x,complianceChecks:x.complianceChecks.map(p=>p.id===o?{...p,...u}:p)}:x)})),setResolution:(i,o)=>l(u=>({elections:u.elections.map(d=>d.id===i?{...d,resolution:{...o,id:"res_"+Date.now()}}:d)})),linkCase:(i,o)=>l(u=>{const d=new Date().toISOString();return{elections:u.elections.map(x=>x.id===i?{...x,linkedCaseId:o,timeline:[...x.timeline,{id:bn(),type:"case_created",description:`Compliance case linked: ${o}`,date:d,actor:"System"}]}:x)}}),getResults:(i,o)=>{const u=m().elections.find(O=>O.id===i);if(!u)return null;const d=o.filter(O=>O.status==="OCCUPIED"),x=d.reduce((O,N)=>O+N.votingPct,0),p=u.ballots.reduce((O,N)=>O+N.votingPct,0),f=p>=x*u.quorumRequired/100,g={paper:0,oral:0,virtual:0};let v=0;u.ballots.forEach(O=>{g[O.method]++,O.isProxy&&v++});const R=u.ballotItems.map(O=>{if(O.type==="yes_no"){let N=0,P=0,_=0,T=0,y=0,j=0;u.ballots.forEach(H=>{const U=H.votes[O.id];U==="approve"?(N+=H.votingPct,T++):U==="deny"?(P+=H.votingPct,y++):U==="abstain"&&(_+=H.votingPct,j++)});const q=N+P,A=q>0?N/q*100:0;return{ballotItemId:O.id,title:O.title,type:O.type,approvePct:Math.round(N*100)/100,denyPct:Math.round(P*100)/100,abstainPct:Math.round(_*100)/100,approveCount:T,denyCount:y,abstainCount:j,passed:A>=O.requiredThreshold&&f,threshold:O.requiredThreshold,quorumMet:f}}else{const N={};(O.candidates||[]).forEach(_=>{N[_.id]={pct:0,count:0}}),u.ballots.forEach(_=>{const T=_.votes[O.id];Array.isArray(T)&&T.forEach(y=>{N[y]&&(N[y].pct+=_.votingPct,N[y].count++)})});const P=(O.candidates||[]).map(_=>{var T,y;return{candidateId:_.id,name:_.name,votePct:Math.round((((T=N[_.id])==null?void 0:T.pct)||0)*100)/100,voteCount:((y=N[_.id])==null?void 0:y.count)||0}}).sort((_,T)=>T.votePct-_.votePct);return{ballotItemId:O.id,title:O.title,type:O.type,candidateResults:P,passed:f&&P.length>0,threshold:O.requiredThreshold,quorumMet:f}}});return{totalEligiblePct:Math.round(x*100)/100,totalVotedPct:Math.round(p*100)/100,quorumMet:f,quorumRequired:u.quorumRequired,unitsBalloted:u.ballots.length,unitsEligible:d.length,itemResults:R,participationByMethod:g,proxyCount:v}}}));function $v(l){const{election:m,jurisdiction:i,bylawDocs:o}=l,u=[],d=i==="DC",x=o.some(v=>v.name.toLowerCase().includes("bylaw")),p=o.some(v=>v.name.toLowerCase().includes("cc&r")||v.name.toLowerCase().includes("declaration")),f=m.noticeDate&&m.openedAt?Math.floor((new Date(m.openedAt).getTime()-new Date(m.noticeDate).getTime())/(1e3*60*60*24)):0;if(u.push({id:"cc_notice",rule:d?"DC Code  29-1135.08: Written notice required 10+ days before vote":"Bylaws: Adequate notice required before vote",source:d?"statute":"bylaws",requirement:"Written notice must be provided at least 10 days before the vote",status:m.noticeDate?f>=10?"pass":f>=7?"warning":"fail":"not_checked",note:m.noticeDate?`${f} days notice provided`:"Set a notice date to validate",autoChecked:!0}),u.push({id:"cc_quorum",rule:d?"DC Code  29-1135.03: Quorum required for valid vote":"Bylaws: Quorum requirement",source:d?"statute":"bylaws",requirement:`Quorum of ${m.quorumRequired}% of ownership must participate`,status:"not_checked",note:"Will be validated when voting closes",autoChecked:!1}),m.ballotItems.forEach(v=>{const R=v.requiredThreshold>60?"supermajority":"simple majority",O=m.type==="bylaw_amendment";u.push({id:`cc_threshold_${v.id}`,rule:v.legalRef||`${R} required for "${v.title}"`,source:O?"bylaws":"best_practice",requirement:`${v.requiredThreshold}% approval required`,status:O&&v.requiredThreshold<66.7?"warning":"pass",note:O&&v.requiredThreshold<66.7?"Bylaw amendments typically require supermajority (66.7%)":`${R} threshold set`,autoChecked:!0})}),u.push({id:"cc_bylaws",rule:"Governing documents must be on file",source:"best_practice",requirement:"Current bylaws available for voter reference",status:x?"pass":"fail",note:x?"Bylaws on file":"Upload current bylaws to Building > Legal",autoChecked:!0}),(m.type==="bylaw_amendment"||m.type==="rule_change")&&u.push({id:"cc_ccr",rule:"CC&Rs/Declaration must be referenced for amendments",source:"covenants",requirement:"Current declaration/CC&Rs available",status:p?"pass":"warning",note:p?"CC&Rs on file":"Consider uploading CC&Rs for reference",autoChecked:!0}),m.ballots.some(v=>v.isProxy)&&u.push({id:"cc_proxy",rule:d?"DC Code  29-1135.10: Proxy voting requirements":"Bylaws: Proxy authorization requirements",source:d?"statute":"bylaws",requirement:"Written proxy authorization must be on file for each proxy vote",status:"warning",note:"Verify proxy authorization forms are collected and filed",autoChecked:!1}),u.push({id:"cc_records",rule:d?"DC Code  29-1135.13: Records retention":"Best practice: Retain vote records",source:d?"statute":"best_practice",requirement:"Vote records must be retained for at least 7 years",status:"pass",note:"Records stored in system with full audit trail",autoChecked:!0}),m.type==="budget_approval"||m.type==="special_assessment"){const v=m.ballotItems.some(R=>R.financialImpact);u.push({id:"cc_financial",rule:"Financial impact must be disclosed to voters",source:"best_practice",requirement:"Cost/budget impact documented on ballot items",status:v?"pass":"warning",note:v?"Financial impact documented":"Add financial impact to ballot items for transparency",autoChecked:!0})}return m.type==="board_election"&&u.push({id:"cc_secret",rule:d?"DC Code  29-1135.09: Secret ballot for board elections":"Best practice: Secret ballot",source:d?"statute":"best_practice",requirement:"Board member elections should use secret ballot",status:"pass",note:"Individual votes are not disclosed to other voters in the system",autoChecked:!0}),u}function Tr({onFileSelected:l,accept:m,label:i,compact:o}){const u=C.useRef(null),[d,x]=C.useState(!1),[p,f]=C.useState(""),g=O=>O<1024?O+" B":O<1048576?(O/1024).toFixed(1)+" KB":(O/1048576).toFixed(1)+" MB",v=O=>{const N=new FileReader;N.onload=()=>{var P;f(O.name),l({name:O.name,size:g(O.size),type:((P=O.name.split(".").pop())==null?void 0:P.toLowerCase())||"unknown",dataUrl:N.result})},N.readAsDataURL(O)},R=O=>{O.preventDefault(),x(!1),O.dataTransfer.files.length>0&&v(O.dataTransfer.files[0])};return o?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{var O;return(O=u.current)==null?void 0:O.click()},className:"text-[11px] text-accent-600 font-medium hover:text-accent-700 border border-dashed border-accent-300 rounded-lg px-2.5 py-1 hover:bg-accent-50",children:p?` ${p}`:i||" Choose file"}),e.jsx("input",{ref:u,type:"file",accept:m,className:"hidden",onChange:O=>{var N;(N=O.target.files)!=null&&N[0]&&v(O.target.files[0])}})]}):e.jsxs("div",{children:[e.jsx("div",{onDragOver:O=>{O.preventDefault(),x(!0)},onDragLeave:()=>x(!1),onDrop:R,onClick:()=>{var O;return(O=u.current)==null?void 0:O.click()},className:`border-2 border-dashed rounded-xl p-4 text-center cursor-pointer transition-colors ${d?"border-accent-500 bg-accent-50":p?"border-sage-300 bg-sage-50":"border-ink-200 hover:border-accent-300 hover:bg-mist-50"}`,children:p?e.jsxs("div",{children:[e.jsxs("span",{className:"text-sage-600 text-sm font-medium",children:[" ",p]}),e.jsx("p",{className:"text-[10px] text-ink-400 mt-1",children:"Click or drop to replace"})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-ink-600",children:i||"Drop a file here or click to browse"}),e.jsx("p",{className:"text-[10px] text-ink-400 mt-1",children:m?`Accepts: ${m}`:"PDF, Word, Excel, Images"})]})}),e.jsx("input",{ref:u,type:"file",accept:m||".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png",className:"hidden",onChange:O=>{var N;(N=O.target.files)!=null&&N[0]&&v(O.target.files[0])}})]})}const rd={board_election:"Board Election",budget_approval:"Budget Approval",special_assessment:"Special Assessment",bylaw_amendment:"Bylaw Amendment",rule_change:"Rule Change",meeting_motion:"Meeting Motion",other:"Other"},_0={draft:"bg-ink-100 text-ink-600",open:"bg-green-100 text-green-700",closed:"bg-yellow-100 text-yellow-700",certified:"bg-sage-100 text-sage-700"},q0={paper:"",oral:"",virtual:""},zv={pass:"",fail:"",warning:"",not_checked:""};function pp(){const l=Br(),m=Xt(),{currentUser:i,currentRole:o}=jt(),u=Ns(),d=al(),x=o==="BOARD_MEMBER"||o==="PROPERTY_MANAGER",p=o==="RESIDENT",f=m.units,g=f.filter(k=>k.status==="OCCUPIED"),v=(i==null?void 0:i.linkedUnits)||[],R=f.filter(k=>v.includes(k.number)),[O,N]=C.useState(null),[P,_]=C.useState("ballot"),[T,y]=C.useState(null),[j,q]=C.useState({}),[A,H]=C.useState({title:"",description:"",rationale:"",type:"yes_no",threshold:"50.1",maxSelections:"1",legalRef:"",financialImpact:"",candidates:[]}),[U,L]=C.useState({name:"",unit:"",bio:""}),[F,z]=C.useState({unitNumber:"",method:"paper",isProxy:!1,proxyVoterName:"",proxyAuthorizedBy:"",votes:{},comment:""}),[ne,K]=C.useState(""),[ie,he]=C.useState({}),[pe,Ne]=C.useState(""),[B,I]=C.useState(!1),[w,M]=C.useState([]),[ce,E]=C.useState(""),[J,Q]=C.useState(""),[xe,Se]=C.useState({name:"",size:"",type:""}),[b,ae]=C.useState(null),[Me,Ae]=C.useState(""),[ot,St]=C.useState(null),[ve,Ye]=C.useState(""),[De,et]=C.useState(""),[qe,Zt]=C.useState(""),G=k=>j[k]||"",ye=(k,X)=>q(oe=>({...oe,[k]:X})),V=l.elections.find(k=>k.id===O),ke=V?l.getResults(V.id,f.map(k=>({number:k.number,votingPct:k.votingPct,status:k.status}))):null,_e=x?l.elections:l.elections.filter(k=>k.status!=="draft"),we=(k,X)=>{const oe=l.elections.find(fe=>fe.id===k);return oe?oe.ballots.some(fe=>fe.unitNumber===X):!1};C.useEffect(()=>{if(V&&x){const k=$v({election:V,jurisdiction:u.address.state,bylawDocs:u.legalDocuments.map(X=>({name:X.name,status:X.status})),totalUnits:g.length});JSON.stringify(k.map(X=>X.id+X.status))!==JSON.stringify(V.complianceChecks.map(X=>X.id+X.status))&&l.setComplianceChecks(V.id,k)}},[V==null?void 0:V.id,V==null?void 0:V.ballotItems.length,V==null?void 0:V.ballots.length,V==null?void 0:V.noticeDate,V==null?void 0:V.openedAt]);const tt=()=>{if(!G("title")){alert("Title required");return}l.addElection({title:G("title"),type:G("type")||"board_election",status:"draft",description:G("description"),createdBy:(i==null?void 0:i.name)||"Board",openedAt:null,closedAt:null,certifiedAt:null,certifiedBy:null,scheduledCloseDate:G("closeDate")||null,noticeDate:G("noticeDate")||null,quorumRequired:parseFloat(G("quorum"))||25,ballotItems:[],legalRef:G("legalRef"),notes:"",complianceChecks:[],linkedMeetingId:null}),y(null),q({})},ws=()=>{!V||!A.title||(l.addBallotItem(V.id,{title:A.title,description:A.description,rationale:A.rationale,type:A.type,candidates:A.type!=="yes_no"?A.candidates:void 0,maxSelections:A.type==="multi_select"?parseInt(A.maxSelections)||1:void 0,requiredThreshold:parseFloat(A.threshold)||50.1,legalRef:A.legalRef,financialImpact:A.financialImpact||void 0}),y(null),H({title:"",description:"",rationale:"",type:"yes_no",threshold:"50.1",maxSelections:"1",legalRef:"",financialImpact:"",candidates:[]}))},qs=()=>{if(!V||!F.unitNumber){alert("Select a unit");return}const k=f.find(X=>X.number===F.unitNumber);k&&(l.recordBallot(V.id,{unitNumber:k.number,owner:k.owner,votingPct:k.votingPct,method:F.method,recordedBy:(i==null?void 0:i.name)||"Board",isProxy:F.isProxy,proxyVoterName:F.isProxy?F.proxyVoterName:void 0,proxyAuthorizedBy:F.isProxy?F.proxyAuthorizedBy:void 0,votes:F.votes,comment:F.comment||void 0},(i==null?void 0:i.name)||"Board"),y(null),z({unitNumber:"",method:"paper",isProxy:!1,proxyVoterName:"",proxyAuthorizedBy:"",votes:{},comment:""}))},Zs=()=>{if(!V)return;(B?w:[ne]).forEach(X=>{const oe=f.find(fe=>fe.number===X);!oe||we(V.id,X)||l.recordBallot(V.id,{unitNumber:oe.number,owner:oe.owner,votingPct:oe.votingPct,method:"virtual",recordedBy:(i==null?void 0:i.name)||oe.owner,isProxy:B,proxyVoterName:B?i==null?void 0:i.name:void 0,proxyAuthorizedBy:B?ce:void 0,votes:ie,comment:pe||void 0},(i==null?void 0:i.name)||"Voter")}),y(null),he({}),K(""),Ne(""),I(!1),M([]),E("")},Cs=()=>{if(!V)return;const k=d.createCase({catId:"cat-gov",sitId:"sit-vote",approach:"self",title:`Vote Compliance: ${V.title}`,unit:"N/A",owner:"Board",priority:"medium",notes:`Auto-created from Votes & Resolutions. Election ID: ${V.id}. Status: ${V.status}. Quorum: ${ke!=null&&ke.quorumMet?"Met":"Not met"}. Items: ${V.ballotItems.map(X=>X.title).join(", ")}`});l.linkCase(V.id,k),alert(`Case ${k} created in Case Ops for compliance tracking.`)},us=()=>{if(!V||!J||!b){alert("Select a file");return}l.addBallotAttachment(V.id,J,{name:b.name,size:b.size,type:b.type,uploadedAt:new Date().toISOString(),uploadedBy:(i==null?void 0:i.name)||"Board"}),y(null),ae(null)},ge=()=>{var X;if(!V||!ve.trim())return;const k=((X=R[0])==null?void 0:X.number)||(i==null?void 0:i.unitNumber)||"";l.addComment(V.id,{unitNumber:k,owner:(i==null?void 0:i.name)||"User",text:ve.trim()}),Ye(""),y(null)},ct=()=>{!V||!De.trim()||(l.setResolution(V.id,{text:De,effectiveDate:qe||new Date().toISOString().split("T")[0],recordedBy:(i==null?void 0:i.name)||"Board",linkedCaseId:V.linkedCaseId||void 0}),et(""),Zt(""),y(null))},Jt=k=>{const X={};return k.ballotItems.forEach(oe=>{X[oe.id]=oe.type==="yes_no"?"":[]}),X};if(!V){const k=_e.filter(X=>X.status==="open").length;return e.jsxs("div",{className:"space-y-0",children:[e.jsx("div",{className:"bg-gradient-to-r from-ink-900 via-ink-800 to-accent-800 rounded-t-xl p-8 text-white shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-2xl font-bold",children:" Votes & Resolutions"}),e.jsxs("p",{className:"text-accent-200 text-sm mt-1",children:[_e.length," vote",_e.length!==1?"s":"",k>0&&e.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-green-500 bg-opacity-30 rounded text-[10px] font-bold",children:[k," open"]}),x&&"  Advanced Governance"]})]}),x&&e.jsx("button",{onClick:()=>{q({type:"board_election",quorum:"25"}),y("createElection")},className:"px-5 py-2.5 bg-white bg-opacity-15 hover:bg-opacity-25 text-white rounded-lg text-sm font-semibold border border-white border-opacity-25",children:"+ New Vote"})]})}),e.jsx("div",{className:"bg-white rounded-b-xl border-x border-b border-ink-100 p-6",children:_e.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-5xl mb-4",children:""}),e.jsx("h3",{className:"text-lg font-bold text-ink-900 mb-2",children:x?"No votes yet":"No open votes"}),e.jsx("p",{className:"text-sm text-ink-500 max-w-md mx-auto",children:x?"Create a vote with full compliance tracking, document attachments, and ownership-weighted tallying.":"When the board opens a vote, it will appear here for you to review details and cast your ballot."})]}):e.jsx("div",{className:"space-y-3",children:_e.map(X=>{const oe=l.getResults(X.id,f.map(Ue=>({number:Ue.number,votingPct:Ue.votingPct,status:Ue.status}))),fe=p&&R.length>0?R.map(Ue=>({unit:Ue.number,voted:we(X.id,Ue.number)})):[],Ce=fe.length>0&&fe.every(Ue=>Ue.voted),Ke=X.complianceChecks.filter(Ue=>Ue.status==="pass").length,de=X.complianceChecks.length;return e.jsx("div",{onClick:()=>{N(X.id),_("ballot")},className:`border rounded-xl p-5 cursor-pointer hover:shadow-sm transition-all ${X.status==="open"&&p&&!Ce?"border-green-300 bg-green-50 bg-opacity-30":"border-ink-100 hover:border-accent-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-11 h-11 rounded-lg flex items-center justify-center text-xl ${X.status==="open"?"bg-green-100":"bg-accent-50"}`,children:""}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-bold text-ink-900",children:X.title}),e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded font-semibold ${_0[X.status]}`,children:X.status.toUpperCase()}),de>0&&x&&e.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-medium ${Ke===de?"bg-sage-100 text-sage-700":"bg-amber-100 text-amber-700"}`,children:[Ke,"/",de," checks"]})]}),e.jsxs("p",{className:"text-xs text-ink-500",children:[rd[X.type],"  ",X.ballotItems.length," item",X.ballotItems.length!==1?"s":"","  ",new Date(X.createdAt).toLocaleDateString(),X.scheduledCloseDate?`  Closes ${new Date(X.scheduledCloseDate+"T12:00").toLocaleDateString()}`:""]}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-semibold ${X.quorumRequired>=50?"bg-accent-100 text-accent-700":"bg-sage-100 text-sage-700"}`,children:X.quorumRequired>=50?" Board Vote":" Owner Vote"}),X.linkedMeetingId&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-mist-100 text-ink-600 font-medium",children:" Meeting linked"})]}),p&&X.status==="open"&&fe.length>0&&e.jsx("p",{className:`text-xs mt-1 font-medium ${Ce?"text-sage-600":"text-green-700"}`,children:Ce?" You have voted":" Your vote is needed"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-right",children:[oe&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-bold text-ink-900",children:[oe.unitsBalloted,"/",oe.unitsEligible]}),e.jsx("p",{className:`text-xs ${oe.quorumMet?"text-sage-600":"text-ink-400"}`,children:oe.quorumMet?" Quorum":" Pending"})]}),e.jsx("span",{className:"text-accent-400",children:""})]})]})},X.id)})})}),T==="createElection"&&e.jsx(Te,{title:"Create New Vote",onClose:()=>y(null),onSave:tt,saveLabel:"Create",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Title *"}),e.jsx("input",{value:G("title"),onChange:X=>ye("title",X.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"e.g., FY 2026 Budget Approval"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Type"}),e.jsx("select",{value:G("type"),onChange:X=>ye("type",X.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:Object.entries(rd).map(([X,oe])=>e.jsx("option",{value:X,children:oe},X))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Quorum (%)"}),e.jsx("input",{value:G("quorum"),onChange:X=>ye("quorum",X.target.value),type:"number",className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"25"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Notice Sent Date"}),e.jsx("input",{value:G("noticeDate"),onChange:X=>ye("noticeDate",X.target.value),type:"date",className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"}),e.jsx("p",{className:"text-[10px] text-ink-400 mt-1",children:"For compliance: when notice was sent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Voting Deadline"}),e.jsx("input",{value:G("closeDate"),onChange:X=>ye("closeDate",X.target.value),type:"date",className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Description"}),e.jsx("textarea",{value:G("description"),onChange:X=>ye("description",X.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Legal Reference"}),e.jsx("input",{value:G("legalRef"),onChange:X=>ye("legalRef",X.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"Bylaws Art. IV, Sec. 2"})]})]})})]})}const Kt=new Set(V.ballots.map(k=>k.unitNumber)),ft=g.filter(k=>!Kt.has(k.number)),_t=R.filter(k=>!Kt.has(k.number)),At=R.filter(k=>Kt.has(k.number)),ma=V.complianceChecks.filter(k=>k.status==="pass").length,Nn=V.complianceChecks.filter(k=>k.status==="fail").length,Qn=V.complianceChecks.filter(k=>k.status==="warning").length,D=[{id:"ballot",label:"Vote Items",badge:String(V.ballotItems.length)},{id:"compliance",label:"Compliance",badge:Nn>0?`${Nn} `:Qn>0?`${Qn} `:`${ma} `},{id:"timeline",label:"Timeline",badge:String(V.timeline.length)},{id:"comments",label:"Discussion",badge:String(V.comments.length)},{id:"resolution",label:"Resolution"}];return e.jsxs("div",{className:"space-y-0",children:[e.jsxs("div",{className:"bg-gradient-to-r from-ink-900 via-ink-800 to-accent-800 rounded-t-xl p-8 text-white shadow-sm",children:[e.jsx("button",{onClick:()=>N(null),className:"text-accent-200 hover:text-white text-sm mb-2",children:" Back"}),e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("h2",{className:"font-display text-2xl font-bold",children:V.title}),e.jsx("span",{className:`text-[10px] px-2.5 py-1 rounded font-bold ${_0[V.status]}`,children:V.status.toUpperCase()})]}),e.jsxs("p",{className:"text-accent-200 text-sm mt-1",children:[rd[V.type],"  ",V.ballots.length," ballot",V.ballots.length!==1?"s":"",V.scheduledCloseDate?`  Closes ${new Date(V.scheduledCloseDate+"T12:00").toLocaleDateString()}`:""]})]}),x&&e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[V.status==="draft"&&e.jsx("button",{onClick:()=>{if(!V.ballotItems.length){alert("Add vote items first");return}confirm("Open voting?")&&l.openElection(V.id,(i==null?void 0:i.name)||"Board")},className:"px-4 py-2 bg-green-500 bg-opacity-30 text-white rounded-lg text-sm font-semibold border border-green-300 border-opacity-40 hover:bg-opacity-50",children:" Open"}),V.status==="open"&&e.jsx("button",{onClick:()=>{confirm("Close voting?")&&l.closeElection(V.id,(i==null?void 0:i.name)||"Board")},className:"px-4 py-2 bg-yellow-500 bg-opacity-30 text-white rounded-lg text-sm font-semibold border border-yellow-300 border-opacity-40 hover:bg-opacity-50",children:" Close"}),V.status==="closed"&&e.jsx("button",{onClick:()=>{confirm("Certify results?")&&l.certifyElection(V.id,(i==null?void 0:i.name)||"Board")},className:"px-4 py-2 bg-sage-500 bg-opacity-30 text-white rounded-lg text-sm font-semibold border border-sage-300 border-opacity-40 hover:bg-opacity-50",children:" Certify"}),(V.status==="closed"||V.status==="certified")&&!V.linkedCaseId&&e.jsx("button",{onClick:Cs,className:"px-4 py-2 bg-accent-500 bg-opacity-30 text-white rounded-lg text-sm font-semibold border border-accent-300 border-opacity-40 hover:bg-opacity-50",children:" Create Case"}),!V.linkedCaseId&&e.jsx("button",{onClick:()=>{Ae(""),y("linkCaseToVote")},className:"px-4 py-2 bg-violet-500 bg-opacity-30 text-white rounded-lg text-sm font-semibold border border-violet-300 border-opacity-40 hover:bg-opacity-50",children:" Link Case"}),V.status==="draft"&&e.jsx("button",{onClick:()=>{confirm("Delete?")&&(l.deleteElection(V.id),N(null))},className:"px-4 py-2 bg-red-500 bg-opacity-20 text-white rounded-lg text-sm font-semibold border border-red-300 border-opacity-30",children:"Delete"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-b-xl border-x border-b border-ink-100",children:[p&&V.status==="open"&&_t.length>0&&e.jsx("div",{className:"bg-green-50 border-b-2 border-green-300 p-5",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-green-900",children:" Cast Your Vote"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:_t.map(k=>`Unit ${k.number} (${k.votingPct}%)`).join(", ")}),At.length>0&&e.jsxs("p",{className:"text-xs text-green-600 mt-0.5",children:[" Voted: ",At.map(k=>`Unit ${k.number}`).join(", ")]})]}),e.jsxs("div",{className:"flex gap-2",children:[_t.map(k=>e.jsxs("button",{onClick:()=>{K(k.number),he(Jt(V)),Ne(""),I(!1),M([]),y("castVote")},className:"px-5 py-2.5 bg-green-700 text-white rounded-lg text-sm font-bold hover:bg-green-800",children:["Vote Unit ",k.number]},k.number)),ft.filter(k=>!v.includes(k.number)).length>0&&e.jsx("button",{onClick:()=>{K(""),he(Jt(V)),Ne(""),I(!0),M([]),E(""),y("castVote")},className:"px-5 py-2.5 bg-accent-600 text-white rounded-lg text-sm font-bold hover:bg-accent-700",children:"Vote by Proxy"})]})]})}),p&&V.status==="open"&&_t.length===0&&At.length>0&&e.jsx("div",{className:"bg-sage-50 border-b border-sage-200 p-4",children:e.jsxs("p",{className:"text-sm font-medium text-sage-800",children:[" You have voted for ",At.map(k=>`Unit ${k.number}`).join(", "),"."]})}),ke&&e.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-0 border-b border-ink-100",children:[e.jsx(Za,{label:"Voted",val:`${ke.unitsBalloted}/${ke.unitsEligible}`}),e.jsx(Za,{label:"Ownership",val:`${ke.totalVotedPct.toFixed(1)}%`}),e.jsx(Za,{label:"Quorum",val:ke.quorumMet?" Met":" No",color:ke.quorumMet?"sage":"red"}),e.jsx(Za,{label:"Virtual",val:String(ke.participationByMethod.virtual)}),e.jsx(Za,{label:"Paper/Oral",val:`${ke.participationByMethod.paper}/${ke.participationByMethod.oral}`}),e.jsx(Za,{label:"Proxy",val:String(ke.proxyCount)})]}),e.jsx("div",{className:"flex border-b border-ink-100 overflow-x-auto",children:D.map(k=>e.jsxs("button",{onClick:()=>_(k.id),className:`px-5 py-3 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${P===k.id?"border-accent-600 text-accent-700":"border-transparent text-ink-400 hover:text-ink-600"}`,children:[k.label,k.badge&&e.jsx("span",{className:"ml-1.5 text-[10px] bg-ink-100 text-ink-600 px-1.5 py-0.5 rounded",children:k.badge})]},k.id))}),e.jsxs("div",{className:"p-6 space-y-5",children:[V.description&&P==="ballot"&&e.jsxs("div",{className:"bg-mist-50 border border-mist-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-ink-700",children:V.description}),V.legalRef&&e.jsxs("p",{className:"text-xs text-ink-400 mt-2",children:[" ",V.legalRef]}),V.linkedCaseId&&e.jsxs("p",{className:"text-xs text-accent-600 mt-1",children:[" Case Ops: ",V.linkedCaseId]})]}),P==="ballot"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-bold text-ink-700",children:"Vote Items"}),x&&V.status==="draft"&&e.jsx("button",{onClick:()=>{H({title:"",description:"",rationale:"",type:"yes_no",threshold:"50.1",maxSelections:"1",legalRef:"",financialImpact:"",candidates:[]}),y("addBallotItem")},className:"text-xs text-accent-600 font-semibold",children:"+ Add Item"})]}),V.ballotItems.length===0?e.jsx("p",{className:"text-xs text-ink-400 p-4 text-center border border-ink-100 rounded-xl",children:"No vote items yet."}):e.jsx("div",{className:"space-y-4",children:V.ballotItems.map((k,X)=>{var fe;const oe=ke==null?void 0:ke.itemResults.find(Ce=>Ce.ballotItemId===k.id);return e.jsxs("div",{className:"border border-ink-100 rounded-xl overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-mist-50",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"text-xs font-bold text-ink-400",children:["#",X+1]}),e.jsx("h4",{className:"text-sm font-bold text-ink-900",children:k.title}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-ink-100 text-ink-600",children:k.type==="yes_no"?"Yes/No":k.type==="multi_candidate"?"Candidate":"Multi-Select"})]}),k.description&&e.jsx("p",{className:"text-xs text-ink-600 mt-1",children:k.description}),e.jsxs("p",{className:"text-[10px] text-ink-400 mt-1",children:["Threshold: ",k.requiredThreshold,"%",k.legalRef?`  ${k.legalRef}`:""]})]}),e.jsxs("div",{className:"flex gap-1 shrink-0",children:[x&&V.status==="draft"&&e.jsx("button",{onClick:()=>{Q(k.id),ae(null),y("addAttachment")},className:"text-[10px] text-accent-600 px-2 py-1 rounded bg-accent-50 hover:bg-accent-100",children:"+ Doc"}),x&&V.status==="draft"&&e.jsx("button",{onClick:()=>l.removeBallotItem(V.id,k.id),className:"text-xs text-red-400 hover:text-red-600 px-1",children:""})]})]})}),k.rationale&&e.jsxs("div",{className:"px-4 py-3 border-t border-ink-50 bg-white",children:[e.jsx("p",{className:"text-[10px] font-bold text-ink-400 uppercase tracking-wide mb-1",children:"Background & Rationale"}),e.jsx("p",{className:"text-xs text-ink-700",children:k.rationale})]}),k.financialImpact&&e.jsx("div",{className:"px-4 py-2 border-t border-ink-50 bg-yellow-50",children:e.jsxs("p",{className:"text-[10px] font-bold text-yellow-700",children:[" Financial Impact: ",k.financialImpact]})}),k.attachments.length>0&&e.jsxs("div",{className:"px-4 py-3 border-t border-ink-50 bg-white",children:[e.jsx("p",{className:"text-[10px] font-bold text-ink-400 uppercase tracking-wide mb-1.5",children:" Supporting Documents"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:k.attachments.map(Ce=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-[10px] bg-accent-50 text-accent-700 px-2 py-1 rounded font-medium",children:[" ",Ce.name," ",e.jsx("span",{className:"text-ink-400",children:Ce.size}),x&&V.status==="draft"&&e.jsx("button",{onClick:()=>l.removeBallotAttachment(V.id,k.id,Ce.id),className:"text-red-400 ml-1",children:""})]},Ce.id))})]}),k.candidates&&k.candidates.length>0&&e.jsxs("div",{className:"p-4 border-t border-ink-50",children:[e.jsxs("p",{className:"text-xs font-bold text-ink-600 mb-2",children:["Candidates",k.maxSelections?`  Select up to ${k.maxSelections}`:""]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:k.candidates.map(Ce=>e.jsxs("div",{className:"bg-white border border-ink-100 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm font-medium text-ink-900",children:Ce.name}),e.jsxs("p",{className:"text-[10px] text-ink-400",children:["Unit ",Ce.unit]}),Ce.bio&&e.jsx("p",{className:"text-[10px] text-ink-500 mt-1",children:Ce.bio})]},Ce.id))})]}),oe&&(V.status==="closed"||V.status==="certified")&&e.jsx("div",{className:"p-4 border-t border-ink-50 bg-white",children:k.type==="yes_no"?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`text-sm font-bold ${oe.passed?"text-sage-700":"text-red-700"}`,children:oe.passed?" PASSED":" FAILED"}),e.jsxs("span",{className:"text-[10px] text-ink-400",children:["(need ",oe.threshold,"%)"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"bg-sage-50 rounded-lg p-2 text-center",children:[e.jsx("p",{className:"text-xs text-sage-600",children:"Approve"}),e.jsxs("p",{className:"text-sm font-bold text-sage-700",children:[oe.approvePct,"%"]}),e.jsxs("p",{className:"text-[10px] text-sage-500",children:[oe.approveCount," units"]})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-2 text-center",children:[e.jsx("p",{className:"text-xs text-red-600",children:"Deny"}),e.jsxs("p",{className:"text-sm font-bold text-red-700",children:[oe.denyPct,"%"]}),e.jsxs("p",{className:"text-[10px] text-red-500",children:[oe.denyCount," units"]})]}),e.jsxs("div",{className:"bg-ink-50 rounded-lg p-2 text-center",children:[e.jsx("p",{className:"text-xs text-ink-500",children:"Abstain"}),e.jsxs("p",{className:"text-sm font-bold text-ink-600",children:[oe.abstainPct,"%"]}),e.jsxs("p",{className:"text-[10px] text-ink-400",children:[oe.abstainCount," units"]})]})]})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-ink-600 mb-2",children:"Results"}),(fe=oe.candidateResults)==null?void 0:fe.map((Ce,Ke)=>e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:`text-xs font-bold w-6 ${Ke===0?"text-sage-700":"text-ink-400"}`,children:["#",Ke+1]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-ink-900",children:Ce.name}),e.jsxs("span",{className:"text-sm font-bold",children:[Ce.votePct,"%"]})]}),e.jsx("div",{className:"w-full h-1.5 bg-ink-100 rounded-full mt-1",children:e.jsx("div",{className:`h-full rounded-full ${Ke===0?"bg-sage-500":"bg-accent-400"}`,style:{width:`${ke?Math.min(Ce.votePct/ke.totalVotedPct*100,100):0}%`}})})]})]},Ce.candidateId))]})})]},k.id)})}),V.status==="open"&&x&&e.jsxs("div",{className:"mt-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-bold text-ink-700",children:"Record Ballots"}),e.jsx("button",{onClick:()=>{z({unitNumber:"",method:"paper",isProxy:!1,proxyVoterName:"",proxyAuthorizedBy:"",votes:Jt(V),comment:""}),y("recordBallot")},className:"px-4 py-2 bg-ink-900 text-white rounded-lg text-sm font-semibold hover:bg-ink-800",children:"+ Record"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-sage-50 border border-sage-200 rounded-xl p-3",children:[e.jsxs("p",{className:"text-xs font-bold text-sage-700 mb-1",children:["Voted (",V.ballots.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:V.ballots.map(k=>e.jsxs("span",{className:"text-[10px] bg-sage-100 text-sage-700 px-2 py-0.5 rounded font-medium",children:[q0[k.method]," ",k.unitNumber,k.isProxy?" proxy":""]},k.id))}),!V.ballots.length&&e.jsx("p",{className:"text-[10px] text-sage-500",children:"None"})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3",children:[e.jsxs("p",{className:"text-xs font-bold text-amber-700 mb-1",children:["Pending (",ft.length,")"]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[ft.slice(0,15).map(k=>e.jsx("span",{className:"text-[10px] bg-amber-100 text-amber-700 px-2 py-0.5 rounded",children:k.number},k.number)),ft.length>15&&e.jsxs("span",{className:"text-[10px] text-amber-600",children:["+",ft.length-15," more"]})]})]})]})]}),V.ballots.length>0&&e.jsxs("div",{className:"mt-5",children:[e.jsx("h3",{className:"text-sm font-bold text-ink-700 mb-3",children:"Ballot Log"}),e.jsx("div",{className:"bg-white rounded-xl border border-ink-100 divide-y divide-ink-50",children:V.ballots.sort((k,X)=>X.recordedAt.localeCompare(k.recordedAt)).map(k=>e.jsxs("div",{className:"p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-lg",children:q0[k.method]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-ink-900",children:["Unit ",k.unitNumber,x?`  ${k.owner}`:"",k.isProxy&&e.jsxs("span",{className:"ml-1.5 text-[10px] bg-accent-100 text-accent-700 px-1.5 py-0.5 rounded font-medium",children:["Proxy",k.proxyVoterName?`: ${k.proxyVoterName}`:""]})]}),e.jsxs("p",{className:"text-[10px] text-ink-400",children:[k.votingPct,"%  ",k.method,x&&`  ${k.recordedBy}  ${new Date(k.recordedAt).toLocaleString()}`]}),k.comment&&x&&e.jsxs("p",{className:"text-[10px] text-ink-500 mt-0.5 italic",children:['"',k.comment,'"']})]})]}),x&&V.status==="open"&&e.jsx("button",{onClick:()=>l.removeBallot(V.id,k.id),className:"text-xs text-red-400",children:""})]},k.id))})]})]}),P==="compliance"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-bold text-ink-700",children:"Compliance Checks"}),e.jsxs("div",{className:"flex gap-2 text-[10px]",children:[e.jsxs("span",{className:"bg-sage-100 text-sage-700 px-2 py-0.5 rounded font-medium",children:[ma," Pass"]}),e.jsxs("span",{className:"bg-amber-100 text-amber-700 px-2 py-0.5 rounded font-medium",children:[Qn," Warning"]}),e.jsxs("span",{className:"bg-red-100 text-red-700 px-2 py-0.5 rounded font-medium",children:[Nn," Fail"]})]})]}),V.complianceChecks.length===0?e.jsx("p",{className:"text-xs text-ink-400 text-center p-4 border rounded-xl",children:"Compliance checks will be generated when vote items are added."}):e.jsx("div",{className:"space-y-2",children:V.complianceChecks.map(k=>e.jsx("div",{className:`rounded-xl p-4 border ${k.status==="pass"?"bg-sage-50 border-sage-200":k.status==="fail"?"bg-red-50 border-red-200":k.status==="warning"?"bg-amber-50 border-amber-200":"bg-ink-50 border-ink-100"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-base",children:zv[k.status]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-bold text-ink-900",children:k.rule}),e.jsx("p",{className:"text-[10px] text-ink-600 mt-0.5",children:k.requirement}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-medium ${k.source==="statute"?"bg-accent-100 text-accent-700":k.source==="bylaws"?"bg-sage-100 text-sage-700":k.source==="covenants"?"bg-yellow-100 text-yellow-700":"bg-ink-100 text-ink-500"}`,children:k.source}),k.note&&e.jsx("span",{className:"text-[10px] text-ink-400",children:k.note})]})]}),x&&!k.autoChecked&&e.jsxs("select",{value:k.status,onChange:X=>l.updateComplianceCheck(V.id,k.id,{status:X.target.value}),className:"text-[10px] border rounded px-1 py-0.5",children:[e.jsx("option",{value:"not_checked",children:"Not Checked"}),e.jsx("option",{value:"pass",children:"Pass"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"fail",children:"Fail"})]})]})},k.id))}),V.linkedCaseId&&e.jsx("div",{className:"mt-4 bg-accent-50 border border-accent-200 rounded-xl p-3",children:e.jsxs("p",{className:"text-xs font-medium text-accent-800",children:[" Linked Case: ",V.linkedCaseId,"  tracked in Case Ops for compliance assurance"]})})]}),P==="timeline"&&e.jsx("div",{children:V.timeline.length===0?e.jsx("p",{className:"text-xs text-ink-400 text-center p-4",children:"No events yet."}):e.jsx("div",{className:"relative pl-6 space-y-4",children:V.timeline.sort((k,X)=>X.date.localeCompare(k.date)).map(k=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-6 top-1 w-3 h-3 rounded-full bg-accent-400 border-2 border-white"}),e.jsx("p",{className:"text-xs font-medium text-ink-900",children:k.description}),e.jsxs("p",{className:"text-[10px] text-ink-400",children:[k.actor,"  ",new Date(k.date).toLocaleString()]})]},k.id))})}),P==="comments"&&e.jsxs("div",{children:[(V.status==="open"||V.status==="closed")&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:ve,onChange:k=>Ye(k.target.value),className:"flex-1 px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"Add a comment or question about this vote...",onKeyDown:k=>{k.key==="Enter"&&ve.trim()&&ge()}}),e.jsx("button",{onClick:ge,disabled:!ve.trim(),className:"px-4 py-2 bg-accent-600 text-white rounded-lg text-sm font-semibold disabled:opacity-40",children:"Post"})]})}),V.comments.length===0?e.jsx("p",{className:"text-xs text-ink-400 text-center p-4",children:"No discussion yet. Ask questions or share thoughts about the items being voted on."}):e.jsx("div",{className:"space-y-3",children:V.comments.sort((k,X)=>X.createdAt.localeCompare(k.createdAt)).map(k=>e.jsxs("div",{className:"bg-mist-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-bold text-ink-800",children:k.owner}),e.jsxs("span",{className:"text-[10px] text-ink-400",children:["Unit ",k.unitNumber,"  ",new Date(k.createdAt).toLocaleString()]})]}),e.jsx("p",{className:"text-sm text-ink-700",children:k.text})]},k.id))})]}),P==="resolution"&&e.jsxs("div",{children:[V.resolution?e.jsxs("div",{className:"bg-sage-50 border border-sage-200 rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("h4",{className:"text-sm font-bold text-sage-800",children:"Formal Resolution"})]}),e.jsx("p",{className:"text-sm text-ink-800 whitespace-pre-wrap",children:V.resolution.text}),e.jsxs("p",{className:"text-xs text-ink-400 mt-3",children:["Effective: ",V.resolution.effectiveDate,"  Recorded by ",V.resolution.recordedBy,V.resolution.linkedCaseId?`  Case: ${V.resolution.linkedCaseId}`:""]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-4xl mb-3",children:""}),e.jsx("p",{className:"text-sm text-ink-500 mb-4",children:x?"Record the formal resolution text after certifying results.":"No resolution recorded yet."}),x&&(V.status==="closed"||V.status==="certified")&&e.jsx("button",{onClick:()=>{et(""),Zt(new Date().toISOString().split("T")[0]),y("addResolution")},className:"px-5 py-2.5 bg-accent-600 text-white rounded-lg text-sm font-semibold hover:bg-accent-700",children:"Draft Resolution"})]}),V.status==="certified"&&e.jsxs("div",{className:"mt-4 bg-sage-50 border border-sage-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{children:""}),e.jsx("h4",{className:"text-sm font-bold text-sage-800",children:"Certified"})]}),e.jsxs("p",{className:"text-xs text-sage-700",children:["By ",V.certifiedBy," on ",V.certifiedAt?new Date(V.certifiedAt).toLocaleString():""]})]})]})]})]}),T==="castVote"&&V&&e.jsx(Te,{title:B?"Vote by Proxy":`Cast Your Vote  Unit ${ne}`,onClose:()=>y(null),onSave:Zs,saveLabel:"Submit Vote",children:e.jsxs("div",{className:"space-y-4",children:[B?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-accent-50 border border-accent-200 rounded-lg p-3",children:e.jsx("p",{className:"text-xs text-accent-800 font-medium",children:"You are voting as a designated proxy for other unit owners."})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Authorized By (unit owner name) *"}),e.jsx("input",{value:ce,onChange:k=>E(k.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"Name of owner who authorized proxy"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-2",children:"Select Units to Vote For *"}),e.jsx("div",{className:"space-y-1.5 max-h-40 overflow-y-auto",children:ft.filter(k=>!v.includes(k.number)).map(k=>e.jsxs("label",{className:`flex items-center gap-2 p-2 rounded-lg cursor-pointer border ${w.includes(k.number)?"border-accent-400 bg-accent-50":"border-ink-100 hover:border-ink-200"}`,children:[e.jsx("input",{type:"checkbox",checked:w.includes(k.number),onChange:X=>M(X.target.checked?[...w,k.number]:w.filter(oe=>oe!==k.number)),className:"h-3.5 w-3.5"}),e.jsxs("span",{className:"text-sm text-ink-800",children:["Unit ",k.number,"  ",k.owner," (",k.votingPct,"%)"]})]},k.number))})]})]}):(()=>{const k=f.find(X=>X.number===ne);return k?e.jsx("div",{className:"bg-accent-50 border border-accent-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-accent-800",children:[e.jsxs("strong",{children:["Unit ",k.number]}),"  ",k.owner,"  ",k.votingPct,"% ownership"]})}):null})(),e.jsxs("div",{className:"border-t border-ink-100 pt-4",children:[e.jsx("p",{className:"text-xs font-bold text-ink-700 mb-3",children:"Your Selections"}),V.ballotItems.map((k,X)=>e.jsxs("div",{className:"mb-4 bg-mist-50 rounded-xl p-4",children:[e.jsxs("p",{className:"text-xs font-bold text-ink-900 mb-0.5",children:["#",X+1,": ",k.title]}),k.description&&e.jsx("p",{className:"text-[10px] text-ink-500 mb-1",children:k.description}),k.rationale&&e.jsxs("details",{className:"mb-2",children:[e.jsx("summary",{className:"text-[10px] text-accent-600 cursor-pointer font-medium",children:"View background & rationale"}),e.jsx("p",{className:"text-[10px] text-ink-600 mt-1 pl-2 border-l-2 border-accent-200",children:k.rationale})]}),k.financialImpact&&e.jsxs("p",{className:"text-[10px] text-yellow-700 mb-2",children:[" ",k.financialImpact]}),k.attachments.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:k.attachments.map(oe=>e.jsxs("span",{className:"text-[10px] bg-accent-50 text-accent-700 px-2 py-0.5 rounded",children:[" ",oe.name]},oe.id))}),k.type==="yes_no"?e.jsx("div",{className:"flex gap-3 mt-2",children:["approve","deny","abstain"].map(oe=>e.jsxs("label",{className:`flex items-center gap-2 cursor-pointer px-4 py-2.5 rounded-lg border-2 transition-all ${ie[k.id]===oe?oe==="approve"?"border-sage-500 bg-sage-50":oe==="deny"?"border-red-400 bg-red-50":"border-ink-300 bg-ink-50":"border-ink-100 hover:border-ink-200"}`,children:[e.jsx("input",{type:"radio",name:`sv-${k.id}`,checked:ie[k.id]===oe,onChange:()=>he({...ie,[k.id]:oe}),className:"h-4 w-4"}),e.jsx("span",{className:`text-sm font-semibold ${oe==="approve"?"text-sage-700":oe==="deny"?"text-red-700":"text-ink-500"}`,children:oe.charAt(0).toUpperCase()+oe.slice(1)})]},oe))}):e.jsx("div",{className:"space-y-2 mt-2",children:(k.candidates||[]).map(oe=>{const fe=ie[k.id]||[],Ce=fe.includes(oe.id),Ke=k.maxSelections||1;return e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border-2 cursor-pointer ${Ce?"border-accent-500 bg-accent-50":"border-ink-100 hover:border-ink-200"}`,children:[e.jsx("input",{type:k.type==="multi_candidate"?"radio":"checkbox",name:`sv-${k.id}`,checked:Ce,onChange:()=>{let de;k.type==="multi_candidate"?de=[oe.id]:de=Ce?fe.filter(Ue=>Ue!==oe.id):[...fe,oe.id].slice(0,Ke),he({...ie,[k.id]:de})},className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-ink-900",children:oe.name}),e.jsxs("p",{className:"text-[10px] text-ink-400",children:["Unit ",oe.unit,oe.bio?`  ${oe.bio}`:""]})]})]},oe.id)})})]},k.id))]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Comment (optional)"}),e.jsx("textarea",{value:pe,onChange:k=>Ne(k.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",rows:2,placeholder:"Share reasoning or questions with the board..."})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:e.jsx("p",{className:"text-xs text-amber-800",children:"Your vote is final and weighted by ownership percentage. You cannot change it after submitting."})})]})}),T==="addBallotItem"&&e.jsx(Te,{title:"Add Vote Item",onClose:()=>y(null),onSave:ws,saveLabel:"Add",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Title *"}),e.jsx("input",{value:A.title,onChange:k=>H({...A,title:k.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"Approve FY 2026 Operating Budget"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Summary"}),e.jsx("input",{value:A.description,onChange:k=>H({...A,description:k.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"Brief description for voters"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Detailed Rationale / Background"}),e.jsx("textarea",{value:A.rationale,onChange:k=>H({...A,rationale:k.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",rows:3,placeholder:"Why is this vote being held? What are the key considerations?"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Vote Type"}),e.jsxs("select",{value:A.type,onChange:k=>H({...A,type:k.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"yes_no",children:"Yes / No"}),e.jsx("option",{value:"multi_candidate",children:"Candidate (pick 1)"}),e.jsx("option",{value:"multi_select",children:"Multi-Select"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Threshold (%)"}),e.jsx("input",{value:A.threshold,onChange:k=>H({...A,threshold:k.target.value}),type:"number",step:"0.1",className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Financial Impact"}),e.jsx("input",{value:A.financialImpact,onChange:k=>H({...A,financialImpact:k.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"e.g., $45,000 annual increase to operating budget"})]}),A.type==="multi_select"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Max Selections"}),e.jsx("input",{value:A.maxSelections,onChange:k=>H({...A,maxSelections:k.target.value}),type:"number",className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]}),A.type!=="yes_no"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-xs font-medium text-ink-700",children:"Candidates"}),e.jsx("button",{onClick:()=>y("addCandidate"),className:"text-xs text-accent-600 font-semibold",children:"+ Add"})]}),A.candidates.length>0&&e.jsx("div",{className:"space-y-1",children:A.candidates.map(k=>e.jsxs("div",{className:"flex items-center justify-between bg-mist-50 rounded-lg p-2",children:[e.jsxs("span",{className:"text-xs text-ink-800",children:[k.name," (Unit ",k.unit,")"]}),e.jsx("button",{onClick:()=>H({...A,candidates:A.candidates.filter(X=>X.id!==k.id)}),className:"text-xs text-red-400",children:""})]},k.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Legal Reference"}),e.jsx("input",{value:A.legalRef,onChange:k=>H({...A,legalRef:k.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"Bylaws Art. IV"})]})]})}),T==="addCandidate"&&e.jsx(Te,{title:"Add Candidate",onClose:()=>y("addBallotItem"),onSave:()=>{U.name&&(H({...A,candidates:[...A.candidates,{id:"c_"+Date.now(),...U}]}),L({name:"",unit:"",bio:""}),y("addBallotItem"))},saveLabel:"Add",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Name *"}),e.jsx("input",{value:U.name,onChange:k=>L({...U,name:k.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Unit"}),e.jsxs("select",{value:U.unit,onChange:k=>L({...U,unit:k.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Select"}),g.map(k=>e.jsxs("option",{value:k.number,children:[k.number,"  ",k.owner]},k.number))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Bio"}),e.jsx("textarea",{value:U.bio,onChange:k=>L({...U,bio:k.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",rows:2})]})]})}),T==="addAttachment"&&e.jsx(Te,{title:"Attach Document",onClose:()=>y(null),onSave:us,saveLabel:"Attach",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(Tr,{onFileSelected:k=>ae(k),label:"Drop supporting document here or click to browse"}),b&&e.jsx("div",{className:"bg-sage-50 border border-sage-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-sage-700",children:[" ",e.jsx("strong",{children:b.name})," (",b.size,")"]})})]})}),T==="linkCaseToVote"&&e.jsx(Te,{title:"Link Case to Vote",onClose:()=>y(null),onSave:()=>{V&&Me&&(l.linkCase(V.id,Me),y(null))},saveLabel:"Link",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-ink-500",children:"Associate a Case Ops case with this vote for governance tracking."}),e.jsxs("select",{value:Me,onChange:k=>Ae(k.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Select a case..."}),d.cases.filter(k=>k.status!=="closed").map(k=>e.jsxs("option",{value:k.id,children:[k.id,": ",k.title," (",k.status,")"]},k.id))]})]})}),T==="recordBallot"&&e.jsx(Te,{title:"Record Unit Ballot",onClose:()=>y(null),onSave:qs,saveLabel:"Record",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Unit *"}),e.jsxs("select",{value:F.unitNumber,onChange:k=>z({...F,unitNumber:k.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Select"}),g.map(k=>e.jsxs("option",{value:k.number,disabled:Kt.has(k.number),children:[k.number,"  ",k.owner,Kt.has(k.number)?" ":""]},k.number))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Method"}),e.jsxs("select",{value:F.method,onChange:k=>z({...F,method:k.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"paper",children:" Paper"}),e.jsx("option",{value:"oral",children:" Oral"}),e.jsx("option",{value:"virtual",children:" Virtual"})]})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:F.isProxy,onChange:k=>z({...F,isProxy:k.target.checked}),className:"h-3.5 w-3.5"}),e.jsx("span",{className:"text-xs text-ink-700 font-medium",children:"This is a proxy vote"})]}),F.isProxy&&e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Proxy Voter"}),e.jsx("input",{value:F.proxyVoterName,onChange:k=>z({...F,proxyVoterName:k.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"Who cast the vote"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Authorized By"}),e.jsx("input",{value:F.proxyAuthorizedBy,onChange:k=>z({...F,proxyAuthorizedBy:k.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"Unit owner name"})]})]}),e.jsxs("div",{className:"border-t border-ink-100 pt-4",children:[e.jsx("p",{className:"text-xs font-bold text-ink-700 mb-3",children:"Selections"}),V.ballotItems.map((k,X)=>e.jsxs("div",{className:"mb-4 bg-mist-50 rounded-xl p-4",children:[e.jsxs("p",{className:"text-xs font-bold text-ink-900 mb-1",children:["#",X+1,": ",k.title]}),k.type==="yes_no"?e.jsx("div",{className:"flex gap-3 mt-2",children:["approve","deny","abstain"].map(oe=>e.jsxs("label",{className:"flex items-center gap-1.5",children:[e.jsx("input",{type:"radio",name:`rb-${k.id}`,checked:F.votes[k.id]===oe,onChange:()=>z({...F,votes:{...F.votes,[k.id]:oe}}),className:"h-3.5 w-3.5"}),e.jsx("span",{className:`text-sm ${oe==="approve"?"text-sage-700":oe==="deny"?"text-red-700":"text-ink-500"}`,children:oe.charAt(0).toUpperCase()+oe.slice(1)})]},oe))}):e.jsx("div",{className:"space-y-1.5 mt-2",children:(k.candidates||[]).map(oe=>{const fe=F.votes[k.id]||[],Ce=fe.includes(oe.id),Ke=k.maxSelections||1;return e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-white cursor-pointer",children:[e.jsx("input",{type:k.type==="multi_candidate"?"radio":"checkbox",name:`rb-${k.id}`,checked:Ce,onChange:()=>{let de;k.type==="multi_candidate"?de=[oe.id]:de=Ce?fe.filter(Ue=>Ue!==oe.id):[...fe,oe.id].slice(0,Ke),z({...F,votes:{...F.votes,[k.id]:de}})},className:"h-3.5 w-3.5"}),e.jsxs("span",{className:"text-sm text-ink-800",children:[oe.name," (Unit ",oe.unit,")"]})]},oe.id)})})]},k.id))]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Voter Comment"}),e.jsx("input",{value:F.comment,onChange:k=>z({...F,comment:k.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"Optional"})]})]})}),T==="addResolution"&&e.jsx(Te,{title:"Draft Resolution",onClose:()=>y(null),onSave:ct,saveLabel:"Record Resolution",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Resolution Text *"}),e.jsx("textarea",{value:De,onChange:k=>et(k.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",rows:5,placeholder:"RESOLVED, that the Board of Directors hereby approves..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Effective Date"}),e.jsx("input",{value:qe,onChange:k=>Zt(k.target.value),type:"date",className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]})]})})]})}function Za({label:l,val:m,color:i}){return e.jsxs("div",{className:"px-4 py-3 text-center",children:[e.jsx("p",{className:"text-[10px] text-ink-400",children:l}),e.jsx("p",{className:`text-sm font-bold ${i==="sage"?"text-sage-700":i==="red"?"text-red-700":"text-ink-900"}`,children:m})]})}const Ja={President:"accent","Vice President":"mist",Treasurer:"sage",Secretary:"yellow","Member at Large":"purple"},Dr={care:"Duty of Care",loyalty:"Duty of Loyalty",obedience:"Duty of Obedience"},od={care:"accent",loyalty:"violet",obedience:"amber"},$0={notice:"bg-accent-100 text-accent-700",minutes:"bg-sage-100 text-sage-700",financial:"bg-yellow-100 text-yellow-700",response:"bg-mist-100 text-ink-600",resale:"bg-ink-100 text-ink-600",violation:"bg-red-100 text-red-700",other:"bg-ink-100 text-ink-500"},Pv={BOARD:"bg-accent-100 text-accent-700",ANNUAL:"bg-sage-100 text-sage-700",QUARTERLY:"bg-mist-100 text-ink-600",SPECIAL:"bg-yellow-100 text-yellow-700",EMERGENCY:"bg-red-100 text-red-700"},Vv={SCHEDULED:"bg-accent-100 text-accent-700",COMPLETED:"bg-sage-100 text-sage-700",CANCELLED:"bg-red-100 text-red-700",RESCHEDULED:"bg-yellow-100 text-yellow-700"};function z0({itemId:l,itemTask:m,onAttach:i,onComm:o,onCase:u,onMeeting:d}){const[x,p]=C.useState(!1),f=C.useRef(null);return C.useEffect(()=>{const g=v=>{f.current&&!f.current.contains(v.target)&&p(!1)};return x&&document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[x]),e.jsxs("div",{ref:f,className:"relative shrink-0",children:[e.jsx("button",{onClick:()=>p(!x),className:"p-1.5 hover:bg-ink-100 rounded-lg transition-colors",children:e.jsxs("svg",{className:"w-4 h-4 text-ink-400",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("circle",{cx:"10",cy:"4",r:"1.5"}),e.jsx("circle",{cx:"10",cy:"10",r:"1.5"}),e.jsx("circle",{cx:"10",cy:"16",r:"1.5"})]})}),x&&e.jsx("div",{className:"absolute right-0 top-8 z-30 bg-white border border-ink-200 rounded-lg shadow-lg py-1 w-48",children:[{label:" Attach Document",action:i},{label:" Send Communication",action:o},{label:" Add Case",action:u},{label:" Schedule Meeting",action:d}].map(g=>e.jsx("button",{onClick:()=>{g.action(),p(!1)},className:"w-full text-left px-3 py-2 text-sm text-ink-700 hover:bg-mist-50",children:g.label},g.label))})]})}function Fv(){const l=Ir(),m=Ka(),{board:i,address:o,legalDocuments:u,insurance:d,management:x}=Ns(),p=al(),f=Br(),{currentRole:g,currentUser:v}=jt(),R=Xs(),O=g==="BOARD_MEMBER"||g==="PROPERTY_MANAGER",N=Nd({state:o.state,legalDocuments:u.map(D=>({name:D.name,status:D.status})),insurance:d.map(D=>({type:D.type,expires:D.expires})),boardCount:i.length,hasManagement:!!x.company}),P=N.categories,[_,T]=C.useState("duties"),[y,j]=C.useState("all"),[q,A]=C.useState(null),[H,U]=C.useState(""),[L,F]=C.useState({}),z=D=>L[D]||"",ne=(D,k)=>F(X=>({...X,[D]:k})),[K,ie]=C.useState({title:"",type:"BOARD",date:"",time:"19:00",location:"Community Room",virtualLink:"",agenda:"",notes:"",status:"SCHEDULED",requiresVote:!1,voteScope:"board",voteItems:[]}),[he,pe]=C.useState({board:[],owners:"",guests:""}),[Ne,B]=C.useState(""),[I,w]=C.useState(null),[M,ce]=C.useState(null),[E,J]=C.useState({}),[Q,xe]=C.useState(null),[Se,b]=C.useState(""),[ae,Me]=C.useState({catId:"governance",sitId:"board-meetings",title:"",priority:"medium"}),[Ae,ot]=C.useState("case"),[St,ve]=C.useState("date"),[Ye,De]=C.useState(null),et=(D,k)=>{const X=E[D];return!X||X.length===0?!1:X.length>=k&&X.every(Boolean)},qe=P.map(D=>{const k=y==="all"?D.items:D.items.filter(fe=>fe.role===y),X=k.filter(fe=>et(fe.id,fe.howTo.length)).length,oe=k.length>0?Math.round(X/k.length*100):100;return{...D,items:k,passed:X,total:k.length,pct:oe}}),Zt=qe.reduce((D,k)=>D+k.weight,0),G=Math.round(qe.reduce((D,k)=>D+k.pct*k.weight/Zt,0)),ye=G>=90?"A":G>=80?"B":G>=70?"C":G>=60?"D":"F",V=[...new Set(P.flatMap(D=>D.items.map(k=>k.role)))],{meetings:ke}=m,_e=o.state==="District of Columbia",we=_e?"DC":o.state,tt=u.some(D=>D.name.toLowerCase().includes("bylaw")),ws=ke.filter(D=>D.status==="SCHEDULED"||D.status==="RESCHEDULED").sort((D,k)=>D.date.localeCompare(k.date)),qs=ke.filter(D=>D.status==="COMPLETED").sort((D,k)=>k.date.localeCompare(D.date)),Zs=f.elections.filter(D=>D.status==="open").length,Cs=l.filings.filter(D=>D.status==="pending"&&new Date(D.dueDate)<new Date).length,us=D=>{const k=_e?"DC Code  29-1101 et seq.":`${we} Condo Act`;switch(D){case"ANNUAL":return{requiresVote:!0,voteScope:"owner",reason:`Required: Board elections & budget approval (${k})`};case"SPECIAL":return{requiresVote:!0,voteScope:"owner",reason:`Typically required: Special meetings called for owner vote (${k})`};case"BOARD":return{requiresVote:!1,voteScope:"board",reason:"Board meetings may include motions but votes are not always required"};case"QUARTERLY":return{requiresVote:!1,voteScope:"board",reason:"Quarterly reviews typically informational; toggle on if motions planned"};case"EMERGENCY":return{requiresVote:!0,voteScope:"board",reason:"Emergency actions often require board ratification vote"};default:return{requiresVote:!1,voteScope:"board",reason:""}}},ge=()=>{const D=us("BOARD");De(null),ie({title:"",type:"BOARD",date:"",time:"19:00",location:"Community Room",virtualLink:"",agenda:"",notes:"",status:"SCHEDULED",requiresVote:D.requiresVote,voteScope:D.voteScope,voteItems:[]}),A("addMeeting")},ct=D=>{U(D.id),ie({title:D.title,type:D.type,date:D.date,time:D.time,location:D.location,virtualLink:D.virtualLink,agenda:D.agenda.join(`
`),notes:D.notes,status:D.status,requiresVote:!1,voteScope:"board",voteItems:[]}),A("editMeeting")},Jt=D=>{U(D.id),pe({board:[...D.attendees.board],owners:D.attendees.owners.join(`
`),guests:D.attendees.guests.join(`
`)}),A("attendees")},Kt=D=>{U(D.id),B(D.minutes),A("minutes")},ft=()=>{var k,X;if(!K.title||!K.date){alert("Title and date required");return}const D=K.agenda.split(`
`).map(oe=>oe.trim()).filter(Boolean);if(D.length===0){alert("At least one agenda item is required");return}if(q==="addMeeting"){m.addMeeting({title:K.title,type:K.type,status:K.status,date:K.date,time:K.time,location:K.location,virtualLink:K.virtualLink,agenda:D,notes:K.notes});const oe=Ka.getState().meetings,fe=(k=oe[oe.length-1])==null?void 0:k.id;if(K.requiresVote&&fe){const Ce=/\b(approv|adopt|ratif|elect|amend|authori|resolv|vote|budget|assess|special assessment|terminat|contract|remov|waiv)\w*/i,Ke=D.map((be,Xe)=>Ce.test(be)?Xe:-1).filter(be=>be>=0),Ue=(K.voteItems.length>0?K.voteItems:Ke).map(be=>D[be]).filter(Boolean);if(Ue.length>0){const Xe={ANNUAL:"budget_approval",SPECIAL:"special_assessment",BOARD:"meeting_motion",QUARTERLY:"meeting_motion",EMERGENCY:"meeting_motion"}[K.type]||"meeting_motion",qt=_e?"DC Code  29-1101 et seq.":`${we} Condo Act`;f.addElection({title:`${K.title}  Vote`,type:Xe,status:"draft",description:`Vote items for ${K.title} on ${K.date}. ${K.voteScope==="owner"?"Owner vote":"Board vote"}.`,createdBy:"Board",openedAt:null,closedAt:null,certifiedAt:null,certifiedBy:null,scheduledCloseDate:K.date,noticeDate:null,quorumRequired:K.voteScope==="owner"?25:50.1,ballotItems:Ue.map((je,Gt)=>({id:"bi_auto_"+Date.now()+"_"+Gt,title:je,description:`Agenda item from ${K.title}`,rationale:"",type:"yes_no",requiredThreshold:50.1,legalRef:qt,attachments:[]})),legalRef:qt,notes:`Auto-created from meeting: ${K.title}. Scope: ${K.voteScope} vote.`,complianceChecks:[],linkedMeetingId:fe});const Be=(X=Br.getState().elections[0])==null?void 0:X.id;Be&&Ka.getState().linkVote(fe,Be)}}}else m.updateMeeting(H,{title:K.title,type:K.type,status:K.status,date:K.date,time:K.time,location:K.location,virtualLink:K.virtualLink,agenda:D,notes:K.notes});if(A(null),Ye&&q==="addMeeting"){const oe=P.flatMap(fe=>fe.items).find(fe=>fe.id===Ye);oe&&J(fe=>({...fe,[Ye]:oe.howTo.map(()=>!0)})),De(null)}},_t=()=>{m.updateAttendees(H,{board:he.board,owners:he.owners.split(`
`).map(D=>D.trim()).filter(Boolean),guests:he.guests.split(`
`).map(D=>D.trim()).filter(Boolean)}),A(null)},At=()=>{if(!ae.title){alert("Title required");return}p.createCase({catId:ae.catId,sitId:ae.sitId,approach:"self",title:ae.title,unit:"N/A",owner:"Board",priority:ae.priority,notes:"Linked from Board Room"}),A(null)},ma=[{id:"board-meetings",label:"Board Meetings"},{id:"elections",label:"Elections"},{id:"bylaw-amendment",label:"Bylaw / CC&R Amendment"},{id:"annual-budgeting",label:"Annual Budgeting"},{id:"special-assessments",label:"Special Assessments"},{id:"covenant-violations",label:"Covenant Violations"}],Nn=(D,k)=>{const X=p.cases.filter(fe=>(D.linkedCaseIds||[]).includes(fe.id)),oe=f.elections.filter(fe=>(D.linkedVoteIds||[]).includes(fe.id));return e.jsxs("div",{className:`bg-white border rounded-xl overflow-hidden hover:shadow-md transition-all ${k?"border-2 border-accent-200":"border-ink-100"}`,children:[e.jsx("div",{className:"p-5 cursor-pointer",onClick:()=>w(I===D.id?null:D.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold ${Pv[D.type]||"bg-ink-100 text-ink-600"}`,children:D.type}),e.jsx("h3",{className:"font-bold text-ink-900",children:D.title}),e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-semibold ${Vv[D.status]||"bg-ink-100 text-ink-600"}`,children:D.status}),oe.length>0&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-green-100 text-green-700 font-medium",children:[" ",oe.length," vote",oe.length!==1?"s":""]}),D.status==="COMPLETED"&&D.minutes&&(()=>{const fe=D.minutesApprovals||[],Ce=D.attendees.board.length>0?D.attendees.board.length:i.length,Ke=fe.length>Ce/2;return D.minutes?e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-medium ${Ke?"bg-sage-100 text-sage-700":"bg-amber-100 text-amber-700"}`,children:Ke?" Minutes approved":` ${fe.length}/${Ce} approvals`}):null})(),D.status==="COMPLETED"&&!D.minutes&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-red-100 text-red-700 font-medium",children:" No minutes"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-ink-500",children:[D.date,"  ",D.time]}),e.jsx("span",{className:`text-sm transition-transform ${I===D.id?"rotate-180":""}`,children:""})]})]})}),I===D.id&&e.jsxs("div",{className:"border-t border-ink-100 p-5 space-y-4",children:[O&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>ct(D),className:"px-3 py-1.5 bg-ink-900 text-white rounded-lg text-xs font-medium hover:bg-ink-800",children:"Edit"}),e.jsx("button",{onClick:()=>Jt(D),className:"px-3 py-1.5 border border-ink-200 rounded-lg text-xs font-medium hover:bg-mist-50",children:"Attendees"}),e.jsx("button",{onClick:()=>Kt(D),className:"px-3 py-1.5 border border-ink-200 rounded-lg text-xs font-medium hover:bg-mist-50",children:D.minutes?"Edit Minutes":"Add Minutes"}),e.jsx("button",{onClick:()=>{U(D.id),xe(null),A("addDocument")},className:"px-3 py-1.5 border border-ink-200 rounded-lg text-xs font-medium hover:bg-mist-50",children:" Documents"}),e.jsx("button",{onClick:()=>{U(D.id),Me({catId:"governance",sitId:"board-meetings",title:`${D.title}  `,priority:"medium"}),A("createCaseForMeeting")},className:"px-3 py-1.5 border border-violet-200 text-violet-700 rounded-lg text-xs font-medium hover:bg-violet-50",children:"+ Case"}),e.jsx("button",{onClick:()=>{U(D.id),b(""),A("linkCaseToMeeting")},className:"px-3 py-1.5 border border-violet-200 text-violet-700 rounded-lg text-xs font-medium hover:bg-violet-50",children:" Link Case"}),e.jsx("button",{onClick:()=>{confirm("Delete?")&&m.deleteMeeting(D.id)},className:"px-3 py-1.5 text-red-500 text-xs font-medium hover:text-red-700",children:"Delete"})]}),D.notes&&e.jsx("div",{className:"bg-mist-50 rounded-lg p-3 text-sm text-ink-600",children:D.notes}),D.agenda.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-ink-900 mb-2",children:"Agenda"}),e.jsx("div",{className:"bg-mist-50 rounded-lg p-4 space-y-2",children:D.agenda.map((fe,Ce)=>e.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-accent-100 text-accent-700 flex items-center justify-center shrink-0 text-xs font-bold",children:Ce+1}),e.jsx("span",{className:"text-ink-700",children:fe})]},Ce))})]}),(D.documents||[]).length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-ink-900 mb-2",children:[" Documents (",D.documents.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:D.documents.map(fe=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 bg-mist-50 border border-mist-200 rounded-lg px-2.5 py-1.5",children:[e.jsxs("span",{className:"text-[11px] text-accent-600 font-medium",children:[" ",fe.name]}),e.jsx("span",{className:"text-[10px] text-ink-400",children:fe.size}),O&&e.jsx("button",{onClick:()=>m.removeDocument(D.id,fe.id),className:"text-red-400 hover:text-red-600 text-xs ml-1",children:""})]},fe.id))})]}),X.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-ink-900 mb-2",children:[" Linked Cases (",X.length,")"]}),e.jsx("div",{className:"space-y-2",children:X.map(fe=>e.jsxs("div",{className:"bg-violet-50 border border-violet-200 rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-violet-900",children:[fe.id,": ",fe.title]}),e.jsxs("p",{className:"text-[10px] text-violet-600",children:[fe.status,"  ",fe.priority]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>R("/issues"),className:"text-[10px] text-accent-600 hover:underline",children:"Open in Case Ops "}),O&&e.jsx("button",{onClick:()=>m.unlinkCase(D.id,fe.id),className:"text-xs text-red-400",children:""})]})]},fe.id))})]}),oe.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-ink-900 mb-2",children:[" Linked Votes (",oe.length,")"]}),e.jsx("div",{className:"space-y-2",children:oe.map(fe=>e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:fe.title}),e.jsxs("p",{className:"text-[10px] text-green-600",children:[fe.status,"  ",fe.ballotItems.length," items  ",fe.ballots.length," ballots"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>T("votes"),className:"text-[10px] text-accent-600 hover:underline",children:"View in Votes "}),O&&e.jsx("button",{onClick:()=>m.unlinkVote(D.id,fe.id),className:"text-xs text-red-400",children:""})]})]},fe.id))})]}),(D.attendees.board.length>0||D.attendees.owners.length>0)&&e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-ink-900 mb-2",children:"Attendance"}),e.jsxs("div",{className:"bg-mist-50 rounded-lg p-3 space-y-2 text-sm",children:[D.attendees.board.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-ink-500 uppercase tracking-wide",children:"Board"}),e.jsx("p",{className:"text-ink-700",children:D.attendees.board.join(", ")})]}),D.attendees.owners.length>0&&e.jsxs("div",{children:[e.jsxs("span",{className:"text-xs font-semibold text-ink-500 uppercase tracking-wide",children:["Owners (",D.attendees.owners.length,")"]}),e.jsx("p",{className:"text-ink-700",children:D.attendees.owners.join(", ")})]}),D.attendees.guests.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-ink-500 uppercase tracking-wide",children:"Guests"}),e.jsx("p",{className:"text-ink-700",children:D.attendees.guests.join(", ")})]})]})]}),D.minutes&&e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-ink-900 mb-2",children:"Meeting Minutes"}),e.jsx("div",{className:"bg-mist-50 rounded-lg p-4 text-sm text-ink-700 whitespace-pre-wrap max-h-48 overflow-y-auto border border-mist-100",children:D.minutes})]}),D.status==="COMPLETED"&&D.minutes&&(()=>{const fe=D.minutesApprovals||[],Ce=fe.map(Be=>Be.name),Ke=D.attendees.board.length>0?D.attendees.board:i.map(Be=>Be.name),de=Ke.length,Ue=fe.length,be=Ue>de/2,Xe=(v==null?void 0:v.name)||"",qt=i.find(Be=>Be.name===Xe),ms=Ce.includes(Xe);return e.jsxs("div",{className:`rounded-xl border p-4 ${be?"bg-sage-50 border-sage-200":"bg-amber-50 border-amber-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-bold text-ink-900 text-sm",children:" Minutes Approval"}),e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold ${be?"bg-sage-100 text-sage-700":"bg-amber-100 text-amber-700"}`,children:be?" APPROVED":`${Ue}/${de}  needs majority`})]}),O&&qt&&!ms&&e.jsx("button",{onClick:()=>m.approveMinutes(D.id,{name:Xe,role:qt.role,date:new Date().toISOString().split("T")[0]}),className:"px-4 py-1.5 bg-sage-600 text-white rounded-lg text-xs font-semibold hover:bg-sage-700 transition-colors",children:" Approve Minutes"}),O&&ms&&e.jsx("button",{onClick:()=>m.revokeMinutesApproval(D.id,Xe),className:"px-3 py-1.5 border border-ink-200 text-ink-500 rounded-lg text-xs font-medium hover:bg-red-50 hover:text-red-600 hover:border-red-200 transition-colors",children:"Revoke My Approval"})]}),e.jsx("div",{className:"space-y-1.5",children:Ke.map(Be=>{var Wt;const je=fe.find(at=>at.name===Be),Gt=((Wt=i.find(at=>at.name===Be))==null?void 0:Wt.role)||"";return e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[je?e.jsx("span",{className:"w-5 h-5 rounded-full bg-sage-500 text-white flex items-center justify-center shrink-0 text-[10px]",children:""}):e.jsx("span",{className:"w-5 h-5 rounded-full border-2 border-ink-200 shrink-0"}),e.jsx("span",{className:`${je?"text-ink-700":"text-ink-400"}`,children:Be}),Gt&&e.jsxs("span",{className:"text-[10px] text-ink-400",children:["(",Gt,")"]}),je&&e.jsx("span",{className:"text-[10px] text-sage-600 ml-auto",children:je.date})]},Be)})}),e.jsx("p",{className:"text-[10px] text-ink-400 mt-3",children:_e?"DC Code  29-1108.06  Minutes must be approved by board majority and made available for owner inspection.":"Bylaws require board approval of meeting minutes at or before the next regular meeting."})]})})()]})]},D.id)},Qn=[{id:"duties",label:"Duties & Roles"},{id:"runbook",label:"Governance Calendar",badge:Cs+qe.flatMap(D=>D.items).filter(D=>D.scope==="governance"&&!et(D.id,D.howTo.length)).length||void 0},{id:"dailyops",label:"Daily Operations",badge:p.cases.filter(D=>D.status==="open").length||void 0},{id:"meetings",label:"Meetings",badge:ws.length||void 0},{id:"votes",label:"Votes & Resolutions",badge:Zs||void 0},{id:"communications",label:"Communications",badge:l.communications.filter(D=>D.status==="pending").length||void 0}];return e.jsxs("div",{className:"space-y-0",children:[e.jsxs("div",{className:"bg-gradient-to-r from-ink-900 via-ink-800 to-accent-800 rounded-t-xl p-8 text-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-2xl font-bold",children:" Board Room"}),e.jsxs("p",{className:"text-accent-200 text-sm mt-1",children:["Governance calendar, meetings, votes & communications  ",_e?"District of Columbia":we," jurisdiction"]})]}),e.jsx("div",{className:"flex items-center gap-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-white",children:ye}),e.jsxs("div",{className:"text-accent-200 text-xs",children:["Health ",G,"%"]})]})})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3 mt-5",children:qe.map(D=>e.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-3 text-center cursor-pointer hover:bg-opacity-20",onClick:()=>{T("runbook"),setTimeout(()=>{var k;return(k=document.getElementById("comp-"+D.id))==null?void 0:k.scrollIntoView({behavior:"smooth"})},100)},children:[e.jsx("span",{className:"text-xl",children:D.icon}),e.jsx("p",{className:"text-[11px] text-accent-100 mt-0.5 leading-tight",children:D.label}),e.jsxs("p",{className:"text-sm font-bold text-white mt-1",children:[D.pct,"%"]})]},D.id))})]}),e.jsx("div",{className:"bg-white border-x border-ink-100 border-b overflow-x-auto",children:e.jsx("div",{className:"flex min-w-max px-4",children:Qn.map(D=>e.jsxs("button",{onClick:()=>T(D.id),className:`px-5 py-3 text-sm font-medium border-b-2 whitespace-nowrap transition-colors flex items-center gap-2 ${_===D.id?"border-ink-900 text-ink-900":"border-transparent text-ink-400 hover:text-ink-700"}`,children:[D.label,D.badge&&e.jsx("span",{className:"bg-red-500 text-white text-[10px] rounded-full px-1.5 py-0.5 font-bold",children:D.badge})]},D.id))})}),e.jsxs("div",{className:"bg-white rounded-b-xl border-x border-b border-ink-100 p-6",children:[_==="duties"&&(()=>{const D=P.flatMap(X=>X.items),k=D.filter(X=>X.perMeeting||X.due==="Ongoing"||X.due==="Per meeting"||X.due==="Per transfer"||X.due==="Per request"||X.due==="Quarterly"||X.due==="As needed"||X.due==="Monthly");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-mist-50 to-accent-50 border border-accent-200 rounded-xl p-5",children:[e.jsx("h3",{className:"font-bold text-ink-900 text-sm mb-1",children:" The Three Fiduciary Duties"}),e.jsx("p",{className:"text-xs text-ink-500 mb-4",children:"Every board decision is measured against these three legal obligations. Understanding them is the foundation of competent service and your primary legal defense."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-accent-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("h4",{className:"font-bold text-accent-800 text-sm",children:"Duty of Care"})]}),e.jsx("p",{className:"text-xs text-ink-600 leading-relaxed",children:"Act as a reasonably prudent person would in a similar position. This means attending meetings, reading materials before voting, asking questions, and making informed decisions."}),e.jsxs("p",{className:"text-[10px] text-accent-600 mt-2 font-semibold",children:[D.filter(X=>X.fiduciaryDuty==="care").length," runbook items"]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-violet-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("h4",{className:"font-bold text-violet-800 text-sm",children:"Duty of Loyalty"})]}),e.jsx("p",{className:"text-xs text-ink-600 leading-relaxed",children:"Put the association's interests above personal interests. Disclose all conflicts, recuse yourself from related votes, and never engage in self-dealing transactions."}),e.jsxs("p",{className:"text-[10px] text-violet-600 mt-2 font-semibold",children:[D.filter(X=>X.fiduciaryDuty==="loyalty").length," runbook items"]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-amber-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("h4",{className:"font-bold text-amber-800 text-sm",children:"Duty of Obedience"})]}),e.jsx("p",{className:"text-xs text-ink-600 leading-relaxed",children:"Follow the governing documents and the law in every decision. Board authority is limited to what bylaws, CC&Rs, and statute grant. Actions beyond that authority are void."}),e.jsxs("p",{className:"text-[10px] text-amber-600 mt-2 font-semibold",children:[D.filter(X=>X.fiduciaryDuty==="obedience").length," runbook items"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-ink-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-ink-100 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("h3",{className:"font-bold text-ink-900 text-sm",children:"Role Responsibility Matrix"})]}),e.jsx("p",{className:"text-[10px] text-ink-400",children:"Click a role to see their obligations below"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-ink-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-semibold text-ink-600 text-xs",children:"Role"}),e.jsx("th",{className:"text-left p-3 font-semibold text-ink-600 text-xs",children:"Member"}),e.jsx("th",{className:"text-center p-3 font-semibold text-ink-600 text-xs",children:"Total Items"}),e.jsx("th",{className:"text-center p-3 font-semibold text-ink-600 text-xs",children:"Critical"}),e.jsx("th",{className:"text-center p-3 font-semibold text-ink-600 text-xs",children:"Ongoing"}),e.jsx("th",{className:"text-center p-3 font-semibold text-ink-600 text-xs",children:"Deadline"})]})}),e.jsx("tbody",{className:"divide-y divide-ink-50",children:V.map(X=>{const oe=D.filter(be=>be.role===X),fe=oe.filter(be=>be.critical),Ce=oe.filter(be=>k.includes(be)),Ke=oe.filter(be=>!k.includes(be)),de=Ja[X]||"ink",Ue=i.find(be=>be.role===X);return e.jsxs("tr",{className:`cursor-pointer hover:bg-ink-50 transition-colors ${y===X?"bg-accent-50":""}`,onClick:()=>j(y===X?"all":X),children:[e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded bg-${de}-100 text-${de}-700`,children:X})}),e.jsx("td",{className:"p-3 text-xs text-ink-700",children:(Ue==null?void 0:Ue.name)||""}),e.jsx("td",{className:"p-3 text-center text-xs font-medium",children:oe.length}),e.jsx("td",{className:"p-3 text-center",children:fe.length>0?e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-red-100 text-red-700 font-bold",children:fe.length}):e.jsx("span",{className:"text-ink-300 text-xs",children:""})}),e.jsx("td",{className:"p-3 text-center text-xs text-ink-500",children:Ce.length}),e.jsx("td",{className:"p-3 text-center text-xs text-ink-500",children:Ke.length})]},X)})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-ink-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-ink-100 bg-amber-50 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("h3",{className:"font-bold text-ink-900 text-sm",children:"Ongoing & Per-Meeting Obligations"}),e.jsx("span",{className:"text-[10px] text-ink-400 ml-1",children:"Continuous requirements  no fixed deadline"})]}),y!=="all"&&e.jsxs("div",{className:"px-4 pt-3 flex items-center gap-2",children:[e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded bg-accent-100 text-accent-700 font-semibold",children:["Filtered: ",y]}),e.jsx("button",{onClick:()=>j("all"),className:"text-[10px] text-ink-400 hover:text-red-500",children:" Clear"})]}),e.jsx("div",{className:"divide-y divide-ink-50",children:k.filter(X=>y==="all"||X.role===y).map(X=>{const oe=et(X.id,X.howTo.length),fe=Ja[X.role]||"ink",Ce=od[X.fiduciaryDuty]||"ink",Ke=M===X.id;return e.jsxs("div",{className:`${oe?"bg-sage-50 bg-opacity-40":""}`,children:[e.jsxs("div",{className:"p-4 flex items-start gap-4",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-amber-100 border border-amber-300 flex items-center justify-center shrink-0 mt-0.5 text-[10px]",children:""}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>ce(Ke?null:X.id),className:"text-sm font-medium text-left hover:underline text-ink-900",children:X.task}),X.critical&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-red-100 text-red-700 font-bold",children:"CRITICAL"}),X.perMeeting&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-accent-50 text-accent-700 font-medium border border-accent-200",children:" Per Meeting"}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded bg-${Ce}-50 text-${Ce}-700 font-medium border border-${Ce}-200`,children:Dr[X.fiduciaryDuty]}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded bg-${fe}-100 text-${fe}-700 font-semibold`,children:X.role})]}),e.jsx("p",{className:"text-xs text-ink-400 mt-1",children:X.tip}),e.jsxs("div",{className:"flex items-center gap-3 mt-1.5",children:[e.jsx("span",{className:"text-[10px] font-mono text-accent-600",children:X.legalRef}),e.jsx("span",{className:"text-[10px] text-ink-400",children:X.freq}),e.jsxs("span",{className:"text-[10px] font-medium text-ink-500",children:["Due: ",X.due]}),e.jsx("button",{onClick:()=>ce(Ke?null:X.id),className:"text-[10px] text-accent-600 font-medium hover:underline ml-auto",children:Ke?" Less":" Details"})]})]})]}),Ke&&e.jsxs("div",{className:"px-4 pb-4 ml-10 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] font-bold text-amber-800 uppercase tracking-wider mb-1",children:" Why This Matters"}),e.jsx("p",{className:"text-xs text-amber-900 leading-relaxed",children:X.whyItMatters})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] font-bold text-red-800 uppercase tracking-wider mb-1",children:" If Not Completed"}),e.jsx("p",{className:"text-xs text-red-900 leading-relaxed",children:X.consequence})]})]}),e.jsxs("div",{className:"bg-sage-50 border border-sage-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] font-bold text-sage-800 uppercase tracking-wider mb-2",children:" How To Complete"}),e.jsx("ol",{className:"space-y-1.5",children:X.howTo.map((de,Ue)=>e.jsxs("li",{className:"flex items-start gap-2 text-xs text-sage-900",children:[e.jsx("span",{className:"bg-sage-200 text-sage-700 rounded-full w-4 h-4 flex items-center justify-center shrink-0 mt-0.5 text-[9px] font-bold",children:Ue+1}),e.jsx("span",{children:de})]},Ue))})]}),e.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-ink-400",children:[e.jsxs("span",{children:[" ",X.legalRef]}),e.jsxs("span",{className:`px-2 py-0.5 rounded bg-${Ce}-50 text-${Ce}-700 border border-${Ce}-200 font-medium`,children:[Dr[X.fiduciaryDuty],": ",X.fiduciaryDuty==="care"?"Make informed, prudent decisions":X.fiduciaryDuty==="loyalty"?"Put association interests first":"Follow governing docs and law"]})]})]})]},X.id)})}),k.filter(X=>y==="all"||X.role===y).length===0&&e.jsx("p",{className:"p-6 text-center text-sm text-ink-400",children:"No ongoing items for this role"})]})]})})(),_==="runbook"&&(()=>{const D=qe.flatMap(de=>de.items).filter(de=>de.scope==="governance"),k=D.filter(de=>et(de.id,de.howTo.length)).length,X=D.filter(de=>{const Ue=E[de.id];return Ue&&Ue.some(Boolean)&&!Ue.every(Boolean)}).length,oe=D.length-k-X,fe=_e?"DC Code  29-1101 et seq.":`${we} Condominium Act`,Ce=[],Ke=u.some(de=>de.name.toLowerCase().includes("cc&r")||de.name.toLowerCase().includes("declaration"));return tt||Ce.push("Bylaws"),Ke||Ce.push("CC&Rs / Declaration"),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-mist-50 to-accent-50 border border-accent-200 rounded-xl p-5",children:[e.jsx("h3",{className:"font-bold text-ink-900 text-sm",children:" Governance Calendar"}),e.jsx("p",{className:"text-xs text-ink-500 mt-1",children:"Annual and scheduled obligations with step-by-step workflows. Click any item to expand its workflow. Day-to-day operational items are in Daily Operations."}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.jsxs("span",{className:"text-[10px] px-2 py-1 rounded-lg bg-accent-100 text-accent-700 font-semibold",children:[" ",_e?"District of Columbia":we]}),e.jsx("span",{className:"text-[10px] px-2 py-1 rounded-lg bg-ink-100 text-ink-600 font-semibold",children:fe}),N.documentsDetected.map(de=>e.jsxs("span",{className:"text-[10px] px-2 py-1 rounded-lg bg-sage-100 text-sage-700 font-medium",children:[" ",de]},de)),Ce.map(de=>e.jsxs("button",{onClick:()=>R("/building"),className:"text-[10px] px-2 py-1 rounded-lg bg-white border border-dashed border-ink-300 text-ink-500 hover:border-accent-400 hover:text-accent-700",children:["+ ",de]},de))]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mt-3 text-[11px]",children:[e.jsxs("span",{className:"inline-flex items-center gap-1.5 font-semibold text-sage-700",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-sage-400"}),k," completed"]}),e.jsxs("span",{className:"inline-flex items-center gap-1.5 font-semibold text-accent-700",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-accent-400"}),X," in progress"]}),e.jsxs("span",{className:"inline-flex items-center gap-1.5 font-semibold text-amber-700",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-amber-400"}),oe>0?oe:0," not started"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsxs("div",{className:"flex bg-ink-50 rounded-lg p-0.5",children:[e.jsx("button",{onClick:()=>ve("date"),className:`px-3 py-1.5 rounded-md text-xs font-semibold transition-colors ${St==="date"?"bg-white text-ink-900 shadow-sm":"text-ink-500 hover:text-ink-700"}`,children:"By Due Date"}),e.jsx("button",{onClick:()=>ve("category"),className:`px-3 py-1.5 rounded-md text-xs font-semibold transition-colors ${St==="category"?"bg-white text-ink-900 shadow-sm":"text-ink-500 hover:text-ink-700"}`,children:"By Category"})]}),e.jsx("span",{className:"text-ink-200",children:"|"}),e.jsx("button",{onClick:()=>j("all"),className:`px-3 py-1.5 rounded-lg text-xs font-semibold ${y==="all"?"bg-ink-900 text-white":"bg-ink-50 text-ink-600 hover:bg-ink-100"}`,children:"All Roles"}),V.map(de=>e.jsx("button",{onClick:()=>j(de),className:`px-3 py-1.5 rounded-lg text-xs font-semibold ${y===de?"bg-accent-600 text-white":"bg-ink-50 text-ink-600 hover:bg-ink-100"}`,children:de},de))]}),e.jsx("button",{onClick:()=>{F({name:"",category:"tax",dueDate:"",responsible:"President",recurrence:"annual",legalRef:"",notes:""}),A("addFiling")},className:"px-3 py-1.5 bg-ink-900 text-white rounded-lg text-xs font-medium hover:bg-ink-800",children:"+ Add Filing"})]}),St==="date"&&(()=>{const de=[...D.map(Be=>{const je=qe.find(Gt=>Gt.items.includes(Be));return{kind:"runbook",item:Be,catLabel:(je==null?void 0:je.label)||"",catIcon:(je==null?void 0:je.icon)||""}}),...l.filings.filter(Be=>y==="all"||Be.responsible===y).map(Be=>({kind:"filing",filing:Be}))],Ue=Be=>{if(Be.kind==="filing")return!1;const je=Be.item.due;return je==="Ongoing"||je==="Per meeting"||je==="Per transfer"||je==="Per request"||je==="Quarterly"||je==="As needed"||je==="Monthly"||je==="Annual"},be=de.filter(Be=>!Ue(Be)),Xe=de.filter(Be=>Ue(Be)),qt=Be=>Be.kind==="runbook"?et(Be.item.id,Be.item.howTo.length):Be.filing.status==="filed";be.sort((Be,je)=>{const Gt=qt(Be),Wt=qt(je);if(Gt!==Wt)return Gt?1:-1;const at=Be.kind==="runbook"?Be.item.due:Be.filing.dueDate,vt=je.kind==="runbook"?je.item.due:je.filing.dueDate,mt=Date.parse(at)||99999999999999,xt=Date.parse(vt)||99999999999999;return mt-xt});const ms=Be=>{var xa;if(Be.kind==="filing"){const Ie=Be.filing,Ut=Ie.status==="pending"&&new Date(Ie.dueDate)<new Date,Yt=Ja[Ie.responsible]||"ink";return e.jsxs("div",{className:`rounded-xl border p-4 flex items-start gap-4 ${Ie.status==="filed"?"border-sage-200 bg-sage-50 bg-opacity-40":Ut?"border-red-200 bg-red-50 bg-opacity-40":"border-ink-100 bg-white"}`,children:[Ie.status==="filed"?e.jsx("div",{className:"w-6 h-6 rounded-lg bg-sage-100 border-2 border-sage-300 flex items-center justify-center shrink-0 mt-0.5",children:e.jsx("svg",{className:"w-3.5 h-3.5 text-sage-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}):e.jsx("button",{onClick:()=>{U(Ie.id),F({filedDate:new Date().toISOString().split("T")[0],confirmationNum:""}),A("markFiled")},className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center shrink-0 mt-0.5 ${Ut?"border-red-300 hover:border-red-500":"border-ink-200 hover:border-accent-400"}`,title:"Mark as filed"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("p",{className:`text-sm font-medium ${Ie.status==="filed"?"text-ink-500 line-through":"text-ink-900"}`,children:Ie.name}),Ie.status==="filed"?e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-sage-100 text-sage-700 font-semibold",children:" FILED"}):Ut?e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-red-100 text-red-700 font-bold",children:"OVERDUE"}):e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-yellow-100 text-yellow-700 font-semibold",children:"PENDING"}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-yellow-50 text-yellow-700 font-medium border border-yellow-200",children:" Filing"}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded bg-${Yt}-100 text-${Yt}-700 font-semibold`,children:Ie.responsible})]}),e.jsxs("p",{className:"text-xs text-ink-500 mt-1",children:["Due: ",Ie.dueDate,Ie.filedDate?`  Filed: ${Ie.filedDate}`:"",Ie.confirmationNum?`  Ref: ${Ie.confirmationNum}`:""]}),Ie.legalRef&&e.jsx("span",{className:"text-[10px] font-mono text-accent-600",children:Ie.legalRef}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[Ie.attachments.map(ps=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 bg-mist-50 border border-mist-200 rounded-lg px-2.5 py-1",children:[e.jsxs("span",{className:"text-[11px] text-accent-600 font-medium",children:[" ",ps.name]}),e.jsx("span",{className:"text-[10px] text-ink-400",children:ps.size}),e.jsx("button",{onClick:()=>l.removeFilingAttachment(Ie.id,ps.name),className:"text-red-400 hover:text-red-600 text-xs ml-1",children:""})]},ps.name)),e.jsx("button",{onClick:()=>{U(Ie.id),xe(null),A("addFilingAtt")},className:"text-[11px] text-accent-600 font-medium hover:text-accent-700 border border-dashed border-accent-300 rounded-lg px-2.5 py-1 hover:bg-accent-50",children:"+ Attach proof"}),Ie.status==="pending"&&e.jsx("button",{onClick:()=>{U(Ie.id),F({filedDate:new Date().toISOString().split("T")[0],confirmationNum:""}),A("markFiled")},className:"px-3 py-1 bg-sage-600 text-white rounded text-xs font-medium hover:bg-sage-700",children:"Mark Filed"})]})]}),e.jsx("button",{onClick:()=>{confirm("Remove?")&&l.deleteFiling(Ie.id)},className:"text-xs text-red-400 hover:text-red-600 shrink-0",children:"Remove"})]},`fi-${Ie.id}`)}const{item:je,catLabel:Gt,catIcon:Wt}=Be,at=et(je.id,je.howTo.length),vt=Ja[je.role]||"ink",mt=l.itemAttachments[je.id]||[],xt=M===je.id,dt=od[je.fiduciaryDuty]||"ink",es=(E[je.id]||[]).filter(Boolean).length,xs=((xa=je.howTo)==null?void 0:xa.length)||0,$t=es>0,Dt=es===xs&&xs>0;return e.jsxs("div",{className:`rounded-xl border transition-all ${xt?"border-accent-300 shadow-sm bg-white":at?"border-sage-200 bg-sage-50 bg-opacity-30":$t?"border-accent-200 bg-white":"border-ink-100 bg-white hover:border-accent-200 hover:shadow-sm"}`,children:[e.jsxs("div",{className:"p-4 flex items-start gap-4 cursor-pointer",onClick:()=>ce(xt?null:je.id),children:[e.jsx("div",{className:`w-7 h-7 rounded-lg flex items-center justify-center shrink-0 mt-0.5 ${at?"bg-sage-500 text-white":$t?"bg-accent-100 text-accent-600":"bg-ink-50 text-ink-300"}`,children:at?e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):$t?e.jsxs("span",{className:"text-[10px] font-bold",children:[es,"/",xs]}):e.jsx("span",{className:"text-[10px] font-bold",children:""})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:`text-sm font-medium ${at?"text-ink-500 line-through":"text-ink-900"}`,children:je.task}),je.critical&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-red-100 text-red-700 font-bold",children:"CRITICAL"}),at&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-sage-100 text-sage-700 font-semibold border border-sage-200",children:" COMPLETE"}),!at&&$t&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-accent-50 text-accent-700 font-semibold border border-accent-200",children:"IN PROGRESS"}),!at&&!$t&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-amber-50 text-amber-700 font-semibold border border-amber-200",children:"NEEDS ACTION"}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded bg-${vt}-100 text-${vt}-700 font-semibold`,children:je.role}),e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-ink-50 text-ink-500",children:[Wt," ",Gt]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1.5",children:[e.jsx("span",{className:"text-[10px] font-mono text-accent-600",children:je.legalRef}),e.jsx("span",{className:"text-[10px] text-ink-400",children:je.freq}),e.jsxs("span",{className:"text-[10px] font-medium text-ink-500",children:["Due: ",je.due]})]}),!at&&xs>0&&e.jsxs("div",{className:"mt-2.5 flex items-center gap-2.5",children:[e.jsx("div",{className:"flex-1 h-1.5 bg-ink-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${Dt?"bg-sage-500":$t?"bg-accent-500":"bg-ink-200"}`,style:{width:`${xs>0?es/xs*100:0}%`}})}),e.jsxs("span",{className:`text-[10px] font-semibold shrink-0 ${Dt?"text-sage-600":$t?"text-accent-600":"text-ink-400"}`,children:[es,"/",xs," steps"]}),e.jsx("span",{className:`text-[10px] px-2.5 py-1 rounded-lg font-semibold shrink-0 ${$t?"bg-accent-100 text-accent-700":"bg-ink-100 text-ink-600"}`,onClick:Ie=>{Ie.stopPropagation(),ce(xt?null:je.id)},children:$t?" Continue":" Start workflow"})]}),at&&xs>0&&e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsxs("span",{className:"text-[10px] text-sage-500",children:[" All ",xs," steps completed"]}),e.jsx("span",{className:"text-[10px] text-ink-400",children:" View details "})]}),mt.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:mt.map(Ie=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 bg-mist-50 border border-mist-200 rounded-lg px-2.5 py-1",children:[e.jsxs("span",{className:"text-[11px] text-accent-600 font-medium",children:[" ",Ie.name]}),e.jsx("span",{className:"text-[10px] text-ink-400",children:Ie.size}),e.jsx("button",{onClick:Ut=>{Ut.stopPropagation(),l.removeItemAttachment(je.id,Ie.name)},className:"text-red-400 hover:text-red-600 text-xs ml-1",children:""})]},Ie.name))})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("div",{onClick:Ie=>Ie.stopPropagation(),children:e.jsx(z0,{itemId:je.id,itemTask:je.task,onAttach:()=>{U(je.id),xe(null),A("addRunbookAtt")},onComm:()=>{U(je.id),F({type:"notice",subject:`Re: ${je.task}`,date:new Date().toISOString().split("T")[0],method:"email",recipients:"All owners",status:"sent",notes:""}),A("addComm")},onCase:()=>{U(je.id),ot("case"),A("runbookLinkOrCreate")},onMeeting:()=>{const Ie=je.meetingType||"BOARD",Ut=je.suggestedAgenda||[je.task],Yt=us(Ie);De(je.id),ie({title:je.task,type:Ie,date:"",time:"19:00",location:"Community Room",virtualLink:"",agenda:Ut.join(`
`),notes:`From Runbook: ${je.task}. ${je.legalRef||""}`,status:"SCHEDULED",requiresVote:Yt.requiresVote,voteScope:Yt.voteScope,voteItems:[]}),A("addMeeting")}})}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${xt?"rotate-180":""} text-ink-300`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]})]}),xt&&(()=>{const Ie=E[je.id]||je.howTo.map(()=>!1),Ut=Ie.filter(Boolean).length,Yt=Ut===je.howTo.length,ps=yt=>{const ss=[...Ie];ss[yt]=!ss[yt],J({...E,[je.id]:ss})};return e.jsxs("div",{className:"px-4 pb-4 ml-10 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] font-bold text-amber-800 uppercase tracking-wider mb-1",children:" Why This Matters"}),e.jsx("p",{className:"text-xs text-amber-900 leading-relaxed",children:je.whyItMatters})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] font-bold text-red-800 uppercase tracking-wider mb-1",children:" If Not Completed"}),e.jsx("p",{className:"text-xs text-red-900 leading-relaxed",children:je.consequence})]})]}),e.jsxs("div",{className:`border rounded-xl overflow-hidden ${Yt?"border-sage-300 bg-sage-50":"border-ink-200 bg-white"}`,children:[e.jsxs("div",{className:"p-3 border-b border-ink-100 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-xs font-bold text-ink-900",children:" Workflow Steps"}),e.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold ${Yt?"bg-sage-200 text-sage-700":"bg-ink-100 text-ink-600"}`,children:[Ut,"/",je.howTo.length]})]}),e.jsxs("div",{className:"flex gap-2",children:[!Yt&&e.jsx("button",{onClick:()=>J({...E,[je.id]:je.howTo.map(()=>!0)}),className:"text-[10px] text-accent-600 font-medium hover:underline",children:"Complete all"}),Ut>0&&e.jsx("button",{onClick:()=>J({...E,[je.id]:je.howTo.map(()=>!1)}),className:"text-[10px] text-ink-400 font-medium hover:underline",children:"Reset"})]})]}),e.jsx("div",{className:"divide-y divide-ink-50",children:je.howTo.map((yt,ss)=>e.jsxs("label",{className:`flex items-start gap-3 p-3 cursor-pointer transition-colors ${Ie[ss]?"bg-sage-50":"hover:bg-ink-50"}`,children:[e.jsx("input",{type:"checkbox",checked:Ie[ss]||!1,onChange:()=>ps(ss),className:"h-4 w-4 mt-0.5 shrink-0 accent-sage-600 rounded"}),e.jsx("div",{className:"flex-1",children:e.jsx("span",{className:`text-xs ${Ie[ss]?"text-sage-600 line-through":"text-ink-800"}`,children:yt})}),e.jsx("span",{className:`text-[10px] font-bold shrink-0 ${Ie[ss]?"text-sage-500":"text-ink-300"}`,children:ss+1})]},ss))}),Yt&&e.jsxs("div",{className:"p-3 border-t border-sage-200 bg-sage-100 flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-sage-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"text-xs text-sage-700 font-semibold",children:"All workflow steps complete  item fulfilled"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-ink-400",children:[e.jsxs("span",{children:[" ",je.legalRef]}),e.jsxs("span",{className:`px-2 py-0.5 rounded bg-${dt}-50 text-${dt}-700 border border-${dt}-200 font-medium`,children:[Dr[je.fiduciaryDuty],": ",je.fiduciaryDuty==="care"?"Make informed, prudent decisions":je.fiduciaryDuty==="loyalty"?"Put association interests first":"Follow governing docs and law"]})]})]})})()]},je.id)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("h3",{className:"font-bold text-ink-900 text-sm",children:"Scheduled Deadlines"}),e.jsxs("span",{className:"text-[10px] text-ink-400 ml-1",children:[be.filter(Be=>!qt(Be)).length," remaining"]})]}),e.jsx("div",{className:"space-y-2",children:be.map(ms)}),be.length===0&&e.jsx("p",{className:"p-6 text-center text-sm text-ink-400 bg-white rounded-xl border border-ink-100",children:"All deadlines met"})]}),Xe.length>0&&e.jsxs("button",{onClick:()=>T("duties"),className:"w-full bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-center justify-between hover:bg-amber-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsxs("span",{className:"text-sm font-medium text-amber-800",children:[Xe.length," ongoing obligations"]}),e.jsx("span",{className:"text-xs text-amber-600",children:" per-meeting, monthly, and continuous duties"})]}),e.jsx("span",{className:"text-xs text-amber-600 font-medium",children:"View in Duties tab "})]})]})})(),St==="category"&&e.jsxs(e.Fragment,{children:[l.filings.length>0&&e.jsxs("div",{className:"bg-white rounded-xl border border-ink-100 overflow-hidden",id:"comp-filings",children:[e.jsx("div",{className:"p-5 border-b border-ink-100 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-ink-900",children:"Filings & Deadlines"}),e.jsxs("p",{className:"text-xs text-ink-400",children:[l.filings.filter(de=>de.status==="filed").length,"/",l.filings.length," filed  ",Cs," overdue"]})]})]})}),e.jsx("div",{className:"divide-y divide-ink-50",children:l.filings.sort((de,Ue)=>de.dueDate.localeCompare(Ue.dueDate)).map(de=>{const Ue=de.status==="pending"&&new Date(de.dueDate)<new Date,be=Ja[de.responsible]||"ink";return e.jsxs("div",{className:`p-4 flex items-start gap-4 ${de.status==="filed"?"bg-sage-50 bg-opacity-40":Ue?"bg-red-50 bg-opacity-40":""}`,children:[de.status==="filed"?e.jsx("div",{className:"w-6 h-6 rounded-lg bg-sage-100 border-2 border-sage-300 flex items-center justify-center shrink-0 mt-0.5",children:e.jsx("svg",{className:"w-3.5 h-3.5 text-sage-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}):e.jsx("button",{onClick:()=>{U(de.id),F({filedDate:new Date().toISOString().split("T")[0],confirmationNum:""}),A("markFiled")},className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center shrink-0 mt-0.5 ${Ue?"border-red-300 hover:border-red-500":"border-ink-200 hover:border-accent-400"}`,title:"Mark as filed"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("p",{className:`text-sm font-medium ${de.status==="filed"?"text-ink-500 line-through":"text-ink-900"}`,children:de.name}),de.status==="filed"?e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-sage-100 text-sage-700 font-semibold",children:" FILED"}):Ue?e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-red-100 text-red-700 font-bold",children:"OVERDUE"}):e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-yellow-100 text-yellow-700 font-semibold",children:"PENDING"}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-yellow-50 text-yellow-700 font-medium border border-yellow-200",children:" Filing"}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded bg-${be}-100 text-${be}-700 font-semibold`,children:de.responsible}),e.jsxs("span",{className:"text-xs text-ink-400",children:[de.category,"  ",de.recurrence]})]}),e.jsxs("p",{className:"text-xs text-ink-500 mt-1",children:["Due: ",de.dueDate,de.filedDate?`  Filed: ${de.filedDate}`:"",de.confirmationNum?`  Ref: ${de.confirmationNum}`:""]}),de.legalRef&&e.jsx("span",{className:"text-[10px] font-mono text-accent-600",children:de.legalRef}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[de.attachments.map(Xe=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 bg-mist-50 border border-mist-200 rounded-lg px-2.5 py-1",children:[e.jsxs("span",{className:"text-[11px] text-accent-600 font-medium",children:[" ",Xe.name]}),e.jsx("span",{className:"text-[10px] text-ink-400",children:Xe.size}),e.jsx("button",{onClick:()=>l.removeFilingAttachment(de.id,Xe.name),className:"text-red-400 hover:text-red-600 text-xs ml-1",children:""})]},Xe.name)),e.jsx("button",{onClick:()=>{U(de.id),xe(null),A("addFilingAtt")},className:"text-[11px] text-accent-600 font-medium hover:text-accent-700 border border-dashed border-accent-300 rounded-lg px-2.5 py-1 hover:bg-accent-50",children:"+ Attach proof"}),de.status==="pending"&&e.jsx("button",{onClick:()=>{U(de.id),F({filedDate:new Date().toISOString().split("T")[0],confirmationNum:""}),A("markFiled")},className:"px-3 py-1 bg-sage-600 text-white rounded text-xs font-medium hover:bg-sage-700",children:"Mark Filed"})]})]}),e.jsx("button",{onClick:()=>{confirm("Remove?")&&l.deleteFiling(de.id)},className:"text-xs text-red-400 hover:text-red-600 shrink-0",children:"Remove"})]},de.id)})})]}),qe.filter(de=>de.items.length>0).map(de=>{const Ue=de.pct>=80?"sage":de.pct>=50?"yellow":"red";return e.jsxs("div",{id:`comp-${de.id}`,className:"bg-white rounded-xl border border-ink-100 overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-ink-100 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:de.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-ink-900",children:de.label}),e.jsxs("p",{className:"text-xs text-ink-400",children:[de.passed,"/",de.total," complete  Weight: ",de.weight,"%"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-24 h-2 bg-ink-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-${Ue}-500 rounded-full`,style:{width:`${de.pct}%`}})}),e.jsxs("span",{className:`text-lg font-bold text-${Ue}-600`,children:[de.pct,"%"]})]})]}),e.jsx("div",{className:"space-y-2 p-4",children:de.items.map(be=>{var xt;const Xe=et(be.id,be.howTo.length),qt=Ja[be.role]||"ink",ms=l.itemAttachments[be.id]||[],Be=M===be.id,je=od[be.fiduciaryDuty]||"ink",Wt=(E[be.id]||[]).filter(Boolean).length,at=((xt=be.howTo)==null?void 0:xt.length)||0,vt=Wt>0,mt=Wt===at&&at>0;return e.jsxs("div",{className:`rounded-xl border transition-all ${Be?"border-accent-300 shadow-sm bg-white":Xe?"border-sage-200 bg-sage-50 bg-opacity-30":vt?"border-accent-200 bg-white":"border-ink-100 bg-white hover:border-accent-200 hover:shadow-sm"}`,children:[e.jsxs("div",{className:"p-4 flex items-start gap-4 cursor-pointer",onClick:()=>ce(Be?null:be.id),children:[e.jsx("div",{className:`w-7 h-7 rounded-lg flex items-center justify-center shrink-0 mt-0.5 ${Xe?"bg-sage-500 text-white":vt?"bg-accent-100 text-accent-600":"bg-ink-50 text-ink-300"}`,children:Xe?e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):vt?e.jsxs("span",{className:"text-[10px] font-bold",children:[Wt,"/",at]}):e.jsx("span",{className:"text-[10px] font-bold",children:""})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:`text-sm font-medium ${Xe?"text-ink-500 line-through":"text-ink-900"}`,children:be.task}),be.critical&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-red-100 text-red-700 font-bold",children:"CRITICAL"}),Xe&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-sage-100 text-sage-700 font-semibold border border-sage-200",children:" COMPLETE"}),!Xe&&vt&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-accent-50 text-accent-700 font-semibold border border-accent-200",children:"IN PROGRESS"}),!Xe&&!vt&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-amber-50 text-amber-700 font-semibold border border-amber-200",children:"NEEDS ACTION"}),be.perMeeting&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-accent-50 text-accent-700 font-medium border border-accent-200",children:" Per Meeting"}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded bg-${qt}-100 text-${qt}-700 font-semibold`,children:be.role})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1.5",children:[e.jsx("span",{className:"text-[10px] font-mono text-accent-600",children:be.legalRef}),e.jsx("span",{className:"text-[10px] text-ink-400",children:be.freq}),e.jsxs("span",{className:"text-[10px] font-medium text-ink-500",children:["Due: ",be.due]})]}),!Xe&&at>0&&e.jsxs("div",{className:"mt-2.5 flex items-center gap-2.5",children:[e.jsx("div",{className:"flex-1 h-1.5 bg-ink-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${mt?"bg-sage-500":vt?"bg-accent-500":"bg-ink-200"}`,style:{width:`${at>0?Wt/at*100:0}%`}})}),e.jsxs("span",{className:`text-[10px] font-semibold shrink-0 ${mt?"text-sage-600":vt?"text-accent-600":"text-ink-400"}`,children:[Wt,"/",at," steps"]}),e.jsx("span",{className:`text-[10px] px-2.5 py-1 rounded-lg font-semibold shrink-0 ${vt?"bg-accent-100 text-accent-700":"bg-ink-100 text-ink-600"}`,children:vt?" Continue":" Start workflow"})]}),Xe&&at>0&&e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsxs("span",{className:"text-[10px] text-sage-500",children:[" All ",at," steps completed"]}),e.jsx("span",{className:"text-[10px] text-ink-400",children:" View details "})]}),ms.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:ms.map(dt=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 bg-mist-50 border border-mist-200 rounded-lg px-2.5 py-1",children:[e.jsxs("span",{className:"text-[11px] text-accent-600 font-medium",children:[" ",dt.name]}),e.jsx("span",{className:"text-[10px] text-ink-400",children:dt.size}),e.jsx("button",{onClick:Ss=>{Ss.stopPropagation(),l.removeItemAttachment(be.id,dt.name)},className:"text-red-400 hover:text-red-600 text-xs ml-1",children:""})]},dt.name))})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("div",{onClick:dt=>dt.stopPropagation(),children:e.jsx(z0,{itemId:be.id,itemTask:be.task,onAttach:()=>{U(be.id),xe(null),A("addRunbookAtt")},onComm:()=>{U(be.id),F({type:"notice",subject:`Re: ${be.task}`,date:new Date().toISOString().split("T")[0],method:"email",recipients:"All owners",status:"sent",notes:""}),A("addComm")},onCase:()=>{U(be.id),ot("case"),A("runbookLinkOrCreate")},onMeeting:()=>{const dt=be.meetingType||"BOARD",Ss=be.suggestedAgenda||[be.task],es=us(dt);De(be.id),ie({title:be.task,type:dt,date:"",time:"19:00",location:"Community Room",virtualLink:"",agenda:Ss.join(`
`),notes:`From Runbook: ${be.task}. ${be.legalRef||""}`,status:"SCHEDULED",requiresVote:es.requiresVote,voteScope:es.voteScope,voteItems:[]}),A("addMeeting")}})}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${Be?"rotate-180":""} text-ink-300`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]})]}),Be&&(()=>{const dt=E[be.id]||be.howTo.map(()=>!1),Ss=dt.filter(Boolean).length,es=Ss===be.howTo.length,xs=$t=>{const Dt=[...dt];Dt[$t]=!Dt[$t],J({...E,[be.id]:Dt})};return e.jsxs("div",{className:"px-4 pb-4 ml-10 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] font-bold text-amber-800 uppercase tracking-wider mb-1",children:" Why This Matters"}),e.jsx("p",{className:"text-xs text-amber-900 leading-relaxed",children:be.whyItMatters})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] font-bold text-red-800 uppercase tracking-wider mb-1",children:" If Not Completed"}),e.jsx("p",{className:"text-xs text-red-900 leading-relaxed",children:be.consequence})]})]}),e.jsxs("div",{className:`border rounded-xl overflow-hidden ${es?"border-sage-300 bg-sage-50":"border-ink-200 bg-white"}`,children:[e.jsxs("div",{className:"p-3 border-b border-ink-100 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-xs font-bold text-ink-900",children:" Workflow Steps"}),e.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold ${es?"bg-sage-200 text-sage-700":"bg-ink-100 text-ink-600"}`,children:[Ss,"/",be.howTo.length]})]}),e.jsxs("div",{className:"flex gap-2",children:[!es&&e.jsx("button",{onClick:()=>J({...E,[be.id]:be.howTo.map(()=>!0)}),className:"text-[10px] text-accent-600 font-medium hover:underline",children:"Complete all"}),Ss>0&&e.jsx("button",{onClick:()=>J({...E,[be.id]:be.howTo.map(()=>!1)}),className:"text-[10px] text-ink-400 font-medium hover:underline",children:"Reset"})]})]}),e.jsx("div",{className:"divide-y divide-ink-50",children:be.howTo.map(($t,Dt)=>e.jsxs("label",{className:`flex items-start gap-3 p-3 cursor-pointer transition-colors ${dt[Dt]?"bg-sage-50":"hover:bg-ink-50"}`,children:[e.jsx("input",{type:"checkbox",checked:dt[Dt]||!1,onChange:()=>xs(Dt),className:"h-4 w-4 mt-0.5 shrink-0 accent-sage-600 rounded"}),e.jsx("div",{className:"flex-1",children:e.jsx("span",{className:`text-xs ${dt[Dt]?"text-sage-600 line-through":"text-ink-800"}`,children:$t})}),e.jsx("span",{className:`text-[10px] font-bold shrink-0 ${dt[Dt]?"text-sage-500":"text-ink-300"}`,children:Dt+1})]},Dt))}),es&&e.jsxs("div",{className:"p-3 border-t border-sage-200 bg-sage-100 flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-sage-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"text-xs text-sage-700 font-semibold",children:"All workflow steps complete  item fulfilled"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-ink-400",children:[e.jsxs("span",{children:[" ",be.legalRef]}),e.jsxs("span",{className:`px-2 py-0.5 rounded bg-${je}-50 text-${je}-700 border border-${je}-200 font-medium`,children:[Dr[be.fiduciaryDuty],": ",be.fiduciaryDuty==="care"?"Make informed, prudent decisions":be.fiduciaryDuty==="loyalty"?"Put association interests first":"Follow governing docs and law"]})]})]})})()]},be.id)})})]},de.id)})]})]})})(),_==="meetings"&&(()=>{const D=tt?"Bylaws Art. IV-V":"Governing Documents",k=ke.filter(Ce=>Ce.date.startsWith("2026")).length,X=6,oe=Math.min(100,Math.round(k/X*100)),fe=qs.filter(Ce=>!Ce.minutesApprovals||Ce.minutesApprovals.length===0).length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:`rounded-xl border p-4 ${oe>=80?"border-sage-200 bg-sage-50":oe>=50?"border-amber-200 bg-amber-50":"border-red-200 bg-red-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold text-ink-600 uppercase tracking-wider",children:"Meeting Cadence"}),e.jsxs("p",{className:"text-lg font-bold text-ink-900 mt-1",children:[k,"/",X," ",e.jsx("span",{className:"text-xs font-normal text-ink-400",children:"this year"})]}),e.jsx("div",{className:"w-full h-1.5 bg-ink-100 rounded-full mt-2 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${oe>=80?"bg-sage-500":oe>=50?"bg-amber-500":"bg-red-500"}`,style:{width:`${oe}%`}})}),e.jsxs("p",{className:"text-[10px] text-ink-400 mt-1.5",children:[" ",D,"  bi-monthly required"]})]}),e.jsxs("div",{className:`rounded-xl border p-4 ${fe===0?"border-sage-200 bg-sage-50":"border-amber-200 bg-amber-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold text-ink-600 uppercase tracking-wider",children:"Minutes Status"}),e.jsx("p",{className:"text-lg font-bold text-ink-900 mt-1",children:fe===0?" All approved":` ${fe} pending`}),e.jsxs("p",{className:"text-[10px] text-ink-400 mt-1.5",children:[" ",_e?"DC Code  29-1108.06":"State statute","  record, approve, distribute"]})]}),e.jsxs("div",{className:"rounded-xl border border-ink-100 bg-white p-4",children:[e.jsx("p",{className:"text-[10px] font-bold text-ink-600 uppercase tracking-wider",children:"Notice Requirements"}),e.jsx("p",{className:"text-xs text-ink-700 mt-1.5",children:_e?"48-hour notice for board meetings. 1060 day window for annual meeting.":"Follow bylaws notice requirements."}),e.jsxs("p",{className:"text-[10px] text-ink-400 mt-1.5",children:[" ",_e?"DC Code  29-1109.04":D]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:" Meetings"}),e.jsxs("p",{className:"text-xs text-ink-400",children:[ws.length," upcoming  ",qs.length," completed"]})]}),O&&e.jsx("button",{onClick:ge,className:"px-4 py-2 bg-ink-900 text-white rounded-lg text-sm font-medium hover:bg-ink-800",children:"+ Schedule Meeting"})]}),ws.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-ink-500 uppercase tracking-wide mb-3",children:"Upcoming"}),e.jsx("div",{className:"space-y-3",children:ws.map(Ce=>Nn(Ce,!0))})]}),qs.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-ink-500 uppercase tracking-wide mb-3",children:"Past"}),e.jsx("div",{className:"space-y-3",children:qs.map(Ce=>Nn(Ce,!1))})]}),ke.length===0&&e.jsx("p",{className:"text-center text-ink-400 py-8",children:"No meetings scheduled yet."})]})})(),_==="votes"&&e.jsx(pp,{}),_==="communications"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:" Owner Communications Log"}),e.jsx("p",{className:"text-xs text-ink-400",children:"Notices, minutes distribution, disclosure statements"})]}),e.jsx("button",{onClick:()=>{F({type:"notice",subject:"",date:new Date().toISOString().split("T")[0],method:"email",recipients:"All owners (50 units)",status:"sent",notes:""}),A("addComm")},className:"px-4 py-2 bg-ink-900 text-white rounded-lg text-sm font-medium hover:bg-ink-800",children:"+ Log Communication"})]}),e.jsx("div",{className:"bg-white rounded-xl border border-ink-100 overflow-hidden divide-y divide-ink-50",children:l.communications.sort((D,k)=>k.date.localeCompare(D.date)).map(D=>e.jsx("div",{className:"p-4 hover:bg-mist-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[e.jsx("span",{className:`pill px-1.5 py-0.5 rounded text-xs ${$0[D.type]||$0.other}`,children:D.type}),e.jsx("p",{className:"text-sm font-medium text-ink-900",children:D.subject}),e.jsx("span",{className:`pill px-1.5 py-0.5 rounded text-xs ${D.status==="sent"?"bg-sage-100 text-sage-700":D.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-ink-100 text-ink-500"}`,children:D.status})]}),e.jsxs("p",{className:"text-xs text-ink-500",children:[D.date,"  ",D.method,"  To: ",D.recipients]}),D.notes&&e.jsx("p",{className:"text-xs text-ink-400 mt-1",children:D.notes})]}),e.jsx("button",{onClick:()=>{confirm("Remove?")&&l.deleteCommunication(D.id)},className:"text-xs text-red-400 shrink-0",children:"Remove"})]})},D.id))})]}),_==="dailyops"&&e.jsx(kd,{embedded:!0})]}),q==="addFiling"&&e.jsx(Te,{title:"Add Regulatory Filing",onClose:()=>A(null),onSave:()=>{if(!z("name")||!z("dueDate")){alert("Name and due date required");return}l.addFiling({name:z("name"),category:z("category"),dueDate:z("dueDate"),responsible:z("responsible"),recurrence:z("recurrence"),legalRef:z("legalRef"),notes:z("notes")}),A(null)},children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Filing Name *"}),e.jsx("input",{value:z("name"),onChange:D=>ne("name",D.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"Annual Fire Safety Inspection"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Category"}),e.jsx("select",{value:z("category"),onChange:D=>ne("category",D.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:["tax","government","inspection","financial","governance","other"].map(D=>e.jsx("option",{children:D},D))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Recurrence"}),e.jsx("select",{value:z("recurrence"),onChange:D=>ne("recurrence",D.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:["annual","biennial","quarterly","one-time"].map(D=>e.jsx("option",{children:D},D))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Due Date *"}),e.jsx("input",{type:"date",value:z("dueDate"),onChange:D=>ne("dueDate",D.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Responsible"}),e.jsx("select",{value:z("responsible"),onChange:D=>ne("responsible",D.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:["President","Vice President","Treasurer","Secretary","Member at Large"].map(D=>e.jsx("option",{children:D},D))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Legal Reference"}),e.jsx("input",{value:z("legalRef"),onChange:D=>ne("legalRef",D.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"DC Code  29-102.11"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:z("notes"),onChange:D=>ne("notes",D.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",rows:2})]})]})}),q==="markFiled"&&e.jsx(Te,{title:"Mark as Filed",onClose:()=>A(null),onSave:()=>{l.markFilingComplete(H,z("filedDate"),z("confirmationNum")),A(null)},saveLabel:"Confirm Filed",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Date Filed"}),e.jsx("input",{type:"date",value:z("filedDate"),onChange:D=>ne("filedDate",D.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Confirmation #"}),e.jsx("input",{value:z("confirmationNum"),onChange:D=>ne("confirmationNum",D.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]})]})}),q==="addComm"&&e.jsx(Te,{title:"Log Communication",onClose:()=>A(null),onSave:()=>{if(!z("subject")){alert("Subject required");return}l.addCommunication({type:z("type"),subject:z("subject"),date:z("date"),method:z("method"),recipients:z("recipients"),respondedBy:null,status:z("status"),notes:z("notes")}),A(null)},children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Type"}),e.jsx("select",{value:z("type"),onChange:D=>ne("type",D.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:["notice","minutes","financial","response","resale","violation","other"].map(D=>e.jsx("option",{children:D},D))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Subject *"}),e.jsx("input",{value:z("subject"),onChange:D=>ne("subject",D.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:z("date"),onChange:D=>ne("date",D.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Method"}),e.jsx("select",{value:z("method"),onChange:D=>ne("method",D.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:["email","mail","mail+email","email+portal","certified mail","posted"].map(D=>e.jsx("option",{children:D},D))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Recipients"}),e.jsx("input",{value:z("recipients"),onChange:D=>ne("recipients",D.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Status"}),e.jsx("select",{value:z("status"),onChange:D=>ne("status",D.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:["sent","pending","draft"].map(D=>e.jsx("option",{children:D},D))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:z("notes"),onChange:D=>ne("notes",D.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",rows:2})]})]})}),(q==="addMeeting"||q==="editMeeting")&&e.jsx(Te,{title:q==="addMeeting"?"Schedule Meeting":"Edit Meeting",onClose:()=>A(null),onSave:ft,saveLabel:q==="addMeeting"?"Schedule":"Save",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Title *"}),e.jsx("input",{value:K.title,onChange:D=>ie({...K,title:D.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"February Board Meeting"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Type"}),e.jsx("select",{value:K.type,onChange:D=>{const k=D.target.value,X=us(k);ie({...K,type:k,requiresVote:X.requiresVote,voteScope:X.voteScope,voteItems:[]})},className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:["BOARD","ANNUAL","QUARTERLY","SPECIAL","EMERGENCY"].map(D=>e.jsx("option",{children:D},D))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Status"}),e.jsx("select",{value:K.status,onChange:D=>ie({...K,status:D.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:["SCHEDULED","COMPLETED","CANCELLED","RESCHEDULED"].map(D=>e.jsx("option",{children:D},D))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Date *"}),e.jsx("input",{type:"date",value:K.date,onChange:D=>ie({...K,date:D.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Time"}),e.jsx("input",{type:"time",value:K.time,onChange:D=>ie({...K,time:D.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Location"}),e.jsx("input",{value:K.location,onChange:D=>ie({...K,location:D.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Virtual Link"}),e.jsx("input",{value:K.virtualLink,onChange:D=>ie({...K,virtualLink:D.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",placeholder:"https://zoom.us/..."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Agenda (one item per line) *"}),e.jsx("textarea",{value:K.agenda,onChange:D=>ie({...K,agenda:D.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",rows:4,placeholder:`Review January financials
Elevator maintenance proposal
Approve 2026 budget`})]}),q==="addMeeting"&&(()=>{const D=us(K.type),k=K.agenda.split(`
`).map(de=>de.trim()).filter(Boolean),X=/\b(approv|adopt|ratif|elect|amend|authori|resolv|vote|budget|assess|special assessment|terminat|contract|remov|waiv)\w*/i,oe=k.map((de,Ue)=>({index:Ue,text:de,isVotable:X.test(de)})),fe=oe.filter(de=>de.isVotable).map(de=>de.index),Ce=fe.length>0,Ke=K.voteItems.length>0?K.voteItems:K.requiresVote?fe:[];return e.jsxs("div",{className:"bg-mist-50 border border-mist-200 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-ink-700",children:"Requires Vote?"}),e.jsx("p",{className:"text-[10px] text-ink-400 mt-0.5",children:D.reason})]}),e.jsx("button",{onClick:()=>{const de=!K.requiresVote;ie({...K,requiresVote:de,voteItems:de&&K.voteItems.length===0?fe:K.voteItems})},className:`relative w-11 h-6 rounded-full transition-colors ${K.requiresVote?"bg-accent-500":"bg-ink-200"}`,children:e.jsx("span",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform ${K.requiresVote?"left-[22px]":"left-0.5"}`})})]}),!K.requiresVote&&Ce&&k.length>0&&e.jsxs("button",{onClick:()=>ie({...K,requiresVote:!0,voteItems:fe}),className:"w-full text-left bg-amber-50 border border-amber-200 rounded-lg p-3 hover:bg-amber-100 transition-colors",children:[e.jsxs("p",{className:"text-[10px] font-semibold text-amber-800",children:[" ",fe.length," agenda item",fe.length>1?"s":""," may require a vote:"]}),e.jsx("div",{className:"mt-1.5 space-y-0.5",children:oe.filter(de=>de.isVotable).map(de=>e.jsxs("p",{className:"text-[10px] text-amber-700",children:[" ",de.text]},de.index))}),e.jsx("p",{className:"text-[10px] text-accent-600 font-medium mt-2",children:"Click to enable vote for these items "})]}),K.requiresVote&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-semibold text-ink-600 mb-1",children:"Vote Scope"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ie({...K,voteScope:"board"}),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${K.voteScope==="board"?"bg-accent-600 text-white":"bg-white border border-ink-200 text-ink-600"}`,children:"Board Vote"}),e.jsx("button",{onClick:()=>ie({...K,voteScope:"owner"}),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${K.voteScope==="owner"?"bg-accent-600 text-white":"bg-white border border-ink-200 text-ink-600"}`,children:"Owner Vote"})]})]}),e.jsxs("div",{className:"bg-white border border-ink-100 rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] text-ink-600",children:K.voteScope==="board"?" Board members vote on motions. Quorum: majority of board.":" Unit owners vote. Quorum: 25% of eligible units."}),k.length>0&&(()=>{const de=Ke;return e.jsxs("div",{className:"mt-3 border-t border-ink-50 pt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-[10px] font-semibold text-ink-500",children:"Select agenda items that require a vote:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ie({...K,voteItems:k.map((Ue,be)=>be)}),className:"text-[10px] text-accent-600 font-medium hover:underline",children:"Select all"}),e.jsx("button",{onClick:()=>ie({...K,voteItems:[]}),className:"text-[10px] text-ink-400 font-medium hover:underline",children:"Clear"})]})]}),e.jsx("div",{className:"space-y-1.5",children:k.map((Ue,be)=>{const Xe=de.includes(be),qt=fe.includes(be);return e.jsxs("label",{className:`flex items-start gap-2.5 p-2 rounded-lg cursor-pointer transition-colors ${Xe?"bg-accent-50 border border-accent-200":"hover:bg-mist-50 border border-transparent"}`,children:[e.jsx("input",{type:"checkbox",checked:Xe,onChange:ms=>{ms.target.checked?ie({...K,voteItems:[...de,be]}):ie({...K,voteItems:de.filter(Be=>Be!==be)})},className:"h-4 w-4 mt-0.5 shrink-0 accent-accent-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:`text-xs ${Xe?"text-accent-800 font-medium":"text-ink-600"}`,children:Ue}),Xe&&e.jsx("span",{className:"text-[10px] text-accent-500 ml-1.5",children:" vote item"}),qt&&!Xe&&e.jsx("span",{className:"text-[10px] text-amber-500 ml-1.5",children:" suggested"})]})]},be)})}),de.length===0&&e.jsx("p",{className:"text-[10px] text-amber-600 mt-2",children:' No items selected  select at least one agenda item to vote on, or toggle off "Requires Vote"'}),de.length>0&&e.jsxs("p",{className:"text-[10px] text-sage-600 mt-2",children:[" ",de.length," of ",k.length," agenda items will become vote items"]})]})})(),k.length===0&&e.jsx("p",{className:"text-[10px] text-ink-400 mt-2 italic",children:"Add agenda items above to select which require a vote"})]})]})]})})(),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:K.notes,onChange:D=>ie({...K,notes:D.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",rows:2})]})]})}),q==="attendees"&&e.jsx(Te,{title:"Manage Attendees",onClose:()=>A(null),onSave:_t,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-2",children:"Board Members"}),e.jsx("div",{className:"space-y-1",children:i.map(D=>e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:he.board.includes(D.name),onChange:k=>{k.target.checked?pe({...he,board:[...he.board,D.name]}):pe({...he,board:he.board.filter(X=>X!==D.name)})},className:"h-4 w-4"}),D.name," ",e.jsxs("span",{className:"text-ink-400",children:["(",D.role,")"]})]},D.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Owners (one per line)"}),e.jsx("textarea",{value:he.owners,onChange:D=>pe({...he,owners:D.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Guests"}),e.jsx("textarea",{value:he.guests,onChange:D=>pe({...he,guests:D.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",rows:2})]})]})}),q==="minutes"&&e.jsx(Te,{title:"Meeting Minutes",onClose:()=>A(null),onSave:()=>{m.updateMinutes(H,Ne),A(null)},wide:!0,children:e.jsx("textarea",{value:Ne,onChange:D=>B(D.target.value),className:"w-full px-4 py-3 border border-ink-200 rounded-lg text-sm font-mono",rows:12})}),q==="addFilingAtt"&&e.jsx(Te,{title:"Attach Proof of Filing",onClose:()=>A(null),onSave:()=>{if(!Q)return alert("Select a file.");l.addFilingAttachment(H,{name:Q.name,size:Q.size,uploadedAt:new Date().toISOString().split("T")[0]}),A(null),xe(null)},saveLabel:"Attach",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(Tr,{onFileSelected:D=>xe(D),accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png",label:"Drop proof of filing here or click to browse"}),Q&&e.jsx("div",{className:"bg-sage-50 border border-sage-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-sage-700",children:[" ",e.jsx("strong",{children:Q.name})," (",Q.size,")"]})})]})}),q==="addRunbookAtt"&&e.jsx(Te,{title:"Attach Document to Checklist Item",onClose:()=>A(null),onSave:()=>{if(!Q)return alert("Select a file.");l.addItemAttachment(H,{name:Q.name,size:Q.size,uploadedAt:new Date().toISOString().split("T")[0]}),A(null),xe(null)},saveLabel:"Attach",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(Tr,{onFileSelected:D=>xe(D),accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png"}),Q&&e.jsx("div",{className:"bg-sage-50 border border-sage-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-sage-700",children:[" ",e.jsx("strong",{children:Q.name})," (",Q.size,")"]})})]})}),q==="linkCaseToMeeting"&&e.jsx(Te,{title:"Link Existing Case",onClose:()=>A(null),onSave:()=>{Se&&(m.linkCase(H,Se),A(null))},saveLabel:"Link",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-ink-500",children:"Select an existing case from Case Ops."}),e.jsxs("select",{value:Se,onChange:D=>b(D.target.value),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Select a case..."}),p.cases.filter(D=>D.status!=="closed").map(D=>e.jsxs("option",{value:D.id,children:[D.id,": ",D.title," (",D.status,")"]},D.id))]})]})}),q==="createCaseForMeeting"&&e.jsx(Te,{title:"Create Case",onClose:()=>A(null),onSave:At,saveLabel:"Create",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Case Title *"}),e.jsx("input",{value:ae.title,onChange:D=>Me({...ae,title:D.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Workflow"}),e.jsx("select",{value:ae.sitId,onChange:D=>Me({...ae,sitId:D.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:ma.map(D=>e.jsx("option",{value:D.id,children:D.label},D.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Priority"}),e.jsxs("select",{value:ae.priority,onChange:D=>Me({...ae,priority:D.target.value}),className:"w-full px-3 py-2 border border-ink-200 rounded-lg text-sm",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"critical",children:"Critical"})]})]})]})]})}),q==="addDocument"&&(()=>{const D=ke.find(k=>k.id===H);return e.jsx(Te,{title:`Documents  ${(D==null?void 0:D.title)||""}`,onClose:()=>A(null),onSave:()=>{Q&&(m.addDocument(H,{name:Q.name,size:Q.size,type:Q.type,uploadedAt:new Date().toISOString(),uploadedBy:(v==null?void 0:v.name)||"Board"}),xe(null)),A(null)},saveLabel:Q?"Upload & Close":"Close",children:e.jsxs("div",{className:"space-y-4",children:[((D==null?void 0:D.documents)||[]).length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-ink-600 mb-2",children:"Attached Documents"}),e.jsx("div",{className:"space-y-1.5",children:((D==null?void 0:D.documents)||[]).map(k=>e.jsxs("div",{className:"flex items-center justify-between bg-mist-50 border border-mist-200 rounded-lg px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:""}),e.jsx("span",{className:"text-xs text-ink-800 font-medium",children:k.name}),e.jsx("span",{className:"text-[10px] text-ink-400",children:k.size})]}),e.jsx("button",{onClick:()=>m.removeDocument(H,k.id),className:"text-xs text-red-400 hover:text-red-600",children:"Remove"})]},k.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-ink-600 mb-2",children:"Upload New Document"}),e.jsx(Tr,{onFileSelected:k=>xe({name:k.name,size:k.size,type:k.type}),accept:".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg"}),Q&&e.jsxs("p",{className:"text-xs text-sage-600 mt-1.5",children:[" Ready: ",Q.name," (",Q.size,")"]})]})]})})})(),q==="runbookLinkOrCreate"&&(()=>{const D=P.flatMap(k=>k.items).find(k=>k.id===H);return e.jsx(Te,{title:Ae==="case"?"Add Case":"Schedule Meeting",onClose:()=>A(null),onSave:()=>A(null),saveLabel:"Done",children:e.jsxs("div",{className:"space-y-4",children:[D&&e.jsxs("div",{className:"bg-mist-50 border border-mist-200 rounded-lg p-3",children:[e.jsxs("p",{className:"text-xs font-semibold text-ink-700",children:[" ",D.task]}),e.jsxs("p",{className:"text-[10px] text-ink-400 mt-0.5",children:[D.legalRef,"  ",D.role,"  ",D.freq]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>{Ae==="case"?(b(""),A("linkCaseToMeeting")):(A(null),T("meetings"))},className:"p-4 bg-mist-50 border border-mist-200 rounded-xl text-center hover:border-accent-400 hover:bg-accent-50 transition-colors",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("p",{className:"text-sm font-semibold text-ink-900 mt-2",children:"Link Existing"}),e.jsx("p",{className:"text-xs text-ink-400 mt-1",children:Ae==="case"?"Choose from open cases":"Go to Meetings tab"})]}),e.jsxs("button",{onClick:()=>{if(Ae==="case")Me({catId:"governance",sitId:"board-meetings",title:(D==null?void 0:D.task)||"",priority:D!=null&&D.critical?"high":"medium"}),A("createCaseForMeeting");else{const k=(D==null?void 0:D.meetingType)||"BOARD",X=(D==null?void 0:D.suggestedAgenda)||[(D==null?void 0:D.task)||"Agenda item"],oe=us(k);De(H),ie({title:(D==null?void 0:D.task)||"Meeting",type:k,date:"",time:"19:00",location:"Community Room",virtualLink:"",agenda:X.join(`
`),notes:`From Runbook: ${(D==null?void 0:D.task)||""}. ${(D==null?void 0:D.legalRef)||""}`,status:"SCHEDULED",requiresVote:oe.requiresVote,voteScope:oe.voteScope,voteItems:[]}),A("addMeeting")}},className:"p-4 bg-mist-50 border border-mist-200 rounded-xl text-center hover:border-accent-400 hover:bg-accent-50 transition-colors",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("p",{className:"text-sm font-semibold text-ink-900 mt-2",children:"Create New"}),e.jsx("p",{className:"text-xs text-ink-400 mt-1",children:Ae==="case"?"Open a new case":"Schedule & mark complete"})]})]})]})})})()]})}function Hv(){const[l,m]=C.useState("meetings"),i=Ka(),o=Br();jt(T=>T.currentUser);const{board:u}=Ns(),{meetings:d}=i,x=d.filter(T=>T.status==="SCHEDULED"||T.status==="RESCHEDULED").sort((T,y)=>T.date.localeCompare(y.date)),p=d.filter(T=>T.status==="COMPLETED").sort((T,y)=>y.date.localeCompare(T.date)),f=o.elections.filter(T=>T.status==="open").length,g=o.elections.filter(T=>T.status==="certified").length,v={BOARD:"bg-accent-100 text-accent-700",ANNUAL:"bg-sage-100 text-sage-700",QUARTERLY:"bg-mist-100 text-ink-600",SPECIAL:"bg-yellow-100 text-yellow-700",EMERGENCY:"bg-red-100 text-red-700"},R={SCHEDULED:"bg-accent-100 text-accent-700",COMPLETED:"bg-sage-100 text-sage-700",CANCELLED:"bg-red-100 text-red-700",RESCHEDULED:"bg-yellow-100 text-yellow-700"},O=[{id:"meetings",label:"Meetings",badge:x.length||void 0},{id:"votes",label:"Votes & Resolutions",badge:f||void 0},{id:"issues",label:"Report Issues"}],[N,P]=C.useState(null),_=T=>{var U;const y=N===T.id,j=((U=T.minutesApprovals)==null?void 0:U.length)||0,q=u.length||5,A=Math.ceil(q/2),H=j>=A;return e.jsxs("div",{className:`rounded-xl border transition-all ${y?"border-accent-300 shadow-sm":"border-ink-100 hover:border-accent-200 hover:shadow-sm"}`,children:[e.jsxs("div",{className:"p-4 cursor-pointer",onClick:()=>P(y?null:T.id),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded font-semibold ${v[T.type]||"bg-ink-100 text-ink-600"}`,children:T.type}),e.jsx("h4",{className:"text-sm font-semibold text-ink-900",children:T.title}),e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded font-medium ${R[T.status]||""}`,children:T.status}),T.status==="COMPLETED"&&(H?e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-sage-100 text-sage-700 font-medium",children:" Minutes approved"}):j>0?e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded bg-amber-100 text-amber-700 font-medium",children:[" ",j,"/",A," approvals"]}):e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-red-100 text-red-600 font-medium",children:" No minutes"}))]}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${y?"rotate-180":""} text-ink-300`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1.5 text-[11px] text-ink-400",children:[e.jsxs("span",{children:[" ",T.date]}),e.jsxs("span",{children:[" ",T.time]}),e.jsxs("span",{children:[" ",T.location]}),T.virtualLink&&e.jsx("span",{children:" Virtual"})]})]}),y&&e.jsxs("div",{className:"px-4 pb-4 space-y-3 border-t border-ink-50 pt-3",children:[T.agenda.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-ink-700 mb-1.5",children:" Agenda"}),e.jsx("ol",{className:"space-y-1 ml-4",children:T.agenda.map((L,F)=>e.jsx("li",{className:"text-xs text-ink-600 list-decimal",children:L},F))})]}),T.notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-ink-700 mb-1.5",children:" Minutes"}),e.jsx("div",{className:"bg-mist-50 rounded-lg p-3 text-xs text-ink-700 whitespace-pre-wrap",children:T.notes})]}),(T.documents||[]).length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-ink-700 mb-1.5",children:" Documents"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:T.documents.map(L=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 bg-mist-50 border border-mist-200 rounded-lg px-2.5 py-1.5",children:[e.jsxs("span",{className:"text-[11px] text-accent-600 font-medium",children:[" ",L.name]}),e.jsx("span",{className:"text-[10px] text-ink-400",children:L.size})]},L.id))})]}),(T.linkedVoteIds||[]).length>0&&(()=>{const L=o.elections.filter(F=>(T.linkedVoteIds||[]).includes(F.id));return L.length>0?e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-ink-700 mb-1.5",children:" Linked Votes"}),e.jsx("div",{className:"space-y-1.5",children:L.map(F=>e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-2.5 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-green-900",children:F.title}),e.jsxs("p",{className:"text-[10px] text-green-600",children:[F.status,"  ",F.ballotItems.length," items"]})]}),e.jsx("button",{onClick:()=>m("votes"),className:"text-[10px] text-accent-600 hover:underline",children:"View "})]},F.id))})]}):null})()]})]},T.id)};return e.jsxs("div",{className:"space-y-0",children:[e.jsxs("div",{className:"bg-gradient-to-r from-ink-900 via-ink-800 to-accent-800 rounded-t-xl p-8 text-white shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between flex-wrap gap-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-2xl font-bold",children:" Community Room"}),e.jsx("p",{className:"text-accent-200 text-sm mt-1",children:"Meetings, vote results & issue reporting"})]})}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mt-5",children:[{val:x.length,label:"Upcoming Meetings",icon:"",tab:"meetings"},{val:p.length,label:"Past Meetings",icon:"",tab:"meetings"},{val:f,label:"Open Votes",icon:"",tab:"votes"},{val:g,label:"Certified Results",icon:"",tab:"votes"}].map(T=>e.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-3 text-center cursor-pointer hover:bg-opacity-20",onClick:()=>m(T.tab),children:[e.jsx("span",{className:"text-xl",children:T.icon}),e.jsx("p",{className:"text-[11px] text-accent-100 mt-0.5 leading-tight",children:T.label}),e.jsx("p",{className:"text-sm font-bold text-white mt-1",children:T.val})]},T.label))})]}),e.jsx("div",{className:"bg-white border-x border-ink-100 border-b overflow-x-auto",children:e.jsx("div",{className:"flex min-w-max px-4",children:O.map(T=>e.jsxs("button",{onClick:()=>m(T.id),className:`px-5 py-3 text-sm font-medium border-b-2 whitespace-nowrap transition-colors flex items-center gap-2 ${l===T.id?"border-ink-900 text-ink-900":"border-transparent text-ink-400 hover:text-ink-700"}`,children:[T.label,T.badge?e.jsx("span",{className:"bg-red-500 text-white text-[10px] rounded-full px-1.5 py-0.5 font-bold",children:T.badge}):null]},T.id))})}),e.jsxs("div",{className:"bg-white rounded-b-xl border-x border-b border-ink-100 p-6",children:[l==="meetings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-lg font-bold text-ink-900",children:" Meetings"}),e.jsxs("p",{className:"text-xs text-ink-400 mt-1",children:[x.length," upcoming  ",p.length," completed  View agendas, minutes, and documents"]})]}),x.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-ink-500 uppercase tracking-wide mb-3",children:"Upcoming"}),e.jsx("div",{className:"space-y-2",children:x.map(T=>_(T))})]}),p.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-ink-500 uppercase tracking-wide mb-3",children:"Past Meetings"}),e.jsx("div",{className:"space-y-2",children:p.map(T=>_(T))})]}),d.length===0&&e.jsx("p",{className:"text-center text-ink-400 py-8",children:"No meetings scheduled yet."})]}),l==="votes"&&e.jsx(pp,{}),l==="issues"&&e.jsx(kd,{embedded:!0})]})]})}const Gv=[" Review our compliance status"," Summarize our financial health"," What are our bylaws obligations this quarter?"," Create a maintenance case"];function Yv(){const{currentRole:l}=jt(),{board:m,insurance:i,legalDocuments:o,details:u,address:d,name:x}=Ns(),{workOrders:p,chartOfAccounts:f,generalLedger:g,getIncomeMetrics:v}=Xt(),{completions:R,filings:O}=Ir(),[N,P]=C.useState(!1),[_,T]=C.useState([]),[y,j]=C.useState(""),[q,A]=C.useState(!1),H=C.useRef(null),U=C.useRef(null),L=l==="BOARD_MEMBER"||l==="PROPERTY_MANAGER",F=()=>{var he;return(he=H.current)==null?void 0:he.scrollIntoView({behavior:"smooth"})};if(C.useEffect(F,[_,q]),!L)return null;const z=()=>{P(!N),!N&&_.length===0&&T([{role:"assistant",content:`Welcome! I'm your HOA Compliance Advisor for **${x||"Sunny Acres Condominiums"}** in **${d.city}, ${d.state}**.

I can help you with:
 **Bylaws & governing document** questions
 **Local, state & federal compliance** guidance
 **Budget and financial** questions
 **Insurance and legal document** reviews
 **Create cases and work orders**

How can I help you today?`}]),setTimeout(()=>{var he;return(he=U.current)==null?void 0:he.focus()},100)},ne=()=>{const he=i.filter(w=>w.expires>new Date().toISOString().split("T")[0]),pe=v(),Ne=28,B=Object.values(R).filter(Boolean).length,I=Math.round(B/Ne*100);return`HOA CONTEXT:
Building: ${x||"Sunny Acres Condominiums"}
Address: ${d.street}, ${d.city}, ${d.state} ${d.zip}
Units: ${u.totalUnits} total
Year Built: ${u.yearBuilt}

GOVERNING DOCUMENTS:
${o.map(w=>`- ${w.name} (v${w.version}, status: ${w.status})`).join(`
`)}

INSURANCE:
${he.map(w=>`- ${w.type}: ${w.carrier}, Coverage: ${w.coverage}, Expires: ${w.expires}`).join(`
`)}

BOARD MEMBERS: ${m.map(w=>`${w.name} (${w.role})`).join(", ")}

BUDGET STATUS:
Monthly assessments collected: ${pe.collectionRate}%
Total budgeted: $${pe.totalBudgeted.toLocaleString()}
Total actual: $${pe.totalActual.toLocaleString()}

WORK ORDERS: ${p.length} total, ${p.filter(w=>w.status!=="paid").length} open

COMPLIANCE HEALTH INDEX: ${I}/100
Regulatory Filings: ${O.filter(w=>w.status==="pending").length} pending, ${O.filter(w=>w.status==="filed").length} filed

CHART OF ACCOUNTS: ${f.length} accounts
GENERAL LEDGER: ${g.length} entries`},K=async he=>{const pe=he||y.trim();if(!pe||q)return;j("");const Ne=[..._,{role:"user",content:pe}];T(Ne),A(!0);try{const B=`You are the HOA Compliance Advisor for a condominium association. You help board members understand their governing documents, comply with local/state/federal law, and manage their building.

CRITICAL RULES:
1. You are NOT a lawyer. Every substantive response must end with a brief disclaimer that this is general guidance, not legal advice.
2. Reference specific bylaw sections, state statutes when applicable.
3. For the building's jurisdiction (${d.state}), reference the correct state condo act.
4. Be concise but thorough. Use **bold** for emphasis. Use line breaks for readability.
5. When unsure about current law, say so and recommend checking with counsel.
6. If the user asks you to navigate somewhere, tell them which module to visit.

${ne()}`,I=Ne.map(E=>({role:E.role,content:E.content})),M=await(await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:1e3,system:B,messages:I})})).json();let ce="";M.content&&(ce=M.content.filter(E=>E.type==="text").map(E=>E.text).join(`
`)),ce||(ce="I apologize, I was unable to process that request. Please try rephrasing your question."),T([...Ne,{role:"assistant",content:ce}])}catch(B){T([...Ne,{role:"assistant",content:`I encountered an error connecting to the AI service. Please try again.

Error: ${B.message}`}])}A(!1)},ie=he=>he.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br>");return e.jsxs(e.Fragment,{children:[!N&&e.jsxs("button",{onClick:z,className:"fixed bottom-6 right-6 w-14 h-14 bg-accent-600 text-white rounded-full shadow-lg hover:bg-accent-700 hover:shadow-xl transition-all flex items-center justify-center z-50 group",title:"AI Compliance Advisor",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"absolute -top-10 right-0 bg-ink-900 text-white text-xs px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"AI Advisor"})]}),N&&e.jsxs("div",{className:"fixed bottom-6 right-6 w-[420px] max-h-[600px] bg-white rounded-2xl shadow-2xl border border-ink-200 flex flex-col z-50 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-ink-900 to-ink-800 text-white px-5 py-4 flex items-center justify-between shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-display font-bold text-sm",children:"Compliance Advisor"}),e.jsx("p",{className:"text-xs text-ink-300",children:"AI-powered guidance  Not legal advice"})]})]}),e.jsx("button",{onClick:z,className:"w-8 h-8 rounded-lg hover:bg-white hover:bg-opacity-10 flex items-center justify-center transition-colors text-lg",children:""})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 min-h-0",style:{maxHeight:"400px"},children:[_.map((he,pe)=>e.jsx("div",{className:`flex ${he.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`${he.role==="user"?"bg-accent-600 text-white":"bg-ink-50 text-ink-800 border border-ink-100"} rounded-2xl ${he.role==="user"?"rounded-br-md":"rounded-bl-md"} px-4 py-2.5 max-w-[85%] text-sm leading-relaxed`,children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:ie(he.content)}}),he.role==="assistant"&&pe>0&&e.jsx("div",{className:"mt-2 pt-2 border-t border-ink-100 text-[10px] text-ink-400 italic",children:" General guidance based on governing documents and applicable codes. Not legal advice  consult a licensed attorney."})]})},pe)),q&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-ink-50 border border-ink-100 rounded-2xl rounded-bl-md px-4 py-3 text-sm text-ink-400",children:e.jsxs("span",{className:"inline-flex gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-ink-300 rounded-full animate-bounce",style:{animationDelay:"0s"}}),e.jsx("span",{className:"w-2 h-2 bg-ink-300 rounded-full animate-bounce",style:{animationDelay:".15s"}}),e.jsx("span",{className:"w-2 h-2 bg-ink-300 rounded-full animate-bounce",style:{animationDelay:".3s"}})]})})}),e.jsx("div",{ref:H})]}),_.length<=1&&e.jsx("div",{className:"px-4 pb-2 flex flex-wrap gap-1.5",children:Gv.map((he,pe)=>e.jsx("button",{onClick:()=>K(he.replace(/^[^\s]+\s/,"")),className:"text-xs bg-mist-50 border border-ink-100 rounded-lg px-2.5 py-1.5 text-ink-600 hover:bg-accent-50 hover:border-accent-200 transition-colors",children:he},pe))}),e.jsxs("div",{className:"border-t border-ink-100 p-3 flex gap-2 shrink-0",children:[e.jsx("input",{ref:U,value:y,onChange:he=>j(he.target.value),onKeyDown:he=>he.key==="Enter"&&K(),placeholder:"Ask about compliance, bylaws, finances...",className:"flex-1 px-3 py-2 border border-ink-200 rounded-lg text-sm focus:outline-none focus:border-accent-400",disabled:q}),e.jsx("button",{onClick:()=>K(),disabled:q||!y.trim(),className:"px-4 py-2 bg-ink-900 text-white rounded-lg text-sm font-medium hover:bg-ink-800 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:"Send"})]})]})]})}function Qv(){ub();const l=Xs(),[m,i]=C.useState("request"),[o,u]=C.useState(""),[d,x]=C.useState(""),[p,f]=C.useState(""),[g,v]=C.useState(!1),[R,O]=C.useState(""),[N,P]=C.useState("");C.useEffect(()=>{const y=window.location.hash;(y.includes("type=recovery")||y.includes("access_token"))&&i("set")},[]);const _=async()=>{if(!o){P("Please enter your email address.");return}{P("Backend not configured.");return}},T=async()=>{if(!d){P("Please enter a new password.");return}if(d.length<6){P("Password must be at least 6 characters.");return}if(d!==p){P("Passwords do not match.");return}{P("Backend not configured.");return}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-mist-100 via-white to-sage-50 p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-ink-100 p-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("svg",{className:"w-12 h-12",viewBox:"0 0 32 32",fill:"none",children:[e.jsx("rect",{width:"32",height:"32",rx:"4",fill:"#3D3D3D"}),e.jsx("rect",{x:"13.5",y:"7",width:"5",height:"18",rx:"1",fill:"white"}),e.jsx("rect",{x:"7",y:"13.5",width:"18",height:"5",rx:"1",fill:"white"})]})}),m==="request"?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"font-display text-xl font-bold text-ink-900 text-center mb-2",children:"Reset Your Password"}),e.jsx("p",{className:"text-sm text-ink-400 text-center mb-6",children:"Enter your email and we'll send you a link to reset your password."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:o,onChange:y=>{u(y.target.value),P("")},onKeyDown:y=>y.key==="Enter"&&_(),className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:"you@example.com"})]}),N&&e.jsx("p",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg px-3 py-2",children:N}),R&&e.jsx("p",{className:"text-sm text-sage-700 bg-sage-50 border border-sage-200 rounded-lg px-3 py-2",children:R}),e.jsx("button",{onClick:_,disabled:g,className:"w-full py-3 bg-ink-900 text-white rounded-xl font-semibold text-sm hover:bg-ink-800 disabled:opacity-50",children:g?"Sending...":"Send Reset Link"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"font-display text-xl font-bold text-ink-900 text-center mb-2",children:"Set New Password"}),e.jsx("p",{className:"text-sm text-ink-400 text-center mb-6",children:"Enter your new password below."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"New Password"}),e.jsx("input",{type:"password",value:d,onChange:y=>{x(y.target.value),P("")},className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Confirm Password"}),e.jsx("input",{type:"password",value:p,onChange:y=>{f(y.target.value),P("")},onKeyDown:y=>y.key==="Enter"&&T(),className:"w-full px-3 py-2.5 border border-ink-200 rounded-lg text-sm",placeholder:""})]}),N&&e.jsx("p",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg px-3 py-2",children:N}),R&&e.jsx("p",{className:"text-sm text-sage-700 bg-sage-50 border border-sage-200 rounded-lg px-3 py-2",children:R}),e.jsx("button",{onClick:T,disabled:g,className:"w-full py-3 bg-ink-900 text-white rounded-xl font-semibold text-sm hover:bg-ink-800 disabled:opacity-50",children:g?"Updating...":"Update Password"})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("a",{onClick:()=>l("/login"),className:"text-sm text-ink-400 hover:text-ink-600 cursor-pointer",children:" Back to Sign In"})})]})})})}function Xv({children:l}){const[m,i]=C.useState(!1);return C.useEffect(()=>{i(!0)},[]),m?e.jsx(e.Fragment,{children:l}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-mist-50",children:e.jsx("div",{className:"animate-pulse text-accent-600 font-display text-lg font-bold",children:"Loading..."})})}function Zv({children:l}){const{isAuthenticated:m}=jt(),i=Fs();return m?e.jsx(e.Fragment,{children:l}):e.jsx(Wa,{to:"/login",state:{from:i},replace:!0})}function Jv(){const{isAuthenticated:l,currentRole:m}=jt();return l?e.jsx(Wa,{to:m==="PLATFORM_ADMIN"?"/admin/console":"/dashboard",replace:!0}):e.jsx($b,{})}function Kv(){const{isAuthenticated:l,currentRole:m}=jt();return l?e.jsx(Wa,{to:m==="PLATFORM_ADMIN"?"/admin/console":"/dashboard",replace:!0}):e.jsx(Wa,{to:"/login",replace:!0})}function Wv(){const{isAuthenticated:l}=jt();return l?e.jsx(Yv,{}):null}function ey(){return e.jsx(Xv,{children:e.jsxs(ib,{children:[e.jsxs(Ug,{children:[e.jsx(It,{path:"/login",element:e.jsx(Jv,{})}),e.jsx(It,{path:"/reset-password",element:e.jsx(Qv,{})}),e.jsxs(It,{element:e.jsx(Zv,{children:e.jsx(Ab,{children:e.jsx(qb,{})})}),children:[e.jsx(It,{path:"/dashboard",element:e.jsx(Xb,{})}),e.jsx(It,{path:"/financial",element:e.jsx(ov,{})}),e.jsx(It,{path:"/issues",element:e.jsx(kd,{})}),e.jsx(It,{path:"/building",element:e.jsx(wv,{})}),e.jsx(It,{path:"/compliance",element:e.jsx(Wa,{to:"/boardroom",replace:!0})}),e.jsx(It,{path:"/archives",element:e.jsx(Sv,{})}),e.jsx(It,{path:"/voting",element:e.jsx(Wa,{to:"/boardroom",replace:!0})}),e.jsx(It,{path:"/boardroom",element:e.jsx(Fv,{})}),e.jsx(It,{path:"/community",element:e.jsx(Hv,{})}),e.jsx(It,{path:"/my-unit",element:e.jsx(Av,{})}),e.jsx(It,{path:"/account",element:e.jsx(Dv,{})}),e.jsx(It,{path:"/admin/users",element:e.jsx(Rv,{})}),e.jsx(It,{path:"/admin/console",element:e.jsx(qv,{})})]}),e.jsx(It,{path:"*",element:e.jsx(Kv,{})})]}),e.jsx(Wv,{})]})})}Uf.createRoot(document.getElementById("root")).render(e.jsx(C.StrictMode,{children:e.jsx(ey,{})}));
